"use strict";(self.webpackChunkbestune_admin=self.webpackChunkbestune_admin||[]).push([[172],{17172:function(e,n,o){o.r(n),o.d(n,{default:function(){return j}});var t=o(29439),r=o(35980),l=o(72791),s=o(763),a=o(39230),i=o(79405),d=o(36978),m=o(61134),c=o(1413),u=o(36459),p=o(61889),f=o(62750),h=o(80184),x=function(e){var n,o=e.formStore,s=e.editingEmployeeId,i=e.resetForm,d=(0,a.$G)().t,m=o.control,x=o.handleSubmit,b=o.reset,v=o.watch,j=(0,l.useState)(),y=(0,t.Z)(j,2),N=y[0],Z=y[1];(0,u.Z)((0,f.h_)("employee/check?phoneNumber=".concat(v("phoneNumber")),{},{enabled:(null===(n=v("phoneNumber"))||void 0===n?void 0:n.length)>12&&!s,suspense:!1,onSuccess:function(e){var n=e.data;Z(n)}}));var g=(0,f.uC)(s?"employee/update":"employee/create",s?"put":"post"),w=g.mutate,_=g.status,C=(0,f.h_)("employee/get-by-id/".concat(s),{},{enabled:!!s,suspense:!1}),E=C.data,P=C.status;(0,l.useEffect)((function(){"success"===_&&i()}),[_]);return(0,l.useEffect)((function(){var e;"success"===P&&b((0,c.Z)((0,c.Z)({},E.data),{},{roleId:null===(e=E.data.role)||void 0===e?void 0:e._id}))}),[E,P]),(0,h.jsx)("div",{className:"custom-drawer",children:(0,h.jsx)("form",{id:"employee",onSubmit:x((function(e){w((0,c.Z)({_id:s},e))})),children:(0,h.jsxs)(p.ZP,{container:!0,spacing:2,children:[(0,h.jsxs)(p.ZP,{item:!0,md:12,children:[(0,h.jsx)(r.sb,{control:m,name:"phoneNumber",label:d("common.phoneNumber")}),(null===N||void 0===N?void 0:N._id)&&!s&&(0,h.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,h.jsx)("span",{className:"text-error mt-2",children:d("common.alreadyExistEmployee")}),(0,h.jsx)(r.c7,{title:d("general.add"),onClick:function(){b((0,c.Z)((0,c.Z)({},N),{},{_id:void 0})),Z(null)}})]})]}),(0,h.jsx)(p.ZP,{item:!0,md:12,children:(0,h.jsx)(r.oi,{control:m,name:"firstName",label:d("common.firstName")})}),(0,h.jsx)(p.ZP,{item:!0,md:12,children:(0,h.jsx)(r.oi,{control:m,name:"lastName",label:d("common.lastName")})}),(0,h.jsx)(p.ZP,{item:!0,md:12,children:(0,h.jsx)(r.oi,{control:m,name:"password",label:d("common.password"),type:"password",rules:{required:!1}})}),(0,h.jsx)(p.ZP,{item:!0,md:12,children:(0,h.jsx)(r.Ls,{name:"roleId",control:m,optionsUrl:"role/paging",dataProp:"data.data",label:d("common.role")})})]})})})},b=o(29001),v=o(84544),j=function(){var e=(0,l.useState)(),n=(0,t.Z)(e,2),o=n[0],c=n[1],u=(0,l.useState)(),p=(0,t.Z)(u,2),f=p[0],j=p[1],y=function(){var e=(0,a.$G)().t;return[{field:e("common.fullName"),renderCell:function(e){return(0,s.get)(e,"row.firstName","")+" "+(0,s.get)(e,"row.lastName","")},flex:1.5},{field:e("common.phoneNumber"),renderCell:function(e){return e.row.phoneNumber}},{field:e("common.role"),renderCell:function(e){var n;return null===(n=e.row.role)||void 0===n?void 0:n.name}}]}(),N=(0,b.w)(),Z=(0,a.$G)().t,g=(0,i.T)(),w=(0,m.cI)(),_=function(){c(void 0),w.reset({firstName:"",lastName:"",phoneNumber:"",password:"",roleId:""})};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(r.iA,{dataUrl:"employee/paging",columns:y,searchable:!0,onAddButton:N("employeeCreate")?function(){return g((0,d.dl)(!0))}:void 0,onEditColumn:N("employeeUpdate")?function(e){c(e._id),g((0,d.dl)(!0))}:void 0,onDeleteColumn:N("employeeDelete")?function(e){return j(e._id)}:void 0,exQueryParams:{}}),(0,h.jsx)(v.Z,{open:f,setOpen:j,url:"employee/delete"}),(0,h.jsx)(r._8,{FORM_ID:"employee",isEditing:!!o,customTitle:Z("general.addEmployee"),onClose:_,children:(0,h.jsx)(x,{formStore:w,resetForm:_,editingEmployeeId:o})})]})}}}]);
//# sourceMappingURL=172.923368fe.chunk.js.map