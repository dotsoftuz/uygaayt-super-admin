"use strict";(self.webpackChunkbestune_admin=self.webpackChunkbestune_admin||[]).push([[95],{71095:(e,o,t)=>{t.r(o),t.d(o,{default:()=>j});var l=t(19303),s=t(65043),r=t(53536),n=t(74117);var a=t(72473),d=t(13094),m=t(24858),i=t(89379),c=t(68903),u=t(61698),p=t(70579);const x=e=>{let{formStore:o,editingEmployeeId:t,resetForm:r}=e;const{t:a}=(0,n.Bd)(),{control:d,handleSubmit:m,reset:x,watch:y}=o,[h,j]=(0,s.useState)(),{mutate:f,status:b}=(0,u.L2)(t?"employee/update":"employee/create",t?"put":"post"),{data:v,status:N}=(0,u.gf)("employee/get-by-id/".concat(t),{},{enabled:!!t,suspense:!1});(0,s.useEffect)(()=>{"success"===b&&r()},[b]);return(0,s.useEffect)(()=>{var e;"success"===N&&x((0,i.A)((0,i.A)({},v.data),{},{roleId:null===(e=v.data.role)||void 0===e?void 0:e._id}))},[v,N]),(0,p.jsx)("div",{className:"custom-drawer",children:(0,p.jsx)("form",{id:"employee",onSubmit:m(e=>{f((0,i.A)({_id:t},e))}),children:(0,p.jsxs)(c.Ay,{container:!0,spacing:2,children:[(0,p.jsxs)(c.Ay,{item:!0,md:12,children:[(0,p.jsx)(l.LR,{control:d,name:"phoneNumber",label:a("common.phoneNumber")}),(null===h||void 0===h?void 0:h._id)&&!t&&(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsx)("span",{className:"text-error mt-2",children:a("common.alreadyExistEmployee")}),(0,p.jsx)(l.O6,{title:a("general.add"),onClick:()=>{x((0,i.A)((0,i.A)({},h),{},{_id:void 0})),j(null)}})]})]}),(0,p.jsx)(c.Ay,{item:!0,md:12,children:(0,p.jsx)(l.ks,{control:d,name:"firstName",label:a("common.firstName")})}),(0,p.jsx)(c.Ay,{item:!0,md:12,children:(0,p.jsx)(l.ks,{control:d,name:"lastName",label:a("common.lastName")})}),(0,p.jsx)(c.Ay,{item:!0,md:12,children:(0,p.jsx)(l.ks,{control:d,name:"password",label:a("common.password"),type:"password",rules:{required:!1}})}),(0,p.jsx)(c.Ay,{item:!0,md:12,children:(0,p.jsx)(l.r6,{name:"roleId",control:d,optionsUrl:"role/paging",dataProp:"data.data",label:a("common.role")})})]})})})};var y=t(83501),h=t(477);const j=()=>{const[e,o]=(0,s.useState)(),[t,i]=(0,s.useState)(),c=(()=>{const{t:e}=(0,n.Bd)();return[{field:e("common.fullName"),renderCell:e=>(0,r.get)(e,"row.firstName","")+" "+(0,r.get)(e,"row.lastName",""),flex:1.5},{field:e("common.phoneNumber"),renderCell:e=>e.row.phoneNumber},{field:e("common.role"),renderCell(e){var o;return null===(o=e.row.role)||void 0===o?void 0:o.name}}]})(),u=(0,y.L)(),{t:j}=(0,n.Bd)(),f=(0,a.j)(),b=(0,m.mN)(),v=()=>{o(void 0),b.reset({firstName:"",lastName:"",phoneNumber:"",password:"",roleId:""})},N=(0,s.useMemo)(()=>({}),[]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(l.XI,{dataUrl:"employee/paging",columns:c,searchable:!0,onAddButton:u("employeeCreate")?()=>f((0,d.GF)(!0)):void 0,onEditColumn:u("employeeUpdate")?e=>{o(e._id),f((0,d.GF)(!0))}:void 0,onDeleteColumn:u("employeeDelete")?e=>i(e._id):void 0,exQueryParams:N}),(0,p.jsx)(h.A,{open:t,setOpen:i,url:"employee/delete"}),(0,p.jsx)(l.wA,{FORM_ID:"employee",isEditing:!!e,customTitle:j("general.addEmployee"),onClose:v,children:(0,p.jsx)(x,{formStore:b,resetForm:v,editingEmployeeId:e})})]})}}}]);
//# sourceMappingURL=95.25940c37.chunk.js.map