"use strict";(self.webpackChunkbestune_admin=self.webpackChunkbestune_admin||[]).push([[210,434],{59550:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var r=n(57689),o=n(29439),a=n(45489),i=n(13400),d=n(59460),c=n(36978),s=n(86657),u=(n(763),n(39230)),l=n(29001),m=n(79405),g=n(90816),x=n(80184),f=n(72791),y=n(1413),j=n(61889),p=n(62750),h=function(e){var t=e.formStore,n=e.resetForm,r=e.editingCategoryId,o=e.setRender,i=(0,u.$G)().t,d=t.control,c=t.handleSubmit,s=t.reset,l=t.setValue,m=(0,p.uC)(r?"category/update":"category/create",r?"put":"post"),g=m.mutate,h=m.status,I=(0,p.h_)("category/get-by-id/".concat(r),{},{enabled:!!r,suspense:!1}),v=I.data,C=I.status;return(0,f.useEffect)((function(){"success"===h&&(n(),null===o||void 0===o||o((function(e){return!e})))}),[h]),(0,f.useEffect)((function(){"success"===C&&null!==v&&void 0!==v&&v.data&&s({name:v.data.name,imageId:v.data.image})}),[C,v]),(0,x.jsx)("div",{className:"custom-drawer",children:(0,x.jsx)("form",{id:"category",onSubmit:c((function(e){var t;g((0,y.Z)((0,y.Z)({},e),{},{imageId:null===(t=e.imageId)||void 0===t?void 0:t._id,_id:r},r?{}:{storeId:"uygaayt"}))})),children:(0,x.jsxs)(j.ZP,{container:!0,spacing:2,children:[(0,x.jsx)(j.ZP,{item:!0,md:12,children:(0,x.jsx)(a.oi,{name:"name.uz",control:d,label:i("common.name")+" (Uz)"})}),(0,x.jsx)(j.ZP,{item:!0,md:12,children:(0,x.jsx)(a.oi,{name:"name.ru",control:d,label:i("common.name")+" (Ru)"})}),(0,x.jsx)(j.ZP,{item:!0,md:12,children:(0,x.jsx)(a.oi,{name:"name.en",control:d,label:i("common.name")+" (En)"})}),(0,x.jsxs)(j.ZP,{item:!0,md:12,children:[(0,x.jsx)("label",{className:"py-2",htmlFor:"",children:i("general.recommendation_img")}),(0,x.jsx)("br",{}),(0,x.jsx)("br",{}),(0,x.jsx)(a.aG,{control:d,setValue:l,name:"imageId",accept:".png, .jpg, .jpeg"})]})]})})})},I=n(61134),v=n(84544),C=function(){var e=(0,f.useState)(!1),t=(0,o.Z)(e,2),n=t[0],y=t[1],j=(0,f.useState)(),p=(0,o.Z)(j,2),C=p[0],Z=p[1],b=(0,f.useState)(),_=(0,o.Z)(b,2),S=_[0],k=_[1],E=function(e){var t=e.setCategoryId,n=e.setEditingCategoryId,o=(0,m.T)(),a=(0,u.$G)().t,f=(0,l.w)(),y=(0,r.s0)(),j=localStorage.getItem("i18nextLng")||"uz";return[{key:"sort",width:"5%"},{title:"\u2116",dataIndex:"id",key:"id",width:"5%",render:function(e,t,n){return(0,x.jsx)(x.Fragment,{children:n+1})}},{title:a("common.categoryName"),dataIndex:"name",key:"name",render:function(e,t){return(0,x.jsx)("p",{style:{cursor:"pointer"},className:"text-blue-600 hover:text-blue-800 font-medium",onClick:function(){return y("/category_child?parentId=".concat(t._id),{state:{categoryId:t._id}})},children:null===e||void 0===e?void 0:e[j]})}},{title:a("common.product")+" soni",dataIndex:"productCount",key:"productCount",render:function(e,t){return(0,g.Y)(e)}},{title:"",render:function(e,r){return(0,x.jsxs)("div",{className:"d-flex gap-2 justify-content-end",children:[f("categoryUpdate")&&(0,x.jsx)(i.Z,{onClick:function(){null===n||void 0===n||n(null===r||void 0===r?void 0:r._id),o((0,c.dl)(!0))},children:(0,x.jsx)(s.Z,{})}),f("categoryDelete")&&(0,x.jsx)(i.Z,{onClick:function(){null===t||void 0===t||t(null===r||void 0===r?void 0:r._id)},children:(0,x.jsx)(d.pJ,{})})]})}}]}({setEditingCategoryId:Z,setCategoryId:k}),F=(0,m.T)(),w=(0,u.$G)().t,P=(0,I.cI)(),R=(0,l.w)(),N=function(){Z(void 0),P.reset({name:{uz:"",ru:"",en:""},imageId:""})};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(a.KK,{columns:E,dataUrl:"/category/paging",dragUrl:"/category/positions",dragKey:"categoryIds",render:n,setRender:y,onAddButton:R("categoryCreate")?function(){return F((0,c.dl)(!0))}:void 0}),(0,x.jsx)(v.Z,{open:S,setOpen:k,setRender:y,url:"category/delete"}),(0,x.jsx)(a._8,{FORM_ID:"category",isEditing:!!C,customTitle:w("general.addCategory"),onClose:N,children:(0,x.jsx)(h,{formStore:P,setRender:y,resetForm:N,editingCategoryId:C})})]})},Z=n(23434),b=function(){return(0,x.jsxs)(r.Z5,{children:[(0,x.jsx)(r.AW,{path:":id",element:(0,x.jsx)(Z.default,{})}),(0,x.jsx)(r.AW,{path:"*",element:(0,x.jsx)(C,{})})]})}},23434:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var r=n(29439),o=n(45489),a=n(13400),i=n(59460),d=n(36978),c=n(86657),s=(n(763),n(39230)),u=n(29001),l=n(79405),m=n(90816),g=n(80184),x=n(72791),f=n(61134),y=n(84544),j=n(35834),p=n(1413),h=n(61889),I=n(62750),v=function(e){var t=e.formStore,n=e.resetForm,r=e.editingCategoryId,a=e.setRender,i=(0,s.$G)().t,d=t.control,c=t.handleSubmit,u=t.reset,l=t.setValue,m=(0,j.Z)(),f=(0,I.uC)(r?"category/update":"category/create",r?"put":"post"),y=f.mutate,v=f.status,C=(0,I.h_)("category/get-by-id/".concat(r),{},{enabled:!!r,suspense:!1}),Z=C.data,b=C.status;return(0,x.useEffect)((function(){"success"===v&&(n(),null===a||void 0===a||a((function(e){return!e})))}),[v]),(0,x.useEffect)((function(){"success"===b&&u({name:Z.data.name,imageId:Z.data.image})}),[b,Z]),(0,g.jsx)("div",{className:"custom-drawer",children:(0,g.jsx)("form",{id:"category",onSubmit:c((function(e){var t;y((0,p.Z)((0,p.Z)({},e),{},{imageId:null===(t=e.imageId)||void 0===t?void 0:t._id,_id:r,parentId:m.parentId},r?{}:{storeId:"uygaayt"}))})),children:(0,g.jsxs)(h.ZP,{container:!0,spacing:2,children:[(0,g.jsx)(h.ZP,{item:!0,md:12,children:(0,g.jsx)(o.oi,{name:"name.uz",control:d,label:i("common.name")+" (Uz)"})}),(0,g.jsx)(h.ZP,{item:!0,md:12,children:(0,g.jsx)(o.oi,{name:"name.ru",control:d,label:i("common.name")+" (Ru)"})}),(0,g.jsx)(h.ZP,{item:!0,md:12,children:(0,g.jsx)(o.oi,{name:"name.en",control:d,label:i("common.name")+" (En)"})}),(0,g.jsx)(h.ZP,{item:!0,md:12,children:(0,g.jsx)(o.aG,{control:d,setValue:l,name:"imageId",rules:{required:!1},accept:".png, .jpg, .jpeg"})})]})})})},C=function(){var e=(0,x.useState)(!1),t=(0,r.Z)(e,2),n=t[0],p=t[1],h=(0,x.useState)(),I=(0,r.Z)(h,2),C=I[0],Z=I[1],b=(0,x.useState)(),_=(0,r.Z)(b,2),S=_[0],k=_[1],E=function(e){var t=e.setCategoryId,n=e.setEditingCategoryId,r=(0,l.T)(),o=(0,s.$G)().t,x=(0,u.w)(),f=localStorage.getItem("i18nextLng")||"uz";return[{key:"sort",width:"5%"},{title:"\u2116",dataIndex:"id",key:"id",width:"5%",render:function(e,t,n){return(0,g.jsx)(g.Fragment,{children:n+1})}},{title:o("common.categoryName"),dataIndex:"name",key:"name",render:function(e,t){return null===e||void 0===e?void 0:e[f]}},{title:o("common.product")+" soni",dataIndex:"productCount",key:"productCount",render:function(e,t){return(0,m.Y)(e)}},{title:"",render:function(e,o){return(0,g.jsxs)("div",{className:"d-flex gap-2 justify-content-end",children:[x("categoryCreate")&&(0,g.jsx)(a.Z,{onClick:function(){null===n||void 0===n||n(null===o||void 0===o?void 0:o._id),r((0,d.dl)(!0))},children:(0,g.jsx)(c.Z,{})}),x("categoryDelete")&&(0,g.jsx)(a.Z,{onClick:function(){return null===t||void 0===t?void 0:t(null===o||void 0===o?void 0:o._id)},children:(0,g.jsx)(i.pJ,{})})]})}}]}({setEditingCategoryId:Z,setCategoryId:k}),F=(0,l.T)(),w=(0,s.$G)().t,P=(0,f.cI)(),R=((0,u.w)(),function(){Z(void 0),P.reset({name:"",imageId:""})}),N=(0,j.Z)();return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(o.KK,{columns:E,dataUrl:"/category/paging",dragUrl:"/category/positions",dragKey:"categoryIds",render:n,setRender:p,onAddButton:function(){return F((0,d.dl)(!0))},exQueryParams:{parentId:N.parentId}}),(0,g.jsx)(y.Z,{open:S,setOpen:k,setRender:p,url:"category/delete"}),(0,g.jsx)(o._8,{FORM_ID:"category",isEditing:!!C,customTitle:w("general.addCategory"),onClose:R,children:(0,g.jsx)(v,{formStore:P,setRender:p,resetForm:R,editingCategoryId:C})})]})}},90816:function(e,t,n){n.d(t,{Y:function(){return r}});var r=function(e){return e||0===e?(Math.round(100*(e+Number.EPSILON))/100).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}).replaceAll(","," "):""}}}]);
//# sourceMappingURL=210.3be1a0bd.chunk.js.map