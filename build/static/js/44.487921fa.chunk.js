"use strict";(self.webpackChunkbestune_admin=self.webpackChunkbestune_admin||[]).push([[44,859],{39044:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var a=n(73216),d=n(5468),r=n(17392),o=n(58885),s=n(13094),i=n(14695),l=(n(53536),n(74117)),c=n(83501),m=n(72473),u=n(72824),g=n(70579);var y=n(65043),x=n(89379),j=n(68903),p=n(61698);const h=e=>{let{formStore:t,resetForm:n,editingCategoryId:a,setRender:r}=e;const{t:o}=(0,l.Bd)(),{control:s,handleSubmit:i,reset:c,setValue:m}=t,{mutate:u,status:h}=(0,p.L2)(a?"category/update":"category/create",a?"put":"post"),{data:I,status:v}=(0,p.gf)("category/get-by-id/".concat(a),{},{enabled:!!a,suspense:!1});return(0,y.useEffect)(()=>{"success"===h&&(n(),null===r||void 0===r||r(e=>!e))},[h]),(0,y.useEffect)(()=>{"success"===v&&null!==I&&void 0!==I&&I.data&&c({name:I.data.name,imageId:I.data.image})},[v,I]),(0,g.jsx)("div",{className:"custom-drawer",children:(0,g.jsx)("form",{id:"category",onSubmit:i(e=>{var t;u((0,x.A)((0,x.A)({},e),{},{imageId:null===(t=e.imageId)||void 0===t?void 0:t._id,_id:a}))}),children:(0,g.jsxs)(j.Ay,{container:!0,spacing:2,children:[(0,g.jsx)(j.Ay,{item:!0,md:12,children:(0,g.jsx)(d.ks,{name:"name.uz",control:s,label:o("common.name")+" (Uz)"})}),(0,g.jsx)(j.Ay,{item:!0,md:12,children:(0,g.jsx)(d.ks,{name:"name.ru",control:s,label:o("common.name")+" (Ru)"})}),(0,g.jsx)(j.Ay,{item:!0,md:12,children:(0,g.jsx)(d.ks,{name:"name.en",control:s,label:o("common.name")+" (En)"})}),(0,g.jsxs)(j.Ay,{item:!0,md:12,children:[(0,g.jsx)("label",{className:"py-2",htmlFor:"",children:o("general.recommendation_img")}),(0,g.jsx)("br",{}),(0,g.jsx)("br",{}),(0,g.jsx)(d.ME,{control:s,setValue:m,name:"imageId",accept:".png, .jpg, .jpeg"})]})]})})})};var I=n(24858),v=n(477);const A=()=>{const[e,t]=(0,y.useState)(!1),[n,x]=(0,y.useState)(),[j,p]=(0,y.useState)(),A=(e=>{let{setCategoryId:t,setEditingCategoryId:n}=e;const d=(0,m.j)(),{t:y}=(0,l.Bd)(),x=(0,c.L)(),j=(0,a.Zp)(),p=localStorage.getItem("i18nextLng")||"uz";return[{key:"sort",width:"5%"},{title:"\u2116",dataIndex:"id",key:"id",width:"5%",render:(e,t,n)=>(0,g.jsx)(g.Fragment,{children:n+1})},{title:y("common.categoryName"),dataIndex:"name",key:"name",render:(e,t)=>(0,g.jsx)("p",{style:{cursor:"pointer"},className:"text-blue-600 hover:text-blue-800 font-medium",onClick:()=>j("/category_child?parentId=".concat(t._id),{state:{categoryId:t._id}}),children:null===e||void 0===e?void 0:e[p]})},{title:y("common.product")+" soni",dataIndex:"productCount",key:"productCount",render:(e,t)=>(0,u.j)(e)},{title:"",render:(e,a)=>(0,g.jsxs)("div",{className:"d-flex gap-2 justify-content-end",children:[x("categoryUpdate")&&(0,g.jsx)(r.A,{onClick:()=>{null===n||void 0===n||n(null===a||void 0===a?void 0:a._id),d((0,s.GF)(!0))},children:(0,g.jsx)(i.A,{})}),x("categoryDelete")&&(0,g.jsx)(r.A,{onClick:()=>{null===t||void 0===t||t(null===a||void 0===a?void 0:a._id)},children:(0,g.jsx)(o.d7,{})})]})}]})({setEditingCategoryId:x,setCategoryId:p}),C=(0,m.j)(),{t:f}=(0,l.Bd)(),b=(0,I.mN)(),k=(0,c.L)(),S=()=>{x(void 0),b.reset({name:{uz:"",ru:"",en:""},imageId:""})};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d.p,{columns:A,dataUrl:"/category/paging",dragUrl:"/category/positions",dragKey:"categoryIds",render:e,setRender:t,onAddButton:k("categoryCreate")?()=>C((0,s.GF)(!0)):void 0}),(0,g.jsx)(v.A,{open:j,setOpen:p,setRender:t,url:"category/delete"}),(0,g.jsx)(d.wA,{FORM_ID:"category",isEditing:!!n,customTitle:f("general.addCategory"),onClose:S,children:(0,g.jsx)(h,{formStore:b,setRender:t,resetForm:S,editingCategoryId:n})})]})};var C=n(56859);const f=()=>(0,g.jsxs)(a.BV,{children:[(0,g.jsx)(a.qh,{path:":id",element:(0,g.jsx)(C.default,{})}),(0,g.jsx)(a.qh,{path:"*",element:(0,g.jsx)(A,{})})]})},56859:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});var a=n(5468),d=n(17392),r=n(58885),o=n(13094),s=n(14695),i=(n(53536),n(74117)),l=n(83501),c=n(72473),m=n(72824),u=n(70579);var g=n(65043),y=n(24858),x=n(477),j=n(19504),p=n(89379),h=n(68903),I=n(61698);const v=e=>{let{formStore:t,resetForm:n,editingCategoryId:d,setRender:r}=e;const{t:o}=(0,i.Bd)(),{control:s,handleSubmit:l,reset:c,setValue:m}=t,y=(0,j.A)(),{mutate:x,status:v}=(0,I.L2)(d?"category/update":"category/create",d?"put":"post"),{data:A,status:C}=(0,I.gf)("category/get-by-id/".concat(d),{},{enabled:!!d,suspense:!1});return(0,g.useEffect)(()=>{"success"===v&&(n(),null===r||void 0===r||r(e=>!e))},[v]),(0,g.useEffect)(()=>{"success"===C&&c({name:A.data.name,imageId:A.data.image})},[C,A]),(0,u.jsx)("div",{className:"custom-drawer",children:(0,u.jsx)("form",{id:"category",onSubmit:l(e=>{var t;x((0,p.A)((0,p.A)({},e),{},{imageId:null===(t=e.imageId)||void 0===t?void 0:t._id,_id:d,parentId:y.parentId}))}),children:(0,u.jsxs)(h.Ay,{container:!0,spacing:2,children:[(0,u.jsx)(h.Ay,{item:!0,md:12,children:(0,u.jsx)(a.ks,{name:"name.uz",control:s,label:o("common.name")+" (Uz)"})}),(0,u.jsx)(h.Ay,{item:!0,md:12,children:(0,u.jsx)(a.ks,{name:"name.ru",control:s,label:o("common.name")+" (Ru)"})}),(0,u.jsx)(h.Ay,{item:!0,md:12,children:(0,u.jsx)(a.ks,{name:"name.en",control:s,label:o("common.name")+" (En)"})}),(0,u.jsx)(h.Ay,{item:!0,md:12,children:(0,u.jsx)(a.ME,{control:s,setValue:m,name:"imageId",rules:{required:!1},accept:".png, .jpg, .jpeg"})})]})})})},A=()=>{const[e,t]=(0,g.useState)(!1),[n,p]=(0,g.useState)(),[h,I]=(0,g.useState)(),A=(e=>{let{setCategoryId:t,setEditingCategoryId:n}=e;const a=(0,c.j)(),{t:g}=(0,i.Bd)(),y=(0,l.L)(),x=localStorage.getItem("i18nextLng")||"uz";return[{key:"sort",width:"5%"},{title:"\u2116",dataIndex:"id",key:"id",width:"5%",render:(e,t,n)=>(0,u.jsx)(u.Fragment,{children:n+1})},{title:g("common.categoryName"),dataIndex:"name",key:"name",render:(e,t)=>null===e||void 0===e?void 0:e[x]},{title:g("common.product")+" soni",dataIndex:"productCount",key:"productCount",render:(e,t)=>(0,m.j)(e)},{title:"",render:(e,i)=>(0,u.jsxs)("div",{className:"d-flex gap-2 justify-content-end",children:[y("categoryCreate")&&(0,u.jsx)(d.A,{onClick:()=>{null===n||void 0===n||n(null===i||void 0===i?void 0:i._id),a((0,o.GF)(!0))},children:(0,u.jsx)(s.A,{})}),y("categoryDelete")&&(0,u.jsx)(d.A,{onClick:()=>null===t||void 0===t?void 0:t(null===i||void 0===i?void 0:i._id),children:(0,u.jsx)(r.d7,{})})]})}]})({setEditingCategoryId:p,setCategoryId:I}),C=(0,c.j)(),{t:f}=(0,i.Bd)(),b=(0,y.mN)(),k=((0,l.L)(),()=>{p(void 0),b.reset({name:"",imageId:""})}),S=(0,j.A)();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(a.p,{columns:A,dataUrl:"/category/paging",dragUrl:"/category/positions",dragKey:"categoryIds",render:e,setRender:t,onAddButton:()=>C((0,o.GF)(!0)),exQueryParams:{parentId:S.parentId}}),(0,u.jsx)(x.A,{open:h,setOpen:I,setRender:t,url:"category/delete"}),(0,u.jsx)(a.wA,{FORM_ID:"category",isEditing:!!n,customTitle:f("general.addCategory"),onClose:k,children:(0,u.jsx)(v,{formStore:b,setRender:t,resetForm:k,editingCategoryId:n})})]})}},72824:(e,t,n)=>{n.d(t,{j:()=>a});const a=e=>{if(e||0===e){return(Math.round(100*(e+Number.EPSILON))/100).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}).replaceAll(","," ")}return""}}}]);
//# sourceMappingURL=44.487921fa.chunk.js.map