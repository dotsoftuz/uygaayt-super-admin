{"version":3,"file":"static/js/73.09aa3b6b.chunk.js","mappings":"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","sources":["components/form/TextEditor/TextEditor.style.ts","components/form/TextEditor/TextEditor.tsx","pages/banner/components/BannerForm.tsx","pages/banner/index.tsx","pages/banner/container/Banner.tsx","pages/banner/container/banner.columns.tsx"],"sourcesContent":["import { RichTextEditor } from \"@mantine/rte\";\nimport styled from \"styled-components\";\nimport { ITextEditorStyled } from \"./TextEditor.types\";\n\nexport const TextEditorStyled = styled(RichTextEditor)<ITextEditorStyled>`\n  display: flex;\n  flex-direction: column-reverse;\n  border: none;\n  width: 100%;\n  padding-bottom: 20px;\n  .quill {\n    .ql-container {\n      .ql-tooltip {\n        transform: translateX(97px);\n        z-index: 10;\n      }\n      .ql-editor {\n        background-color: #fff;\n        padding: 15px;\n        border-radius: 12px;\n        min-height: 80px;\n        transition: all 0.3s;\n        border: 1px solid #d9d9d9;\n        p {\n          margin: 0;\n          font-size: 14px;\n        }\n      }\n    }\n  }\n  .ql-toolbar {\n    padding: 0;\n    transition: opacity 1s ease-out;\n    border-radius: 0;\n    border-bottom: none;\n    margin-top: 10px;\n    button {\n      border: none;\n      margin: 0 5px;\n      svg {\n        width: 24px !important;\n        height: 24px !important;\n        fill: #000 !important;\n        path {\n          fill: #000;\n        }\n      }\n    }\n  }\n  .ql-editing {\n    left: 30px !important;\n    transform: translateX(0px) !important;\n    z-index: 100;\n  }\n`;\n","import { FC } from \"react\";\nimport { TextEditorStyled } from \"./TextEditor.style\";\nimport { TextEditorPropsType } from \"./TextEditor.types\";\n\nconst TextEditor: FC<TextEditorPropsType> = (props) => {\n  const { value, onChange, onImageUpload, isError, type } = props;\n\n  return (\n    <TextEditorStyled\n      controls={[\n        [\n          \"bold\",\n          \"italic\",\n          \"underline\",\n          \"strike\",\n          \"clean\",\n          \"unorderedList\",\n          \"orderedList\",\n          \"alignLeft\",\n          \"alignCenter\",\n          \"alignRight\",\n        ],\n      ]}\n      isError={!!isError}\n      value={value}\n      onChange={onChange}\n      onImageUpload={onImageUpload}\n      type={type}\n    ></TextEditorStyled>\n  );\n};\n\nexport default TextEditor;\n","import { Grid } from \"@mui/material\";\nimport { AutoCompleteForm, ImageInput, TextInput } from \"components\";\nimport TextEditor from \"components/form/TextEditor/TextEditor\";\nimport { useApi, useApiMutation } from \"hooks/useApi/useApiHooks\";\nimport { FC, useEffect } from \"react\";\nimport { Controller, UseFormReturn } from \"react-hook-form\";\nimport { useTranslation } from \"react-i18next\";\n\ninterface IEmployeesForm {\n  formStore: UseFormReturn<any>;\n  editingBannerId: string;\n  resetForm: () => void;\n}\nconst BannerForm: FC<IEmployeesForm> = ({\n  formStore,\n  editingBannerId,\n  resetForm,\n}) => {\n  const { t } = useTranslation();\n  const { control, handleSubmit, reset, setValue } = formStore;\n\n  const { mutate, status } = useApiMutation(\n    editingBannerId ? `/banner/update` : \"/banner/create\",\n    editingBannerId ? \"put\" : \"post\",\n  );\n\n  const { data: getByIdData, status: getByIdStatus } = useApi(\n    `banner/get-by-id/${editingBannerId}`,\n    {},\n    {\n      enabled: !!editingBannerId,\n      suspense: false,\n    },\n  );\n\n  useEffect(() => {\n    if (status === \"success\") {\n      resetForm();\n    }\n  }, [status, resetForm]);\n\n  const submit = (data: any) => {\n    mutate({\n      _id: editingBannerId,\n      ...data,\n      imageId: data.imageId?._id,\n      productId: data.productId?._id || data.productId, // Backward compatibility\n      productIds:\n        data.productIds?.map((p: any) => p._id || p) || data.productIds, // Array uchun\n    });\n  };\n\n  useEffect(() => {\n    if (getByIdStatus === \"success\") {\n      reset({\n        title: getByIdData.data.title,\n        imageId: getByIdData.data.image,\n        productId: getByIdData.data.productId, // Backward compatibility\n        productIds: getByIdData.data.productIds, // Yangi - array\n        description: getByIdData.data.description,\n      });\n    }\n  }, [getByIdStatus, getByIdData, reset]);\n\n  return (\n    <div className=\"custom-drawer\">\n      <form id=\"banner\" onSubmit={handleSubmit(submit)}>\n        <Grid container spacing={2}>\n          <Grid item md={12}>\n            <TextInput\n              control={control}\n              name=\"title\"\n              label={t(\"common.name\")}\n            />\n          </Grid>\n          <Grid item md={12}>\n            <AutoCompleteForm\n              control={control}\n              name=\"productId\"\n              optionsUrl=\"product/choose\"\n              dataProp=\"data.data\"\n              label={t(\"common.product\")}\n              rules={{ required: false }}\n            />\n          </Grid>\n          <Grid item md={12}>\n            <AutoCompleteForm\n              control={control}\n              name=\"productIds\"\n              optionsUrl=\"product/choose\"\n              dataProp=\"data.data\"\n              label={t(\"common.products\")} // Ko'p mahsulotlar\n              rules={{ required: false }}\n              multiple={true} // Multi-select uchun\n            />\n          </Grid>\n          <Grid item md={12}>\n            <label className=\"py-2\" htmlFor=\"description\">\n              {t(\"common.description\")}\n            </label>\n            <Controller\n              name=\"description\"\n              control={control}\n              render={({ field }) => (\n                <TextEditor\n                  value={field.value}\n                  onChange={(value) => {\n                    field.onChange(value);\n                  }}\n                />\n              )}\n            />\n          </Grid>\n          <Grid item md={12}>\n            <label className=\"py-2\" htmlFor=\"\">\n              {t(\"general.recommendation_img\")}\n            </label>\n            <br />\n            <br />\n            <ImageInput control={control} setValue={setValue} name=\"imageId\" />\n            <div className=\"d-flex justify-content-between mt-3\">\n              <span>O'lcham</span>\n              <span>1080(px) - 250(px)</span>\n            </div>\n          </Grid>\n        </Grid>\n      </form>\n    </div>\n  );\n};\n\nexport default BannerForm;\n","import Banner from \"./container/Banner\";\n\nexport default Banner;\n","import { FormDrawer, Table } from \"components\";\nimport { useMemo, useState } from \"react\";\nimport { useBannerColumns } from \"./banner.columns\";\nimport { useAppDispatch } from \"../../../store/storeHooks\";\nimport { setOpenDrawer } from \"components/elements/FormDrawer/formdrawer.slice\";\nimport { useForm } from \"react-hook-form\";\nimport BannerForm from \"../components/BannerForm\";\nimport { useTranslation } from \"react-i18next\";\nimport { useRoleManager } from \"services/useRoleManager\";\nimport WarningModal from \"components/common/WarningModal/WarningModal\";\nimport { useApi, useApiMutation } from \"hooks/useApi/useApiHooks\";\n\nconst Banner = () => {\n  const [editingBannerId, setEditingBannerId] = useState<any>();\n  const [bannerId, setBannerId] = useState<any>();\n  const columns = useBannerColumns();\n  const hasAccess = useRoleManager();\n  const { t } = useTranslation();\n  const dis = useAppDispatch();\n  const formStore = useForm<any>();\n\n  const resetForm = () => {\n    setEditingBannerId(undefined);\n    formStore.reset({\n      title: \"\",\n      imageId: \"\",\n      description: \"\",\n    });\n  };\n\n  const queryParams = useMemo(() => ({}), []);\n\n  return (\n    <>\n      <Table\n        dataUrl=\"banner/paging\"\n        columns={columns}\n        searchable\n        onAddButton={hasAccess(\"bannerCreate\")\n          ? () => dis(setOpenDrawer(true))\n          : undefined}\n        onEditColumn={hasAccess(\"bannerUpdate\") ? (row) => {\n          setEditingBannerId(row._id);\n          dis(setOpenDrawer(true));\n        } : undefined}\n        onDeleteColumn={hasAccess(\"bannerDelete\") ? (row) => setBannerId(row._id) : undefined}\n        exQueryParams={queryParams}\n      />\n      <WarningModal open={bannerId} setOpen={setBannerId} url=\"banner/delete\" />\n      <FormDrawer\n        FORM_ID=\"banner\"\n        isEditing={!!editingBannerId}\n        customTitle={editingBannerId ? t(\"general.editBanner\") : t(\"general.addBanner\")}\n        onClose={resetForm}\n      >\n        <BannerForm\n          formStore={formStore}\n          resetForm={resetForm}\n          editingBannerId={editingBannerId}\n        />\n      </FormDrawer>\n\n    </>\n  );\n};\n\nexport default Banner;\n","import { GridColumns } from \"@mui/x-data-grid\";\nimport { Tooltip } from \"antd\";\nimport { get } from \"lodash\";\nimport { useTranslation } from \"react-i18next\";\n\nexport const useBannerColumns = (): GridColumns => {\n  const { t } = useTranslation();\n\n  return [\n \n    {\n      field: t(\"common.name\"),\n      renderCell({ row }) {\n        const title = row?.title;\n        const truncatedTitle = title?.length > 50 ? `${title.substring(0, 50)}...` : title;\n    \n        return (\n          <Tooltip title={title} arrow>\n            <span>{truncatedTitle}</span>\n          </Tooltip>\n        );\n      },\n    }\n    // {\n    //   field: t(\"common.store\"),\n    //   renderCell({ row }) {\n    //     return get(row, \"store.name\", \"-\");\n    //   },\n    // },\n  ];\n};\n"],"names":["TextEditorStyled","styled","RichTextEditor","props","value","onChange","onImageUpload","isError","type","controls","formStore","editingBannerId","resetForm","t","useTranslation","control","handleSubmit","reset","setValue","useApiMutation","mutate","status","useApi","enabled","suspense","getByIdData","data","getByIdStatus","useEffect","title","imageId","image","productId","productIds","description","className","id","onSubmit","_id","map","p","Grid","container","spacing","item","md","name","label","optionsUrl","dataProp","rules","required","multiple","htmlFor","render","field","TextEditor","useState","setEditingBannerId","bannerId","setBannerId","columns","renderCell","row","truncatedTitle","length","substring","arrow","hasAccess","useRoleManager","dis","useAppDispatch","useForm","undefined","queryParams","useMemo","dataUrl","searchable","onAddButton","setOpenDrawer","onEditColumn","onDeleteColumn","exQueryParams","WarningModal","open","setOpen","url","FORM_ID","isEditing","customTitle","onClose"],"sourceRoot":""}