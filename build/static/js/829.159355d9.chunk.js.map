{"version":3,"file":"static/js/829.159355d9.chunk.js","mappings":"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","sources":["pages/attribute/components/AttributeForm.tsx","pages/attribute/container/Attribute.tsx","pages/attribute/index.tsx","pages/attribute/container/attribute.columns.tsx"],"sourcesContent":["import { FC, useEffect } from \"react\";\r\nimport { Grid, Typography } from \"@mui/material\";\r\nimport { TextInput } from \"components\";\r\nimport { Controller, UseFormReturn } from \"react-hook-form\";\r\nimport { useApi, useApiMutation } from \"hooks/useApi/useApiHooks\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\ninterface IEmployeesForm {\r\n  formStore: UseFormReturn<any>;\r\n  editingAttributeId: string | undefined;\r\n  resetForm: () => void;\r\n}\r\n\r\nconst AttributeForm: FC<IEmployeesForm> = ({\r\n  formStore,\r\n  editingAttributeId,\r\n  resetForm,\r\n}) => {\r\n  const { t } = useTranslation();\r\n  const { control, handleSubmit, reset, watch, setValue } = formStore;\r\n\r\n  const { mutate, status } = useApiMutation(\r\n    editingAttributeId ? `/attribute/update` : \"/attribute/create\",\r\n    editingAttributeId ? \"post\" : \"post\"\r\n  );\r\n\r\n  const { data: getByIdData, status: getByIdStatus } = useApi(\r\n    `attribute/get-by-id/${editingAttributeId}`,\r\n    {},\r\n    {\r\n      enabled: !!editingAttributeId,\r\n      suspense: false,\r\n    }\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (status === \"success\") {\r\n      resetForm(); // Reset form after successful submission\r\n    }\r\n  }, [status]);\r\n\r\n  const submit = (data: any) => {\r\n    mutate({\r\n      _id: editingAttributeId,\r\n      ...data,\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (getByIdStatus === \"success\") {\r\n      reset({\r\n        name: getByIdData.data.name,\r\n      });\r\n    }\r\n  }, [getByIdStatus, getByIdData]);\r\n\r\n  useEffect(() => {\r\n    // Reset the form if editingAttributeId changes to undefined (for create mode)\r\n    if (!editingAttributeId) {\r\n      reset({\r\n        name: \"\",\r\n      });\r\n    }\r\n  }, [editingAttributeId, reset]);\r\n\r\n  return (\r\n    <div className=\"custom-drawer\">\r\n      <form id=\"attribute\" onSubmit={handleSubmit(submit)}>\r\n        <Grid container spacing={2}>\r\n          <Grid item md={12}>\r\n            <TextInput\r\n              control={control}\r\n              name=\"name.uz\"\r\n              label={t('common.title') + ' (Uz)'}\r\n            />\r\n          </Grid>\r\n          <Grid item md={12}>\r\n            <TextInput\r\n              control={control}\r\n              name=\"name.ru\"\r\n              label={t('common.title') + ' (Ru)'}\r\n            />\r\n          </Grid>\r\n          <Grid item md={12}>\r\n            <TextInput\r\n              control={control}\r\n              name=\"name.en\"\r\n              label={t('common.title') + ' (En)'}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AttributeForm;\r\n","import { FormDrawer, Table } from \"components\";\r\nimport { useMemo, useState } from \"react\";\r\nimport { useAttributeColumns } from \"./attribute.columns\";\r\nimport { useAppDispatch } from \"../../../store/storeHooks\";\r\nimport { setOpenDrawer } from \"components/elements/FormDrawer/formdrawer.slice\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport AttributeForm from \"../components/AttributeForm\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useRoleManager } from \"services/useRoleManager\";\r\nimport WarningModal from \"components/common/WarningModal/WarningModal\";\r\n\r\nconst Attribute = () => {\r\n  const [editingAttributeId, setEditingAttributeId] = useState<any>();\r\n  const [attributeId, setAttributeId] = useState<any>();\r\n  const columns = useAttributeColumns();\r\n  const hasAccess = useRoleManager();\r\n  const { t } = useTranslation();\r\n  const dis = useAppDispatch();\r\n  const formStore = useForm<any>();\r\n\r\n  const resetForm = () => {\r\n    setEditingAttributeId(undefined);\r\n    formStore.reset({\r\n      name: { uz: \"\", ru: \"\", en: \"\" },\r\n    });\r\n  };\r\n\r\n  const queryParams = useMemo(() => ({}), []);\r\n\r\n  return (\r\n    <>\r\n      <Table\r\n        dataUrl=\"attribute/paging\"\r\n        columns={columns}\r\n        searchable\r\n        onAddButton={() => {\r\n          dis(setOpenDrawer(true));\r\n        }}\r\n        onEditColumn={(row) => {\r\n          setEditingAttributeId(row._id);\r\n          dis(setOpenDrawer(true));\r\n        }}\r\n        onDeleteColumn={(row) => setAttributeId(row._id)}\r\n        exQueryParams={queryParams}\r\n      />\r\n      <WarningModal open={attributeId} setOpen={setAttributeId} url=\"attribute/delete\" />\r\n      <FormDrawer\r\n        FORM_ID=\"attribute\"\r\n        isEditing={!!editingAttributeId}\r\n        customTitle={t(\"attribute.add\")}\r\n        onClose={resetForm}\r\n      >\r\n        <AttributeForm\r\n          formStore={formStore}\r\n          resetForm={resetForm}\r\n          editingAttributeId={editingAttributeId}\r\n        />\r\n      </FormDrawer>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Attribute;\r\n","import Attribute from \"./container/Attribute\";\r\n\r\nexport default Attribute;\r\n","import { GridColumns } from \"@mui/x-data-grid\";\r\nimport { Tooltip } from \"antd\";\r\nimport { get } from \"lodash\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nexport const useAttributeColumns = (): GridColumns => {\r\n  const { t } = useTranslation();\r\n  const currentLang = localStorage.getItem(\"i18nextLng\") || \"uz\"; \r\n\r\n  return [\r\n    {\r\n      field: t(\"common.name\"),\r\n      renderCell({ row }) {\r\n        const title = row?.name?.[currentLang];\r\n        const truncatedTitle = title?.length > 50 ? `${title.substring(0, 50)}...` : title;\r\n    \r\n        return (\r\n          <Tooltip title={title} arrow>\r\n            <span>{truncatedTitle}</span>\r\n          </Tooltip>\r\n        );\r\n      },\r\n    }\r\n    \r\n    // {\r\n    //   field: t(\"common.store\"),\r\n    //   renderCell({ row }) {\r\n    //     return get(row, \"store.name\", \"-\");\r\n    //   },\r\n    // },\r\n  ];\r\n};\r\n"],"names":["_ref","formStore","editingAttributeId","resetForm","t","useTranslation","control","handleSubmit","reset","watch","setValue","mutate","status","useApiMutation","data","getByIdData","getByIdStatus","useApi","concat","enabled","suspense","useEffect","name","_jsx","className","children","id","onSubmit","_objectSpread","_id","_jsxs","Grid","container","spacing","item","md","TextInput","label","Attribute","setEditingAttributeId","useState","attributeId","setAttributeId","columns","useAttributeColumns","currentLang","localStorage","getItem","field","renderCell","_row$name","row","title","truncatedTitle","length","substring","Tooltip","arrow","useRoleManager","dis","useAppDispatch","useForm","undefined","uz","ru","en","queryParams","useMemo","_Fragment","Table","dataUrl","searchable","onAddButton","setOpenDrawer","onEditColumn","onDeleteColumn","exQueryParams","WarningModal","open","setOpen","url","FormDrawer","FORM_ID","isEditing","customTitle","onClose","AttributeForm"],"sourceRoot":""}