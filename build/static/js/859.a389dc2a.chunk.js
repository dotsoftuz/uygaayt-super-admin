"use strict";(self.webpackChunkbestune_admin=self.webpackChunkbestune_admin||[]).push([[859],{56859:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});var r=n(5468),a=n(17392),d=n(58885),o=n(13094),s=n(14695),i=(n(53536),n(74117)),c=n(83501),l=n(72473),m=n(72824),u=n(70579);var g=n(65043),y=n(24858),j=n(477),x=n(19504),p=n(89379),I=n(68903),h=n(61698);const v=e=>{let{formStore:t,resetForm:n,editingCategoryId:a,setRender:d}=e;const{t:o}=(0,i.Bd)(),{control:s,handleSubmit:c,reset:l,setValue:m}=t,y=(0,x.A)(),{mutate:j,status:v}=(0,h.L2)(a?"category/update":"category/create",a?"put":"post"),{data:A,status:C}=(0,h.gf)("category/get-by-id/".concat(a),{},{enabled:!!a,suspense:!1});return(0,g.useEffect)(()=>{"success"===v&&(n(),null===d||void 0===d||d(e=>!e))},[v]),(0,g.useEffect)(()=>{"success"===C&&l({name:A.data.name,imageId:A.data.image})},[C,A]),(0,u.jsx)("div",{className:"custom-drawer",children:(0,u.jsx)("form",{id:"category",onSubmit:c(e=>{var t;j((0,p.A)((0,p.A)({},e),{},{imageId:null===(t=e.imageId)||void 0===t?void 0:t._id,_id:a,parentId:y.parentId}))}),children:(0,u.jsxs)(I.Ay,{container:!0,spacing:2,children:[(0,u.jsx)(I.Ay,{item:!0,md:12,children:(0,u.jsx)(r.ks,{name:"name.uz",control:s,label:o("common.name")+" (Uz)"})}),(0,u.jsx)(I.Ay,{item:!0,md:12,children:(0,u.jsx)(r.ks,{name:"name.ru",control:s,label:o("common.name")+" (Ru)"})}),(0,u.jsx)(I.Ay,{item:!0,md:12,children:(0,u.jsx)(r.ks,{name:"name.en",control:s,label:o("common.name")+" (En)"})}),(0,u.jsx)(I.Ay,{item:!0,md:12,children:(0,u.jsx)(r.ME,{control:s,setValue:m,name:"imageId",rules:{required:!1},accept:".png, .jpg, .jpeg"})})]})})})},A=()=>{const[e,t]=(0,g.useState)(!1),[n,p]=(0,g.useState)(),[I,h]=(0,g.useState)(),A=(e=>{let{setCategoryId:t,setEditingCategoryId:n}=e;const r=(0,l.j)(),{t:g}=(0,i.Bd)(),y=(0,c.L)(),j=localStorage.getItem("i18nextLng")||"uz";return[{key:"sort",width:"5%"},{title:"\u2116",dataIndex:"id",key:"id",width:"5%",render:(e,t,n)=>(0,u.jsx)(u.Fragment,{children:n+1})},{title:g("common.categoryName"),dataIndex:"name",key:"name",render:(e,t)=>null===e||void 0===e?void 0:e[j]},{title:g("common.product")+" soni",dataIndex:"productCount",key:"productCount",render:(e,t)=>(0,m.j)(e)},{title:"",render:(e,i)=>(0,u.jsxs)("div",{className:"d-flex gap-2 justify-content-end",children:[y("categoryCreate")&&(0,u.jsx)(a.A,{onClick:()=>{null===n||void 0===n||n(null===i||void 0===i?void 0:i._id),r((0,o.GF)(!0))},children:(0,u.jsx)(s.A,{})}),y("categoryDelete")&&(0,u.jsx)(a.A,{onClick:()=>null===t||void 0===t?void 0:t(null===i||void 0===i?void 0:i._id),children:(0,u.jsx)(d.d7,{})})]})}]})({setEditingCategoryId:p,setCategoryId:h}),C=(0,l.j)(),{t:f}=(0,i.Bd)(),k=(0,y.mN)(),b=((0,c.L)(),()=>{p(void 0),k.reset({name:"",imageId:""})}),S=(0,x.A)();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(r.p,{columns:A,dataUrl:"/category/paging",dragUrl:"/category/positions",dragKey:"categoryIds",render:e,setRender:t,onAddButton:()=>C((0,o.GF)(!0)),exQueryParams:{parentId:S.parentId}}),(0,u.jsx)(j.A,{open:I,setOpen:h,setRender:t,url:"category/delete"}),(0,u.jsx)(r.wA,{FORM_ID:"category",isEditing:!!n,customTitle:f("general.addCategory"),onClose:b,children:(0,u.jsx)(v,{formStore:k,setRender:t,resetForm:b,editingCategoryId:n})})]})}},72824:(e,t,n)=>{n.d(t,{j:()=>r});const r=e=>{if(e||0===e){return(Math.round(100*(e+Number.EPSILON))/100).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}).replaceAll(","," ")}return""}}}]);
//# sourceMappingURL=859.a389dc2a.chunk.js.map