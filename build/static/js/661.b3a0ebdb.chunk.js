"use strict";(self.webpackChunkbestune_admin=self.webpackChunkbestune_admin||[]).push([[661],{3613:(e,n,o)=>{o.d(n,{A:()=>l});var t,r=o(57528),i=o(29769);const a=(0,o(66253).default)(i.dS)(t||(t=(0,r.A)(["\n  display: flex;\n  flex-direction: column-reverse;\n  border: none;\n  width: 100%;\n  padding-bottom: 20px;\n  .quill {\n    .ql-container {\n      .ql-tooltip {\n        transform: translateX(97px);\n        z-index: 10;\n      }\n      .ql-editor {\n        background-color: #fff;\n        padding: 15px;\n        border-radius: 12px;\n        min-height: 80px;\n        transition: all 0.3s;\n        border: 1px solid #d9d9d9;\n        p {\n          margin: 0;\n          font-size: 14px;\n        }\n      }\n    }\n  }\n  .ql-toolbar {\n    padding: 0;\n    transition: opacity 1s ease-out;\n    border-radius: 0;\n    border-bottom: none;\n    margin-top: 10px;\n    button {\n      border: none;\n      margin: 0 5px;\n      svg {\n        width: 24px !important;\n        height: 24px !important;\n        fill: #000 !important;\n        path {\n          fill: #000;\n        }\n      }\n    }\n  }\n  .ql-editing {\n    left: 30px !important;\n    transform: translateX(0px) !important;\n    z-index: 100;\n  }\n"])));var s=o(70579);const l=e=>{const{value:n,onChange:o,onImageUpload:t,isError:r,type:i}=e;return(0,s.jsx)(a,{controls:[["bold","italic","underline","strike","clean","unorderedList","orderedList","alignLeft","alignCenter","alignRight"]],isError:!!r,value:n,onChange:o,onImageUpload:t,type:i})}},37802:(e,n,o)=>{o.d(n,{A:()=>a});var t=o(65043),r=o(37216),i=o(70579);const a=e=>{let{getCoordinate:n,center:o,height:a}=e;const[s,l]=(0,t.useState)(o),d=(0,t.useRef)(null);(0,t.useEffect)(()=>{o&&(l(o),d.current&&d.current.setCenter([o.latitude,o.longitude]))},[o]);return(0,i.jsx)(r.Xi,{children:(0,i.jsxs)(r.T5,{width:"100%",height:a||"500px",defaultState:{center:null!==o&&void 0!==o&&o.latitude?[null===o||void 0===o?void 0:o.latitude,null===o||void 0===o?void 0:o.longitude]:[41.315163390767026,69.27958692367339],zoom:14,behaviors:["default","scrollZoom"]},instanceRef:e=>{d.current=e},onClick:e=>{const o={latitude:e.get("coords")[0],longitude:e.get("coords")[1]};l(o),n(o)},children:[(0,i.jsx)(r.Ro,{geometry:[null===s||void 0===s?void 0:s.latitude,null===s||void 0===s?void 0:s.longitude]}),(0,i.jsx)(r.T3,{}),(0,i.jsx)(r._3,{options:{float:"left"},onClick:()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{const o={latitude:e.coords.latitude,longitude:e.coords.longitude};l(o),n(o),d.current&&d.current.setCenter([o.latitude,o.longitude],14)},e=>{console.error("Geolocation error:",e)}):console.error("Geolocation is not supported by this browser.")}}),(0,i.jsx)(r.c3,{options:{float:"right"}}),(0,i.jsx)(r.pj,{options:{float:"right"}})]})})}},48982:(e,n,o)=>{o.r(n),o.d(n,{default:()=>j});var t,r=o(89379),i=o(68903),a=o(57528);const s=o(66253).default.div(t||(t=(0,a.A)(["\n  padding: 20px;\n  border-radius: 12px;\n  background: #fff;\n  box-shadow: 0px 0px 4px 0px rgba(0, 0, 0, 0.07);\n  .working-time {\n    > div {\n      width: 48%;\n    }\n  }\n  .address-options {\n    position: absolute;\n    box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.1);\n    padding: 10px 0;\n    border-radius: 10px;\n    background-color: #fff;\n    max-height: 300px;\n    overflow: auto;\n    z-index: 10;\n    .option {\n      padding: 8px 15px;\n      cursor: pointer;\n      &:hover {\n        background-color: #f5f5f5;\n      }\n    }\n  }\n  .save-btn {\n    text-align: right;\n  }\n\n  .copyBtn {\n    width: 40px;\n    height: 40px;\n    border-radius: 10px;\n    background-color: #f5f5f5;\n\n    svg {\n      path {\n        fill: blue;\n      }\n    }\n  }\n"])));var l=o(5468),d=o(24858),c=o(74117),m=o(3613),u=o(91503),p=o(61698),x=o(65043),g=o(37802),h=o(43686),v=o(69990),b=o(70579);const f=()=>{var e;const[n,o]=(0,x.useState)(!1),[t,a]=(0,x.useState)(),[f,j]=(0,x.useState)(""),{debouncedValue:y}=(0,h.A)(f,1e3),[k,w]=(0,v.A)(),{control:N,setValue:T,handleSubmit:A,formState:C,reset:P,watch:q}=(0,d.mN)(),{t:L}=(0,c.Bd)(),{data:S,status:_}=(0,p.gf)("store/get",{},{suspense:!1}),{mutate:z,data:E}=(0,p.L2)("address/by-name","post",{onSuccess(){o(!0)}});(0,x.useEffect)(()=>{"string"===typeof f&&f.trim()&&z({name:f})},[f]);const{mutate:R}=(0,p.L2)("store/update","put"),{mutate:F}=(0,p.L2)("address/by-point","post",{onSuccess(e){let{data:n}=e;T("addressName",null===n||void 0===n?void 0:n.name)}});(0,x.useEffect)(()=>{null!==t&&void 0!==t&&t.latitude&&null!==t&&void 0!==t&&t.longitude?F({latitude:t.latitude,longitude:t.longitude}):console.error("Coordinates are missing")},[F,t]),(0,x.useEffect)(()=>{if("success"===_){var e,n,o,t;const i=null===S||void 0===S?void 0:S.data;P((0,r.A)((0,r.A)({},i),{},{startTime:11===(null===(e=i.workTime)||void 0===e?void 0:e.length)?null===(n=i.workTime)||void 0===n?void 0:n.slice(0,5):"",endTime:11===(null===(o=i.workTime)||void 0===o?void 0:o.length)?null===(t=i.workTime)||void 0===t?void 0:t.slice(-5):"",addressLocation:i.addressLocation,deliveryPrice:i.deliveryPrice,itemPrepTimeFrom:i.itemPrepTimeFrom,itemPrepTimeTo:i.itemPrepTimeTo}))}},[_,S]);return(0,b.jsx)(s,{children:(0,b.jsxs)("form",{onSubmit:A(e=>{const n={name:e.name,description:e.description,workTime:e.startTime?"".concat(e.startTime,"-").concat(e.endTime):void 0,phoneNumber:e.phoneNumber,addressName:e.addressName,addressLocation:t,deliveryPrice:+e.deliveryPrice,itemPrepTimeFrom:e.itemPrepTimeFrom,itemPrepTimeTo:e.itemPrepTimeTo};R(n)}),children:[(0,b.jsx)(i.Ay,{className:"w-full",children:(0,b.jsx)("div",{className:"save-btn",children:(0,b.jsx)(l.O6,{title:L("general.save"),variant:"contained",type:"submit"})})}),(0,b.jsxs)(i.Ay,{className:"block lg:flex",children:[(0,b.jsxs)(i.Ay,{className:"lg:w-[50%] pr-3 py-3",children:[(0,b.jsx)("div",{className:"mb-3",children:(0,b.jsx)(l.ks,{control:N,name:"name",label:L("common.companyName")})}),(0,b.jsxs)("div",{className:"mb-3 sm:flex md:gap-0 gap-y-2 justify-between items-end working-time",children:[(0,b.jsx)(u.A,{control:N,name:"startTime",errors:C.errors,label:L("common.workTime"),rules:{required:!0}}),(0,b.jsx)(u.A,{control:N,name:"endTime",errors:C.errors,rules:{required:!0}})]}),(0,b.jsxs)("div",{className:"mb-3 sm:flex md:gap-0 gap-y-2 justify-between items-end working-time",children:[(0,b.jsx)(l.ks,{control:N,name:"itemPrepTimeFrom",type:"number",label:L("settings.delivery_time")}),(0,b.jsx)(l.ks,{control:N,name:"itemPrepTimeTo",type:"number"})]}),(0,b.jsx)("div",{className:"mb-3",children:(0,b.jsx)(l.ks,{control:N,name:"deliveryPrice",type:"number",label:L("order.deliveryPrice"),rules:{required:!1}})}),(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)(l.ks,{control:N,name:"addressName",label:L("common.address"),rules:{required:!1},onCustomChange:e=>j(e)}),(0,b.jsx)("div",{className:"address-options",children:n&&(null===E||void 0===E||null===(e=E.data)||void 0===e?void 0:e.map(e=>(0,b.jsx)("div",{className:"option",onClick:()=>{T("addressName",e.name),T("addressLocation",{latitude:e.latitude,longitude:e.longitude}),o(!1)},children:e.name})))})]}),(0,b.jsx)("div",{className:"mb-3",children:(0,b.jsx)(l.LR,{control:N,name:"phoneNumber",label:L("common.phoneNumber"),rules:{required:!1}})}),(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)("label",{className:"custom-label",children:L("common.description")}),(0,b.jsx)(m.A,{value:q("description"),onChange:e=>T("description",e)})]})]}),(0,b.jsx)(i.Ay,{className:"lg:w-[50%]",children:(0,b.jsxs)("div",{className:"mt-5",children:[(0,b.jsx)("br",{}),(0,b.jsx)(g.A,{getCoordinate:a,center:q("addressLocation"),height:"70vh"})]})})]})]})})},j=f},69990:(e,n,o)=>{o.d(n,{A:()=>i});var t=o(65043),r=o(47503);const i=function(){const[e,n]=(0,t.useState)(null);return[e,async e=>{var o;if(null===(o=navigator)||void 0===o||!o.clipboard)return console.warn("Clipboard not supported"),!1;try{return await navigator.clipboard.writeText(e),n(e),r.oR.success("Nusxa olindi!"),!0}catch(t){return console.warn("Copy failed",t),n(null),!1}}]}},91503:(e,n,o)=>{o.d(n,{A:()=>x});var t,r,i=o(65043),a=o(24858),s=o(57528),l=o(66253);(0,l.default)("div")(t||(t=(0,s.A)(['\n  border: 1px solid;\n  border-color: "grey" !important;\n  outline: none;\n'])));const d=(0,l.default)("div")(r||(r=(0,s.A)(["\n  .react-time-picker {\n    width: 100%;\n    .react-time-picker__wrapper {\n      width: 100%;\n      border-radius: 8px;\n      border: 1px solid #d9d9d9;\n      box-sizing: border-box;\n      color: #333333 !important;\n      padding: 9px 16px;\n      font-size: 16px;\n      line-height: 20px;\n      letter-spacing: -0.02em;\n      outline: none;\n      font-weight: 500;\n      transition: all 0.1s ease-out;\n      font-weight: 500;\n      transition: 0.2s ease all;\n      .react-time-picker__inputGroup {\n        input {\n          outline-color: #949494;\n        }\n      }\n    }\n    .react-time-picker__clock {\n      display: none;\n    }\n  }\n"])));var c=o(18905),m=o(74117),u=o(70579);const p=e=>{let{control:n,name:o,errors:t,rules:r,label:i}=e;const{t:s}=(0,m.Bd)();return(0,u.jsxs)(d,{children:[i&&(0,u.jsx)("label",{className:"custom-label",children:i}),(0,u.jsx)(a.xI,{control:n,name:o,rules:r,render:e=>{let{field:{onChange:n,value:o}}=e;return(0,u.jsx)(c.A,{clockIcon:null,className:"time-picker",onChange:n,value:o,format:"HH:mm",hourPlaceholder:"HH",minutePlaceholder:"mm",locale:"uz-UZ"})}}),!!t[o]&&(0,u.jsx)("h6",{className:"text-error mt-1",children:s("general.required")})]})},x=(0,i.memo)(p)}}]);
//# sourceMappingURL=661.b3a0ebdb.chunk.js.map