{"version":3,"file":"static/js/789.2888813e.chunk.js","mappings":"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","sources":["pages/courier/components/CourierForm.tsx","components/common/WarningModalPost/WarningModal.styled.ts","components/common/WarningModalPost/WarningModal.tsx","pages/courier/index.tsx","pages/courier/container/Courier.tsx","pages/courier/container/courier.columns.tsx"],"sourcesContent":["import { Dispatch, FC, SetStateAction, useEffect, useState } from \"react\";\nimport { Grid } from \"@mui/material\";\nimport {\n  AutoCompleteForm,\n  ImageInput,\n  MainButton,\n  PhoneInput,\n  TextInput,\n} from \"components\";\nimport { UseFormReturn } from \"react-hook-form\";\nimport { useApi, useApiMutation } from \"hooks/useApi/useApiHooks\";\nimport { useTranslation } from \"react-i18next\";\nimport { IIdImage } from \"hooks/usePostImage\";\nimport { DeleteIcon } from \"assets/svgs\";\nimport { useAppDispatch } from \"store/storeHooks\";\nimport { setOpenDrawer } from \"components/elements/FormDrawer/formdrawer.slice\";\n\ninterface ICourierForm {\n  formStore: UseFormReturn<any>;\n  editingCourierId?: any;\n  resetForm: () => void;\n  productProps: {\n    courierImages: IIdImage[];\n    setCourierImages: Dispatch<SetStateAction<IIdImage[]>>;\n    mainImageId: any;\n    setMainImageId: any;\n  };\n}\nconst CourierFrom: FC<ICourierForm> = ({\n  formStore,\n  editingCourierId,\n  resetForm,\n  productProps,\n}) => {\n  const { t } = useTranslation();\n  const { control, handleSubmit, reset, watch, setValue } = formStore;\n  const [checkData, setCheckData] = useState<any>();\n  const { courierImages, setCourierImages, mainImageId, setMainImageId } =\n    productProps;\n\n  // const { } = useApi(\n  //   `employee/check?phoneNumber=${watch(\"phoneNumber\")}`,\n  //   {},\n  //   {\n  //     enabled: watch(\"phoneNumber\")?.length > 12 && !editingCourierId,\n  //     suspense: false,\n  //     onSuccess({ data }) {\n  //       setCheckData(data);\n  //     },\n  //   }\n  // );\n\n  const { mutate, status } = useApiMutation(\n    editingCourierId ? `courier/update` : \"courier/create\",\n    editingCourierId ? \"post\" : \"post\"\n  );\n\n  // const { mutate: GetByIdDataMutate, data: getByIdData, status: getByIdStatus } = useApiMutation(\n  //   `courier/get-by-id/${editingCourierId}`,\n  //   \"post\",\n  //   {\n  //     onSuccess: () => {\n  //       dis(setOpenDrawer(true));\n  //     },\n  //     onError: () => {\n  //       dis(setOpenDrawer(false));\n  //     },\n  //   }\n  // );\n\n  // useEffect(() => {\n  //   if (editingCourierId) {\n  //     GetByIdDataMutate({ _id: editingCourierId });\n  //   } else {\n  //     dis(setOpenDrawer(false));\n  //   }\n  // }, [editingCourierId, GetByIdDataMutate]);\n\n\n\n\n  const { data: getByIdData, status: getByIdStatus } = useApi(`courier/get-by-id/${editingCourierId}`, {}, {\n    enabled: !!editingCourierId,\n    suspense: false\n  })\n\n  useEffect(() => {\n    if (status === \"success\") {\n      resetForm();\n    }\n  }, [status]);\n\n  const submit = (data: any) => {\n    mutate({\n      ...data,\n      imageId: data.imageId?._id,\n      _id: editingCourierId,\n    });\n  };\n\n  useEffect(() => {\n    if (getByIdStatus === 'success') {\n      reset({\n        ...getByIdData.data,\n        imageId: getByIdData.data.image,\n      });\n    }\n  }, [getByIdData, getByIdStatus]);\n\n  return (\n    <div className=\"custom-drawer\">\n      <form id=\"courier\" onSubmit={handleSubmit(submit)}>\n        <Grid container spacing={2}>\n          <Grid item md={12}>\n            <PhoneInput\n              control={control}\n              name=\"phoneNumber\"\n              label={t(\"common.phoneNumber\")}\n            />\n            {checkData?._id && !editingCourierId && (\n              <div className=\"d-flex justify-content-between\">\n                <span className=\"text-error mt-2\">\n                  {t(\"common.alreadyExistEmployee\")}\n                </span>\n                <MainButton\n                  title={t(\"general.add\")}\n                  onClick={() => {\n                    reset({\n                      ...checkData,\n                      _id: undefined,\n                    });\n                    setCheckData(null);\n                  }}\n                />\n              </div>\n            )}\n          </Grid>\n          <Grid item md={12}>\n            <TextInput\n              control={control}\n              name=\"firstName\"\n              label={t(\"common.firstName\")}\n            />\n          </Grid>\n          <Grid item md={12}>\n            <TextInput\n              control={control}\n              name=\"lastName\"\n              label={t(\"common.lastName\")}\n            />\n          </Grid>\n          <Grid item md={12}>\n            <TextInput\n              control={control}\n              name=\"password\"\n              label={t(\"common.password\")}\n              type=\"password\"\n              rules={{ required: false }}\n            />\n          </Grid>\n          <Grid item md={12}>\n            <TextInput\n              control={control}\n              name=\"carBrand\"\n              label={t(\"COURIER.carBrand\")}\n            />\n          </Grid>\n          <Grid item md={12}>\n            <TextInput\n              control={control}\n              name=\"carModel\"\n              label={t(\"COURIER.carModel\")}\n            />\n          </Grid>\n          <Grid item md={12}>\n            <TextInput\n              control={control}\n              name=\"carNumber\"\n              label={t(\"COURIER.carNumber\")}\n            />\n          </Grid>\n          <Grid item md={12}>\n            <TextInput\n              control={control}\n              name=\"carColor\"\n              label={t(\"COURIER.carColor\")}\n            />\n          </Grid>\n          <Grid item md={12}>\n            <div className=\"product-images\">\n              <ImageInput control={control} setValue={setValue} name=\"imageId\" />\n            </div>\n          </Grid>\n        </Grid>\n      </form>\n    </div>\n  );\n};\n\nexport default CourierFrom;\n","import styled from \"styled-components\";\n\nexport const WarningModalStyled = styled.div`\n  background-color: #fff;\n  border-radius: 20px;\n  padding: 32px 42px 24px 42px;\n  h2 {\n    font-weight: 500;\n    font-size: 26px;\n  }\n  button {\n    width: 100px;\n  }\n`;\n","import { Dispatch, SetStateAction, useEffect } from \"react\";\nimport { Modal, SaveCancelBtn } from \"components\";\nimport { WarningModalStyled } from \"./WarningModal.styled\";\nimport { useTranslation } from \"react-i18next\";\nimport { useApiMutation } from \"hooks/useApi/useApiHooks\";\n\nconst WarningModal = ({ open, setOpen, title, url, confirmFn }: any) => {\n  const { t } = useTranslation();\n\n  const { mutate, status } = useApiMutation(`${url}/${open}`, \"post\");\n\n  useEffect(() => {\n    if (status === \"success\") {\n      setOpen(null);\n    }\n  }, [status, mutate, open]);\n\n  return (\n    <Modal setOpen={setOpen} open={!!open}>\n      <WarningModalStyled>\n        <h2>{title || t(\"general.reallyDelete\")}</h2>\n        <SaveCancelBtn\n          isCancelFromRoute={false}\n          SubmitTitle={t(\"general.yes\")!}\n          cancelTitle={t(\"general.no\")!}\n          onClick={() => (url ? mutate({ _id: open }) : confirmFn())}\n          onCancel={() => setOpen(false)}\n        />\n      </WarningModalStyled>\n    </Modal>\n  );\n};\n\nexport default WarningModal;\n","import Courier from \"./container/Courier\";\n\nexport default Courier;\n","import { FormDrawer, Table } from \"components\";\nimport { useState } from \"react\";\nimport { useCourierColumns } from \"./courier.columns\";\nimport { useAppDispatch } from \"../../../store/storeHooks\";\nimport { setOpenDrawer } from \"components/elements/FormDrawer/formdrawer.slice\";\nimport { useForm } from \"react-hook-form\";\nimport { useTranslation } from \"react-i18next\";\nimport { useRoleManager } from \"services/useRoleManager\";\nimport { IIdImage } from \"hooks/usePostImage\";\nimport CourierFrom from \"../components/CourierForm\";\nimport WarningModal from \"components/common/WarningModalPost/WarningModal\";\n\nconst Employee = () => {\n  const [editingCourierId, setEditingCourierId] = useState<any>();\n  const [courierId, setCourierId] = useState<any>();\n  const columns = useCourierColumns();\n  const hasAccess = useRoleManager();\n  const { t } = useTranslation();\n  const dis = useAppDispatch();\n  const formStore = useForm<any>();\n  const [courierImages, setCourierImages] = useState<IIdImage[]>([]);\n  const [mainImageId, setMainImageId] = useState<any>();\n\n  const resetForm = () => {\n    setEditingCourierId(undefined);\n    formStore.reset({\n      firstName: \"\",\n      lastName: \"\",\n      phoneNumber: \"\",\n      password: \"\",\n      carBrand: \"\",\n      carColor: \"\",\n      carModel: \"\",\n      carNumber: \"\",\n      imageUrl: \"\",\n    });\n  };\n\n  return (\n    <>\n      <Table\n        dataUrl=\"courier/paging\"\n        columns={columns}\n        searchable\n        onAddButton={hasAccess('employeeCreate') ? () => dis(setOpenDrawer(true)) : undefined}\n        onEditColumn={hasAccess('employeeUpdate') ? (row) => {\n          setEditingCourierId(row._id);\n          dis(setOpenDrawer(true));\n        } : undefined}\n        onDeleteColumn={hasAccess('employeeDelete') ? (row) => setCourierId(row._id) : undefined}\n      />\n      <WarningModal open={courierId} setOpen={setCourierId} url=\"courier/delete\" />\n      <FormDrawer\n        FORM_ID=\"courier\"\n        isEditing={!!editingCourierId}\n        customTitle={t(\"general.addCourier\")}\n        onClose={resetForm}\n      >\n        <CourierFrom\n          formStore={formStore}\n          resetForm={resetForm}\n          editingCourierId={editingCourierId}\n          productProps={{\n            courierImages,\n            setCourierImages,\n            mainImageId,\n            setMainImageId,\n          }}\n        />\n      </FormDrawer>\n    </>\n  );\n};\n\nexport default Employee;\n","import { GridColumns } from \"@mui/x-data-grid\";\nimport { get } from \"lodash\";\nimport { useTranslation } from \"react-i18next\";\n\nexport const useCourierColumns = (): GridColumns => {\n  const { t } = useTranslation();\n\n  return [\n    {\n      field: t(\"common.fullName\"),\n      renderCell(params) {\n        return get(params, 'row.firstName', '') + \" \" + get(params, 'row.lastName', '');\n      },\n      flex: 1.5\n    },\n    {\n      field: t(\"common.phoneNumber\"),\n      renderCell(params) {\n        return params.row.phoneNumber;\n      },\n    },\n    {\n      field: t(\"common.rating\"),\n      renderCell(params) {\n        return params.row.role?.name;\n      },\n    },\n  ];\n};\n"],"names":["formStore","editingCourierId","resetForm","productProps","t","useTranslation","control","handleSubmit","reset","setValue","watch","useState","checkData","setCheckData","courierImages","setCourierImages","mainImageId","setMainImageId","useApiMutation","mutate","status","useApi","enabled","suspense","getByIdData","data","getByIdStatus","useEffect","imageId","image","className","id","onSubmit","_id","Grid","container","spacing","item","md","name","label","title","onClick","undefined","type","rules","required","WarningModalStyled","styled","open","setOpen","url","confirmFn","isCancelFromRoute","SubmitTitle","cancelTitle","onCancel","setEditingCourierId","courierId","setCourierId","columns","field","renderCell","params","get","flex","row","phoneNumber","role","useCourierColumns","hasAccess","useRoleManager","dis","useAppDispatch","useForm","firstName","lastName","password","carBrand","carColor","carModel","carNumber","imageUrl","dataUrl","searchable","onAddButton","setOpenDrawer","onEditColumn","onDeleteColumn","FORM_ID","isEditing","customTitle","onClose"],"sourceRoot":""}