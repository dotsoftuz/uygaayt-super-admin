{"version":3,"file":"static/js/456.e96dd24b.chunk.js","mappings":"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","sources":["pages/review/index.tsx","pages/review/container/Review.tsx","pages/review/container/review.columns.tsx"],"sourcesContent":["import Review from \"./container/Review\";\n\nexport default Review;\n\n","import { Table, AutoCompleteFilter, Modal } from \"components\";\nimport { useMemo, useState, useEffect } from \"react\";\nimport { useReviewColumns } from \"./review.columns\";\nimport { useTranslation } from \"react-i18next\";\nimport { Grid, Rating } from \"@mui/material\";\nimport { useApiMutation } from \"hooks/useApi/useApiHooks\";\nimport { toast } from \"react-toastify\";\nimport WarningModal from \"components/common/WarningModal/WarningModal\";\nimport { get } from \"lodash\";\nimport CommonModal from \"components/common/commonModal\";\nimport useAllQueryParams from \"hooks/useGetAllQueryParams/useAllQueryParams\";\nimport { useSearchParams } from \"react-router-dom\";\n\nconst Review = () => {\n    const [reviewId, setReviewId] = useState<any>();\n    const [selectedReview, setSelectedReview] = useState<any>(null);\n    const [reviewDialogOpen, setReviewDialogOpen] = useState(false);\n    const [toggleReviewId, setToggleReviewId] = useState<any>();\n    const { t } = useTranslation();\n    const allParams = useAllQueryParams();\n    const [searchParams, setSearchParams] = useSearchParams();\n\n    // Set default storeId to 'uygaayt' if not in URL params\n    useEffect(() => {\n        if (!allParams.storeId) {\n            setSearchParams({\n                ...allParams,\n                storeId: 'uygaayt',\n            });\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const { mutate: toggleVisibilityMutate } = useApiMutation(\n        `review/toggle-visibility/${toggleReviewId}`,\n        \"post\",\n        {\n            onSuccess() {\n                toast.success(\"Sharh ko'rinishi o'zgartirildi\");\n                setToggleReviewId(undefined);\n                // Table will refetch automatically\n            },\n            onError(error: any) {\n                toast.error(error?.message || \"Xatolik yuz berdi\");\n                setToggleReviewId(undefined);\n            },\n        }\n    );\n\n    function handleToggleVisibility(row: any) {\n        setToggleReviewId(row._id);\n        toggleVisibilityMutate({\n            isVisible: !get(row, \"isVisible\", true),\n        });\n    }\n\n    const columns = useReviewColumns(handleToggleVisibility);\n\n    const [ratingFilter, setRatingFilter] = useState<string>(\"\");\n\n    const renderHeader = (\n        <Grid className=\"w-full lg:w-[60%] md:flex md:grid-cols-3 gap-3 justify-end items-center py-2\">\n            <Grid className=\"md:w-[30%] py-1\">\n                <AutoCompleteFilter\n                    optionsUrl=\"store/paging\"\n                    filterName=\"storeId\"\n                    placeholder=\"Do'kon bo'yicha\"\n                    getOptionLabel={(option) => option?.name || option?._id}\n                />\n            </Grid>\n            <Grid className=\"md:w-[30%] py-1\">\n                <AutoCompleteFilter\n                    optionsUrl=\"customer/paging\"\n                    filterName=\"customerId\"\n                    placeholder={t(\"common.customer\")}\n                    getOptionLabel={(option) =>\n                        `${option?.firstName || \"\"} ${option?.lastName || \"\"}`.trim() || option?.phoneNumber\n                    }\n                />\n            </Grid>\n            <Grid className=\"md:w-[30%] py-1\">\n                <select\n                    className=\"w-full px-3 py-2 border rounded-md\"\n                    value={ratingFilter}\n                    onChange={(e) => setRatingFilter(e.target.value)}\n                >\n                    <option value=\"\">Barcha baholar</option>\n                    <option value=\"5\">5 yulduz</option>\n                    <option value=\"4\">4 yulduz</option>\n                    <option value=\"3\">3 yulduz</option>\n                    <option value=\"2\">2 yulduz</option>\n                    <option value=\"1\">1 yulduz</option>\n                </select>\n            </Grid>\n        </Grid>\n    );\n\n    const queryParams = useMemo(() => ({\n        rating: ratingFilter || undefined,\n        // storeId will be automatically included from URL params via allParams\n    }), [ratingFilter]);\n\n    return (\n        <>\n            <Table\n                dataUrl=\"review/paging\"\n                columns={columns}\n                searchable\n                headerChildren={renderHeader}\n                exQueryParams={queryParams}\n                onRowClick={(row) => {\n                    setSelectedReview(row);\n                    setReviewDialogOpen(true);\n                }}\n                onDeleteColumn={(row) => setReviewId(row._id)}\n            />\n\n            <WarningModal\n                open={reviewId}\n                setOpen={setReviewId}\n                url={`review/delete`}\n            />\n\n            {/* Review Detail Modal */}\n            <CommonModal\n                open={reviewDialogOpen}\n                setOpen={setReviewDialogOpen}\n                title=\"Sharh Tafsilotlari\"\n                canCloseView={true}\n                canClose={true}\n                width={800}\n            >\n                {selectedReview && (\n                    <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"16px\" }}>\n                        {/* Customer Info */}\n                        <div>\n                            <h3 style={{ fontWeight: 600, marginBottom: \"8px\" }}>Mijoz</h3>\n                            <div style={{ fontSize: \"14px\" }}>\n                                <div>\n                                    {get(selectedReview, \"customer.firstName\", \"\")}{\" \"}\n                                    {get(selectedReview, \"customer.lastName\", \"\")}\n                                </div>\n                                <div style={{ color: \"#6b7280\" }}>\n                                    {get(selectedReview, \"customer.phoneNumber\", \"\")}\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Rating */}\n                        <div>\n                            <h3 style={{ fontWeight: 600, marginBottom: \"8px\" }}>Baho</h3>\n                            <div style={{ display: \"flex\", alignItems: \"center\", gap: \"8px\" }}>\n                                <Rating\n                                    value={get(selectedReview, \"rating\", 0)}\n                                    readOnly\n                                    precision={0.5}\n                                />\n                                <span>\n                                    {get(selectedReview, \"rating\", 0)} / 5\n                                </span>\n                            </div>\n                        </div>\n\n                        {/* Comment */}\n                        {get(selectedReview, \"comment\") && (\n                            <div>\n                                <h3 style={{ fontWeight: 600, marginBottom: \"8px\" }}>Sharh</h3>\n                                <p style={{ fontSize: \"14px\", background: \"#f3f4f6\", padding: \"12px\", borderRadius: \"6px\" }}>\n                                    {get(selectedReview, \"comment\")}\n                                </p>\n                            </div>\n                        )}\n\n                        {/* Rate Comments */}\n                        {get(selectedReview, \"rateComments\")?.length > 0 && (\n                            <div>\n                                <h3 style={{ fontWeight: 600, marginBottom: \"8px\" }}>Tanlangan Xususiyatlar</h3>\n                                <div style={{ display: \"flex\", flexWrap: \"wrap\", gap: \"8px\" }}>\n                                    {get(selectedReview, \"rateComments\", []).map((rc: any, idx: number) => (\n                                        <div\n                                            key={idx}\n                                            style={{\n                                                display: \"flex\",\n                                                alignItems: \"center\",\n                                                gap: \"8px\",\n                                                padding: \"4px 12px\",\n                                                background: \"#f3f4f6\",\n                                                borderRadius: \"6px\",\n                                            }}\n                                        >\n                                            {rc.image?.url && (\n                                                <img\n                                                    src={rc.image.url}\n                                                    alt=\"\"\n                                                    style={{ width: \"24px\", height: \"24px\", borderRadius: \"4px\" }}\n                                                />\n                                            )}\n                                            <span style={{ fontSize: \"14px\" }}>\n                                                {rc.title?.uz || rc.title || \"\"}\n                                            </span>\n                                        </div>\n                                    ))}\n                                </div>\n                            </div>\n                        )}\n\n                        {/* Images */}\n                        {get(selectedReview, \"images\")?.length > 0 && (\n                            <div>\n                                <h3 style={{ fontWeight: 600, marginBottom: \"8px\" }}>Rasmlar</h3>\n                                <div style={{ display: \"grid\", gridTemplateColumns: \"repeat(3, 1fr)\", gap: \"8px\" }}>\n                                    {get(selectedReview, \"images\", []).map((img: any, idx: number) => (\n                                        <img\n                                            key={idx}\n                                            src={img.url || img.webpUrl}\n                                            alt={`Review ${idx + 1}`}\n                                            style={{\n                                                width: \"100%\",\n                                                height: \"128px\",\n                                                objectFit: \"cover\",\n                                                borderRadius: \"6px\",\n                                                border: \"1px solid #e5e7eb\",\n                                            }}\n                                        />\n                                    ))}\n                                </div>\n                            </div>\n                        )}\n\n                        {/* Order Info */}\n                        {get(selectedReview, \"order\") && (\n                            <div>\n                                <h3 style={{ fontWeight: 600, marginBottom: \"8px\" }}>Buyurtma</h3>\n                                <div style={{ fontSize: \"14px\" }}>\n                                    #{get(selectedReview, \"order.number\", \"\")}\n                                </div>\n                            </div>\n                        )}\n\n                        {/* Product Info */}\n                        {get(selectedReview, \"product\") && (\n                            <div>\n                                <h3 style={{ fontWeight: 600, marginBottom: \"8px\" }}>Mahsulot</h3>\n                                <div style={{ fontSize: \"14px\" }}>\n                                    {typeof get(selectedReview, \"product.name\") === \"object\"\n                                        ? get(selectedReview, \"product.name.uz\") ||\n                                        get(selectedReview, \"product.name.ru\") ||\n                                        get(selectedReview, \"product.name.en\")\n                                        : get(selectedReview, \"product.name\")}\n                                </div>\n                            </div>\n                        )}\n\n                        {/* Store Info */}\n                        <div>\n                            <h3 style={{ fontWeight: 600, marginBottom: \"8px\" }}>Do'kon</h3>\n                            <div style={{ fontSize: \"14px\" }}>\n                                {get(selectedReview, \"storeId\") === \"uygaayt\"\n                                    ? \"Uygaayt Market\"\n                                    : get(selectedReview, \"store.name\", \"\") ||\n                                    get(selectedReview, \"storeId\", \"\")}\n                            </div>\n                        </div>\n\n                        {/* Date */}\n                        <div>\n                            <h3 style={{ fontWeight: 600, marginBottom: \"8px\" }}>Sana</h3>\n                            <div style={{ fontSize: \"14px\", color: \"#6b7280\" }}>\n                                {selectedReview.createdAt\n                                    ? new Date(selectedReview.createdAt).toLocaleString(\"uz-UZ\")\n                                    : \"-\"}\n                            </div>\n                        </div>\n                    </div>\n                )}\n            </CommonModal>\n        </>\n    );\n};\n\nexport default Review;\n\n","import { GridColumns } from \"@mui/x-data-grid\";\nimport { Chip, Tooltip } from \"@mui/material\";\nimport dayjs from \"dayjs\";\nimport { get } from \"lodash\";\nimport { useTranslation } from \"react-i18next\";\n\nexport const useReviewColumns = (\n  onToggleVisibility?: (row: any) => void\n): GridColumns => {\n  const { t } = useTranslation();\n\n  return [\n    {\n      field: t(\"common.customer\"),\n      flex: 1.2,\n      renderCell({ row }) {\n        const firstName = get(row, \"customer.firstName\", \"\");\n        const lastName = get(row, \"customer.lastName\", \"\");\n        const phoneNumber = get(row, \"customer.phoneNumber\", \"\");\n        const fullName = `${firstName} ${lastName}`.trim() || \"Mijoz\";\n        \n        return (\n          <div>\n            <div style={{ fontWeight: 500 }}>{fullName}</div>\n            {phoneNumber && (\n              <div style={{ fontSize: \"12px\", color: \"#6b7280\" }}>{phoneNumber}</div>\n            )}\n          </div>\n        );\n      },\n    },\n    {\n      field: t(\"common.rating\"),\n      width: 150,\n      renderCell({ row }) {\n        const rating = get(row, \"rating\", 0);\n        return (\n          <div style={{ display: \"flex\", alignItems: \"center\", gap: \"4px\" }}>\n            {Array.from({ length: 5 }, (_, i) => i + 1).map((star) => (\n              <span\n                key={star}\n                style={{\n                  color: star <= rating ? \"#fbbf24\" : \"#d1d5db\",\n                  fontSize: \"16px\",\n                }}\n              >\n                â˜…\n              </span>\n            ))}\n            <span style={{ marginLeft: \"4px\", fontSize: \"14px\", fontWeight: 500 }}>\n              {rating}\n            </span>\n          </div>\n        );\n      },\n    },\n    {\n      field: t(\"common.comment\"),\n      flex: 1.5,\n      renderCell({ row }) {\n        const comment = get(row, \"comment\", \"\");\n        const truncatedComment = comment?.length > 50 \n          ? `${comment.substring(0, 50)}...` \n          : comment || \"-\";\n        \n        return (\n          <Tooltip title={comment || \"\"} arrow>\n            <span style={{ fontSize: \"14px\" }}>{truncatedComment}</span>\n          </Tooltip>\n        );\n      },\n    },\n    {\n      field: \"store\",\n      headerName: \"Do'kon\",\n      flex: 1,\n      renderCell({ row }) {\n        const storeName = get(row, \"store.name\", \"\");\n        const storeId = get(row, \"storeId\", \"\");\n        \n        if (storeId === \"uygaayt\") {\n          return \"Uygaayt Market\";\n        }\n        \n        return storeName || storeId || \"-\";\n      },\n    },\n    {\n      field: \"order\",\n      headerName: \"Buyurtma\",\n      width: 120,\n      renderCell({ row }) {\n        const orderNumber = get(row, \"order.number\", \"\");\n        return orderNumber ? `#${orderNumber}` : \"-\";\n      },\n    },\n    {\n      field: \"product\",\n      headerName: \"Mahsulot\",\n      flex: 1,\n      renderCell({ row }) {\n        const productName = get(row, \"product.name\", \"\");\n        if (!productName) return \"-\";\n        \n        const name = typeof productName === \"object\" \n          ? productName.uz || productName.ru || productName.en \n          : productName;\n        \n        return name || \"-\";\n      },\n    },\n    {\n      field: t(\"common.status\"),\n      width: 120,\n      renderCell({ row }) {\n        const isVisible = get(row, \"isVisible\", true);\n        return (\n          <Chip\n            label={isVisible ? \"Ko'rinadi\" : \"Yashirilgan\"}\n            color={isVisible ? \"success\" : \"default\"}\n            size=\"small\"\n            sx={{ fontWeight: 600 }}\n          />\n        );\n      },\n    },\n    {\n      field: t(\"common.date\"),\n      width: 180,\n      renderCell({ row }) {\n        return dayjs(get(row, \"createdAt\", \"\")).format(\"DD.MM.YYYY HH:mm\");\n      },\n    },\n    {\n      field: \"actions\",\n      headerName: \"Amal\",\n      width: 150,\n      align: \"center\",\n      headerAlign: \"center\",\n      sortable: false,\n      filterable: false,\n      disableColumnMenu: true,\n      renderCell({ row }) {\n        return (\n          <div style={{ display: \"flex\", alignItems: \"center\", justifyContent: \"center\", gap: \"8px\" }}>\n            <button\n              onClick={(e) => {\n                e.stopPropagation();\n                if (onToggleVisibility) {\n                  onToggleVisibility(row);\n                }\n              }}\n              style={{\n                padding: \"4px 8px\",\n                fontSize: \"12px\",\n                borderRadius: \"4px\",\n                border: \"1px solid #e5e7eb\",\n                background: \"white\",\n                cursor: \"pointer\",\n              }}\n              onMouseOver={(e) => {\n                e.currentTarget.style.background = \"#f3f4f6\";\n              }}\n              onMouseOut={(e) => {\n                e.currentTarget.style.background = \"white\";\n              }}\n            >\n              {get(row, \"isVisible\", true) ? \"Yashirish\" : \"Ko'rsatish\"}\n            </button>\n          </div>\n        );\n      },\n    },\n  ];\n};\n\n"],"names":["useState","reviewId","setReviewId","selectedReview","setSelectedReview","reviewDialogOpen","setReviewDialogOpen","toggleReviewId","setToggleReviewId","t","useTranslation","allParams","useAllQueryParams","useSearchParams","setSearchParams","useEffect","storeId","toggleVisibilityMutate","useApiMutation","onSuccess","toast","undefined","onError","error","message","mutate","columns","onToggleVisibility","field","flex","renderCell","row","firstName","get","lastName","phoneNumber","fullName","trim","style","fontWeight","fontSize","color","width","rating","display","alignItems","gap","Array","from","length","_","i","map","star","marginLeft","comment","truncatedComment","substring","Tooltip","title","arrow","headerName","storeName","orderNumber","productName","uz","ru","en","isVisible","Chip","label","size","sx","dayjs","format","align","headerAlign","sortable","filterable","disableColumnMenu","justifyContent","onClick","e","stopPropagation","padding","borderRadius","border","background","cursor","onMouseOver","currentTarget","onMouseOut","useReviewColumns","_id","ratingFilter","setRatingFilter","renderHeader","Grid","className","optionsUrl","filterName","placeholder","getOptionLabel","option","name","value","onChange","target","queryParams","useMemo","dataUrl","searchable","headerChildren","exQueryParams","onRowClick","onDeleteColumn","WarningModal","open","setOpen","url","canCloseView","canClose","flexDirection","marginBottom","Rating","readOnly","precision","flexWrap","rc","idx","image","src","alt","height","gridTemplateColumns","img","webpUrl","objectFit","createdAt","Date","toLocaleString"],"sourceRoot":""}