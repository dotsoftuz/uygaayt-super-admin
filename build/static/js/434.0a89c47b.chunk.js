"use strict";(self.webpackChunkbestune_admin=self.webpackChunkbestune_admin||[]).push([[434],{23434:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var r=n(29439),a=n(71796),o=n(13400),i=n(59460),d=n(36978),c=n(86657),u=(n(763),n(39230)),s=n(29001),l=n(79405),m=n(90816),g=n(80184),f=n(72791),x=n(61134),y=n(84544),p=n(35834),j=n(1413),I=n(61889),h=n(32188),v=function(e){var t=e.formStore,n=e.resetForm,r=e.editingCategoryId,o=e.setRender,i=(0,u.$G)().t,d=t.control,c=t.handleSubmit,s=t.reset,l=t.setValue,m=(0,p.Z)(),x=(0,h.uC)(r?"category/update":"category/create",r?"put":"post"),y=x.mutate,v=x.status,C=(0,h.h_)("category/get-by-id/".concat(r),{},{enabled:!!r,suspense:!1}),Z=C.data,b=C.status;return(0,f.useEffect)((function(){"success"===v&&(n(),null===o||void 0===o||o((function(e){return!e})))}),[v]),(0,f.useEffect)((function(){"success"===b&&s({name:Z.data.name,imageId:Z.data.image})}),[b,Z]),(0,g.jsx)("div",{className:"custom-drawer",children:(0,g.jsx)("form",{id:"category",onSubmit:c((function(e){var t;y((0,j.Z)((0,j.Z)({},e),{},{imageId:null===(t=e.imageId)||void 0===t?void 0:t._id,_id:r,parentId:m.parentId},r?{}:{storeId:"uygaayt"}))})),children:(0,g.jsxs)(I.ZP,{container:!0,spacing:2,children:[(0,g.jsx)(I.ZP,{item:!0,md:12,children:(0,g.jsx)(a.oi,{name:"name.uz",control:d,label:i("common.name")+" (Uz)"})}),(0,g.jsx)(I.ZP,{item:!0,md:12,children:(0,g.jsx)(a.oi,{name:"name.ru",control:d,label:i("common.name")+" (Ru)"})}),(0,g.jsx)(I.ZP,{item:!0,md:12,children:(0,g.jsx)(a.oi,{name:"name.en",control:d,label:i("common.name")+" (En)"})}),(0,g.jsx)(I.ZP,{item:!0,md:12,children:(0,g.jsx)(a.aG,{control:d,setValue:l,name:"imageId",rules:{required:!1},accept:".png, .jpg, .jpeg"})})]})})})},C=function(){var e=(0,f.useState)(!1),t=(0,r.Z)(e,2),n=t[0],j=t[1],I=(0,f.useState)(),h=(0,r.Z)(I,2),C=h[0],Z=h[1],b=(0,f.useState)(),S=(0,r.Z)(b,2),k=S[0],_=S[1],w=function(e){var t=e.setCategoryId,n=e.setEditingCategoryId,r=(0,l.T)(),a=(0,u.$G)().t,f=(0,s.w)(),x=localStorage.getItem("i18nextLng")||"uz";return[{key:"sort",width:"5%"},{title:"\u2116",dataIndex:"id",key:"id",width:"5%",render:function(e,t,n){return(0,g.jsx)(g.Fragment,{children:n+1})}},{title:a("common.categoryName"),dataIndex:"name",key:"name",render:function(e,t){return null===e||void 0===e?void 0:e[x]}},{title:a("common.product")+" soni",dataIndex:"productCount",key:"productCount",render:function(e,t){return(0,m.Y)(e)}},{title:"",render:function(e,a){return(0,g.jsxs)("div",{className:"d-flex gap-2 justify-content-end",children:[f("categoryCreate")&&(0,g.jsx)(o.Z,{onClick:function(){null===n||void 0===n||n(null===a||void 0===a?void 0:a._id),r((0,d.dl)(!0))},children:(0,g.jsx)(c.Z,{})}),f("categoryDelete")&&(0,g.jsx)(o.Z,{onClick:function(){return null===t||void 0===t?void 0:t(null===a||void 0===a?void 0:a._id)},children:(0,g.jsx)(i.pJ,{})})]})}}]}({setEditingCategoryId:Z,setCategoryId:_}),E=(0,l.T)(),F=(0,u.$G)().t,P=(0,x.cI)(),R=((0,s.w)(),function(){Z(void 0),P.reset({name:"",imageId:""})}),N=(0,p.Z)();return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(a.KK,{columns:w,dataUrl:"/category/paging",dragUrl:"/category/positions",dragKey:"categoryIds",render:n,setRender:j,onAddButton:function(){return E((0,d.dl)(!0))},exQueryParams:{parentId:N.parentId}}),(0,g.jsx)(y.Z,{open:k,setOpen:_,setRender:j,url:"category/delete"}),(0,g.jsx)(a._8,{FORM_ID:"category",isEditing:!!C,customTitle:F("general.addCategory"),onClose:R,children:(0,g.jsx)(v,{formStore:P,setRender:j,resetForm:R,editingCategoryId:C})})]})}},90816:function(e,t,n){n.d(t,{Y:function(){return r}});var r=function(e){return e||0===e?(Math.round(100*(e+Number.EPSILON))/100).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}).replaceAll(","," "):""}}}]);
//# sourceMappingURL=434.0a89c47b.chunk.js.map