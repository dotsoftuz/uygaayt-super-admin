"use strict";(self.webpackChunkbestune_admin=self.webpackChunkbestune_admin||[]).push([[789],{45789:function(e,n,r){r.r(n),r.d(n,{default:function(){return I}});var t,o=r(29439),i=r(35980),a=r(72791),s=r(763),l=r(39230),c=r(79405),d=r(36978),u=r(61134),m=r(29001),f=r(1413),x=r(61889),p=r(62750),h=r(80184),j=function(e){var n=e.formStore,r=e.editingCourierId,t=e.resetForm,s=e.productProps,c=(0,l.$G)().t,d=n.control,u=n.handleSubmit,m=n.reset,j=(n.watch,n.setValue),g=(0,a.useState)(),b=(0,o.Z)(g,2),C=b[0],I=b[1],v=(s.courierImages,s.setCourierImages,s.mainImageId,s.setMainImageId,(0,p.uC)(r?"courier/update":"courier/create","post")),Z=v.mutate,N=v.status,w=(0,p.h_)("courier/get-by-id/".concat(r),{},{enabled:!!r,suspense:!1}),_=w.data,P=w.status;(0,a.useEffect)((function(){"success"===N&&t()}),[N]);return(0,a.useEffect)((function(){"success"===P&&m((0,f.Z)((0,f.Z)({},_.data),{},{imageId:_.data.image}))}),[_,P]),(0,h.jsx)("div",{className:"custom-drawer",children:(0,h.jsx)("form",{id:"courier",onSubmit:u((function(e){var n;Z((0,f.Z)((0,f.Z)({},e),{},{imageId:null===(n=e.imageId)||void 0===n?void 0:n._id,_id:r}))})),children:(0,h.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,h.jsxs)(x.ZP,{item:!0,md:12,children:[(0,h.jsx)(i.sb,{control:d,name:"phoneNumber",label:c("common.phoneNumber")}),(null===C||void 0===C?void 0:C._id)&&!r&&(0,h.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,h.jsx)("span",{className:"text-error mt-2",children:c("common.alreadyExistEmployee")}),(0,h.jsx)(i.c7,{title:c("general.add"),onClick:function(){m((0,f.Z)((0,f.Z)({},C),{},{_id:void 0})),I(null)}})]})]}),(0,h.jsx)(x.ZP,{item:!0,md:12,children:(0,h.jsx)(i.oi,{control:d,name:"firstName",label:c("common.firstName")})}),(0,h.jsx)(x.ZP,{item:!0,md:12,children:(0,h.jsx)(i.oi,{control:d,name:"lastName",label:c("common.lastName")})}),(0,h.jsx)(x.ZP,{item:!0,md:12,children:(0,h.jsx)(i.oi,{control:d,name:"password",label:c("common.password"),type:"password",rules:{required:!1}})}),(0,h.jsx)(x.ZP,{item:!0,md:12,children:(0,h.jsx)(i.oi,{control:d,name:"carBrand",label:c("COURIER.carBrand")})}),(0,h.jsx)(x.ZP,{item:!0,md:12,children:(0,h.jsx)(i.oi,{control:d,name:"carModel",label:c("COURIER.carModel")})}),(0,h.jsx)(x.ZP,{item:!0,md:12,children:(0,h.jsx)(i.oi,{control:d,name:"carNumber",label:c("COURIER.carNumber")})}),(0,h.jsx)(x.ZP,{item:!0,md:12,children:(0,h.jsx)(i.oi,{control:d,name:"carColor",label:c("COURIER.carColor")})}),(0,h.jsx)(x.ZP,{item:!0,md:12,children:(0,h.jsx)("div",{className:"product-images",children:(0,h.jsx)(i.aG,{control:d,setValue:j,name:"imageId"})})})]})})})},g=r(30168),b=r(17939).default.div(t||(t=(0,g.Z)(["\n  background-color: #fff;\n  border-radius: 20px;\n  padding: 32px 42px 24px 42px;\n  h2 {\n    font-weight: 500;\n    font-size: 26px;\n  }\n  button {\n    width: 100px;\n  }\n"]))),C=function(e){var n=e.open,r=e.setOpen,t=e.title,o=e.url,s=e.confirmFn,c=(0,l.$G)().t,d=(0,p.uC)("".concat(o,"/").concat(n),"post"),u=d.mutate,m=d.status;return(0,a.useEffect)((function(){"success"===m&&r(null)}),[m,u,n]),(0,h.jsx)(i.u_,{setOpen:r,open:!!n,children:(0,h.jsxs)(b,{children:[(0,h.jsx)("h2",{children:t||c("general.reallyDelete")}),(0,h.jsx)(i.xq,{isCancelFromRoute:!1,SubmitTitle:c("general.yes"),cancelTitle:c("general.no"),onClick:function(){return o?u({_id:n}):s()},onCancel:function(){return r(!1)}})]})})},I=function(){var e=(0,a.useState)(),n=(0,o.Z)(e,2),r=n[0],t=n[1],f=(0,a.useState)(),x=(0,o.Z)(f,2),p=x[0],g=x[1],b=function(){var e=(0,l.$G)().t;return[{field:e("common.fullName"),renderCell:function(e){return(0,s.get)(e,"row.firstName","")+" "+(0,s.get)(e,"row.lastName","")},flex:1.5},{field:e("common.phoneNumber"),renderCell:function(e){return e.row.phoneNumber}},{field:e("common.rating"),renderCell:function(e){var n;return null===(n=e.row.role)||void 0===n?void 0:n.name}}]}(),I=(0,m.w)(),v=(0,l.$G)().t,Z=(0,c.T)(),N=(0,u.cI)(),w=(0,a.useState)([]),_=(0,o.Z)(w,2),P=_[0],E=_[1],y=(0,a.useState)(),R=(0,o.Z)(y,2),S=R[0],O=R[1],k=function(){t(void 0),N.reset({firstName:"",lastName:"",phoneNumber:"",password:"",carBrand:"",carColor:"",carModel:"",carNumber:"",imageUrl:""})};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(i.iA,{dataUrl:"courier/paging",columns:b,searchable:!0,onAddButton:I("employeeCreate")?function(){return Z((0,d.dl)(!0))}:void 0,onEditColumn:I("employeeUpdate")?function(e){t(e._id),Z((0,d.dl)(!0))}:void 0,onDeleteColumn:I("employeeDelete")?function(e){return g(e._id)}:void 0}),(0,h.jsx)(C,{open:p,setOpen:g,url:"courier/delete"}),(0,h.jsx)(i._8,{FORM_ID:"courier",isEditing:!!r,customTitle:v("general.addCourier"),onClose:k,children:(0,h.jsx)(j,{formStore:N,resetForm:k,editingCourierId:r,productProps:{courierImages:P,setCourierImages:E,mainImageId:S,setMainImageId:O}})})]})}}}]);
//# sourceMappingURL=789.2888813e.chunk.js.map