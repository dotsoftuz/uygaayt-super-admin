"use strict";(self.webpackChunkbestune_admin=self.webpackChunkbestune_admin||[]).push([[829],{14829:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var s=n(5468),r=n(65043),a=n(49752),i=n(74117),o=n(70579);var l=n(72473),u=n(13094),d=n(24858),c=n(89379),m=n(68903),b=n(61698);const x=e=>{let{formStore:t,editingAttributeId:n,resetForm:a}=e;const{t:l}=(0,i.Bd)(),{control:u,handleSubmit:d,reset:x,watch:h,setValue:j}=t,{mutate:f,status:g}=(0,b.L2)(n?"/attribute/update":"/attribute/create","post"),{data:p,status:v}=(0,b.gf)("attribute/get-by-id/".concat(n),{},{enabled:!!n,suspense:!1});(0,r.useEffect)(()=>{"success"===g&&a()},[g]);return(0,r.useEffect)(()=>{"success"===v&&x({name:p.data.name})},[v,p]),(0,r.useEffect)(()=>{n||x({name:""})},[n,x]),(0,o.jsx)("div",{className:"custom-drawer",children:(0,o.jsx)("form",{id:"attribute",onSubmit:d(e=>{f((0,c.A)({_id:n},e))}),children:(0,o.jsxs)(m.Ay,{container:!0,spacing:2,children:[(0,o.jsx)(m.Ay,{item:!0,md:12,children:(0,o.jsx)(s.ks,{control:u,name:"name.uz",label:l("common.title")+" (Uz)"})}),(0,o.jsx)(m.Ay,{item:!0,md:12,children:(0,o.jsx)(s.ks,{control:u,name:"name.ru",label:l("common.title")+" (Ru)"})}),(0,o.jsx)(m.Ay,{item:!0,md:12,children:(0,o.jsx)(s.ks,{control:u,name:"name.en",label:l("common.title")+" (En)"})})]})})})};var h=n(83501),j=n(477);const f=()=>{const[e,t]=(0,r.useState)(),[n,c]=(0,r.useState)(),m=(()=>{const{t:e}=(0,i.Bd)(),t=localStorage.getItem("i18nextLng")||"uz";return[{field:e("common.name"),renderCell(e){var n;let{row:s}=e;const r=null===s||void 0===s||null===(n=s.name)||void 0===n?void 0:n[t],i=(null===r||void 0===r?void 0:r.length)>50?"".concat(r.substring(0,50),"..."):r;return(0,o.jsx)(a.A,{title:r,arrow:!0,children:(0,o.jsx)("span",{children:i})})}}]})(),{t:b}=((0,h.L)(),(0,i.Bd)()),f=(0,l.j)(),g=(0,d.mN)(),p=()=>{t(void 0),g.reset({name:{uz:"",ru:"",en:""}})},v=(0,r.useMemo)(()=>({}),[]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.XI,{dataUrl:"attribute/paging",columns:m,searchable:!0,onAddButton:()=>{f((0,u.GF)(!0))},onEditColumn:e=>{t(e._id),f((0,u.GF)(!0))},onDeleteColumn:e=>c(e._id),exQueryParams:v}),(0,o.jsx)(j.A,{open:n,setOpen:c,url:"attribute/delete"}),(0,o.jsx)(s.wA,{FORM_ID:"attribute",isEditing:!!e,customTitle:b("attribute.add"),onClose:p,children:(0,o.jsx)(x,{formStore:g,resetForm:p,editingAttributeId:e})})]})}}}]);
//# sourceMappingURL=829.7daa1eb3.chunk.js.map