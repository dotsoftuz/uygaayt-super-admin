{"version":3,"file":"static/js/205.9fce3632.chunk.js","mappings":"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","sources":["types/enums.ts","pages/rating/components/RatingForm.tsx","pages/rating/container/Rating.styled.ts","pages/rating/container/Rating.tsx","pages/rating/index.tsx","pages/rating/container/rating.columns.tsx"],"sourcesContent":["import { useTranslation } from \"react-i18next\";\r\nimport { IRoleData } from \"store/reducers/LoginSlice\";\r\n\r\n\r\nexport const PAYMENT_TYPES = [\r\n  {\r\n    _id: \"cash\",\r\n    name: \"Naqd\",\r\n    trans_key: \"cash\",\r\n  },\r\n  // {\r\n  //   _id: \"card\",\r\n  //   name: \"Karta\",\r\n  //   trans_key: \"card\",\r\n  // },\r\n];\r\n\r\nexport const DISCOUNT_TYPES = [\r\n  {\r\n    _id: \"percent\",\r\n    name: \"Foiz\",\r\n    trans_key: \"percent\",\r\n  },\r\n  {\r\n    _id: \"amount\",\r\n    name: \"Miqdor\",\r\n    trans_key: \"amount\",\r\n  },\r\n];\r\n\r\ninterface ISettingsTabs {\r\n  name: string;\r\n  key: string;\r\n  role: keyof IRoleData;\r\n}\r\n\r\nexport const SETTINGS_TABS: ISettingsTabs[] = [\r\n  {\r\n    name: \"functionality\",\r\n    key: \"functionality\",\r\n    role: \"role\",  // o'zgartirish kere measure\r\n  },\r\n  {\r\n    name: \"discounts\",\r\n    key: \"discountOrder\",\r\n    role: \"role\",  // o'zgartirish kere \r\n  },\r\n  {\r\n    name: \"bonus\",\r\n    key: \"bonusOrder\",\r\n    role: \"role\",  // o'zgartirish kere \r\n  },\r\n  {\r\n    name: \"premium_discounts\",\r\n    key: \"premiumDiscountOrder\",\r\n    role: \"role\",  // o'zgartirish kere \r\n  },\r\n  {\r\n    name: \"main_address\",\r\n    key: \"mainAddress\",\r\n    role: \"role\",  // o'zgartirish kere measure\r\n  },\r\n  {\r\n    name: \"website_conditions\",\r\n    key: \"websiteConditions\",\r\n    role: \"role\", // o'zgartirish kere siteSettings\r\n  },\r\n  // {\r\n  //   name: \"Shaharlar\",\r\n  //   key: \"cities\",\r\n  //   role: \"city\",\r\n  // },\r\n];\r\n\r\nexport const MINIMUM_ORDER_OPTIONS = [\r\n  {\r\n    _id: \"percent\",\r\n    name: \"Foiz\",\r\n    trans_key: \"percent\",\r\n  },\r\n  {\r\n    _id: \"amount\",\r\n    name: \"Miqdor\",\r\n    trans_key: \"amount\",\r\n  },\r\n];\r\n\r\n\r\nexport const RATINGS = [\r\n  {\r\n    rate: 5,\r\n  },\r\n  {\r\n    rate: 4,\r\n  },\r\n  {\r\n    rate: 3,\r\n  },\r\n  {\r\n    rate: 2,\r\n  },\r\n  {\r\n    rate: 1,\r\n  },\r\n];","import { FC, useEffect } from \"react\";\r\nimport { Grid } from \"@mui/material\";\r\nimport { ImageInput, TextInput } from \"components\";\r\nimport { UseFormReturn } from \"react-hook-form\";\r\nimport { useApi, useApiMutation } from \"hooks/useApi/useApiHooks\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\ninterface IRatingForm {\r\n  formStore: UseFormReturn<any>;\r\n  editingRatingId: string;\r\n  resetForm: () => void;\r\n  rate: number;\r\n}\r\n\r\nconst RatingForm: FC<IRatingForm> = ({\r\n  formStore,\r\n  editingRatingId,\r\n  resetForm,\r\n  rate\r\n}) => {\r\n  const { t } = useTranslation();\r\n  const { control, handleSubmit, reset, watch, setValue } = formStore;\r\n\r\n  const { mutate, status } = useApiMutation(\r\n    editingRatingId ? `rate-comment/update` : \"rate-comment/create\",\r\n    editingRatingId ? \"put\" : \"post\"\r\n  );\r\n\r\n  const { data: getByIdData, status: getByIdStatus } = useApi(`rate-comment/get-by-id/${editingRatingId}`, {}, {\r\n    enabled: !!editingRatingId,\r\n    suspense: false,\r\n  })\r\n\r\n  useEffect(() => {\r\n    if (status === \"success\") {\r\n      resetForm();\r\n    }\r\n  }, [status]);\r\n\r\n  const submit = (data: any) => {\r\n    mutate({\r\n      _id: editingRatingId,\r\n      ...data,\r\n      imageId: data.imageId?._id,\r\n      rate\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (getByIdStatus === 'success') {\r\n      reset({\r\n        title: getByIdData.data.title,\r\n        imageId: getByIdData.data.image,\r\n      });\r\n    }\r\n  }, [getByIdStatus, getByIdData]);\r\n\r\n  return (\r\n    <div className=\"custom-drawer\">\r\n      <form id=\"rating\" onSubmit={handleSubmit(submit)}>\r\n        <Grid container spacing={2}>\r\n          <Grid item md={12}>\r\n            <TextInput\r\n              control={control}\r\n              name=\"title.uz\"\r\n              label='Uz'\r\n            />\r\n          </Grid>\r\n          <Grid item md={12}>\r\n            <TextInput\r\n              control={control}\r\n              name=\"title.ru\"\r\n              label='Ru'\r\n            />\r\n          </Grid>\r\n          <Grid item md={12}>\r\n            <TextInput\r\n              control={control}\r\n              name=\"title.en\"\r\n              label='En'\r\n            />\r\n          </Grid>\r\n          <Grid item md={12}>\r\n            <label className=\"py-2\" htmlFor=\"\">{t('general.recommendation_img')}</label><br /><br />\r\n            <ImageInput control={control} setValue={setValue} name=\"imageId\" />\r\n          </Grid>\r\n        </Grid>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RatingForm;\r\n","import styled from \"styled-components\";\r\n\r\nexport const RatingStyled = styled.div`\r\n  margin-top: 10px;\r\n  .ratings {\r\n    left: 20px;\r\n    padding: 10px 20px;\r\n    margin: auto !important;\r\n    .rating {\r\n      display: flex;\r\n      margin: auto !important;\r\n      align-items: center;\r\n      justify-content: center;\r\n      margin-right: 8px;\r\n      border-radius: 12px;\r\n      border: 1px solid #f3f3f8;\r\n      padding: 4px 12px;\r\n      width: 112px;\r\n      cursor: pointer;\r\n      &.active {\r\n        background: #EB5B00;\r\n        border: 1px solid #EB5B00;\r\n      }\r\n      svg {\r\n        margin: 0 1px;\r\n      }\r\n    }\r\n  }\r\n`;\r\n","import { FormDrawer, Table } from \"components\";\r\nimport { useMemo, useState } from \"react\";\r\nimport { useRatingColumns } from \"./rating.columns\";\r\nimport { useAppDispatch } from \"../../../store/storeHooks\";\r\nimport { setOpenDrawer } from \"components/elements/FormDrawer/formdrawer.slice\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport RatingForm from \"../components/RatingForm\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport WarningModal from \"components/common/WarningModal/WarningModal\";\r\nimport { RatingStyled } from \"./Rating.styled\";\r\nimport { RATINGS } from \"types/enums\";\r\nimport { StarIcon } from \"assets/svgs\";\r\nimport { useRoleManager } from \"services/useRoleManager\";\r\n\r\nconst Rating = () => {\r\n  const [editingRatingId, setEditingRatingId] = useState<any>();\r\n  const [ratingId, setRatingId] = useState<any>();\r\n  const columns = useRatingColumns();\r\n  const { t } = useTranslation();\r\n  const dis = useAppDispatch();\r\n  const formStore = useForm<any>();\r\n  const [rate, setRate] = useState(5);\r\n\r\n  const resetForm = () => {\r\n    setEditingRatingId(undefined);\r\n    formStore.reset({\r\n      title: {\r\n        uz: \"\",\r\n        ru: \"\",\r\n        en: \"\",\r\n      },\r\n      imageId: \"\",\r\n    });\r\n  };\r\n\r\n  const renderHeader = (\r\n    <div className=\"w-full lg:w-[80%] ratings gap-2 grid grid-cols-1 sm:grid-cols-3 md:grid-cols-5\">\r\n      {RATINGS.map((item) => {\r\n        return (\r\n          <div\r\n            className={`rating  ${rate === item.rate && \"active\"}`}\r\n            onClick={() => setRate(item.rate)}\r\n          >\r\n            {Array.from({ length: item.rate }, (_, i) => i + 1).map((e) => (\r\n              <StarIcon />\r\n            ))}\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n\r\n  const hasAccess = useRoleManager();\r\n\r\n  const queryParams = useMemo(() => ({\r\n    rate\r\n  }), [rate]);\r\n\r\n  return (\r\n    <RatingStyled>\r\n      <Table\r\n        dataUrl=\"rate-comment/paging\"\r\n        columns={columns}\r\n        headerChildren={renderHeader}\r\n        exQueryParams={queryParams}\r\n        onAddButton={\r\n          hasAccess(\"rateCommentCreate\")\r\n            ? () => dis(setOpenDrawer(true))\r\n            : undefined\r\n        }\r\n        onEditColumn={\r\n          hasAccess(\"rateCommentUpdate\")\r\n            ? (row) => {\r\n              setEditingRatingId(row._id);\r\n              dis(setOpenDrawer(true));\r\n            }\r\n            : undefined\r\n        }\r\n        onDeleteColumn={\r\n          hasAccess(\"rateCommentDelete\")\r\n            ? (row) => setRatingId(row._id)\r\n            : undefined\r\n        }\r\n      />\r\n      <WarningModal open={ratingId} setOpen={setRatingId} url=\"rate-comment/delete\" />\r\n      <FormDrawer\r\n        FORM_ID=\"rating\"\r\n        isEditing={!!editingRatingId}\r\n        customTitle={t(\"general.addBanner\")}\r\n        onClose={resetForm}\r\n      >\r\n        <RatingForm\r\n          formStore={formStore}\r\n          resetForm={resetForm}\r\n          editingRatingId={editingRatingId}\r\n          rate={rate}\r\n        />\r\n      </FormDrawer>\r\n    </RatingStyled>\r\n  );\r\n};\r\n\r\nexport default Rating;\r\n","import Rating from \"./container/Rating\";\r\n\r\nexport default Rating;\r\n","import { GridColumns } from \"@mui/x-data-grid\";\r\nimport { get } from \"lodash\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nexport const useRatingColumns = (): GridColumns => {\r\n  const { t } = useTranslation();\r\n\r\n  return [\r\n    {\r\n      field: t(\"common.name\"),\r\n      renderCell({ row }) {\r\n        return get(row, 'title.uz', '')\r\n      },\r\n    },\r\n  ];\r\n};\r\n"],"names":["PAYMENT_TYPES","_id","name","trans_key","DISCOUNT_TYPES","SETTINGS_TABS","key","role","RATINGS","rate","_ref","formStore","editingRatingId","resetForm","t","useTranslation","control","handleSubmit","reset","watch","setValue","mutate","status","useApiMutation","data","getByIdData","getByIdStatus","useApi","concat","enabled","suspense","useEffect","title","imageId","image","_jsx","className","children","id","onSubmit","_data$imageId","_objectSpread","_jsxs","Grid","container","spacing","item","md","TextInput","label","htmlFor","ImageInput","RatingStyled","styled","div","_templateObject","_taggedTemplateLiteral","Rating","setEditingRatingId","useState","ratingId","setRatingId","columns","useRatingColumns","field","renderCell","row","get","dis","useAppDispatch","useForm","setRate","undefined","uz","ru","en","renderHeader","map","onClick","Array","from","length","_","i","e","StarIcon","hasAccess","useRoleManager","queryParams","useMemo","Table","dataUrl","headerChildren","exQueryParams","onAddButton","setOpenDrawer","onEditColumn","onDeleteColumn","WarningModal","open","setOpen","url","FormDrawer","FORM_ID","isEditing","customTitle","onClose","RatingForm"],"sourceRoot":""}