"use strict";(self.webpackChunkbestune_admin=self.webpackChunkbestune_admin||[]).push([[965],{3613:(e,r,t)=>{t.d(r,{A:()=>l});var s,o=t(57528),n=t(29769);const i=(0,t(66253).default)(n.dS)(s||(s=(0,o.A)(["\n  display: flex;\n  flex-direction: column-reverse;\n  border: none;\n  width: 100%;\n  padding-bottom: 20px;\n  .quill {\n    .ql-container {\n      .ql-tooltip {\n        transform: translateX(97px);\n        z-index: 10;\n      }\n      .ql-editor {\n        background-color: #fff;\n        padding: 15px;\n        border-radius: 12px;\n        min-height: 80px;\n        transition: all 0.3s;\n        border: 1px solid #d9d9d9;\n        p {\n          margin: 0;\n          font-size: 14px;\n        }\n      }\n    }\n  }\n  .ql-toolbar {\n    padding: 0;\n    transition: opacity 1s ease-out;\n    border-radius: 0;\n    border-bottom: none;\n    margin-top: 10px;\n    button {\n      border: none;\n      margin: 0 5px;\n      svg {\n        width: 24px !important;\n        height: 24px !important;\n        fill: #000 !important;\n        path {\n          fill: #000;\n        }\n      }\n    }\n  }\n  .ql-editing {\n    left: 30px !important;\n    transform: translateX(0px) !important;\n    z-index: 100;\n  }\n"])));var a=t(70579);const l=e=>{const{value:r,onChange:t,onImageUpload:s,isError:o,type:n}=e;return(0,a.jsx)(i,{controls:[["bold","italic","underline","strike","clean","unorderedList","orderedList","alignLeft","alignCenter","alignRight"]],isError:!!o,value:r,onChange:t,onImageUpload:s,type:n})}},4162:(e,r,t)=>{t.d(r,{A:()=>x});var s=t(58168),o=t(98587),n=t(63462),i=t(95006),a=t(46004),l=t(9523);const d=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],c=["component","slots","slotProps"],m=["component"];function x(e,r){const{className:t,elementType:x,ownerState:h,externalForwardedProps:u,getSlotOwnerState:p,internalForwardedProps:g}=r,A=(0,o.A)(r,d),{component:j,slots:v={[e]:void 0},slotProps:y={[e]:void 0}}=u,b=(0,o.A)(u,c),f=v[e]||x,w=(0,a.A)(y[e],h),k=(0,l.A)((0,s.A)({className:t},A,{externalForwardedProps:"root"===e?b:void 0,externalSlotProps:w})),{props:{component:C},internalRef:P}=k,S=(0,o.A)(k.props,m),I=(0,n.A)(P,null==w?void 0:w.ref,r.ref),T=p?p(S):{},z=(0,s.A)({},h,T),F="root"===e?C||j:C,D=(0,i.A)(f,(0,s.A)({},"root"===e&&!j&&!v[e]&&g,"root"!==e&&!v[e]&&g,S,F&&{as:F},{ref:I}),z);return Object.keys(T).forEach(e=>{delete D[e]}),[f,D]}},26494:(e,r,t)=>{t.d(r,{A:()=>g});var s=t(58168),o=t(98587),n=t(65043),i=t(58387),a=t(98610),l=t(34535),d=t(6431),c=t(92532),m=t(72372);function x(e){return(0,m.Ay)("MuiCardContent",e)}(0,c.A)("MuiCardContent",["root"]);var h=t(70579);const u=["className","component"],p=(0,l.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,r)=>r.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),g=n.forwardRef(function(e,r){const t=(0,d.b)({props:e,name:"MuiCardContent"}),{className:n,component:l="div"}=t,c=(0,o.A)(t,u),m=(0,s.A)({},t,{component:l}),g=(e=>{const{classes:r}=e;return(0,a.A)({root:["root"]},x,r)})(m);return(0,h.jsx)(p,(0,s.A)({as:l,className:(0,i.A)(g.root,n),ownerState:m,ref:r},c))})},37802:(e,r,t)=>{t.d(r,{A:()=>i});var s=t(65043),o=t(37216),n=t(70579);const i=e=>{let{getCoordinate:r,center:t,height:i}=e;const[a,l]=(0,s.useState)(t),d=(0,s.useRef)(null);(0,s.useEffect)(()=>{t&&(l(t),d.current&&d.current.setCenter([t.latitude,t.longitude]))},[t]);return(0,n.jsx)(o.Xi,{children:(0,n.jsxs)(o.T5,{width:"100%",height:i||"500px",defaultState:{center:null!==t&&void 0!==t&&t.latitude?[null===t||void 0===t?void 0:t.latitude,null===t||void 0===t?void 0:t.longitude]:[41.315163390767026,69.27958692367339],zoom:14,behaviors:["default","scrollZoom"]},instanceRef:e=>{d.current=e},onClick:e=>{const t={latitude:e.get("coords")[0],longitude:e.get("coords")[1]};l(t),r(t)},children:[(0,n.jsx)(o.Ro,{geometry:[null===a||void 0===a?void 0:a.latitude,null===a||void 0===a?void 0:a.longitude]}),(0,n.jsx)(o.T3,{}),(0,n.jsx)(o._3,{options:{float:"left"},onClick:()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{const t={latitude:e.coords.latitude,longitude:e.coords.longitude};l(t),r(t),d.current&&d.current.setCenter([t.latitude,t.longitude],14)},e=>{console.error("Geolocation error:",e)}):console.error("Geolocation is not supported by this browser.")}}),(0,n.jsx)(o.c3,{options:{float:"right"}}),(0,n.jsx)(o.pj,{options:{float:"right"}})]})})}},69974:(e,r,t)=>{t.d(r,{A:()=>n});var s=t(59662),o=t(70579);const n=(0,s.A)((0,o.jsx)("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02z"}),"Phone")},72824:(e,r,t)=>{t.d(r,{j:()=>s});const s=e=>{if(e||0===e){return(Math.round(100*(e+Number.EPSILON))/100).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}).replaceAll(","," ")}return""}},81045:(e,r,t)=>{t.d(r,{A:()=>b});var s=t(98587),o=t(58168),n=t(65043),i=t(58387),a=t(98610),l=t(34535),d=t(6431),c=t(59662),m=t(70579);const x=(0,c.A)((0,m.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");var h=t(92532),u=t(72372);function p(e){return(0,u.Ay)("MuiAvatar",e)}(0,h.A)("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);var g=t(4162);const A=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],j=(0,l.Ay)("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.root,r[t.variant],t.colorDefault&&r.colorDefault]}})(e=>{let{theme:r}=e;return{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:r.typography.fontFamily,fontSize:r.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(r.vars||r).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:(0,o.A)({color:(r.vars||r).palette.background.default},r.vars?{backgroundColor:r.vars.palette.Avatar.defaultBg}:(0,o.A)({backgroundColor:r.palette.grey[400]},r.applyStyles("dark",{backgroundColor:r.palette.grey[600]})))}]}}),v=(0,l.Ay)("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,r)=>r.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),y=(0,l.Ay)(x,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,r)=>r.fallback})({width:"75%",height:"75%"});const b=n.forwardRef(function(e,r){const t=(0,d.b)({props:e,name:"MuiAvatar"}),{alt:l,children:c,className:x,component:h="div",slots:u={},slotProps:b={},imgProps:f,sizes:w,src:k,srcSet:C,variant:P="circular"}=t,S=(0,s.A)(t,A);let I=null;const T=function(e){let{crossOrigin:r,referrerPolicy:t,src:s,srcSet:o}=e;const[i,a]=n.useState(!1);return n.useEffect(()=>{if(!s&&!o)return;a(!1);let e=!0;const n=new Image;return n.onload=()=>{e&&a("loaded")},n.onerror=()=>{e&&a("error")},n.crossOrigin=r,n.referrerPolicy=t,n.src=s,o&&(n.srcset=o),()=>{e=!1}},[r,t,s,o]),i}((0,o.A)({},f,{src:k,srcSet:C})),z=k||C,F=z&&"error"!==T,D=(0,o.A)({},t,{colorDefault:!F,component:h,variant:P}),M=(e=>{const{classes:r,variant:t,colorDefault:s}=e,o={root:["root",t,s&&"colorDefault"],img:["img"],fallback:["fallback"]};return(0,a.A)(o,p,r)})(D),[R,B]=(0,g.A)("img",{className:M.img,elementType:v,externalForwardedProps:{slots:u,slotProps:{img:(0,o.A)({},f,b.img)}},additionalProps:{alt:l,src:k,srcSet:C,sizes:w},ownerState:D});return I=F?(0,m.jsx)(R,(0,o.A)({},B)):c||0===c?c:z&&l?l[0]:(0,m.jsx)(y,{ownerState:D,className:M.fallback}),(0,m.jsx)(j,(0,o.A)({as:h,ownerState:D,className:(0,i.A)(M.root,x),ref:r},S,{children:I}))})},85812:(e,r,t)=>{t.d(r,{A:()=>n});var s=t(59662),o=t(70579);const n=(0,s.A)((0,o.jsx)("path",{d:"M18 6h-2c0-2.21-1.79-4-4-4S8 3.79 8 6H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m-8 4c0 .55-.45 1-1 1s-1-.45-1-1V8h2zm2-6c1.1 0 2 .9 2 2h-4c0-1.1.9-2 2-2m4 6c0 .55-.45 1-1 1s-1-.45-1-1V8h2z"}),"ShoppingBag")},91503:(e,r,t)=>{t.d(r,{A:()=>u});var s,o,n=t(65043),i=t(24858),a=t(57528),l=t(66253);(0,l.default)("div")(s||(s=(0,a.A)(['\n  border: 1px solid;\n  border-color: "grey" !important;\n  outline: none;\n'])));const d=(0,l.default)("div")(o||(o=(0,a.A)(["\n  .react-time-picker {\n    width: 100%;\n    .react-time-picker__wrapper {\n      width: 100%;\n      border-radius: 8px;\n      border: 1px solid #d9d9d9;\n      box-sizing: border-box;\n      color: #333333 !important;\n      padding: 9px 16px;\n      font-size: 16px;\n      line-height: 20px;\n      letter-spacing: -0.02em;\n      outline: none;\n      font-weight: 500;\n      transition: all 0.1s ease-out;\n      font-weight: 500;\n      transition: 0.2s ease all;\n      .react-time-picker__inputGroup {\n        input {\n          outline-color: #949494;\n        }\n      }\n    }\n    .react-time-picker__clock {\n      display: none;\n    }\n  }\n"])));var c=t(18905),m=t(74117),x=t(70579);const h=e=>{let{control:r,name:t,errors:s,rules:o,label:n}=e;const{t:a}=(0,m.Bd)();return(0,x.jsxs)(d,{children:[n&&(0,x.jsx)("label",{className:"custom-label",children:n}),(0,x.jsx)(i.xI,{control:r,name:t,rules:o,render:e=>{let{field:{onChange:r,value:t}}=e;return(0,x.jsx)(c.A,{clockIcon:null,className:"time-picker",onChange:r,value:t,format:"HH:mm",hourPlaceholder:"HH",minutePlaceholder:"mm",locale:"uz-UZ"})}}),!!s[t]&&(0,x.jsx)("h6",{className:"text-error mt-1",children:a("general.required")})]})},u=(0,n.memo)(h)},97742:(e,r,t)=>{t.r(r),t.d(r,{default:()=>Ie});var s=t(73216),o=t(5468),n=t(49752),i=t(53536),a=t(74117),l=t(43845),d=t(17392),c=t(45424),m=t(32143),x=t(98082),h=t(65043),u=t(70579);const p=e=>{let{row:r,onView:t,onEdit:s,onDelete:o,onActivate:n}=e;const[i,a]=(0,h.useState)(null),l=Boolean(i),p=()=>{a(null)},g=e=>{e(),p()};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(d.A,{onClick:e=>{e.stopPropagation(),a(e.currentTarget)},size:"small",sx:{color:"#EB5B00"},children:(0,u.jsx)(x.A,{})}),(0,u.jsxs)(c.A,{anchorEl:i,open:l,onClose:p,onClick:e=>e.stopPropagation(),children:[t&&(0,u.jsx)(m.A,{onClick:()=>g(()=>t(r)),children:"\ud83d\udc41 Ko'rish"}),s&&(0,u.jsx)(m.A,{onClick:()=>g(()=>s(r)),children:"\u270f\ufe0f Tahrir"}),!r.isActive&&n&&(0,u.jsx)(m.A,{onClick:()=>g(()=>n(r)),children:"\u2795 Aktivlashtirish"}),o&&(0,u.jsx)(m.A,{onClick:()=>g(()=>o(r)),children:"\ud83d\uddd1 O'chirish"})]})]})};var g=t(72473),A=t(13094),j=t(24858),v=t(83501),y=t(68903),b=t(72221),f=t(477),w=t(61698),k=t(47503),C=t(96446),P=t(29013),S=t(24056),I=t(79190),T=t(11906),z=t(39336),F=t(3613),D=t(91503),M=t(37802),R=t(43686),B=t(59662);const N=(0,B.A)((0,u.jsx)("path",{d:"M20 4H4v2h16zm1 10v-2l-1-5H4l-1 5v2h1v6h10v-6h4v6h2v-6zm-9 4H6v-4h6z"}),"Store"),q=(0,B.A)((0,u.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"LocationOn"),E=(0,B.A)((0,u.jsx)("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4"}),"AttachMoney"),H=(0,B.A)((0,u.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm2 16H8v-2h8zm0-4H8v-2h8zm-3-5V3.5L18.5 9z"}),"Description"),W=(0,B.A)((0,u.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings");var V=t(51387);const _=(0,B.A)((0,u.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),L=e=>{let{formStore:r,editingStoreId:t,resetForm:s,storeProps:n}=e;const{t:i}=(0,a.Bd)(),{control:l,handleSubmit:d,reset:c,watch:m,setValue:x,formState:p}=r,{logoImage:g,setLogoImage:A,bannerImage:v,setBannerImage:b}=n,[f,k]=(0,h.useState)(!1),[B,L]=(0,h.useState)(),[O,U]=(0,h.useState)(""),{debouncedValue:Y}=(0,R.A)(O,1e3);(0,h.useEffect)(()=>{x("logoImage",g||void 0)},[g,x]),(0,h.useEffect)(()=>{x("bannerImage",v||void 0)},[v,x]);const{fields:X,append:K,remove:Q}=(0,j.jz)({control:l,name:"workDays"}),{mutate:Z,status:G}=(0,w.L2)(t?"store/update":"store/create",t?"put":"post",{}),{mutate:J,data:$}=(0,w.L2)("address/by-name","post",{onSuccess(){k(!0)}}),{mutate:ee}=(0,w.L2)("address/by-point","post",{onSuccess(e){let{data:r}=e;x("addressName",null===r||void 0===r?void 0:r.name)}});(0,h.useEffect)(()=>{"string"===typeof O&&O.trim()&&J({name:O})},[Y]),(0,h.useEffect)(()=>{null!==B&&void 0!==B&&B.latitude&&null!==B&&void 0!==B&&B.longitude&&ee({latitude:B.latitude,longitude:B.longitude})},[B]);const{data:re,status:te}=(0,w.gf)("store/get-by-id/".concat(t),{},{enabled:!!t&&!(null!==t&&void 0!==t&&t.startsWith("store_")),suspense:!1});(0,h.useEffect)(()=>{if("success"===te&&null!==re&&void 0!==re&&re.data){var e,r,t,s;const o=re.data;if(c({name:o.name||"",phoneNumber:o.phoneNumber||"",password:"",email:o.email||"",website:o.website||"",addressName:o.addressName||"",addressLocation:o.addressLocation||null,type:o.type||"shop",categoryIds:o.categoryIds||[],orderMinimumPrice:o.orderMinimumPrice||"",deliveryPrice:o.deliveryPrice||"",itemPrepTimeFrom:o.itemPrepTimeFrom||"",itemPrepTimeTo:o.itemPrepTimeTo||"",workTime:o.workTime||"",startTime:11===(null===(e=o.workTime)||void 0===e?void 0:e.length)?null===(r=o.workTime)||void 0===r?void 0:r.slice(0,5):"",endTime:11===(null===(t=o.workTime)||void 0===t?void 0:t.length)?null===(s=o.workTime)||void 0===s?void 0:s.slice(-5):"",workDays:o.workDays||[],description:o.description||"",descriptionTranslate:o.descriptionTranslate||{uz:"",ru:"",en:""},isActive:void 0===o.isActive||o.isActive,isVerified:o.isVerified||!1,isPremium:o.isPremium||!1,averageRating:o.averageRating||0,acceptCash:o.acceptCash||!1,acceptCard:o.acceptCard||!1,acceptOnlinePayment:o.acceptOnlinePayment||!1}),L(o.addressLocation),o.logoId){const e={_id:o.logoId,url:"".concat("http://46.101.209.158:3003/v1","/image/").concat(o.logoId)};A(e),x("logoImage",e)}else A(null),x("logoImage",void 0);if(o.bannerId){const e={_id:o.bannerId,url:"".concat("http://46.101.209.158:3003/v1","/image/").concat(o.bannerId)};b(e),x("bannerImage",e)}else b(null),x("bannerImage",void 0)}},[te,re,A,b,x]),(0,h.useEffect)(()=>{"success"===G&&(c({name:"",phoneNumber:"",password:"",email:"",website:"",addressName:"",addressLocation:null,type:"shop",categoryIds:[],orderMinimumPrice:"",deliveryPrice:"",itemPrepTimeFrom:"",itemPrepTimeTo:"",workTime:"",startTime:"",endTime:"",workDays:[],description:"",descriptionTranslate:{uz:"",ru:"",en:""},isActive:!0,isVerified:!1,isPremium:!1,averageRating:0,acceptCash:!1,acceptCard:!1,acceptOnlinePayment:!1}),L(void 0),A(null),b(null),x("logoImage",void 0),x("bannerImage",void 0),s())},[G,x]);const se=[{value:0,label:"Yakshanba"},{value:1,label:"Dushanba"},{value:2,label:"Seshanba"},{value:3,label:"Chorshanba"},{value:4,label:"Payshanba"},{value:5,label:"Juma"},{value:6,label:"Shanba"}],[oe,ne]=(0,h.useState)(0);return(0,u.jsxs)("form",{id:"store",onSubmit:d(e=>{const r={name:e.name,phoneNumber:e.phoneNumber,password:e.password||void 0,email:e.email||void 0,website:e.website||void 0,addressName:e.addressName||"",addressLocation:B||void 0,type:e.type||"shop",categoryIds:e.categoryIds||[],orderMinimumPrice:e.orderMinimumPrice?+e.orderMinimumPrice:0,deliveryPrice:e.deliveryPrice?+e.deliveryPrice:0,itemPrepTimeFrom:e.itemPrepTimeFrom?+e.itemPrepTimeFrom:5,itemPrepTimeTo:e.itemPrepTimeTo?+e.itemPrepTimeTo:10,workTime:e.startTime&&e.endTime?"".concat(e.startTime,"-").concat(e.endTime):"",workDays:e.workDays||[],description:e.description||"",descriptionTranslate:e.descriptionTranslate||void 0,logoId:(null===g||void 0===g?void 0:g._id)||void 0,bannerId:(null===v||void 0===v?void 0:v._id)||void 0,isActive:void 0===e.isActive||e.isActive,isVerified:e.isVerified||!1,isPremium:e.isPremium||!1,averageRating:e.averageRating?+e.averageRating:0,acceptCash:e.acceptCash||!1,acceptCard:e.acceptCard||!1,acceptOnlinePayment:e.acceptOnlinePayment||!1};r.password||delete r.password,Z(r)}),children:[(0,u.jsx)(C.A,{sx:{borderBottom:1,borderColor:"divider",mb:3,width:"100%",minWidth:0,overflow:"hidden"},children:(0,u.jsxs)(P.A,{value:oe,onChange:(e,r)=>{ne(r)},variant:"scrollable",scrollButtons:"auto",sx:{width:"100%",minWidth:0,"& .MuiTab-root":{minHeight:48,textTransform:"none",fontSize:"14px",fontWeight:500},"& .MuiTabs-scroller":{width:"100%"}},children:[(0,u.jsx)(S.A,{icon:(0,u.jsx)(N,{}),iconPosition:"start",label:"Asosiy ma'lumotlar"}),(0,u.jsx)(S.A,{icon:(0,u.jsx)(q,{}),iconPosition:"start",label:"Manzil"}),(0,u.jsx)(S.A,{icon:(0,u.jsx)(E,{}),iconPosition:"start",label:"Narxlar va vaqt"}),(0,u.jsx)(S.A,{icon:(0,u.jsx)(H,{}),iconPosition:"start",label:"Tavsif"}),(0,u.jsx)(S.A,{icon:(0,u.jsx)(W,{}),iconPosition:"start",label:"Sozlamalar"})]})}),0===oe&&(0,u.jsx)(C.A,{sx:{width:"100%",minWidth:0},children:(0,u.jsxs)(y.Ay,{container:!0,spacing:2,alignItems:"center",children:[(0,u.jsx)(y.Ay,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,u.jsx)(o.ks,{control:l,name:"name",label:"Do'kon/Restoran nomi",placeholder:"Masalan: Uygaayt Do'kon",rules:{required:!0}})}),(0,u.jsx)(y.Ay,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,u.jsx)(o.LR,{control:l,name:"phoneNumber",label:i("common.phoneNumber"),rules:{required:!0}})}),!t&&(0,u.jsx)(y.Ay,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,u.jsx)(o.ks,{control:l,name:"password",type:"password",label:"Parol",rules:{required:!t,minLength:{value:4,message:"Parol kamida 4 ta belgi bo'lishi kerak"}},placeholder:"Parol kiriting (min 4 belgi)"})}),t&&(0,u.jsx)(y.Ay,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,u.jsx)(o.ks,{control:l,name:"password",type:"password",label:"Yangi parol (ixtiyoriy)",rules:{required:!1,minLength:{value:4,message:"Parol kamida 4 ta belgi bo'lishi kerak"}},placeholder:"Parolni yangilash uchun kiriting"})}),(0,u.jsx)(y.Ay,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,u.jsx)(o.ks,{control:l,name:"email",type:"email",label:"Email",placeholder:"Masalan: info@store.uz",rules:{required:!1}})}),(0,u.jsx)(y.Ay,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,u.jsx)(o.ks,{control:l,name:"website",type:"url",label:"Veb-sayt URL",placeholder:"Masalan: https://www.store.uz",rules:{required:!1}})}),(0,u.jsx)(y.Ay,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,u.jsx)(o.RZ,{control:l,name:"type",label:"Turi",options:[{_id:"shop",name:"Do'kon"},{_id:"restaurant",name:"Restoran"}],rules:{required:!0}})}),(0,u.jsx)(y.Ay,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,u.jsx)(o.r6,{control:l,name:"categoryIds",optionsUrl:"category/paging",label:"Toifalar",returnOnlyId:!0,rules:{required:!1},multiple:!0})}),(0,u.jsxs)(y.Ay,{item:!0,xs:12,children:[(0,u.jsx)(I.A,{sx:{mb:2,fontWeight:600,fontSize:"16px"},children:"Rasmlar"}),(0,u.jsxs)(y.Ay,{container:!0,spacing:2,children:[(0,u.jsxs)(y.Ay,{item:!0,xs:12,md:6,children:[(0,u.jsx)(I.A,{sx:{mb:1,fontWeight:500},children:"Logo rasm"}),(0,u.jsx)(o.ME,{control:l,setValue:x,name:"logoImage",rules:{required:!1},getImage:e=>{A(e)}}),g&&(0,u.jsxs)(T.A,{size:"small",color:"error",fullWidth:!0,sx:{mt:1},onClick:()=>{A(null),x("logoImage",void 0)},children:[(0,u.jsx)(V.A,{})," O'chirish"]})]}),(0,u.jsxs)(y.Ay,{item:!0,xs:12,md:6,children:[(0,u.jsx)(I.A,{sx:{mb:1,fontWeight:500},children:"Banner rasm"}),(0,u.jsx)(o.ME,{control:l,setValue:x,name:"bannerImage",rules:{required:!1},getImage:e=>{b(e)}}),v&&(0,u.jsxs)(T.A,{size:"small",color:"error",fullWidth:!0,sx:{mt:1},onClick:()=>{b(null),x("bannerImage",void 0)},children:[(0,u.jsx)(V.A,{})," O'chirish"]})]})]})]})]})}),1===oe&&(0,u.jsx)(C.A,{sx:{width:"100%",minWidth:0},children:(0,u.jsxs)(y.Ay,{container:!0,spacing:2,alignItems:"centert",children:[(0,u.jsx)(y.Ay,{item:!0,xs:12,children:(0,u.jsx)(o.ks,{control:l,name:"addressName",label:i("common.address"),placeholder:"Masalan: Toshkent shahar, Chilonzor tumani, Bunyodkor ko'chasi",rules:{required:!1},onCustomChange:e=>U(e)})}),(0,u.jsxs)(y.Ay,{item:!0,xs:12,children:[(0,u.jsx)(I.A,{sx:{mb:1,fontWeight:600},children:"Xarita (Manzilni belgilash)"}),(0,u.jsx)(M.A,{getCoordinate:L,center:m("addressLocation"),height:"400px"})]})]})}),2===oe&&(0,u.jsx)(C.A,{sx:{width:"100%",minWidth:0},children:(0,u.jsxs)(y.Ay,{container:!0,spacing:2,alignItems:"centert",children:[(0,u.jsx)(y.Ay,{item:!0,xs:12,children:(0,u.jsx)(I.A,{sx:{mb:2,fontWeight:600,fontSize:"16px"},children:"Narxlar"})}),(0,u.jsx)(y.Ay,{item:!0,xs:12,md:4,sx:{display:"flex",flexDirection:"column"},children:(0,u.jsx)(o.ks,{control:l,name:"orderMinimumPrice",type:"number",label:"Minimal buyurtma narxi (so'm)",placeholder:"Masalan: 50000",rules:{required:!1}})}),(0,u.jsx)(y.Ay,{item:!0,xs:12,md:4,sx:{display:"flex",flexDirection:"column"},children:(0,u.jsx)(o.ks,{control:l,name:"deliveryPrice",type:"number",label:"Yetkazib berish narxi (so'm)",placeholder:"Masalan: 15000",rules:{required:!1}})}),(0,u.jsx)(y.Ay,{item:!0,xs:12,md:4,sx:{display:"flex",flexDirection:"column"},children:(0,u.jsx)(o.ks,{control:l,name:"averageRating",type:"number",label:"O'rtacha reyting (0-5)",placeholder:"Masalan: 4.5",rules:{required:!1,min:0,max:5}})}),(0,u.jsx)(y.Ay,{item:!0,xs:12,children:(0,u.jsx)(z.A,{sx:{my:3}})}),(0,u.jsx)(y.Ay,{item:!0,xs:12,children:(0,u.jsx)(I.A,{sx:{mb:2,fontWeight:600,fontSize:"16px"},children:"Tayyorlash vaqti"})}),(0,u.jsx)(y.Ay,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,u.jsx)(o.ks,{control:l,name:"itemPrepTimeFrom",type:"number",label:"Tayyorlash vaqti (minut) - dan",placeholder:"Masalan: 15",rules:{required:!1}})}),(0,u.jsx)(y.Ay,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,u.jsx)(o.ks,{control:l,name:"itemPrepTimeTo",type:"number",label:"Tayyorlash vaqti (minut) - gacha",placeholder:"Masalan: 30",rules:{required:!1}})}),(0,u.jsx)(y.Ay,{item:!0,xs:12,children:(0,u.jsx)(z.A,{sx:{my:3}})}),(0,u.jsx)(y.Ay,{item:!0,xs:12,children:(0,u.jsx)(I.A,{sx:{mb:2,fontWeight:600,fontSize:"16px"},children:"Ish vaqti"})}),(0,u.jsx)(y.Ay,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,u.jsx)(D.A,{control:l,name:"startTime",errors:p.errors,label:"Ish vaqti (boshlanish)",rules:{required:!1}})}),(0,u.jsx)(y.Ay,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,u.jsx)(D.A,{control:l,name:"endTime",errors:p.errors,label:"Ish vaqti (tugash)",rules:{required:!1}})}),(0,u.jsx)(y.Ay,{item:!0,xs:12,children:(0,u.jsx)(z.A,{sx:{my:3}})}),(0,u.jsxs)(y.Ay,{item:!0,xs:12,children:[(0,u.jsx)(I.A,{sx:{mb:2,fontWeight:600,fontSize:"16px"},children:"Hafta kunlari"}),X.map((e,r)=>(0,u.jsxs)(y.Ay,{container:!0,spacing:2,sx:{mt:1},children:[(0,u.jsx)(y.Ay,{item:!0,xs:12,md:3,children:(0,u.jsx)(o.RZ,{control:l,name:"workDays.".concat(r,".day"),label:"Kun",options:se.map(e=>({_id:e.value.toString(),name:e.label})),rules:{required:!0}})}),(0,u.jsx)(y.Ay,{item:!0,xs:12,md:3,children:(0,u.jsx)(D.A,{control:l,name:"workDays.".concat(r,".startTime"),label:"Boshlanish",errors:p.errors,rules:{required:!0}})}),(0,u.jsx)(y.Ay,{item:!0,xs:12,md:3,children:(0,u.jsx)(D.A,{control:l,name:"workDays.".concat(r,".endTime"),label:"Tugash",errors:p.errors,rules:{required:!0}})}),(0,u.jsx)(y.Ay,{item:!0,xs:12,md:2,children:(0,u.jsx)(C.A,{sx:{pt:2},children:(0,u.jsx)(o.Sc,{control:l,name:"workDays.".concat(r,".isWorking"),label:"Ishlaydi"})})}),(0,u.jsx)(y.Ay,{item:!0,xs:12,md:1,children:(0,u.jsx)(C.A,{sx:{pt:1},children:(0,u.jsx)(T.A,{color:"error",onClick:()=>Q(r),size:"small",children:(0,u.jsx)(V.A,{})})})})]},e.id)),(0,u.jsx)(T.A,{variant:"outlined",startIcon:(0,u.jsx)(_,{}),onClick:()=>K({day:0,startTime:"09:00",endTime:"18:00",isWorking:!0}),sx:{mt:2},children:"Kun qo'shish"})]})]})}),3===oe&&(0,u.jsx)(C.A,{sx:{width:"100%",minWidth:0},children:(0,u.jsxs)(y.Ay,{container:!0,spacing:2,alignItems:"centert",children:[(0,u.jsxs)(y.Ay,{item:!0,xs:12,children:[(0,u.jsx)(I.A,{sx:{mb:1,fontWeight:600},children:"Asosiy tavsif"}),(0,u.jsx)(F.A,{value:m("description")||"",onChange:e=>x("description",e)})]}),(0,u.jsx)(y.Ay,{item:!0,xs:12,children:(0,u.jsx)(z.A,{sx:{my:3}})}),(0,u.jsx)(y.Ay,{item:!0,xs:12,children:(0,u.jsx)(I.A,{sx:{mb:2,fontWeight:600,fontSize:"16px"},children:"Ko'p tilli tavsif"})}),(0,u.jsxs)(y.Ay,{item:!0,xs:12,md:4,children:[(0,u.jsx)(I.A,{sx:{mb:1},children:"O'zbekcha"}),(0,u.jsx)(F.A,{value:m("descriptionTranslate.uz")||"",onChange:e=>x("descriptionTranslate.uz",e)})]}),(0,u.jsxs)(y.Ay,{item:!0,xs:12,md:4,children:[(0,u.jsx)(I.A,{sx:{mb:1},children:"Ruscha"}),(0,u.jsx)(F.A,{value:m("descriptionTranslate.ru")||"",onChange:e=>x("descriptionTranslate.ru",e)})]}),(0,u.jsxs)(y.Ay,{item:!0,xs:12,md:4,children:[(0,u.jsx)(I.A,{sx:{mb:1},children:"Inglizcha"}),(0,u.jsx)(F.A,{value:m("descriptionTranslate.en")||"",onChange:e=>x("descriptionTranslate.en",e)})]})]})}),4===oe&&(0,u.jsx)(C.A,{sx:{width:"100%",minWidth:0},children:(0,u.jsxs)(y.Ay,{container:!0,spacing:2,alignItems:"centert",children:[(0,u.jsxs)(y.Ay,{item:!0,xs:12,children:[(0,u.jsx)(I.A,{sx:{mb:2,fontWeight:600,fontSize:"16px"},children:"To'lov usullari"}),(0,u.jsxs)(y.Ay,{container:!0,spacing:2,children:[(0,u.jsx)(y.Ay,{item:!0,children:(0,u.jsx)(o.Sc,{control:l,name:"acceptCard",label:"Karta"})}),(0,u.jsx)(y.Ay,{item:!0,children:(0,u.jsx)(o.Sc,{control:l,name:"acceptCash",label:"Naqd"})}),(0,u.jsx)(y.Ay,{item:!0,children:(0,u.jsx)(o.Sc,{control:l,name:"acceptOnlinePayment",label:"Onlayn to'lov"})})]})]}),(0,u.jsx)(y.Ay,{item:!0,xs:12,children:(0,u.jsx)(z.A,{sx:{my:3}})}),(0,u.jsxs)(y.Ay,{item:!0,xs:12,children:[(0,u.jsx)(I.A,{sx:{mb:2,fontWeight:600,fontSize:"16px"},children:"Statuslar"}),(0,u.jsxs)(y.Ay,{container:!0,spacing:2,children:[(0,u.jsx)(y.Ay,{item:!0,children:(0,u.jsx)(o.Sc,{control:l,name:"isActive",label:"Faol"})}),(0,u.jsx)(y.Ay,{item:!0,children:(0,u.jsx)(o.Sc,{control:l,name:"isVerified",label:"Tasdiqlangan"})}),(0,u.jsx)(y.Ay,{item:!0,children:(0,u.jsx)(o.Sc,{control:l,name:"isPremium",label:"Premium"})})]})]})]})})]})},O=()=>{const e=(0,v.L)(),r=(0,g.j)(),{t:t}=(0,a.Bd)(),d=(0,j.mN)(),c=(0,s.Zp)(),[x,C]=(0,h.useState)(),[P,S]=(0,h.useState)(""),[I,T]=(0,h.useState)(null),[z,F]=(0,h.useState)(null),{mutate:D}=(0,w.L2)("store/activate","put",{onSuccess(){k.oR.success(t("general.success"))},onError(){k.oR.error("Xatolik yuz berdi")}}),M=((e,r,t,s)=>{const{t:o}=(0,a.Bd)();return[{field:"ID",headerName:"ID",width:80,renderCell(e){let{row:r}=e;return(0,i.get)(r,"_id","").slice(-4)||(0,i.get)(r,"id","")}},{field:o("common.name"),headerName:"Do'kon nomi",flex:1,minWidth:250,renderCell(e){let{row:r}=e;const t=(0,i.get)(r,"name",""),s=(null===t||void 0===t?void 0:t.length)>40?"".concat(t.substring(0,40),"..."):t;return(0,u.jsx)(n.A,{title:t,arrow:!0,children:(0,u.jsx)("span",{style:{fontWeight:500},children:s})})}},{field:"type",headerName:"Turi",width:130,renderCell(e){let{row:r}=e;const t=(0,i.get)(r,"type",""),s=(0,i.get)(r,"categoryId",""),o=(0,i.get)(r,"category","");let n="",a="#6B7280";return"shop"===t||"store"===s||"Do'kon"===o?(n="Do'kon",a="#10B981"):"restaurant"===t||"restaurant"===s||"Restoran"===o?(n="Restoran",a="#EF4444"):n=t||o||"-",(0,u.jsx)(l.A,{label:n,sx:{backgroundColor:a,color:"white",fontWeight:600,fontSize:"0.75rem"},size:"small"})}},{field:"phoneNumber",headerName:"Telefon",width:150,renderCell(e){let{row:r}=e;const t=(0,i.get)(r,"phoneNumber","-");return(0,u.jsx)(n.A,{title:t,arrow:!0,children:(0,u.jsx)("span",{children:t})})}},{field:"status",headerName:"Status",width:130,renderCell(e){let{row:r}=e;const t=(0,i.get)(r,"isActive",!1),s=!t&&(0,i.get)(r,"isInReview",!1);let o="Nofaol",n="error";return t?(o="Faol",n="success"):s&&(o="Tekshiruvda",n="warning"),(0,u.jsx)(l.A,{label:o,color:n,size:"small",sx:{fontWeight:600}})}},{field:"actions",headerName:"Amal",width:100,align:"center",headerAlign:"center",sortable:!1,filterable:!1,disableColumnMenu:!0,renderCell(o){let{row:n}=o;return(0,u.jsx)(p,{row:n,onView:e,onEdit:r,onDelete:t,onActivate:s})}}]})(e=>{c("/stores_restaurants/".concat(e._id))},e("storeUpdate")?e=>{C(e._id),r((0,A.GF)(!0))}:void 0,e("store")?e=>(e=>{S(e)})(e._id):void 0,e=>{window.confirm("".concat(e.name," do'konini aktivlashtirmoqchimisiz?"))&&D({_id:e._id,isActive:!e.isActive})}),R=(0,h.useMemo)(()=>({isActive:d.watch("isActiveQuery")||void 0,categoryId:d.watch("categoryId")||void 0,orderSort:d.watch("orderSort")||void 0}),[d.watch("isActiveQuery"),d.watch("categoryId"),d.watch("orderSort")]),B=(0,u.jsxs)(y.Ay,{className:"lg:w-[80%] w-full flex flex-wrap gap-2 items-center mt-2 ml-2 pb-2",children:[(0,u.jsx)(y.Ay,{item:!0,children:(0,u.jsx)(o.Sc,{control:d.control,label:t("enum.active"),name:"isActiveQuery"})}),(0,u.jsx)(y.Ay,{item:!0,children:(0,u.jsxs)(b.A,{style:{width:"150px",paddingBlock:"4px",borderRadius:"10px"},size:"small",value:d.watch("orderSort")||"",onChange:e=>d.setValue("orderSort",e.target.value),displayEmpty:!0,children:[d.watch("orderSort")&&(0,u.jsx)(m.A,{value:"",children:"Tozalash"}),!d.watch("orderSort")&&(0,u.jsx)(m.A,{value:"",hidden:!0,disabled:!0,children:"Buyurtma soni"}),(0,u.jsx)(m.A,{value:"mostActive",children:"Eng faol"}),(0,u.jsx)(m.A,{value:"leastActive",children:"Eng kam"})]})}),(0,u.jsx)(y.Ay,{item:!0,children:(0,u.jsx)(o.Bt,{optionsUrl:"category/paging",filterName:"categoryId",placeholder:t("common.category"),onChange:()=>{}})}),(0,u.jsx)(y.Ay,{item:!0,children:(0,u.jsx)(o.NV,{url:"/store/export",extraParams:R})})]}),N=()=>{C(null),T(null),F(null),d.reset({name:"",phoneNumber:"",password:"",email:"",website:"",addressName:"",addressLocation:null,type:"shop",categoryIds:[],orderMinimumPrice:"",deliveryPrice:"",itemPrepTimeFrom:"",itemPrepTimeTo:"",startTime:"",endTime:"",workDays:[],description:"",descriptionTranslate:{uz:"",ru:"",en:""},isActive:!0,isVerified:!1,isPremium:!1,averageRating:0,acceptCash:!1,acceptCard:!1,acceptOnlinePayment:!1,isActiveQuery:d.watch("isActiveQuery"),categoryId:d.watch("categoryId"),orderSort:d.watch("orderSort")})};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.XI,{columns:M,dataUrl:"store/paging",searchable:!0,headerChildren:B,onAddButton:e("store")?()=>r((0,A.GF)(!0)):void 0,onEditColumn:e("storeUpdate")?e=>{C(e._id),r((0,A.GF)(!0))}:void 0,onRowClick:e=>{c("/stores_restaurants/".concat(e._id))},exQueryParams:R,mapData:e=>e||[]}),P&&(0,u.jsx)(f.A,{open:P,setOpen:S,url:"store/delete"}),(0,u.jsx)(o.wA,{FORM_ID:"store",isEditing:!!x,customTitle:x?"Do'konni tahrirlash":"Do'kon qo'shish",onClose:N,children:(0,u.jsx)(L,{formStore:d,editingStoreId:x,resetForm:N,storeProps:{logoImage:I,setLogoImage:T,bannerImage:z,setBannerImage:F}})})]})},U=()=>(0,u.jsx)(O,{});var Y=t(63336),X=t(81045),K=t(85865),Q=t(26494),Z=t(19042),G=t(69974);const J=(0,B.A)((0,u.jsx)("path",{d:"M20 2H4c-1 0-2 .9-2 2v3.01c0 .72.43 1.34 1 1.69V20c0 1.1 1.1 2 2 2h14c.9 0 2-.9 2-2V8.7c.57-.35 1-.97 1-1.69V4c0-1.1-1-2-2-2m-5 12H9v-2h6zm5-7H4V4l16-.02z"}),"Inventory");var $=t(85812),ee=t(95720);const re="stores_restaurants_local",te=()=>{try{const e=localStorage.getItem(re);return e?JSON.parse(e):[]}catch(e){return console.error("Error reading stores from localStorage:",e),[]}};var se=t(77739);const oe=e=>{let{storeInfoData:r,storeId:t,onStatusChange:o}=e;const{state:{data:n}}=(0,ee.A)(),{t:i}=(0,a.Bd)(),d=(0,s.Zp)(),{mutate:c}=(0,w.L2)("store/activate","put",{onSuccess(){k.oR.success(i("general.success")),null===o||void 0===o||o()},onError(){k.oR.error("Xatolik yuz berdi")}}),m=null!==t&&void 0!==t&&t.startsWith("store_")?te().find(e=>e._id===t):null===r||void 0===r?void 0:r.data,x=null!==t&&void 0!==t&&t.startsWith("store_")?0:(null===m||void 0===m?void 0:m.totalProducts)||0;if(!m)return(0,u.jsx)("div",{children:"Yuklanmoqda..."});const h=m.logoId?"".concat("http://46.101.209.158:3003/v1","/image/").concat(m.logoId):void 0;return(0,u.jsxs)(Y.A,{elevation:3,sx:{borderRadius:4,overflow:"hidden"},children:[(0,u.jsxs)(C.A,{sx:{background:m.isActive?"linear-gradient(135deg, #EB7B00 0%, #EB5B00 100%)":"linear-gradient(135deg, #FFA500 0%, #FF8C00 100%)",pt:6,pb:8,px:4,textAlign:"center",color:"white",position:"relative"},children:[(0,u.jsx)(X.A,{src:h,sx:{width:120,height:120,mx:"auto",border:"4px solid white",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.05)"}},children:(0,u.jsx)(N,{sx:{fontSize:60}})}),(0,u.jsx)(K.A,{variant:"h4",sx:{mt:2,fontWeight:"bold"},children:m.name}),(0,u.jsxs)(C.A,{sx:{mt:2,display:"flex",justifyContent:"center",gap:1},children:[(0,u.jsx)(l.A,{label:m.isActive?"\u2705 Faol":"\ud83d\udfe5 Nofaol",sx:{backgroundColor:m.isActive?"rgba(255,255,255,0.3)":"rgba(255,255,255,0.2)",color:"white",fontWeight:"bold"}}),(0,u.jsx)(l.A,{label:"Do'kon"===m.category||"store"===m.categoryId?"Do'kon":"Restoran",sx:{backgroundColor:"rgba(255,255,255,0.3)",color:"white",fontWeight:"bold"}})]})]}),(0,u.jsx)(Q.A,{sx:{backgroundColor:"white",borderRadius:"20px 20px 0 0",px:4,py:3},children:(0,u.jsxs)(C.A,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,u.jsxs)(C.A,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"#F7FAFC",borderRadius:2,transition:"transform 0.2s ease","&:hover":{transform:"translateX(8px)"}},children:[(0,u.jsx)(G.A,{style:{fontSize:20,color:"#EB5B00"}}),(0,u.jsx)(K.A,{variant:"body1",color:"text.primary",children:m.phoneNumber})]}),m.addressName&&(0,u.jsxs)(C.A,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"#F7FAFC",borderRadius:2,transition:"transform 0.2s ease","&:hover":{transform:"translateX(8px)"}},children:[(0,u.jsx)(q,{style:{fontSize:20,color:"#EB5B00"}}),(0,u.jsx)(K.A,{variant:"body1",color:"text.primary",children:m.addressName})]}),void 0!==m.commissionPercent&&m.commissionPercent>0&&(0,u.jsx)(se.A,{title:"Platforma ulushi: ".concat(m.commissionPercent,"% | Do'kon daromadi: 100% - ").concat(m.commissionPercent,"% = ").concat(100-m.commissionPercent,"%"),arrow:!0,children:(0,u.jsxs)(C.A,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"#F7FAFC",borderRadius:2,cursor:"help"},children:[(0,u.jsx)(E,{style:{fontSize:20,color:"#EB5B00"}}),(0,u.jsxs)(K.A,{variant:"body1",color:"text.primary",children:["Komissiya: ",m.commissionPercent,"%"]})]})}),(0,u.jsxs)(C.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:2,p:2,backgroundColor:"#F7FAFC",borderRadius:2},children:[(0,u.jsxs)(C.A,{sx:{display:"flex",alignItems:"center",gap:2,cursor:"pointer","&:hover":{opacity:.7}},onClick:()=>d("/product?storeId=".concat(t)),children:[(0,u.jsx)(J,{style:{fontSize:20,color:"#EB5B00"}}),(0,u.jsxs)(K.A,{variant:"body1",color:"text.primary",children:["Tovarlar soni: ",x]})]}),(0,u.jsx)(T.A,{variant:"contained",startIcon:(0,u.jsx)($.A,{}),onClick:()=>d("/product?storeId=".concat(t)),sx:{backgroundColor:"#EB5B00","&:hover":{backgroundColor:"#EB7B00"}},children:"Tovarlar"})]}),(0,u.jsxs)(C.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,backgroundColor:"#F7FAFC",borderRadius:2,mt:2},children:[(0,u.jsx)(K.A,{variant:"body1",fontWeight:"bold",children:"Holatni o'zgartirish:"}),(0,u.jsx)(Z.A,{checked:m.isActive||!1,onChange:e=>{const r=e.target.checked;if(null!==t&&void 0!==t&&t.startsWith("store_")){const e=te(),s=e.find(e=>e._id===t);s&&(s.isActive=r,s.updatedAt=(new Date).toISOString(),localStorage.setItem("stores_restaurants_local",JSON.stringify(e)),k.oR.success(r?"Do'kon aktivlashtirildi!":"Do'kon nofaol qilindi!"),null===o||void 0===o||o())}else r&&c({id:t})},color:"primary"})]})]})})]})};var ne=t(89379),ie=t(80045);const ae=(0,B.A)((0,u.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}),"History"),le=(0,B.A)((0,u.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M9 17H7v-5h2zm4 0h-2v-3h2zm0-5h-2v-2h2zm4 5h-2V7h2z"}),"Analytics"),de=(0,B.A)((0,u.jsx)("path",{d:"M4 10h3v7H4zm6.5 0h3v7h-3zM2 19h20v3H2zm15-9h3v7h-3zm-5-9L2 6v2h20V6z"}),"AccountBalance"),ce=(0,B.A)((0,u.jsx)("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download");var me=t(72824),xe=t(60446),he=t.n(xe),ue=t(19504),pe=t(79650),ge=t(71806),Ae=t(84882),je=t(28076),ve=t(10039),ye=t(73460);const be=(0,B.A)((0,u.jsx)("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp"),fe=(0,B.A)((0,u.jsx)("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V8h16z"}),"CalendarToday"),we=e=>{let{storeId:r,store:t}=e;const{t:s}=(0,a.Bd)(),n=(0,ue.A)(),[i,l]=(0,h.useState)(null),{mutate:d,data:c}=(0,w.L2)("store/accounting","post",{});(0,h.useEffect)(()=>{r&&n.dateFrom&&n.dateTo&&d({storeId:r,dateFrom:n.dateFrom,dateTo:n.dateTo})},[r,n.dateFrom,n.dateTo]),(0,h.useEffect)(()=>{null!==c&&void 0!==c&&c.data&&l(c.data)},[c]);if(!t)return(0,u.jsx)("div",{children:"Yuklanmoqda..."});const m=i||{totalPaid:0,weeklyPayments:[],monthlyPayments:[],platformCommission:0,storeRevenue:0},x=t.commissionPercent||0,p=m.totalPaid*(x/100),g=m.totalPaid-p;return(0,u.jsxs)(C.A,{sx:{p:3},children:[(0,u.jsxs)(C.A,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,u.jsxs)(K.A,{variant:"h4",fontWeight:"bold",children:["Hisob-kitoblar - ",t.name]}),(0,u.jsxs)(C.A,{sx:{display:"flex",gap:2},children:[(0,u.jsx)(T.A,{variant:"outlined",startIcon:(0,u.jsx)(ce,{}),onClick:()=>{console.log("Exporting PDF for store:",r)},children:"PDF"}),(0,u.jsx)(T.A,{variant:"outlined",startIcon:(0,u.jsx)(ce,{}),onClick:()=>{console.log("Exporting Excel for store:",r)},children:"Excel"})]})]}),(0,u.jsx)(C.A,{sx:{mb:3},children:(0,u.jsx)(o.wT,{})}),(0,u.jsxs)(y.Ay,{container:!0,spacing:3,sx:{mb:3},children:[(0,u.jsx)(y.Ay,{item:!0,xs:12,md:6,children:(0,u.jsxs)(Y.A,{sx:{p:3,backgroundColor:"#F7FAFC",borderRadius:2},children:[(0,u.jsxs)(C.A,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[(0,u.jsx)(E,{style:{fontSize:24,color:"#EB5B00"}}),(0,u.jsx)(K.A,{variant:"h6",children:"To'langan summalar"})]}),(0,u.jsxs)(K.A,{variant:"h4",color:"primary",fontWeight:"bold",children:[(0,me.j)(m.totalPaid||0)," ",s("common.symbol")]})]})}),(0,u.jsx)(y.Ay,{item:!0,xs:12,md:6,children:(0,u.jsxs)(Y.A,{sx:{p:3,backgroundColor:"#F7FAFC",borderRadius:2},children:[(0,u.jsxs)(C.A,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[(0,u.jsx)(be,{style:{fontSize:24,color:"#EB5B00"}}),(0,u.jsx)(K.A,{variant:"h6",children:"Platforma ulushi"})]}),(0,u.jsxs)(K.A,{variant:"h4",color:"primary",fontWeight:"bold",children:[(0,me.j)(p)," ",s("common.symbol")]}),(0,u.jsxs)(K.A,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["(",x,"% komissiya)"]})]})}),(0,u.jsx)(y.Ay,{item:!0,xs:12,md:6,children:(0,u.jsxs)(Y.A,{sx:{p:3,backgroundColor:"#F7FAFC",borderRadius:2},children:[(0,u.jsxs)(C.A,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[(0,u.jsx)(E,{style:{fontSize:24,color:"#10B981"}}),(0,u.jsx)(K.A,{variant:"h6",children:"Do'kon daromadi"})]}),(0,u.jsxs)(K.A,{variant:"h4",color:"success.main",fontWeight:"bold",children:[(0,me.j)(g)," ",s("common.symbol")]}),(0,u.jsxs)(K.A,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["(100% - ",x,"% = ",100-x,"%)"]})]})})]}),(0,u.jsxs)(y.Ay,{container:!0,spacing:3,children:[(0,u.jsx)(y.Ay,{item:!0,xs:12,md:6,children:(0,u.jsxs)(Y.A,{sx:{p:3,borderRadius:2},children:[(0,u.jsxs)(C.A,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[(0,u.jsx)(fe,{style:{fontSize:24,color:"#EB5B00"}}),(0,u.jsx)(K.A,{variant:"h6",fontWeight:"bold",children:"Haftalik to'lov hisoboti"})]}),(0,u.jsx)(pe.A,{children:(0,u.jsxs)(ge.A,{size:"small",children:[(0,u.jsx)(Ae.A,{children:(0,u.jsxs)(je.A,{children:[(0,u.jsx)(ve.A,{children:"Hafta"}),(0,u.jsx)(ve.A,{align:"right",children:"Summa"})]})}),(0,u.jsx)(ye.A,{children:m.weeklyPayments&&m.weeklyPayments.length>0?m.weeklyPayments.map((e,r)=>(0,u.jsxs)(je.A,{children:[(0,u.jsx)(ve.A,{children:e.week||"Hafta ".concat(r+1)}),(0,u.jsxs)(ve.A,{align:"right",children:[(0,me.j)(e.amount||0)," ",s("common.symbol")]})]},r)):(0,u.jsx)(je.A,{children:(0,u.jsx)(ve.A,{colSpan:2,align:"center",children:"Ma'lumot yo'q"})})})]})})]})}),(0,u.jsx)(y.Ay,{item:!0,xs:12,md:6,children:(0,u.jsxs)(Y.A,{sx:{p:3,borderRadius:2},children:[(0,u.jsxs)(C.A,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[(0,u.jsx)(fe,{style:{fontSize:24,color:"#EB5B00"}}),(0,u.jsx)(K.A,{variant:"h6",fontWeight:"bold",children:"Oylik to'lov hisoboti"})]}),(0,u.jsx)(pe.A,{children:(0,u.jsxs)(ge.A,{size:"small",children:[(0,u.jsx)(Ae.A,{children:(0,u.jsxs)(je.A,{children:[(0,u.jsx)(ve.A,{children:"Oy"}),(0,u.jsx)(ve.A,{align:"right",children:"Summa"})]})}),(0,u.jsx)(ye.A,{children:m.monthlyPayments&&m.monthlyPayments.length>0?m.monthlyPayments.map((e,r)=>(0,u.jsxs)(je.A,{children:[(0,u.jsx)(ve.A,{children:e.month||"Oy ".concat(r+1)}),(0,u.jsxs)(ve.A,{align:"right",children:[(0,me.j)(e.amount||0)," ",s("common.symbol")]})]},r)):(0,u.jsx)(je.A,{children:(0,u.jsx)(ve.A,{colSpan:2,align:"center",children:"Ma'lumot yo'q"})})})]})})]})})]})]})},ke=["children","value","index"];function Ce(e){const{children:r,value:t,index:s}=e,o=(0,ie.A)(e,ke);return(0,u.jsx)("div",(0,ne.A)((0,ne.A)({role:"tabpanel",hidden:t!==s,id:"store-tabpanel-".concat(s),"aria-labelledby":"store-tab-".concat(s)},o),{},{children:t===s&&(0,u.jsx)(C.A,{sx:{p:3},children:r})}))}const Pe=e=>{var r,t;let{storeId:n,store:i}=e;const[l,d]=(0,h.useState)(0),{t:c}=(0,a.Bd)(),m=(0,ue.A)(),{mutate:x,data:p}=((0,s.Zp)(),(0,w.L2)("order/paging","post",{})),{mutate:g,data:A}=(0,w.L2)("store/statistics","post",{});(0,h.useEffect)(()=>{0===l&&n&&x({storeId:n,dateFrom:m.dateFrom,dateTo:m.dateTo})},[l,m.dateFrom,m.dateTo,n]),(0,h.useEffect)(()=>{1===l&&n&&g({storeId:n,dateFrom:m.dateFrom,dateTo:m.dateTo})},[l,m.dateFrom,m.dateTo,n]);const j=e=>{console.log("Exporting store ".concat(n," as ").concat(e))},v=(null===p||void 0===p||null===(r=p.data)||void 0===r?void 0:r.data)||[],b=(null===A||void 0===A?void 0:A.data)||{},f=v.length>0?null===(t=v[0])||void 0===t?void 0:t.createdAt:i.lastOrderDate;return(0,u.jsxs)(Y.A,{elevation:3,sx:{borderRadius:4,overflow:"hidden",flex:1},children:[(0,u.jsx)(C.A,{sx:{borderBottom:1,borderColor:"divider"},children:(0,u.jsxs)(P.A,{value:l,onChange:(e,r)=>{d(r)},"aria-label":"store tabs",sx:{"& .MuiTab-root":{textTransform:"none",fontWeight:600},"& .Mui-selected":{color:"#EB5B00"}},children:[(0,u.jsx)(S.A,{icon:(0,u.jsx)(ae,{}),iconPosition:"start",label:"Buyurtmalar"}),(0,u.jsx)(S.A,{icon:(0,u.jsx)(le,{}),iconPosition:"start",label:"Statistika"}),(0,u.jsx)(S.A,{icon:(0,u.jsx)(de,{}),iconPosition:"start",label:"Hisob-kitoblar"})]})}),(0,u.jsxs)(Ce,{value:l,index:0,children:[(0,u.jsx)(C.A,{sx:{mb:3},children:(0,u.jsxs)(y.Ay,{container:!0,spacing:2,alignItems:"center",children:[(0,u.jsx)(y.Ay,{item:!0,children:(0,u.jsx)(o.wT,{})}),(0,u.jsx)(y.Ay,{item:!0,children:(0,u.jsx)(o.NV,{url:"/store/".concat(n,"/export"),extraParams:{dateFrom:m.dateFrom,dateTo:m.dateTo}})})]})}),(0,u.jsx)(C.A,{sx:{mb:2},children:(0,u.jsxs)(K.A,{variant:"h6",gutterBottom:!0,children:["Oxirgi buyurtma vaqti: ",f?he()(f).format("YYYY-MM-DD HH:mm"):"Hozircha buyurtma yo'q"]})}),(0,u.jsx)(o.XI,{columns:[{field:"id",headerName:"ID",width:100,renderCell:e=>{var r;let{row:t}=e;return(null===(r=t._id)||void 0===r?void 0:r.slice(-4))||t.id||"-"}},{field:"date",headerName:"Sana",flex:1,minWidth:150,renderCell:e=>{let{row:r}=e;return r.createdAt?he()(r.createdAt).format("YYYY-MM-DD HH:mm"):"-"}},{field:"amount",headerName:"Summa",flex:1,minWidth:120,renderCell:e=>{let{row:r}=e;return(0,me.j)(r.totalPrice||r.amount||0)+" "+c("common.symbol")}},{field:"status",headerName:"Status",width:150,renderCell:e=>{let{row:r}=e;return r.status||"-"}}],dataUrl:"order/paging",searchable:!1,exQueryParams:{storeId:n,dateFrom:m.dateFrom,dateTo:m.dateTo}})]}),(0,u.jsxs)(Ce,{value:l,index:1,children:[(0,u.jsx)(C.A,{sx:{mb:3},children:(0,u.jsx)(o.wT,{})}),(0,u.jsxs)(y.Ay,{container:!0,spacing:3,children:[(0,u.jsx)(y.Ay,{item:!0,xs:12,md:6,children:(0,u.jsxs)(Y.A,{sx:{p:3,backgroundColor:"#F7FAFC",borderRadius:2},children:[(0,u.jsx)(K.A,{variant:"h6",gutterBottom:!0,children:"Kunlik buyurtmalar"}),(0,u.jsx)(K.A,{variant:"h4",color:"primary",children:b.dailyOrders||0})]})}),(0,u.jsx)(y.Ay,{item:!0,xs:12,md:6,children:(0,u.jsxs)(Y.A,{sx:{p:3,backgroundColor:"#F7FAFC",borderRadius:2},children:[(0,u.jsx)(K.A,{variant:"h6",gutterBottom:!0,children:"Haftalik buyurtmalar"}),(0,u.jsx)(K.A,{variant:"h4",color:"primary",children:b.weeklyOrders||0})]})}),(0,u.jsx)(y.Ay,{item:!0,xs:12,children:(0,u.jsxs)(Y.A,{sx:{p:3,backgroundColor:"#F7FAFC",borderRadius:2},children:[(0,u.jsxs)(C.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,u.jsx)(K.A,{variant:"h6",children:"Umumiy daromad"}),(0,u.jsxs)(C.A,{sx:{display:"flex",gap:2},children:[(0,u.jsx)(T.A,{variant:"outlined",startIcon:(0,u.jsx)(ce,{}),onClick:()=>j("excel"),children:"Excel"}),(0,u.jsx)(T.A,{variant:"outlined",startIcon:(0,u.jsx)(ce,{}),onClick:()=>j("pdf"),children:"PDF"})]})]}),(0,u.jsxs)(K.A,{variant:"h4",color:"primary",children:[(0,me.j)(b.totalRevenue||i.totalRevenue||0)," ",c("common.symbol")]})]})})]})]}),(0,u.jsx)(Ce,{value:l,index:2,children:(0,u.jsx)(we,{storeId:n,store:i})})]})},Se=()=>{const{id:e}=(0,s.g)(),{data:r,status:t}=(0,w.gf)("store/get-by-id/".concat(e),{},{enabled:!!e,suspense:!1}),o=null===r||void 0===r?void 0:r.data;return(0,u.jsx)(u.Fragment,{children:e&&o&&(0,u.jsxs)(y.Ay,{className:"grid lg:flex gap-4 p-2",children:[(0,u.jsx)(oe,{storeInfoData:r,storeId:e,onStatusChange:()=>{}}),(0,u.jsx)(Pe,{storeId:e,store:o})]})})},Ie=()=>(0,u.jsxs)(s.BV,{children:[(0,u.jsx)(s.qh,{path:":id",element:(0,u.jsx)(Se,{})}),(0,u.jsx)(s.qh,{path:"*",element:(0,u.jsx)(U,{})})]})},98082:(e,r,t)=>{var s=t(24994);r.A=void 0;var o=s(t(40039)),n=t(70579);r.A=(0,o.default)((0,n.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert")}}]);
//# sourceMappingURL=965.223a2087.chunk.js.map