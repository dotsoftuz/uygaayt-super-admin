{"version":3,"file":"static/js/95.9ab36052.chunk.js","mappings":"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","sources":["pages/employee/components/EmployeeForm.tsx","pages/employee/container/Employee.tsx","pages/employee/index.tsx","pages/employee/container/employee.columns.tsx"],"sourcesContent":["import { FC, useEffect, useState } from \"react\";\r\nimport { Grid } from \"@mui/material\";\r\nimport {\r\n  AutoCompleteForm,\r\n  MainButton,\r\n  PhoneInput,\r\n  TextInput,\r\n} from \"components\";\r\nimport { UseFormReturn } from \"react-hook-form\";\r\nimport { useApi, useApiMutation } from \"hooks/useApi/useApiHooks\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\ninterface IEmployeesForm {\r\n  formStore: UseFormReturn<any>;\r\n  editingEmployeeId?: any;\r\n  resetForm: () => void;\r\n}\r\nconst EmployeeFrom: FC<IEmployeesForm> = ({\r\n  formStore,\r\n  editingEmployeeId,\r\n  resetForm,\r\n}) => {\r\n  const { t } = useTranslation();\r\n  const { control, handleSubmit, reset, watch } = formStore;\r\n  const [checkData, setCheckData] = useState<any>();\r\n\r\n  // const { } = useApi(\r\n  //   `employee/check?phoneNumber=${watch(\"phoneNumber\")}`,\r\n  //   {},\r\n  //   {\r\n  //     enabled: watch(\"phoneNumber\")?.length > 12 && !editingEmployeeId,\r\n  //     suspense: false,\r\n  //     onSuccess({ data }) {\r\n  //       setCheckData(data);\r\n  //     },\r\n  //   }\r\n  // );\r\n\r\n  const { mutate, status } = useApiMutation(\r\n    editingEmployeeId ? `employee/update` : \"employee/create\",\r\n    editingEmployeeId ? \"put\" : \"post\"\r\n  );\r\n\r\n  const { data: getByIdData, status: getByIdStatus } = useApi(`employee/get-by-id/${editingEmployeeId}`, {}, {\r\n    enabled: !!editingEmployeeId,\r\n    suspense: false\r\n  })\r\n\r\n  useEffect(() => {\r\n    if (status === \"success\") {\r\n      resetForm();\r\n    }\r\n  }, [status]);\r\n\r\n  const submit = (data: any) => {\r\n    mutate({\r\n      _id: editingEmployeeId,\r\n      ...data,\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (getByIdStatus === 'success') {\r\n      reset({\r\n        ...getByIdData.data,\r\n        roleId: getByIdData.data.role?._id,\r\n      });\r\n    }\r\n  }, [getByIdData, getByIdStatus]);\r\n\r\n  return (\r\n    <div className=\"custom-drawer\">\r\n      <form id=\"employee\" onSubmit={handleSubmit(submit)}>\r\n        <Grid container spacing={2}>\r\n          <Grid item md={12}>\r\n            <PhoneInput\r\n              control={control}\r\n              name=\"phoneNumber\"\r\n              label={t(\"common.phoneNumber\")}\r\n            />\r\n            {checkData?._id && !editingEmployeeId && (\r\n              <div className=\"d-flex justify-content-between\">\r\n                <span className=\"text-error mt-2\">\r\n                  {t(\"common.alreadyExistEmployee\")}\r\n                </span>\r\n                <MainButton\r\n                  title={t(\"general.add\")}\r\n                  onClick={() => {\r\n                    reset({\r\n                      ...checkData,\r\n                      _id: undefined,\r\n                    });\r\n                    setCheckData(null);\r\n                  }}\r\n                />\r\n              </div>\r\n            )}\r\n          </Grid>\r\n          <Grid item md={12}>\r\n            <TextInput\r\n              control={control}\r\n              name=\"firstName\"\r\n              label={t(\"common.firstName\")}\r\n            />\r\n          </Grid>\r\n          <Grid item md={12}>\r\n            <TextInput\r\n              control={control}\r\n              name=\"lastName\"\r\n              label={t(\"common.lastName\")}\r\n            />\r\n          </Grid>\r\n          <Grid item md={12}>\r\n            <TextInput\r\n              control={control}\r\n              name=\"password\"\r\n              label={t(\"common.password\")}\r\n              type=\"password\"\r\n              rules={{ required: false }}\r\n            />\r\n          </Grid>\r\n          <Grid item md={12}>\r\n            <AutoCompleteForm\r\n              name=\"roleId\"\r\n              control={control}\r\n              optionsUrl=\"role/paging\"\r\n              dataProp=\"data.data\"\r\n              label={t(\"common.role\")}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EmployeeFrom;\r\n","import { FormDrawer, Table } from \"components\";\r\nimport { useMemo, useState } from \"react\";\r\nimport { useEmployeeColumns } from \"./employee.columns\";\r\nimport { useAppDispatch } from \"../../../store/storeHooks\";\r\nimport { setOpenDrawer } from \"components/elements/FormDrawer/formdrawer.slice\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport EmployeeFrom from \"../components/EmployeeForm\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useRoleManager } from \"services/useRoleManager\";\r\nimport WarningModal from \"components/common/WarningModal/WarningModal\";\r\n\r\nconst Employee = () => {\r\n  const [editingEmployeeId, setEditingEmployeeId] = useState<any>();\r\n  const [employeeId, setEmployeeId] = useState<any>();\r\n  const columns = useEmployeeColumns();\r\n  const hasAccess = useRoleManager();\r\n  const { t } = useTranslation();\r\n  const dis = useAppDispatch();\r\n  const formStore = useForm<any>();\r\n\r\n  const resetForm = () => {\r\n    setEditingEmployeeId(undefined);\r\n    formStore.reset({\r\n      firstName: \"\",\r\n      lastName: \"\",\r\n      phoneNumber: \"\",\r\n      password: \"\",\r\n      roleId: \"\",\r\n    });\r\n  };\r\n\r\n  const queryParams = useMemo(() => ({}), []);\r\n\r\n  return (\r\n    <>\r\n      <Table\r\n        dataUrl=\"employee/paging\"\r\n        columns={columns}\r\n        searchable\r\n        onAddButton={hasAccess('employeeCreate') ? () => dis(setOpenDrawer(true)) : undefined}\r\n        onEditColumn={hasAccess('employeeUpdate') ? (row) => {\r\n          setEditingEmployeeId(row._id);\r\n          dis(setOpenDrawer(true));\r\n        } : undefined}\r\n        onDeleteColumn={hasAccess('employeeDelete') ? (row) => setEmployeeId(row._id) : undefined}\r\n        exQueryParams={queryParams}\r\n      />\r\n      <WarningModal open={employeeId} setOpen={setEmployeeId} url=\"employee/delete\" />\r\n      <FormDrawer\r\n        FORM_ID=\"employee\"\r\n        isEditing={!!editingEmployeeId}\r\n        customTitle={t(\"general.addEmployee\")}\r\n        onClose={resetForm}\r\n      >\r\n        <EmployeeFrom\r\n          formStore={formStore}\r\n          resetForm={resetForm}\r\n          editingEmployeeId={editingEmployeeId}\r\n        />\r\n      </FormDrawer>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Employee;\r\n","import Employee from \"./container/Employee\";\r\n\r\nexport default Employee;\r\n","import { GridColumns } from \"@mui/x-data-grid\";\r\nimport { get } from \"lodash\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nexport const useEmployeeColumns = (): GridColumns => {\r\n  const { t } = useTranslation();\r\n\r\n  return [\r\n    {\r\n      field: t(\"common.fullName\"),\r\n      renderCell(params) {\r\n        return get(params, 'row.firstName', '') + \" \" + get(params, 'row.lastName', '');\r\n      },\r\n      flex: 1.5\r\n    },\r\n    {\r\n      field: t(\"common.phoneNumber\"),\r\n      renderCell(params) {\r\n        return params.row.phoneNumber;\r\n      },\r\n    },\r\n    {\r\n      field: t(\"common.role\"),\r\n      renderCell(params) {\r\n        return params.row.role?.name;\r\n      },\r\n    },\r\n  ];\r\n};\r\n"],"names":["_ref","formStore","editingEmployeeId","resetForm","t","useTranslation","control","handleSubmit","reset","watch","checkData","setCheckData","useState","mutate","status","useApiMutation","data","getByIdData","getByIdStatus","useApi","concat","enabled","suspense","useEffect","_getByIdData$data$rol","_objectSpread","roleId","role","_id","_jsx","className","children","id","onSubmit","_jsxs","Grid","container","spacing","item","md","PhoneInput","name","label","MainButton","title","onClick","undefined","TextInput","type","rules","required","AutoCompleteForm","optionsUrl","dataProp","Employee","setEditingEmployeeId","employeeId","setEmployeeId","columns","useEmployeeColumns","field","renderCell","params","get","flex","row","phoneNumber","_params$row$role","hasAccess","useRoleManager","dis","useAppDispatch","useForm","firstName","lastName","password","queryParams","useMemo","_Fragment","Table","dataUrl","searchable","onAddButton","setOpenDrawer","onEditColumn","onDeleteColumn","exQueryParams","WarningModal","open","setOpen","url","FormDrawer","FORM_ID","isEditing","customTitle","onClose","EmployeeFrom"],"sourceRoot":""}