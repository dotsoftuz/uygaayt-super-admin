{"version":3,"file":"static/js/172.b636ffea.chunk.js","mappings":"sSAwIA,EAvHyC,SAAH,GAI/B,IAHLA,EAAS,EAATA,UACAC,EAAiB,EAAjBA,kBACAC,EAAS,EAATA,UAEQC,GAAMC,EAAAA,EAAAA,MAAND,EACAE,EAAwCL,EAAxCK,QAASC,EAA+BN,EAA/BM,aAAcC,EAAiBP,EAAjBO,MAC/B,GADgDP,EAAVQ,OACJC,EAAAA,EAAAA,aAAe,eAA1CC,EAAS,KAAEC,EAAY,KAc9B,GAA2BC,EAAAA,EAAAA,IACzBX,EAAiB,kBAAuB,kBACxCA,EAAoB,MAAQ,QAFtBY,EAAM,EAANA,OAAQC,EAAM,EAANA,OAKhB,GAAqDC,EAAAA,EAAAA,IAAO,sBAAD,OAAuBd,GAAqB,CAAC,EAAG,CACzGe,UAAWf,EACXgB,UAAU,IAFEC,EAAW,EAAjBC,KAA2BC,EAAa,EAArBN,QAK3BO,EAAAA,EAAAA,YAAU,WACO,YAAXP,GACFZ,GAEJ,GAAG,CAACY,IAkBJ,OATAO,EAAAA,EAAAA,YAAU,WAC0B,IAAD,EAAX,YAAlBD,GACFb,GAAM,kBACDW,EAAYC,MAAI,IACnBG,OAA6B,QAAvB,EAAEJ,EAAYC,KAAKI,YAAI,aAArB,EAAuBC,MAGrC,GAAG,CAACN,EAAaE,KAGf,gBAAKK,UAAU,gBAAe,UAC5B,iBAAMC,GAAG,WAAWC,SAAUrB,GAlBnB,SAACa,GACdN,GAAO,QACLW,IAAKvB,GACFkB,GAEP,IAauD,UACjD,UAACS,EAAA,GAAI,CAACC,WAAS,EAACC,QAAS,EAAE,WACzB,UAACF,EAAA,GAAI,CAACG,MAAI,EAACC,GAAI,GAAG,WAChB,SAAC,KAAU,CACT3B,QAASA,EACT4B,KAAK,cACLC,MAAO/B,EAAE,yBAED,OAATO,QAAS,IAATA,OAAS,EAATA,EAAWc,OAAQvB,IAClB,iBAAKwB,UAAU,iCAAgC,WAC7C,iBAAMA,UAAU,kBAAiB,SAC9BtB,EAAE,kCAEL,SAAC,KAAU,CACTgC,MAAOhC,EAAE,eACTiC,QAAS,WACP7B,GAAM,kBACDG,GAAS,IACZc,SAAKa,KAEP1B,EAAa,KACf,WAKR,SAACiB,EAAA,GAAI,CAACG,MAAI,EAACC,GAAI,GAAG,UAChB,SAAC,KAAS,CACR3B,QAASA,EACT4B,KAAK,YACLC,MAAO/B,EAAE,yBAGb,SAACyB,EAAA,GAAI,CAACG,MAAI,EAACC,GAAI,GAAG,UAChB,SAAC,KAAS,CACR3B,QAASA,EACT4B,KAAK,WACLC,MAAO/B,EAAE,wBAGb,SAACyB,EAAA,GAAI,CAACG,MAAI,EAACC,GAAI,GAAG,UAChB,SAAC,KAAS,CACR3B,QAASA,EACT4B,KAAK,WACLC,MAAO/B,EAAE,mBACTmC,KAAK,WACLC,MAAO,CAAEC,UAAU,QAGvB,SAACZ,EAAA,GAAI,CAACG,MAAI,EAACC,GAAI,GAAG,UAChB,SAAC,KAAgB,CACfC,KAAK,SACL5B,QAASA,EACToC,WAAW,cACXC,SAAS,YACTR,MAAO/B,EAAE,yBAOvB,E,sBCpIA,ECSiB,WACf,OAAkDM,EAAAA,EAAAA,YAAe,eAA1DR,EAAiB,KAAE0C,EAAoB,KAC9C,GAAoClC,EAAAA,EAAAA,YAAe,eAA5CmC,EAAU,KAAEC,EAAa,KAC1BC,ECV0B,WAChC,IAAQ3C,GAAMC,EAAAA,EAAAA,MAAND,EAER,MAAO,CACL,CACE4C,MAAO5C,EAAE,mBACT6C,WAAU,SAACC,GACT,OAAOC,EAAAA,EAAAA,KAAID,EAAQ,gBAAiB,IAAM,KAAMC,EAAAA,EAAAA,KAAID,EAAQ,eAAgB,GAC9E,EACAE,KAAM,KAER,CACEJ,MAAO5C,EAAE,sBACT6C,WAAU,SAACC,GACT,OAAOA,EAAOG,IAAIC,WACpB,GAEF,CACEN,MAAO5C,EAAE,eACT6C,WAAU,SAACC,GAAS,IAAD,EACjB,OAAsB,QAAtB,EAAOA,EAAOG,IAAI7B,YAAI,aAAf,EAAiBU,IAC1B,GAGN,CDdkBqB,GACVC,GAAYC,EAAAA,EAAAA,KACVrD,GAAMC,EAAAA,EAAAA,MAAND,EACFsD,GAAMC,EAAAA,EAAAA,KACN1D,GAAY2D,EAAAA,EAAAA,MAEZzD,EAAY,WAChByC,OAAqBN,GACrBrC,EAAUO,MAAM,CACdqD,UAAW,GACXC,SAAU,GACVR,YAAa,GACbS,SAAU,GACVxC,OAAQ,IAEZ,EAEMyC,GAAcC,EAAAA,EAAAA,UAAQ,iBAAO,CAAC,CAAC,GAAG,IAExC,OACE,iCACE,SAAC,KAAK,CACJC,QAAQ,kBACRnB,QAASA,EACToB,YAAU,EACVC,YAAaZ,EAAU,kBAAoB,kBAAME,GAAIW,EAAAA,EAAAA,KAAc,GAAM,OAAG/B,EAC5EgC,aAAcd,EAAU,kBAAoB,SAACH,GAC3CT,EAAqBS,EAAI5B,KACzBiC,GAAIW,EAAAA,EAAAA,KAAc,GACpB,OAAI/B,EACJiC,eAAgBf,EAAU,kBAAoB,SAACH,GAAG,OAAKP,EAAcO,EAAI5B,IAAI,OAAGa,EAChFkC,cAAeR,KAEjB,SAACS,EAAA,EAAY,CAACC,KAAM7B,EAAY8B,QAAS7B,EAAe8B,IAAI,qBAC5D,SAAC,KAAU,CACTC,QAAQ,WACRC,YAAa5E,EACb6E,YAAa3E,EAAE,uBACf4E,QAAS7E,EAAU,UAEnB,SAAC,EAAY,CACXF,UAAWA,EACXE,UAAWA,EACXD,kBAAmBA,QAK7B,C","sources":["pages/employee/components/EmployeeForm.tsx","pages/employee/index.tsx","pages/employee/container/Employee.tsx","pages/employee/container/employee.columns.tsx"],"sourcesContent":["import { FC, useEffect, useState } from \"react\";\nimport { Grid } from \"@mui/material\";\nimport {\n  AutoCompleteForm,\n  MainButton,\n  PhoneInput,\n  TextInput,\n} from \"components\";\nimport { UseFormReturn } from \"react-hook-form\";\nimport { useApi, useApiMutation } from \"hooks/useApi/useApiHooks\";\nimport { useTranslation } from \"react-i18next\";\n\ninterface IEmployeesForm {\n  formStore: UseFormReturn<any>;\n  editingEmployeeId?: any;\n  resetForm: () => void;\n}\nconst EmployeeFrom: FC<IEmployeesForm> = ({\n  formStore,\n  editingEmployeeId,\n  resetForm,\n}) => {\n  const { t } = useTranslation();\n  const { control, handleSubmit, reset, watch } = formStore;\n  const [checkData, setCheckData] = useState<any>();\n\n  // const { } = useApi(\n  //   `employee/check?phoneNumber=${watch(\"phoneNumber\")}`,\n  //   {},\n  //   {\n  //     enabled: watch(\"phoneNumber\")?.length > 12 && !editingEmployeeId,\n  //     suspense: false,\n  //     onSuccess({ data }) {\n  //       setCheckData(data);\n  //     },\n  //   }\n  // );\n\n  const { mutate, status } = useApiMutation(\n    editingEmployeeId ? `employee/update` : \"employee/create\",\n    editingEmployeeId ? \"put\" : \"post\"\n  );\n\n  const { data: getByIdData, status: getByIdStatus } = useApi(`employee/get-by-id/${editingEmployeeId}`, {}, {\n    enabled: !!editingEmployeeId,\n    suspense: false\n  })\n\n  useEffect(() => {\n    if (status === \"success\") {\n      resetForm();\n    }\n  }, [status]);\n\n  const submit = (data: any) => {\n    mutate({\n      _id: editingEmployeeId,\n      ...data,\n    });\n  };\n\n  useEffect(() => {\n    if (getByIdStatus === 'success') {\n      reset({\n        ...getByIdData.data,\n        roleId: getByIdData.data.role?._id,\n      });\n    }\n  }, [getByIdData, getByIdStatus]);\n\n  return (\n    <div className=\"custom-drawer\">\n      <form id=\"employee\" onSubmit={handleSubmit(submit)}>\n        <Grid container spacing={2}>\n          <Grid item md={12}>\n            <PhoneInput\n              control={control}\n              name=\"phoneNumber\"\n              label={t(\"common.phoneNumber\")}\n            />\n            {checkData?._id && !editingEmployeeId && (\n              <div className=\"d-flex justify-content-between\">\n                <span className=\"text-error mt-2\">\n                  {t(\"common.alreadyExistEmployee\")}\n                </span>\n                <MainButton\n                  title={t(\"general.add\")}\n                  onClick={() => {\n                    reset({\n                      ...checkData,\n                      _id: undefined,\n                    });\n                    setCheckData(null);\n                  }}\n                />\n              </div>\n            )}\n          </Grid>\n          <Grid item md={12}>\n            <TextInput\n              control={control}\n              name=\"firstName\"\n              label={t(\"common.firstName\")}\n            />\n          </Grid>\n          <Grid item md={12}>\n            <TextInput\n              control={control}\n              name=\"lastName\"\n              label={t(\"common.lastName\")}\n            />\n          </Grid>\n          <Grid item md={12}>\n            <TextInput\n              control={control}\n              name=\"password\"\n              label={t(\"common.password\")}\n              type=\"password\"\n              rules={{ required: false }}\n            />\n          </Grid>\n          <Grid item md={12}>\n            <AutoCompleteForm\n              name=\"roleId\"\n              control={control}\n              optionsUrl=\"role/paging\"\n              dataProp=\"data.data\"\n              label={t(\"common.role\")}\n            />\n          </Grid>\n        </Grid>\n      </form>\n    </div>\n  );\n}\n\nexport default EmployeeFrom;\n","import Employee from \"./container/Employee\";\n\nexport default Employee;\n","import { FormDrawer, Table } from \"components\";\nimport { useMemo, useState } from \"react\";\nimport { useEmployeeColumns } from \"./employee.columns\";\nimport { useAppDispatch } from \"../../../store/storeHooks\";\nimport { setOpenDrawer } from \"components/elements/FormDrawer/formdrawer.slice\";\nimport { useForm } from \"react-hook-form\";\nimport EmployeeFrom from \"../components/EmployeeForm\";\nimport { useTranslation } from \"react-i18next\";\nimport { useRoleManager } from \"services/useRoleManager\";\nimport WarningModal from \"components/common/WarningModal/WarningModal\";\n\nconst Employee = () => {\n  const [editingEmployeeId, setEditingEmployeeId] = useState<any>();\n  const [employeeId, setEmployeeId] = useState<any>();\n  const columns = useEmployeeColumns();\n  const hasAccess = useRoleManager();\n  const { t } = useTranslation();\n  const dis = useAppDispatch();\n  const formStore = useForm<any>();\n\n  const resetForm = () => {\n    setEditingEmployeeId(undefined);\n    formStore.reset({\n      firstName: \"\",\n      lastName: \"\",\n      phoneNumber: \"\",\n      password: \"\",\n      roleId: \"\",\n    });\n  };\n\n  const queryParams = useMemo(() => ({}), []);\n\n  return (\n    <>\n      <Table\n        dataUrl=\"employee/paging\"\n        columns={columns}\n        searchable\n        onAddButton={hasAccess('employeeCreate') ? () => dis(setOpenDrawer(true)) : undefined}\n        onEditColumn={hasAccess('employeeUpdate') ? (row) => {\n          setEditingEmployeeId(row._id);\n          dis(setOpenDrawer(true));\n        } : undefined}\n        onDeleteColumn={hasAccess('employeeDelete') ? (row) => setEmployeeId(row._id) : undefined}\n        exQueryParams={queryParams}\n      />\n      <WarningModal open={employeeId} setOpen={setEmployeeId} url=\"employee/delete\" />\n      <FormDrawer\n        FORM_ID=\"employee\"\n        isEditing={!!editingEmployeeId}\n        customTitle={t(\"general.addEmployee\")}\n        onClose={resetForm}\n      >\n        <EmployeeFrom\n          formStore={formStore}\n          resetForm={resetForm}\n          editingEmployeeId={editingEmployeeId}\n        />\n      </FormDrawer>\n    </>\n  );\n};\n\nexport default Employee;\n","import { GridColumns } from \"@mui/x-data-grid\";\nimport { get } from \"lodash\";\nimport { useTranslation } from \"react-i18next\";\n\nexport const useEmployeeColumns = (): GridColumns => {\n  const { t } = useTranslation();\n\n  return [\n    {\n      field: t(\"common.fullName\"),\n      renderCell(params) {\n        return get(params, 'row.firstName', '') + \" \" + get(params, 'row.lastName', '');\n      },\n      flex: 1.5\n    },\n    {\n      field: t(\"common.phoneNumber\"),\n      renderCell(params) {\n        return params.row.phoneNumber;\n      },\n    },\n    {\n      field: t(\"common.role\"),\n      renderCell(params) {\n        return params.row.role?.name;\n      },\n    },\n  ];\n};\n"],"names":["formStore","editingEmployeeId","resetForm","t","useTranslation","control","handleSubmit","reset","watch","useState","checkData","setCheckData","useApiMutation","mutate","status","useApi","enabled","suspense","getByIdData","data","getByIdStatus","useEffect","roleId","role","_id","className","id","onSubmit","Grid","container","spacing","item","md","name","label","title","onClick","undefined","type","rules","required","optionsUrl","dataProp","setEditingEmployeeId","employeeId","setEmployeeId","columns","field","renderCell","params","get","flex","row","phoneNumber","useEmployeeColumns","hasAccess","useRoleManager","dis","useAppDispatch","useForm","firstName","lastName","password","queryParams","useMemo","dataUrl","searchable","onAddButton","setOpenDrawer","onEditColumn","onDeleteColumn","exQueryParams","WarningModal","open","setOpen","url","FORM_ID","isEditing","customTitle","onClose"],"sourceRoot":""}