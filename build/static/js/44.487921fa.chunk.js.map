{"version":3,"file":"static/js/44.487921fa.chunk.js","mappings":"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","sources":["pages/category/components/CategoryForm.tsx","pages/category/container/Category.tsx","pages/category/container/category.columns.tsx","pages/category/index.tsx","pages/category/info/CategoryChildForm.tsx","pages/category/info/CategoryChild.tsx","pages/category/info/categoryChild.columns.tsx","utils/numberFormat.ts"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { Grid } from \"@mui/material\";\r\nimport { AutoCompleteForm, ImageInput, TextInput } from \"components\";\r\nimport { UseFormReturn } from \"react-hook-form\";\r\nimport { useApi, useApiMutation } from \"hooks/useApi/useApiHooks\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\ninterface IBranchForm {\r\n  formStore: UseFormReturn<any>;\r\n  resetForm: () => void;\r\n  editingCategoryId?: any;\r\n  setRender?: React.Dispatch<React.SetStateAction<boolean>>;\r\n\r\n}\r\n\r\nconst CategoryForm: React.FC<IBranchForm> = ({\r\n  formStore,\r\n  resetForm,\r\n  editingCategoryId,\r\n  setRender,\r\n}) => {\r\n  const { t } = useTranslation();\r\n  const { control, handleSubmit, reset, setValue } = formStore;\r\n\r\n  const { mutate, status } = useApiMutation<any>(\r\n    editingCategoryId\r\n      ? `category/update`\r\n      : \"category/create\",\r\n    editingCategoryId ? \"put\" : \"post\",\r\n  );\r\n\r\n  const { data: getByIdData, status: getByIdStatus } = useApi(`category/get-by-id/${editingCategoryId}`, {}, {\r\n    enabled: !!editingCategoryId,\r\n    suspense: false\r\n  })\r\n\r\n  const sumbit = (data: any) => {\r\n    mutate({\r\n      ...data,\r\n      imageId: data.imageId?._id,\r\n      _id: editingCategoryId,\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (status === \"success\") {\r\n      resetForm();\r\n      setRender?.(prev => !prev);\r\n    }\r\n  }, [status]);\r\n\r\n  useEffect(() => {\r\n    if (getByIdStatus === 'success'  && getByIdData?.data) {\r\n      reset({\r\n        name: getByIdData.data.name,\r\n        imageId: getByIdData.data.image,\r\n      });\r\n    }\r\n  }, [getByIdStatus, getByIdData]);\r\n\r\n  return (\r\n    <div className=\"custom-drawer\">\r\n      <form id=\"category\" onSubmit={handleSubmit(sumbit)}>\r\n        <Grid container spacing={2}>\r\n          <Grid item md={12}>\r\n            <TextInput name=\"name.uz\" control={control} label={t(\"common.name\") + ' (Uz)'} />\r\n          </Grid>\r\n          <Grid item md={12}>\r\n            <TextInput name=\"name.ru\" control={control} label={t(\"common.name\") + ' (Ru)'} />\r\n          </Grid>\r\n          <Grid item md={12}>\r\n            <TextInput name=\"name.en\" control={control} label={t(\"common.name\") + ' (En)'} />\r\n          </Grid>\r\n          <Grid item md={12}>\r\n            <label className=\"py-2\" htmlFor=\"\">{t('general.recommendation_img')}</label><br /><br />\r\n            <ImageInput\r\n              control={control}\r\n              setValue={setValue}\r\n              name=\"imageId\"\r\n              accept=\".png, .jpg, .jpeg\"\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CategoryForm;\r\n","import { DragTable, FormDrawer, Table } from \"components\";\r\nimport { useCategoryCol } from \"./category.columns\";\r\nimport { useAppDispatch } from \"store/storeHooks\";\r\nimport { setOpenDrawer } from \"components/elements/FormDrawer/formdrawer.slice\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useState } from \"react\";\r\nimport CategoryForm from \"../components/CategoryForm\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport WarningModal from \"components/common/WarningModal/WarningModal\";\r\nimport { useRoleManager } from \"services/useRoleManager\";\r\n\r\nconst Category = () => {\r\n  const [render, setRender] = useState<boolean>(false);\r\n  // const columns = useCategoryColumns();\r\n  const [editingCategoryId, setEditingCategoryId] = useState<any>();\r\n  const [categoryId, setCategoryId] = useState<any>();\r\n  const columnsDrag = useCategoryCol({ setEditingCategoryId, setCategoryId });\r\n  const dis = useAppDispatch();\r\n  const { t } = useTranslation();\r\n  const formStore = useForm<any>();\r\n  const hasAccess = useRoleManager();\r\n\r\n  const resetForm = () => {\r\n    setEditingCategoryId(undefined);\r\n    formStore.reset({\r\n      name: { uz: \"\", ru: \"\", en: \"\" },\r\n      imageId: \"\",\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* <Table\r\n        columns={columns}\r\n        dataUrl=\"category/product\"\r\n        searchable\r\n        onAddButton={() => dis(setOpenDrawer(true))}\r\n        onEditColumn={(row) => {\r\n          setEditingCategoryId(row._id);\r\n          dis(setOpenDrawer(true));\r\n        }}\r\n        onDeleteColumn={(row) => setCategoryId(row._id)}\r\n      /> */}\r\n\r\n      <DragTable\r\n        columns={columnsDrag}\r\n        dataUrl=\"/category/paging\"\r\n        dragUrl=\"/category/positions\"\r\n        dragKey=\"categoryIds\"\r\n        render={render}\r\n        setRender={setRender}\r\n        onAddButton={hasAccess(\"categoryCreate\") ? () => dis(setOpenDrawer(true)) : undefined}\r\n      />\r\n      <WarningModal\r\n        open={categoryId}\r\n        setOpen={setCategoryId}\r\n        setRender={setRender}\r\n        url=\"category/delete\"\r\n      />\r\n      <FormDrawer\r\n        FORM_ID=\"category\"\r\n        isEditing={!!editingCategoryId}\r\n        customTitle={t(\"general.addCategory\")}\r\n        onClose={resetForm}\r\n      >\r\n        <CategoryForm\r\n          formStore={formStore}\r\n          setRender={setRender}\r\n          resetForm={resetForm}\r\n          editingCategoryId={editingCategoryId}\r\n        />\r\n      </FormDrawer>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Category;\r\n","import { IconButton } from \"@mui/material\";\r\nimport { GridColumns } from \"@mui/x-data-grid\";\r\nimport { DeleteIcon } from \"assets/svgs\";\r\nimport { setOpenDrawer } from \"components/elements/FormDrawer/formdrawer.slice\";\r\nimport EditIcon from \"components/elements/Table/assets/EditIcon\";\r\nimport { get } from \"lodash\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useRoleManager } from \"services/useRoleManager\";\r\nimport { useAppDispatch } from \"store/storeHooks\";\r\nimport { numberFormat } from \"utils/numberFormat\";\r\n\r\nexport const useCategoryColumns = (): GridColumns => {\r\n  const { t } = useTranslation();\r\n\r\n  return [\r\n    {\r\n      field: t(\"common.categoryName\"),\r\n      renderCell({ row }) {\r\n        return get(row, \"name\", \"\");\r\n      },\r\n    },\r\n  ];\r\n};\r\n\r\ninterface IUseStoreCol {\r\n  setCategoryId?: React.Dispatch<React.SetStateAction<string>>;\r\n  setEditingCategoryId?: React.Dispatch<React.SetStateAction<string>>;\r\n}\r\n\r\nexport const useCategoryCol = ({\r\n  setCategoryId,\r\n  setEditingCategoryId,\r\n}: IUseStoreCol) => {\r\n  const dis = useAppDispatch();\r\n  const { t } = useTranslation();\r\n  const hasAccess = useRoleManager();\r\n  const navigate = useNavigate();\r\n  const currentLang = localStorage.getItem(\"i18nextLng\") || \"uz\";\r\n\r\n  return [\r\n    {\r\n      key: \"sort\",\r\n      width: \"5%\",\r\n    },\r\n    {\r\n      title: \"№\",\r\n      dataIndex: \"id\",\r\n      key: \"id\",\r\n      width: \"5%\",\r\n      render: (item: any, record: any, index: number) => <>{index + 1}</>,\r\n    },\r\n    {\r\n      title: t(\"common.categoryName\"),\r\n      dataIndex: \"name\",\r\n      key: \"name\",\r\n      render: (text: string, record: any) => (\r\n        <p style={{cursor: \"pointer\"}}\r\n          className=\"text-blue-600 hover:text-blue-800 font-medium\"\r\n          onClick={() => navigate(`/category_child?parentId=${record._id}`, { state: { categoryId: record._id } })}\r\n        > \r\n        {/* @ts-ignore */}\r\n          {text?.[currentLang]}\r\n        </p>\r\n      ),\r\n    },\r\n    {\r\n      title: t(\"common.product\") + \" soni\",\r\n      dataIndex: \"productCount\",\r\n      key: \"productCount\",\r\n      render: (text: string, record: any) => {\r\n        return numberFormat(text);\r\n      },\r\n    },\r\n    {\r\n      title: \"\",\r\n      render: (_: any, record: any) => {\r\n        return (\r\n          <div className=\"d-flex gap-2 justify-content-end\">\r\n            {hasAccess(\"categoryUpdate\") && (\r\n              <IconButton\r\n                onClick={() => {\r\n                  setEditingCategoryId?.(record?._id);\r\n                  dis(setOpenDrawer(true));\r\n                }}\r\n              >\r\n                <EditIcon />\r\n              </IconButton>\r\n            )}\r\n            {hasAccess(\"categoryDelete\") && (\r\n              <IconButton onClick={() => {\r\n                setCategoryId?.(record?._id)\r\n              }}>\r\n                <DeleteIcon />\r\n              </IconButton>\r\n            )}\r\n          </div>\r\n        );\r\n      },\r\n    },\r\n  ];\r\n};\r\n","import {Route, Routes } from \"react-router-dom\";\r\nimport Category from \"./container/Category\";\r\nimport CategoryChild from \"./info/CategoryChild\";\r\n\r\nconst index = () => {\r\n  return (\r\n    <Routes>\r\n      <Route path=\":id\" element={<CategoryChild />} />\r\n      <Route path=\"*\" element={<Category/>} />\r\n    </Routes>\r\n  );\r\n};\r\n\r\nexport default index;\r\n","import React, { useEffect } from \"react\";\r\nimport { Grid } from \"@mui/material\";\r\nimport { AutoCompleteForm, ImageInput, TextInput } from \"components\";\r\nimport { UseFormReturn } from \"react-hook-form\";\r\nimport { useApi, useApiMutation } from \"hooks/useApi/useApiHooks\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport useAllQueryParams from \"hooks/useGetAllQueryParams/useAllQueryParams\";\r\n\r\ninterface IBranchForm {\r\n  formStore: UseFormReturn<any>;\r\n  resetForm: () => void;\r\n  editingCategoryId?: any;\r\n  setRender?: React.Dispatch<React.SetStateAction<boolean>>;\r\n\r\n}\r\n\r\nconst CategoryChildForm: React.FC<IBranchForm> = ({\r\n  formStore,\r\n  resetForm,\r\n  editingCategoryId,\r\n  setRender,\r\n}) => {\r\n  const { t } = useTranslation();\r\n  const { control, handleSubmit, reset, setValue } = formStore;\r\n  const allParams = useAllQueryParams();\r\n\r\n\r\n  const { mutate, status } = useApiMutation<any>(\r\n    editingCategoryId\r\n      ? `category/update`\r\n      : \"category/create\",\r\n    editingCategoryId ? \"put\" : \"post\"\r\n  );\r\n\r\n  const { data: getByIdData, status: getByIdStatus } = useApi(`category/get-by-id/${editingCategoryId}`, {}, {\r\n    enabled: !!editingCategoryId,\r\n    suspense: false\r\n  })\r\n\r\n  const sumbit = (data: any) => {\r\n    mutate({\r\n      ...data,\r\n      imageId: data.imageId?._id,\r\n      _id: editingCategoryId,\r\n      parentId: allParams.parentId\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (status === \"success\") {\r\n      resetForm();\r\n      setRender?.(prev => !prev);\r\n    }\r\n  }, [status]);\r\n\r\n  useEffect(() => {\r\n    if (getByIdStatus === 'success') {\r\n      reset({\r\n        name: getByIdData.data.name,\r\n        imageId: getByIdData.data.image,\r\n      });\r\n    }\r\n  }, [getByIdStatus, getByIdData]);\r\n\r\n  return (\r\n    <div className=\"custom-drawer\">\r\n      <form id=\"category\" onSubmit={handleSubmit(sumbit)}>\r\n        <Grid container spacing={2}>\r\n          <Grid item md={12}>\r\n            <TextInput name=\"name.uz\" control={control} label={t(\"common.name\") + ' (Uz)'} />\r\n          </Grid>\r\n          <Grid item md={12}>\r\n            <TextInput name=\"name.ru\" control={control} label={t(\"common.name\") + ' (Ru)'} />\r\n          </Grid>\r\n          <Grid item md={12}>\r\n            <TextInput name=\"name.en\" control={control} label={t(\"common.name\") + ' (En)'} />\r\n          </Grid>\r\n          <Grid item md={12}>\r\n            <ImageInput\r\n              control={control}\r\n              setValue={setValue}\r\n              name=\"imageId\"\r\n              rules={{ required: false }}\r\n              accept=\".png, .jpg, .jpeg\"\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CategoryChildForm;\r\n","import { DragTable, FormDrawer, Table } from \"components\";\r\nimport { useCategoryCol, useCategoryColumns } from \"./categoryChild.columns\"\r\nimport { useAppDispatch } from \"store/storeHooks\";\r\nimport { setOpenDrawer } from \"components/elements/FormDrawer/formdrawer.slice\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useState } from \"react\";\r\nimport CategoryForm from \"../components/CategoryForm\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport WarningModal from \"components/common/WarningModal/WarningModal\";\r\nimport { useRoleManager } from \"services/useRoleManager\";\r\nimport useAllQueryParams from \"hooks/useGetAllQueryParams/useAllQueryParams\";\r\nimport CategoryChildForm from \"./CategoryChildForm\";\r\n\r\nconst CategoryChild = () => {\r\n  const [render, setRender] = useState<boolean>(false);\r\n  // const columns = useCategoryColumns();\r\n  const [editingCategoryId, setEditingCategoryId] = useState<any>();\r\n  const [categoryId, setCategoryId] = useState<any>();\r\n  const columnsDrag = useCategoryCol({ setEditingCategoryId, setCategoryId });\r\n  const dis = useAppDispatch();\r\n  const { t } = useTranslation();\r\n  const formStore = useForm<any>();\r\n  const hasAccess = useRoleManager();\r\n\r\n  const resetForm = () => {\r\n    setEditingCategoryId(undefined);\r\n    formStore.reset({\r\n      name: \"\",\r\n      imageId: \"\",\r\n    });\r\n  };\r\n\r\n  const allParams = useAllQueryParams();\r\n\r\n  return (\r\n    <>\r\n      {/* <Table\r\n        columns={columns}\r\n        dataUrl=\"category/product\"\r\n        searchable\r\n        onAddButton={() => dis(setOpenDrawer(true))}\r\n        onEditColumn={(row) => {\r\n          setEditingCategoryId(row._id);\r\n          dis(setOpenDrawer(true));\r\n        }}\r\n        onDeleteColumn={(row) => setCategoryId(row._id)}\r\n      /> */}\r\n\r\n      <DragTable\r\n        columns={columnsDrag}\r\n        dataUrl={`/category/paging`}\r\n        dragUrl=\"/category/positions\"\r\n        dragKey=\"categoryIds\"\r\n        render={render}\r\n        setRender={setRender}\r\n        onAddButton={() => dis(setOpenDrawer(true))}\r\n        exQueryParams={{\r\n          parentId: allParams.parentId,\r\n        }}\r\n      />\r\n      <WarningModal\r\n        open={categoryId}\r\n        setOpen={setCategoryId}\r\n        setRender={setRender}\r\n        url=\"category/delete\"\r\n      />\r\n      <FormDrawer\r\n        FORM_ID=\"category\"\r\n        isEditing={!!editingCategoryId}\r\n        customTitle={t(\"general.addCategory\")}\r\n        onClose={resetForm}\r\n      >\r\n        <CategoryChildForm\r\n          formStore={formStore}\r\n          setRender={setRender}\r\n          resetForm={resetForm}\r\n          editingCategoryId={editingCategoryId}\r\n        />\r\n      </FormDrawer>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CategoryChild;\r\n","import { IconButton } from \"@mui/material\";\r\nimport { GridColumns } from \"@mui/x-data-grid\";\r\nimport { DeleteIcon } from \"assets/svgs\";\r\nimport { setOpenDrawer } from \"components/elements/FormDrawer/formdrawer.slice\";\r\nimport EditIcon from \"components/elements/Table/assets/EditIcon\";\r\nimport { get } from \"lodash\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useRoleManager } from \"services/useRoleManager\";\r\nimport { useAppDispatch } from \"store/storeHooks\";\r\nimport { numberFormat } from \"utils/numberFormat\";\r\n\r\nexport const useCategoryColumns = (): GridColumns => {\r\n  const { t } = useTranslation();\r\n\r\n  return [\r\n    {\r\n      field: t(\"common.categoryName\"),\r\n      renderCell({ row }) {\r\n        return get(row, \"name\", \"\");\r\n      },\r\n    },\r\n  ];\r\n};\r\n\r\ninterface IUseStoreCol {\r\n  setCategoryId?: React.Dispatch<React.SetStateAction<string>>;\r\n  setEditingCategoryId?: React.Dispatch<React.SetStateAction<string>>;\r\n}\r\n\r\nexport const useCategoryCol = ({\r\n  setCategoryId,\r\n  setEditingCategoryId,\r\n}: IUseStoreCol) => {\r\n  const dis = useAppDispatch();\r\n  const { t } = useTranslation();\r\n  const hasAccess = useRoleManager();\r\n  const currentLang = localStorage.getItem(\"i18nextLng\") || \"uz\";\r\n\r\n  return [\r\n    {\r\n      key: \"sort\",\r\n      width: \"5%\",\r\n    },\r\n    {\r\n      title: \"№\",\r\n      dataIndex: \"id\",\r\n      key: \"id\",\r\n      width: \"5%\",\r\n      render: (item: any, record: any, index: number) => <>{index + 1}</>,\r\n    },\r\n    {\r\n      title: t(\"common.categoryName\"),\r\n      dataIndex: \"name\",\r\n      key: \"name\",\r\n      render: (text: string, record: any) => (\r\n          // @ts-ignore\r\n          text?.[currentLang]\r\n      ),\r\n    },\r\n    {\r\n      title: t(\"common.product\") + \" soni\",\r\n      dataIndex: \"productCount\",\r\n      key: \"productCount\",\r\n      render: (text: string, record: any) => {\r\n        return numberFormat(text);\r\n      },\r\n    },\r\n    {\r\n      title: \"\",\r\n      render: (_: any, record: any) => {\r\n        return (\r\n          <div className=\"d-flex gap-2 justify-content-end\">\r\n            {hasAccess(\"categoryCreate\") && (\r\n              <IconButton\r\n                onClick={() => {\r\n                  setEditingCategoryId?.(record?._id);\r\n                  dis(setOpenDrawer(true));\r\n                }}\r\n              >\r\n                <EditIcon />\r\n              </IconButton>\r\n            )}\r\n            {hasAccess(\"categoryDelete\") && (\r\n              <IconButton onClick={() => setCategoryId?.(record?._id)}>\r\n                <DeleteIcon />\r\n              </IconButton>\r\n            )}\r\n          </div>\r\n        );\r\n      },\r\n    },\r\n  ];\r\n};\r\n","export const numberFormat = (number: any) => {\r\n  if (number || number === 0) {\r\n    // Floating-point xatoliklarni oldini olish\r\n    const rounded = Math.round((number + Number.EPSILON) * 100) / 100;\r\n\r\n    return rounded\r\n      .toLocaleString(\"en-US\", {\r\n        minimumFractionDigits: 0, // Har doim 2 kasr\r\n        maximumFractionDigits: 0, // Kasr 2 dan oshmaydi\r\n      })\r\n      .replaceAll(\",\", \" \"); // Minglik ajratgich\r\n  }\r\n  return \"\";\r\n};\r\n"],"names":["_ref","formStore","resetForm","editingCategoryId","setRender","t","useTranslation","control","handleSubmit","reset","setValue","mutate","status","useApiMutation","data","getByIdData","getByIdStatus","useApi","concat","enabled","suspense","useEffect","prev","name","imageId","image","_jsx","className","children","id","onSubmit","_data$imageId","_objectSpread","_id","_jsxs","Grid","container","spacing","item","md","TextInput","label","htmlFor","ImageInput","accept","Category","render","useState","setEditingCategoryId","categoryId","setCategoryId","columnsDrag","_ref2","dis","useAppDispatch","hasAccess","useRoleManager","navigate","useNavigate","currentLang","localStorage","getItem","key","width","title","dataIndex","record","index","_Fragment","text","style","cursor","onClick","state","numberFormat","_","IconButton","setOpenDrawer","EditIcon","DeleteIcon","useCategoryCol","useForm","undefined","uz","ru","en","DragTable","columns","dataUrl","dragUrl","dragKey","onAddButton","WarningModal","open","setOpen","url","FormDrawer","FORM_ID","isEditing","customTitle","onClose","CategoryForm","Routes","Route","path","element","CategoryChild","allParams","useAllQueryParams","parentId","rules","required","exQueryParams","CategoryChildForm","number","Math","round","Number","EPSILON","toLocaleString","minimumFractionDigits","maximumFractionDigits","replaceAll"],"sourceRoot":""}