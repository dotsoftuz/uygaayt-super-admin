"use strict";(self.webpackChunkbestune_admin=self.webpackChunkbestune_admin||[]).push([[853],{40853:function(e,r,n){n.r(r),n.d(r,{default:function(){return ue}});var t,o=n(57689),i=n(1413),a=n(29439),l=n(45489),s=n(72791),d=n(763),c=n(39230),u=n(79405),m=n(36978),x=n(61134),f=n(29001),h=n(61889),v=n(94925),p=n(62750),g=n(80184),b=function(e){var r=e.formStore,n=e.editingCourierId,t=e.resetForm,o=e.productProps,d=(0,c.$G)().t,u=r.control,m=r.handleSubmit,x=r.reset,f=(r.watch,r.setValue),b=(0,s.useState)(),j=(0,a.Z)(b,2),Z=j[0],C=j[1],y=(o.courierImages,o.setCourierImages,o.mainImageId,o.setMainImageId,(0,p.uC)(n?"courier/update":"courier/create","post")),w=y.mutate,I=y.status,S=(0,p.h_)("courier/get-by-id/".concat(n),{},{enabled:!!n,suspense:!1}),k=S.data,B=S.status;(0,s.useEffect)((function(){"success"===I&&t()}),[I]);return(0,s.useEffect)((function(){"success"===B&&x((0,i.Z)((0,i.Z)({},k.data),{},{imageId:k.data.image}))}),[k,B]),(0,g.jsx)("div",{className:"custom-drawer",children:(0,g.jsx)("form",{id:"courier",onSubmit:m((function(e){var r;w((0,i.Z)((0,i.Z)({},e),{},{imageId:null===(r=e.imageId)||void 0===r?void 0:r._id,_id:n,carBrand:e.carBrand||"",carModel:e.carModel||"",carNumber:e.carNumber||"",carColor:e.carColor||""}))})),children:(0,g.jsxs)(h.ZP,{container:!0,spacing:2,children:[(0,g.jsxs)(h.ZP,{item:!0,md:12,children:[(0,g.jsx)(l.sb,{control:u,name:"phoneNumber",label:d("common.phoneNumber")}),(null===Z||void 0===Z?void 0:Z._id)&&!n&&(0,g.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,g.jsx)("span",{className:"text-error mt-2",children:d("common.alreadyExistEmployee")}),(0,g.jsx)(l.c7,{title:d("general.add"),onClick:function(){x((0,i.Z)((0,i.Z)({},Z),{},{_id:void 0})),C(null)}})]})]}),(0,g.jsx)(h.ZP,{item:!0,md:12,children:(0,g.jsx)(l.oi,{control:u,name:"firstName",label:d("common.firstName")})}),(0,g.jsx)(h.ZP,{item:!0,md:12,children:(0,g.jsx)(l.oi,{control:u,name:"lastName",label:d("common.lastName")})}),(0,g.jsx)(h.ZP,{item:!0,md:12,children:(0,g.jsx)(l.oi,{control:u,name:"password",label:d("common.password"),type:"password",rules:{required:!1}})}),(0,g.jsx)(h.ZP,{item:!0,md:12,children:(0,g.jsx)(l.oi,{control:u,name:"carBrand",label:d("COURIER.carBrand"),rules:{required:!1}})}),(0,g.jsx)(h.ZP,{item:!0,md:12,children:(0,g.jsx)(l.oi,{control:u,name:"carModel",label:d("COURIER.carModel"),rules:{required:!1}})}),(0,g.jsx)(h.ZP,{item:!0,md:12,children:(0,g.jsx)(l.oi,{control:u,name:"carNumber",label:d("COURIER.carNumber"),rules:{required:!1}})}),(0,g.jsx)(h.ZP,{item:!0,md:12,children:(0,g.jsx)(l.oi,{control:u,name:"carColor",label:d("COURIER.carColor"),rules:{required:!1}})}),(0,g.jsx)(h.ZP,{item:!0,md:12,children:(0,g.jsxs)("div",{className:"product-images",children:[(0,g.jsxs)(v.Z,{children:[d("Rasm")," ",(0,g.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,g.jsx)("label",{className:"py-2",htmlFor:"",children:d("general.recommendation_img")}),(0,g.jsx)("br",{}),(0,g.jsx)("br",{}),(0,g.jsx)(l.aG,{control:u,setValue:f,name:"imageId",accept:".png, .jpg, .jpeg"})]})})]})})})},j=n(30168),Z=n(17939).default.div(t||(t=(0,j.Z)(["\n  background-color: #fff;\n  border-radius: 20px;\n  padding: 32px 42px 24px 42px;\n  h2 {\n    font-weight: 500;\n    font-size: 26px;\n  }\n  button {\n    width: 100px;\n  }\n"]))),C=function(e){var r=e.open,n=e.setOpen,t=e.title,o=e.url,i=e.confirmFn,a=(0,c.$G)().t,d=(0,p.uC)("".concat(o,"/").concat(r),"post"),u=d.mutate,m=d.status;return(0,s.useEffect)((function(){"success"===m&&n(null)}),[m]),(0,g.jsx)(l.u_,{setOpen:n,open:!!r,children:(0,g.jsxs)(Z,{children:[(0,g.jsx)("h2",{children:t||a("general.reallyDelete")}),(0,g.jsx)(l.xq,{isCancelFromRoute:!1,SubmitTitle:a("general.yes"),cancelTitle:a("general.no"),onClick:function(){return o?u({_id:r}):i()},onCancel:function(){return n(!1)}})]})})},y=n(11087),w=n(94294),I=n(94454),S=n(27391),k=n(35834),B=n(73405),N=function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2},E=function(e,r){var n=(0,a.Z)(e,2),t=n[0],o=n[1],i=(0,a.Z)(r,2),l=i[0],s=i[1];return Math.sqrt(Math.pow(l-t,2)+Math.pow(s-o,2))},F=function(e){var r=e.id,n=e.geometry,t=e.properties,o=e.options,i=(e.duration,e.easingFunction),l=void 0===i?N:i,d=(0,s.useState)(n),c=(0,a.Z)(d,2),u=c[0],m=c[1],x=(0,s.useRef)(n),f=(0,s.useRef)([]),h=(0,s.useRef)(null),v=(0,s.useRef)(!1);return(0,s.useEffect)((function(){var e=n,r=x.current,t=f.current,o=E(r,e);if(!function(e,r,n){if(n.length<2)return!1;var t=(0,a.Z)(n[n.length-1],2),o=t[0],i=t[1],l=(0,a.Z)(n[n.length-2],2),s=l[0],d=l[1],c=E([s,d],[o,i]);return E([o,i],r)<c}(0,e,t)){o<5e-4&&(console.log("\u26a0 Juda kichik harakat: Sun'iy tebranish qo\u2018shildi!"),e=function(e){var r=(0,a.Z)(e,2),n=r[0],t=r[1];return[n+1e-4*(Math.random()-.5),t+1e-4*(Math.random()-.5)]}(r),o=E(r,e));var i=Math.min(5e3,Math.max(2e3,2e8*o));v.current=!0;var s=Date.now();return h.current&&cancelAnimationFrame(h.current),h.current=requestAnimationFrame((function n(){var t=Date.now()-s,o=Math.min(t/i,1);o=l(o);var a=[r[0]+(e[0]-r[0])*o,r[1]+(e[1]-r[1])*o];m(a),o<1?h.current=requestAnimationFrame(n):(v.current=!1,x.current=e,f.current.push(e))})),function(){h.current&&(cancelAnimationFrame(h.current),v.current=!1)}}console.log("\u26a0 Orqaga qaytish aniqlandi! Lokatsiya yangilanmadi.")}),[n]),(0,g.jsx)(B.ah,{geometry:u,properties:t,options:o},r)},M=function(e){var r=e.storeCoordinates,n=e.couriers,t=e.showDriverName,o=(0,s.useState)({center:r,zoom:12,behaviors:["default","scrollZoom"]}),l=(0,a.Z)(o,2),d=l[0],c=l[1],u=(0,s.useMemo)((function(){return n}),[n]);return(0,g.jsx)("div",{style:{height:"calc(100% - 140px)"},children:(0,g.jsx)(B.Yy,{query:{load:"package.full"},children:(0,g.jsx)(B.D5,{width:"100%",height:"100%",state:d,onBoundsChange:function(e){c((function(r){return(0,i.Z)((0,i.Z)({},r),{},{center:e.get("newCenter"),zoom:e.get("newZoom")})}))},children:null===u||void 0===u?void 0:u.map((function(e,r){return(0,g.jsx)(F,{id:null===e||void 0===e?void 0:e._id,geometry:[null===e||void 0===e?void 0:e.location.latitude,null===e||void 0===e?void 0:e.location.longitude],properties:{iconContent:r+1,iconCaption:t?"".concat((null===e||void 0===e?void 0:e.firstName)||""," ").concat((null===e||void 0===e?void 0:e.lastName)||""):void 0,balloonContentHeader:"".concat(null===e||void 0===e?void 0:e.firstName," ").concat(null===e||void 0===e?void 0:e.lastName)},options:{preset:!0!==(null===e||void 0===e?void 0:e.hasOrder)?"islands#greenAutoCircleIcon":"islands#blackAutoCircleIcon",draggable:!1},duration:2e4,easingFunction:function(e){return e*e}},null===e||void 0===e?void 0:e._id)}))})})})},O=n(57690),R=n(55210),A=function(){var e,r,n,t,v=(0,k.Z)(),j=(0,y.lr)(),Z=(0,a.Z)(j,2),B=(Z[0],Z[1]),N=(0,s.useState)(),E=(0,a.Z)(N,2),F=E[0],A=E[1],_=(0,s.useState)(),T=(0,a.Z)(_,2),D=T[0],L=T[1],P=function(){var e=(0,c.$G)().t;return[{field:e("common.fullName"),renderCell:function(e){return(0,d.get)(e,"row.firstName","")+" "+(0,d.get)(e,"row.lastName","")},flex:1.5},{field:e("common.phoneNumber"),renderCell:function(e){return e.row.phoneNumber}},{field:e("common.rating"),renderCell:function(e){var r,n;return 5!==(null===e||void 0===e||null===(r=e.row)||void 0===r?void 0:r.rating.toFixed(1))?null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.rating.toFixed(1):"5"}}]}(),q=(0,f.w)(),z=(0,c.$G)().t,U=(0,u.T)(),W=(0,x.cI)(),Y=(0,s.useState)([]),$=(0,a.Z)(Y,2),G=$[0],H=$[1],V=(0,s.useState)(),J=(0,a.Z)(V,2),K=J[0],X=J[1],Q=(0,o.s0)(),ee=(0,s.useState)(v.type||"table"),re=(0,a.Z)(ee,2),ne=re[0],te=re[1],oe=(0,s.useState)(!0),ie=(0,a.Z)(oe,2),ae=ie[0],le=ie[1],se=(0,s.useState)(2e5),de=(0,a.Z)(se,2),ce=de[0],ue=de[1],me=(0,u.C)((function(e){return e.SocketState.render})),xe=(0,s.useState)([]),fe=(0,a.Z)(xe,2),he=fe[0],ve=fe[1],pe=function(){A(void 0),W.reset({firstName:"",lastName:"",phoneNumber:"",password:"",carBrand:"",carColor:"",carModel:"",carNumber:"",imageUrl:""})},ge=function(e){e!==ne&&(te(e),B({type:e}))};(0,s.useEffect)((function(){v.type||B({type:"table"})}),[v,B]);var be=(0,p.uC)("courier/map","post",{},!0),je=be.mutate,Ze=be.data,Ce=be.reset,ye=(be.status,(0,p.h_)("store/get",{},{suspense:!1})),we=ye.data,Ie=ye.status;(0,s.useEffect)((function(){"map"===ne&&je({radius:+ce})}),[ne,ce]),(0,s.useEffect)((function(){"success"===Ie&&W.reset()}),[Ie]);var Se=[null===we||void 0===we||null===(e=we.data)||void 0===e||null===(r=e.addressLocation)||void 0===r?void 0:r.latitude,null===we||void 0===we||null===(n=we.data)||void 0===n||null===(t=n.addressLocation)||void 0===t?void 0:t.longitude],ke=(0,s.useMemo)((function(){return{}}),[]);return(0,s.useEffect)((function(){me&&(Ce(),U((0,R.zm)(!1)))}),[me]),(0,s.useEffect)((function(){var e=function(e){ve((function(r){var n=r.map((function(r){return r._id===e.data.courierId?(0,i.Z)((0,i.Z)({},r),{},{location:e.data.location}):r}));return n}))};return O.W.on("courierLocation",e),function(){O.W.off("courierLocation",e)}}),[]),(0,s.useEffect)((function(){null!==Ze&&void 0!==Ze&&Ze.data&&(ve((function(e){var r=new Map(e.map((function(e){return[e.courierId,e]})));return Ze.data.forEach((function(e){r.set(e._id,e)})),Array.from(r.values())})),Ce())}),[Ze]),(0,g.jsxs)("div",{className:"bg-white h-full",children:[(0,g.jsxs)(h.ZP,{className:"w-full flex gap-x-3 items-center p-2",children:[(0,g.jsx)(w.Z,{variant:"table"===ne?"contained":"outlined",sx:{height:36,textTransform:"none",backgroundColor:"table"===ne?"#EB5B00":"transparent",borderColor:"#EB5B00",color:"table"===ne?"#fff":"#EB5B00","&:hover":{backgroundColor:"table"===ne?"#EB5B00":"rgba(235, 91, 0, 0.1)",borderColor:"#EB5B00"}},onClick:function(){return ge("table")},children:z("general.courier")}),(0,g.jsx)(w.Z,{variant:"map"===ne?"contained":"outlined",sx:{height:36,textTransform:"none",backgroundColor:"map"===ne?"#EB5B00":"transparent",borderColor:"#EB5B00",color:"map"===ne?"#fff":"#EB5B00","&:hover":{backgroundColor:"map"===ne?"#EB5B00":"rgba(235, 91, 0, 0.1)",borderColor:"#EB5B00"}},onClick:function(){return ge("map")},children:z("general.map")})]}),"map"===ne?(0,g.jsxs)(h.ZP,{className:"flex items-center justify-between px-2",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)(I.Z,{id:"showDriverName",checked:ae,onChange:function(e){le(e.target.checked)}}),(0,g.jsx)("label",{htmlFor:"showDriverName",className:"hover",children:z("general.show_name")})]}),(0,g.jsx)("div",{children:(0,g.jsx)(S.Z,{value:ce/1e3,onChange:function(e){var r=parseFloat(e.target.value)||0;ue(1e3*r)},size:"small",placeholder:String(z("general.radius")),label:z("general.radius"),type:"number"})})]}):null,"table"===ne?(0,g.jsx)(l.iA,{dataUrl:"courier/paging",columns:P,searchable:!0,onAddButton:q("courierCreate")?function(){return U((0,m.dl)(!0))}:void 0,onEditColumn:q("courierUpdate")?function(e){A(e._id),U((0,m.dl)(!0))}:void 0,onDeleteColumn:q("courierDelete")?function(e){return L(e._id)}:void 0,onRowClick:function(e){return Q("/courier/".concat(e._id))},exQueryParams:ke}):(0,g.jsx)(M,{couriers:he,storeCoordinates:Se,showDriverName:ae}),(0,g.jsx)(C,{open:D,setOpen:L,url:"courier/delete"}),(0,g.jsx)(l._8,{FORM_ID:"courier",isEditing:!!F,customTitle:z("general.addCourier"),onClose:pe,children:(0,g.jsx)(b,{formStore:W,resetForm:pe,editingCourierId:F,productProps:{courierImages:G,setCourierImages:H,mainImageId:K,setMainImageId:X}})})]})},_=n(697),T=n(93044),D=n(20890),L=n(39504),P=n(89891),q=n(94939),z=function(e){var r,n,t,a,l,s,d,u,m=e.courierInfoData,x=e.offAndOn,f=(e.offAndOnData,e.watch),v=e.register,p=e.setValue,b=(0,c.$G)().t,j=(0,o.UO)().id;return(0,g.jsxs)(h.ZP,{children:[(0,g.jsxs)(_.Z,{sx:{background:"linear-gradient(135deg, #EB7B00 0%, #EB5B00 100%)",pt:6,pb:8,px:4,textAlign:"center",color:"white",position:"relative",borderTopLeftRadius:"15px",borderTopRightRadius:"15px"},children:[(0,g.jsx)(T.Z,{src:"http://localhost:3003/v1/"+(null===m||void 0===m||null===(r=m.data)||void 0===r||null===(n=r.image)||void 0===n?void 0:n.url),sx:{width:120,height:120,mx:"auto",border:"4px solid white",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.05)"}}}),(0,g.jsx)(D.Z,{variant:"h4",sx:{mt:2,fontWeight:"bold"},children:null===m||void 0===m||null===(t=m.data)||void 0===t?void 0:t.fullName})]}),(0,g.jsx)(L.Z,{sx:{backgroundColor:"white",px:4,py:3},children:(0,g.jsxs)(_.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,g.jsxs)(_.Z,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"#F7FAFC",borderRadius:2,transition:"transform 0.2s ease","&:hover":{transform:"translateX(8px)"}},children:[(0,g.jsx)(q.Z,{style:{fontSize:20,color:"#EB5B00"}}),(0,g.jsx)(D.Z,{variant:"body1",color:"text.primary",children:null===m||void 0===m||null===(a=m.data)||void 0===a?void 0:a.phoneNumber})]}),(0,g.jsx)(_.Z,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"#F7FAFC",borderRadius:2,transition:"transform 0.2s ease","&:hover":{transform:"translateX(8px)"}},children:(0,g.jsxs)(D.Z,{variant:"body2",sx:{color:"#546e7a",fontWeight:500,display:"flex",alignItems:"center",gap:1},children:[(0,g.jsx)("span",{style:{fontWeight:"bold",color:"#333333"},children:"Reyting:"}),(0,g.jsx)("span",{style:{fontSize:"0.9rem",color:"goldenrod"},children:5!==Number(null===m||void 0===m||null===(l=m.data)||void 0===l||null===(s=l.rating)||void 0===s?void 0:s.toFixed(1))?null===m||void 0===m||null===(d=m.data)||void 0===d||null===(u=d.rating)||void 0===u?void 0:u.toFixed(1):"5"}),(0,g.jsx)("span",{style:{fontSize:"0.9rem",color:"goldenrod"},children:" / 5"})]})}),(0,g.jsxs)(_.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:2,p:2,backgroundColor:"#F7FAFC",borderRadius:2},children:[(0,g.jsx)(D.Z,{variant:"body2",sx:{fontWeight:"bold",color:f("isOnline")?"green":"red"},children:f("isOnline")?b("general.online"):b("general.offline")}),(0,g.jsx)(P.Z,(0,i.Z)((0,i.Z)({checked:f("isOnline"),id:"isOnline"},v("isOnline")),{},{onChange:function(e){var r=e.target.checked;p("isOnline",r),x({_id:j,isOnline:r})},sx:{"& .MuiSwitch-thumb":{backgroundColor:f("isOnline")?"green":"red"},"& .MuiSwitch-track":{backgroundColor:f("isOnline")?"green":"red"}}}))]})]})})]})},U=n(45987),W=n(35527),Y=n(13603),$=n(43896),G=n(57482),H=n(67032),V=n(10401),J=n(31981),K=n(71025),X=n(68825),Q=n(29749),ee=n(97892),re=n.n(ee),ne=n(16818),te=n.n(ne),oe=function(e){var r=Math.floor(e/3600),n=Math.floor(e%3600/60),t=e%60;return r>0?"".concat(r," soat ").concat(n," daqiqa"):n>0?"".concat(n," daqiqa ").concat(t," sekund"):"".concat(t," sekund")},ie=n(90816),ae=["children","value","index"];function le(e){var r=e.children,n=e.value,t=e.index,o=(0,U.Z)(e,ae);return(0,g.jsx)("div",(0,i.Z)((0,i.Z)({role:"tabpanel",hidden:n!==t,id:"customer-tabpanel-".concat(t),"aria-labelledby":"customer-tab-".concat(t)},o),{},{children:n===t&&(0,g.jsx)(_.Z,{sx:{p:3},children:r})}))}re().extend(te());var se=function(e){var r=e._id,n=e.id,t=e.amount,i=e.status,a=e.currency,l=e.date,s=e.status_color,d=e.courierLateTime,c=e.courierLateTimeToStore,u=e.courierInStoreAt,m=(0,o.s0)();return(0,g.jsxs)(_.Z,{sx:{mb:2,p:3,backgroundColor:"#F7FAFC",borderRadius:2,cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease","&:hover":{transform:"translateY(-4px)",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}},onClick:function(){return m("/order/".concat(r))},children:[(0,g.jsxs)(_.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,g.jsxs)(_.Z,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,g.jsx)(K.Z,{style:{fontSize:20,color:"#6B46C1"}}),(0,g.jsxs)(D.Z,{variant:"subtitle1",fontWeight:"bold",children:[(0,X.t)("general.order")," #",n]})]}),(0,g.jsx)("span",{style:{backgroundColor:s,color:"white",padding:"8px",borderRadius:"10px",fontSize:"13px"},children:i})]}),(0,g.jsxs)(_.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,g.jsx)("span",{children:"Buyurtma yaratilgan vaqti:"}),(0,g.jsx)(D.Z,{variant:"body2",color:"text.secondary",children:l})]}),(0,g.jsxs)(_.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,g.jsx)("span",{children:"Buyurtma narxi:"}),(0,g.jsxs)(D.Z,{variant:"subtitle1",fontWeight:"bold",color:"#EB5B00",children:[(0,ie.Y)(t)," ",a]})]}),d?(0,g.jsxs)(_.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,g.jsx)("span",{children:"Kechikdi buyurtmaga:"}),(0,g.jsxs)("span",{className:"text-red-500",children:[oe(d)," ",(0,X.t)("general.late")]})]}):null,c?(0,g.jsxs)(_.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,g.jsx)("span",{children:"Kechikdi do'konga:"}),(0,g.jsxs)("span",{className:"text-red-500",children:[oe(c)," ",(0,X.t)("general.late")]})]}):null,(0,g.jsxs)(_.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,g.jsx)("span",{children:"Do'konga yetib kelgan vaqti:"}),(0,g.jsx)(D.Z,{variant:"body2",color:"text.secondary",children:u})]})]})},de=function(e){var r,n,t,o,c,u=e.courierInfoData,m=e.historyOrders,x=s.useState(1),f=(0,a.Z)(x,2),v=f[0],p=f[1],b=(0,s.useState)(!1),j=(0,a.Z)(b,2),Z=j[0],C=j[1],I=(0,s.useState)(!1),S=(0,a.Z)(I,2),B=S[0],N=S[1],E=(0,y.lr)(),F=(0,a.Z)(E,2),M=(F[0],F[1]),O=(0,k.Z)(),R=(0,Q.Z)().state.data;(0,s.useEffect)((function(){A(Z)}),[Z]),(0,s.useEffect)((function(){T(B)}),[B]);var A=function(e){M((0,i.Z)((0,i.Z)({},O),{},{isCourierLeft:e}))},T=function(e){M((0,i.Z)((0,i.Z)({},O),{},{isCourierLateToStore:e}))};return(0,g.jsxs)(W.Z,{elevation:3,sx:{borderRadius:4,overflow:"hidden"},children:[(0,g.jsx)(_.Z,{sx:{borderBottom:1,borderColor:"divider",backgroundColor:"#F7FAFC"},children:(0,g.jsxs)(Y.Z,{value:v,onChange:function(e,r){p(r)},sx:{"& .MuiTab-root":{minHeight:64,fontSize:"1rem"},"& .Mui-selected":{color:"#EB5B00 !important"},"& .MuiTabs-indicator":{backgroundColor:"#EB5B00"}},children:[(0,g.jsx)($.Z,{icon:(0,g.jsx)(H.Z,{style:{fontSize:20}}),iconPosition:"start",label:(0,X.t)("tabs.avto")}),(0,g.jsx)($.Z,{icon:(0,g.jsx)(J.Z,{style:{fontSize:20}}),iconPosition:"start",label:(0,X.t)("tabs.orders")})]})}),(0,g.jsx)(le,{value:v,index:0,children:(0,g.jsx)(_.Z,{sx:{display:"block",mb:2},children:[{label:(0,X.t)("COURIER.carBrand"),value:null===u||void 0===u||null===(r=u.data)||void 0===r?void 0:r.carBrand},{label:(0,X.t)("COURIER.carModel"),value:null===u||void 0===u||null===(n=u.data)||void 0===n?void 0:n.carModel},{label:(0,X.t)("COURIER.carNumber"),value:null===u||void 0===u||null===(t=u.data)||void 0===t?void 0:t.carNumber},{label:(0,X.t)("COURIER.carColor"),value:null===u||void 0===u||null===(o=u.data)||void 0===o?void 0:o.carColor}].map((function(e,r){return(0,g.jsxs)(_.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[(0,g.jsxs)(D.Z,{variant:"body1",fontWeight:"500",color:"text.secondary",sx:{minWidth:"120px"},children:[e.label,":"]}),(0,g.jsx)(D.Z,{variant:"body1",fontWeight:"700",color:"text.primary",children:e.value||"-"})]},r)}))})}),(0,g.jsxs)(le,{value:v,index:1,children:[(0,g.jsxs)(h.ZP,{className:"flex items-center gap-2 pb-3",children:[(0,g.jsx)(l.$m,{}),(0,g.jsx)(w.Z,{className:"bg-[#EB5B00] w-full",variant:"outlined",onClick:function(){C((function(e){return!e}))},children:Z?(0,X.t)("driver.all_orders"):(0,X.t)("driver.late_orders")}),(0,g.jsx)(w.Z,{className:"bg-[#EB5B00] w-full",variant:"outlined",onClick:function(){N((function(e){return!e}))},children:B?(0,X.t)("driver.all_orders"):(0,X.t)("driver.late_store")})]}),(0,g.jsx)(_.Z,{sx:{maxHeight:"500px",overflowY:"auto"},children:null===m||void 0===m||null===(c=m.data)||void 0===c?void 0:c.map((function(e){var r,n;return(0,g.jsx)(se,{id:null===e||void 0===e?void 0:e.number,_id:null===e||void 0===e?void 0:e._id,amount:null===e||void 0===e?void 0:e.totalPrice,status:null===e||void 0===e||null===(r=e.state)||void 0===r?void 0:r.name,status_color:null===e||void 0===e||null===(n=e.state)||void 0===n?void 0:n.color,currency:(0,d.get)(R,"currency","uzs"),date:null!==e&&void 0!==e&&e.createdAt?re()(e.createdAt).format("YYYY-MM-DD HH:mm:ss"):"N/A",courierLateTime:null===e||void 0===e?void 0:e.courierLateTime,courierLateTimeToStore:null===e||void 0===e?void 0:e.courierLateTimeToStore,courierInStoreAt:null!==e&&void 0!==e&&e.courierInStoreAt?re()(e.courierInStoreAt).format("YYYY-MM-DD HH:mm:ss"):"N/A"},null===e||void 0===e?void 0:e.number)}))})]}),(0,g.jsx)(le,{value:v,index:2,children:(0,g.jsxs)(_.Z,{sx:{p:3},children:[(0,g.jsxs)(_.Z,{sx:{mb:4},children:[(0,g.jsxs)(_.Z,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[(0,g.jsx)(V.Z,{style:{fontSize:24,color:"#6B46C1"}}),(0,g.jsx)(D.Z,{variant:"h6",children:"Total Spent"})]}),(0,g.jsx)(D.Z,{variant:"h4",color:"#6B46C1",fontWeight:"bold",mb:1,children:"$1,250.00"}),(0,g.jsx)(G.Z,{variant:"determinate",value:70,sx:{height:8,borderRadius:4,backgroundColor:"#E9D8FD","& .MuiLinearProgress-bar":{backgroundColor:"#6B46C1"}}})]}),(0,g.jsxs)(_.Z,{sx:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:3},children:[(0,g.jsxs)(W.Z,{sx:{p:3,backgroundColor:"#F7FAFC"},children:[(0,g.jsx)(D.Z,{variant:"subtitle2",color:"text.secondary",mb:1,children:"Member Since"}),(0,g.jsx)(D.Z,{variant:"h6",children:"January 15, 2024"})]}),(0,g.jsxs)(W.Z,{sx:{p:3,backgroundColor:"#F7FAFC"},children:[(0,g.jsx)(D.Z,{variant:"subtitle2",color:"text.secondary",mb:1,children:"Total Orders"}),(0,g.jsx)(D.Z,{variant:"h6",children:"15 orders"})]})]})]})})]})},ce=function(){var e=(0,s.useState)("orders"),r=(0,a.Z)(e,2),n=(r[0],r[1],(0,c.$G)().t,(0,o.UO)().id),t=(0,x.cI)(),i=(t.control,t.watch),l=t.register,d=(t.handleSubmit,t.setValue),u=(0,k.Z)(),m=(0,p.h_)("courier/get-by-id/".concat(n),{},{enabled:!!n,suspense:!1}),f=m.data,v=(m.status,(0,p.uC)("order/paging","post",{},!0)),b=v.mutate,j=v.data;(0,s.useEffect)((function(){var e="true"===u.isCourierLeft,r="true"===u.isCourierLateToStore;b({courierId:n,dateFrom:u.dateFrom,dateTo:u.dateTo,isCourierLate:e,isCourierLateToStore:r})}),[u.dateFrom,u.dateTo,u.isCourierLeft,u.isCourierLateToStore]);var Z=(0,p.uC)("courier/set-online","post"),C=Z.mutate,y=Z.data;return(0,s.useEffect)((function(){var e;void 0!==(null===f||void 0===f||null===(e=f.data)||void 0===e?void 0:e.isOnline)&&d("isOnline",f.data.isOnline)}),[f,d]),(0,g.jsx)(g.Fragment,{children:n&&(0,g.jsxs)(h.ZP,{className:"grid md:grid-cols-2 gap-4 p-2",children:[(0,g.jsx)(z,{courierInfoData:f,offAndOn:C,offAndOnData:y,watch:i,register:l,setValue:d}),(0,g.jsx)(de,{historyOrders:null===j||void 0===j?void 0:j.data,courierInfoData:f})]})})},ue=function(){return(0,g.jsxs)(o.Z5,{children:[(0,g.jsx)(o.AW,{path:":id",element:(0,g.jsx)(ce,{})}),(0,g.jsx)(o.AW,{path:"*",element:(0,g.jsx)(A,{})})]})}},90816:function(e,r,n){n.d(r,{Y:function(){return t}});var t=function(e){return e||0===e?(Math.round(100*(e+Number.EPSILON))/100).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}).replaceAll(","," "):""}}}]);
//# sourceMappingURL=853.3cb0edfd.chunk.js.map