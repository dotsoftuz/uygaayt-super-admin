{"version":3,"file":"static/js/241.77f9d65f.chunk.js","mappings":"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","sources":["pages/product_analytics/container/ProductAnalytics.tsx","pages/product_analytics/index.tsx","pages/product_analytics/container/product_analytics.columns.tsx","utils/numberFormat.ts"],"sourcesContent":["import { AutoCompleteFilter, ExportButton, RangeDatePicker, Table } from \"components\";\r\nimport { useProductColumns } from \"./product_analytics.columns\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Grid } from \"@mui/material\";\r\nimport { useState } from \"react\";\r\nimport { useForm, UseFormReturn } from \"react-hook-form\";\r\nimport WarningModal from \"components/common/WarningModal/WarningModal\";\r\n\r\ninterface FormValues {\r\n  isActiveQuery?: boolean;\r\n}\r\n\r\nconst ProductAnalytics: React.FC = () => {\r\n  const columns = useProductColumns();\r\n  const { t } = useTranslation();\r\n  const formStore: UseFormReturn<FormValues> = useForm<FormValues>();\r\n  const [productId, setProductId] = useState<string>(\"\");\r\n\r\n  const exportUrl: string = \"/report/product/export\";\r\n\r\n  const renderHeader = (\r\n    <Grid className=\"w-full lg:w-[60%] md:flex md:grid-cols-3 gap-3 justify-end items-center py-2\">\r\n      <Grid className=\"md:w-[30%] py-1\">\r\n        <AutoCompleteFilter\r\n          optionsUrl=\"category/paging\"\r\n          filterName=\"categoryId\"\r\n          placeholder={t(\"common.category\")}\r\n        />\r\n      </Grid>\r\n      <Grid className=\"md:w-[40%] py-1 flex justify-end\">\r\n        <RangeDatePicker />\r\n      </Grid>\r\n      <Grid className=\"md:w-[30%] py-1\">\r\n        <ExportButton url={exportUrl} />\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <Table\r\n        columns={columns}\r\n        dataUrl=\"report/product\"\r\n        headerChildren={renderHeader}\r\n        exQueryParams={{\r\n          isActive: formStore.watch(\"isActiveQuery\") || undefined,\r\n        }}\r\n      />\r\n      <WarningModal open={Boolean(productId)} setOpen={setProductId} url=\"product/delete\" />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProductAnalytics;\r\n","import ProductAnalytics from \"./container/ProductAnalytics\";\r\n\r\nexport default ProductAnalytics;\r\n","import { GridColumns } from \"@mui/x-data-grid\";\r\nimport { Tooltip } from \"antd\";\r\nimport { get } from \"lodash\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { numberFormat } from \"utils/numberFormat\";\r\n\r\nexport const useProductColumns = (): GridColumns => {\r\n  const { t } = useTranslation();\r\n  const currentLang = localStorage.getItem(\"i18nextLng\") || \"uz\";\r\n\r\n\r\n  return [\r\n    {\r\n      field: t(\"common.productName\"),\r\n      renderCell({ row }) {\r\n        const title = row?.product?.name?.[currentLang];\r\n        const truncatedTitle = title?.length > 30 ? `${title.substring(0, 30)}...` : title;\r\n    \r\n        return (\r\n          <Tooltip title={title} arrow>\r\n            <span>{truncatedTitle}</span>\r\n          </Tooltip>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      field: t(\"common.price\"),\r\n      renderCell({ row }) {\r\n        return numberFormat(get(row, \"product.price\", \"\"));\r\n      },\r\n    },\r\n    {\r\n      field: t(\"common.discountValue\"),\r\n      renderCell({ row }) {\r\n        return (\r\n          numberFormat(get(row, \"product.discountValue\", \"\")) + \r\n          (row?.product?.discountType === \"percent\" ? \"%\" : \"\")\r\n        );\r\n      },\r\n    },\r\n    {\r\n      field: t(\"common.residue\"),\r\n      renderCell({ row }) {\r\n        return numberFormat(get(row, \"product.inStock\", \"\"));\r\n      },\r\n    },\r\n    {\r\n      field: \"total_amount\",\r\n      headerName: t(\"common.sold\")!,\r\n      sortable: true,\r\n      renderCell({ row }) {\r\n        return numberFormat(get(row, \"total_amount\", \"\"));\r\n      },\r\n    },\r\n    {\r\n      field: \"customerCount\",\r\n      headerName: t(\"common.customer_bought_count\")!,\r\n      sortable: true,\r\n      renderCell({ row }) {\r\n        return numberFormat(get(row, \"customerCount\", \"\"));\r\n      },\r\n    },\r\n    {\r\n      field: \"total_price\",\r\n      headerName: t(\"order.totalPrice\")!,\r\n      sortable: true,\r\n      renderCell({ row }) {\r\n        return numberFormat(get(row, \"total_price\", \"\"));\r\n      },\r\n    },\r\n    // {\r\n    //   field: t(\"common.status\"),\r\n    //   renderCell({ row }) {\r\n    //     return get(row, \"status\", \"\");\r\n    //   },\r\n    // },\r\n  ];\r\n};\r\n","export const numberFormat = (number: any) => {\r\n  if (number || number === 0) {\r\n    // Floating-point xatoliklarni oldini olish\r\n    const rounded = Math.round((number + Number.EPSILON) * 100) / 100;\r\n\r\n    return rounded\r\n      .toLocaleString(\"en-US\", {\r\n        minimumFractionDigits: 0, // Har doim 2 kasr\r\n        maximumFractionDigits: 0, // Kasr 2 dan oshmaydi\r\n      })\r\n      .replaceAll(\",\", \" \"); // Minglik ajratgich\r\n  }\r\n  return \"\";\r\n};\r\n"],"names":["ProductAnalytics","columns","useProductColumns","t","useTranslation","currentLang","localStorage","getItem","field","renderCell","_ref","_row$product","_row$product$name","row","title","product","name","truncatedTitle","length","concat","substring","_jsx","Tooltip","arrow","children","_ref2","numberFormat","get","_ref3","_row$product2","discountType","_ref4","headerName","sortable","_ref5","_ref6","_ref7","formStore","useForm","productId","setProductId","useState","renderHeader","_jsxs","Grid","className","AutoCompleteFilter","optionsUrl","filterName","placeholder","RangeDatePicker","ExportButton","url","_Fragment","Table","dataUrl","headerChildren","exQueryParams","isActive","watch","undefined","WarningModal","open","Boolean","setOpen","number","Math","round","Number","EPSILON","toLocaleString","minimumFractionDigits","maximumFractionDigits","replaceAll"],"sourceRoot":""}