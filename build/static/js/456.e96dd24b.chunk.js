"use strict";(self.webpackChunkbestune_admin=self.webpackChunkbestune_admin||[]).push([[456],{39456:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var r=n(1413),i=n(29439),o=n(45489),l=n(72791),s=n(20068),a=n(81918),d=n(97892),c=n.n(d),u=n(763),h=n(39230),m=n(80184),g=n(61889),x=n(4729),p=n(62750),f=n(75985),v=n(84544),y=n(53238),j=n(35834),b=n(11087),w=function(){var e,t,n=(0,l.useState)(),d=(0,i.Z)(n,2),w=d[0],z=d[1],C=(0,l.useState)(null),S=(0,i.Z)(C,2),N=S[0],Z=S[1],k=(0,l.useState)(!1),B=(0,i.Z)(k,2),W=B[0],M=B[1],I=(0,l.useState)(),A=(0,i.Z)(I,2),D=A[0],R=A[1],O=(0,h.$G)().t,U=(0,j.Z)(),P=(0,b.lr)(),Y=(0,i.Z)(P,2),T=(Y[0],Y[1]);(0,l.useEffect)((function(){U.storeId||T((0,r.Z)((0,r.Z)({},U),{},{storeId:"uygaayt"}))}),[]);var V=(0,p.uC)("review/toggle-visibility/".concat(D),"post",{onSuccess:function(){f.Am.success("Sharh ko'rinishi o'zgartirildi"),R(void 0)},onError:function(e){f.Am.error((null===e||void 0===e?void 0:e.message)||"Xatolik yuz berdi"),R(void 0)}}).mutate;var _=function(e){var t=(0,h.$G)().t;return[{field:t("common.customer"),flex:1.2,renderCell:function(e){var t=e.row,n=(0,u.get)(t,"customer.firstName",""),r=(0,u.get)(t,"customer.lastName",""),i=(0,u.get)(t,"customer.phoneNumber",""),o="".concat(n," ").concat(r).trim()||"Mijoz";return(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{style:{fontWeight:500},children:o}),i&&(0,m.jsx)("div",{style:{fontSize:"12px",color:"#6b7280"},children:i})]})}},{field:t("common.rating"),width:150,renderCell:function(e){var t=e.row,n=(0,u.get)(t,"rating",0);return(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[Array.from({length:5},(function(e,t){return t+1})).map((function(e){return(0,m.jsx)("span",{style:{color:e<=n?"#fbbf24":"#d1d5db",fontSize:"16px"},children:"\u2605"},e)})),(0,m.jsx)("span",{style:{marginLeft:"4px",fontSize:"14px",fontWeight:500},children:n})]})}},{field:t("common.comment"),flex:1.5,renderCell:function(e){var t=e.row,n=(0,u.get)(t,"comment",""),r=(null===n||void 0===n?void 0:n.length)>50?"".concat(n.substring(0,50),"..."):n||"-";return(0,m.jsx)(s.Z,{title:n||"",arrow:!0,children:(0,m.jsx)("span",{style:{fontSize:"14px"},children:r})})}},{field:"store",headerName:"Do'kon",flex:1,renderCell:function(e){var t=e.row,n=(0,u.get)(t,"store.name",""),r=(0,u.get)(t,"storeId","");return"uygaayt"===r?"Uygaayt Market":n||r||"-"}},{field:"order",headerName:"Buyurtma",width:120,renderCell:function(e){var t=e.row,n=(0,u.get)(t,"order.number","");return n?"#".concat(n):"-"}},{field:"product",headerName:"Mahsulot",flex:1,renderCell:function(e){var t=e.row,n=(0,u.get)(t,"product.name","");return n&&("object"===typeof n?n.uz||n.ru||n.en:n)||"-"}},{field:t("common.status"),width:120,renderCell:function(e){var t=e.row,n=(0,u.get)(t,"isVisible",!0);return(0,m.jsx)(a.Z,{label:n?"Ko'rinadi":"Yashirilgan",color:n?"success":"default",size:"small",sx:{fontWeight:600}})}},{field:t("common.date"),width:180,renderCell:function(e){var t=e.row;return c()((0,u.get)(t,"createdAt","")).format("DD.MM.YYYY HH:mm")}},{field:"actions",headerName:"Amal",width:150,align:"center",headerAlign:"center",sortable:!1,filterable:!1,disableColumnMenu:!0,renderCell:function(t){var n=t.row;return(0,m.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:(0,m.jsx)("button",{onClick:function(t){t.stopPropagation(),e&&e(n)},style:{padding:"4px 8px",fontSize:"12px",borderRadius:"4px",border:"1px solid #e5e7eb",background:"white",cursor:"pointer"},onMouseOver:function(e){e.currentTarget.style.background="#f3f4f6"},onMouseOut:function(e){e.currentTarget.style.background="white"},children:(0,u.get)(n,"isVisible",!0)?"Yashirish":"Ko'rsatish"})})}}]}((function(e){R(e._id),V({isVisible:!(0,u.get)(e,"isVisible",!0)})})),L=(0,l.useState)(""),E=(0,i.Z)(L,2),F=E[0],G=E[1],H=(0,m.jsxs)(g.ZP,{className:"w-full lg:w-[60%] md:flex md:grid-cols-3 gap-3 justify-end items-center py-2",children:[(0,m.jsx)(g.ZP,{className:"md:w-[30%] py-1",children:(0,m.jsx)(o.he,{optionsUrl:"store/paging",filterName:"storeId",placeholder:"Do'kon bo'yicha",getOptionLabel:function(e){return(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e._id)}})}),(0,m.jsx)(g.ZP,{className:"md:w-[30%] py-1",children:(0,m.jsx)(o.he,{optionsUrl:"customer/paging",filterName:"customerId",placeholder:O("common.customer"),getOptionLabel:function(e){return"".concat((null===e||void 0===e?void 0:e.firstName)||""," ").concat((null===e||void 0===e?void 0:e.lastName)||"").trim()||(null===e||void 0===e?void 0:e.phoneNumber)}})}),(0,m.jsx)(g.ZP,{className:"md:w-[30%] py-1",children:(0,m.jsxs)("select",{className:"w-full px-3 py-2 border rounded-md",value:F,onChange:function(e){return G(e.target.value)},children:[(0,m.jsx)("option",{value:"",children:"Barcha baholar"}),(0,m.jsx)("option",{value:"5",children:"5 yulduz"}),(0,m.jsx)("option",{value:"4",children:"4 yulduz"}),(0,m.jsx)("option",{value:"3",children:"3 yulduz"}),(0,m.jsx)("option",{value:"2",children:"2 yulduz"}),(0,m.jsx)("option",{value:"1",children:"1 yulduz"})]})})]}),K=(0,l.useMemo)((function(){return{rating:F||void 0}}),[F]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(o.iA,{dataUrl:"review/paging",columns:_,searchable:!0,headerChildren:H,exQueryParams:K,onRowClick:function(e){Z(e),M(!0)},onDeleteColumn:function(e){return z(e._id)}}),(0,m.jsx)(v.Z,{open:w,setOpen:z,url:"review/delete"}),(0,m.jsx)(y.Z,{open:W,setOpen:M,title:"Sharh Tafsilotlari",canCloseView:!0,canClose:!0,width:800,children:N&&(0,m.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{style:{fontWeight:600,marginBottom:"8px"},children:"Mijoz"}),(0,m.jsxs)("div",{style:{fontSize:"14px"},children:[(0,m.jsxs)("div",{children:[(0,u.get)(N,"customer.firstName","")," ",(0,u.get)(N,"customer.lastName","")]}),(0,m.jsx)("div",{style:{color:"#6b7280"},children:(0,u.get)(N,"customer.phoneNumber","")})]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{style:{fontWeight:600,marginBottom:"8px"},children:"Baho"}),(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,m.jsx)(x.Z,{value:(0,u.get)(N,"rating",0),readOnly:!0,precision:.5}),(0,m.jsxs)("span",{children:[(0,u.get)(N,"rating",0)," / 5"]})]})]}),(0,u.get)(N,"comment")&&(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{style:{fontWeight:600,marginBottom:"8px"},children:"Sharh"}),(0,m.jsx)("p",{style:{fontSize:"14px",background:"#f3f4f6",padding:"12px",borderRadius:"6px"},children:(0,u.get)(N,"comment")})]}),(null===(e=(0,u.get)(N,"rateComments"))||void 0===e?void 0:e.length)>0&&(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{style:{fontWeight:600,marginBottom:"8px"},children:"Tanlangan Xususiyatlar"}),(0,m.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:(0,u.get)(N,"rateComments",[]).map((function(e,t){var n,r;return(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"4px 12px",background:"#f3f4f6",borderRadius:"6px"},children:[(null===(n=e.image)||void 0===n?void 0:n.url)&&(0,m.jsx)("img",{src:e.image.url,alt:"",style:{width:"24px",height:"24px",borderRadius:"4px"}}),(0,m.jsx)("span",{style:{fontSize:"14px"},children:(null===(r=e.title)||void 0===r?void 0:r.uz)||e.title||""})]},t)}))})]}),(null===(t=(0,u.get)(N,"images"))||void 0===t?void 0:t.length)>0&&(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{style:{fontWeight:600,marginBottom:"8px"},children:"Rasmlar"}),(0,m.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px"},children:(0,u.get)(N,"images",[]).map((function(e,t){return(0,m.jsx)("img",{src:e.url||e.webpUrl,alt:"Review ".concat(t+1),style:{width:"100%",height:"128px",objectFit:"cover",borderRadius:"6px",border:"1px solid #e5e7eb"}},t)}))})]}),(0,u.get)(N,"order")&&(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{style:{fontWeight:600,marginBottom:"8px"},children:"Buyurtma"}),(0,m.jsxs)("div",{style:{fontSize:"14px"},children:["#",(0,u.get)(N,"order.number","")]})]}),(0,u.get)(N,"product")&&(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{style:{fontWeight:600,marginBottom:"8px"},children:"Mahsulot"}),(0,m.jsx)("div",{style:{fontSize:"14px"},children:"object"===typeof(0,u.get)(N,"product.name")?(0,u.get)(N,"product.name.uz")||(0,u.get)(N,"product.name.ru")||(0,u.get)(N,"product.name.en"):(0,u.get)(N,"product.name")})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{style:{fontWeight:600,marginBottom:"8px"},children:"Do'kon"}),(0,m.jsx)("div",{style:{fontSize:"14px"},children:"uygaayt"===(0,u.get)(N,"storeId")?"Uygaayt Market":(0,u.get)(N,"store.name","")||(0,u.get)(N,"storeId","")})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{style:{fontWeight:600,marginBottom:"8px"},children:"Sana"}),(0,m.jsx)("div",{style:{fontSize:"14px",color:"#6b7280"},children:N.createdAt?new Date(N.createdAt).toLocaleString("uz-UZ"):"-"})]})]})})]})}}}]);
//# sourceMappingURL=456.e96dd24b.chunk.js.map