"use strict";(self.webpackChunkbestune_admin=self.webpackChunkbestune_admin||[]).push([[884],{4162:(e,r,t)=>{t.d(r,{A:()=>m});var o=t(58168),a=t(98587),n=t(63462),s=t(95006),i=t(46004),l=t(9523);const d=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],c=["component","slots","slotProps"],u=["component"];function m(e,r){const{className:t,elementType:m,ownerState:x,externalForwardedProps:h,getSlotOwnerState:v,internalForwardedProps:p}=r,g=(0,a.A)(r,d),{component:f,slots:b={[e]:void 0},slotProps:A={[e]:void 0}}=h,j=(0,a.A)(h,c),y=b[e]||m,C=(0,i.A)(A[e],x),w=(0,l.A)((0,o.A)({className:t},g,{externalForwardedProps:"root"===e?j:void 0,externalSlotProps:C})),{props:{component:k},internalRef:S}=w,N=(0,a.A)(w.props,u),B=(0,n.A)(S,null==C?void 0:C.ref,r.ref),F=v?v(N):{},I=(0,o.A)({},x,F),M="root"===e?k||f:k,R=(0,s.A)(y,(0,o.A)({},"root"===e&&!f&&!b[e]&&p,"root"!==e&&!b[e]&&p,N,M&&{as:M},{ref:B}),I);return Object.keys(F).forEach(e=>{delete R[e]}),[y,R]}},12884:(e,r,t)=>{t.r(r),t.d(r,{default:()=>ce});var o=t(73216),a=t(89379),n=t(5468),s=t(65043),i=t(53536),l=t(74117);var d=t(72473),c=t(13094),u=t(24858),m=t(83501),x=t(68903),h=t(79190),v=t(61698),p=t(70579);const g=e=>{let{formStore:r,editingCourierId:t,resetForm:o,productProps:i}=e;const{t:d}=(0,l.Bd)(),{control:c,handleSubmit:u,reset:m,watch:g,setValue:f}=r,[b,A]=(0,s.useState)(),{courierImages:j,setCourierImages:y,mainImageId:C,setMainImageId:w}=i,{mutate:k,status:S}=(0,v.L2)(t?"courier/update":"courier/create","post"),{data:N,status:B}=(0,v.gf)("courier/get-by-id/".concat(t),{},{enabled:!!t,suspense:!1});(0,s.useEffect)(()=>{"success"===S&&o()},[S]);return(0,s.useEffect)(()=>{"success"===B&&m((0,a.A)((0,a.A)({},N.data),{},{imageId:N.data.image}))},[N,B]),(0,p.jsx)("div",{className:"custom-drawer",children:(0,p.jsx)("form",{id:"courier",onSubmit:u(e=>{var r;k((0,a.A)((0,a.A)({},e),{},{imageId:null===(r=e.imageId)||void 0===r?void 0:r._id,_id:t,carBrand:e.carBrand||"",carModel:e.carModel||"",carNumber:e.carNumber||"",carColor:e.carColor||""}))}),children:(0,p.jsxs)(x.Ay,{container:!0,spacing:2,children:[(0,p.jsxs)(x.Ay,{item:!0,md:12,children:[(0,p.jsx)(n.LR,{control:c,name:"phoneNumber",label:d("common.phoneNumber")}),(null===b||void 0===b?void 0:b._id)&&!t&&(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsx)("span",{className:"text-error mt-2",children:d("common.alreadyExistEmployee")}),(0,p.jsx)(n.O6,{title:d("general.add"),onClick:()=>{m((0,a.A)((0,a.A)({},b),{},{_id:void 0})),A(null)}})]})]}),(0,p.jsx)(x.Ay,{item:!0,md:12,children:(0,p.jsx)(n.ks,{control:c,name:"firstName",label:d("common.firstName")})}),(0,p.jsx)(x.Ay,{item:!0,md:12,children:(0,p.jsx)(n.ks,{control:c,name:"lastName",label:d("common.lastName")})}),(0,p.jsx)(x.Ay,{item:!0,md:12,children:(0,p.jsx)(n.ks,{control:c,name:"password",label:d("common.password"),type:"password",rules:{required:!1}})}),(0,p.jsx)(x.Ay,{item:!0,md:12,children:(0,p.jsx)(n.ks,{control:c,name:"carBrand",label:d("COURIER.carBrand"),rules:{required:!1}})}),(0,p.jsx)(x.Ay,{item:!0,md:12,children:(0,p.jsx)(n.ks,{control:c,name:"carModel",label:d("COURIER.carModel"),rules:{required:!1}})}),(0,p.jsx)(x.Ay,{item:!0,md:12,children:(0,p.jsx)(n.ks,{control:c,name:"carNumber",label:d("COURIER.carNumber"),rules:{required:!1}})}),(0,p.jsx)(x.Ay,{item:!0,md:12,children:(0,p.jsx)(n.ks,{control:c,name:"carColor",label:d("COURIER.carColor"),rules:{required:!1}})}),(0,p.jsx)(x.Ay,{item:!0,md:12,children:(0,p.jsxs)("div",{className:"product-images",children:[(0,p.jsxs)(h.A,{children:[d("Rasm")," ",(0,p.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,p.jsx)("label",{className:"py-2",htmlFor:"",children:d("general.recommendation_img")}),(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),(0,p.jsx)(n.ME,{control:c,setValue:f,name:"imageId",accept:".png, .jpg, .jpeg"})]})})]})})})};var f,b=t(57528);const A=t(66253).default.div(f||(f=(0,b.A)(["\n  background-color: #fff;\n  border-radius: 20px;\n  padding: 32px 42px 24px 42px;\n  h2 {\n    font-weight: 500;\n    font-size: 26px;\n  }\n  button {\n    width: 100px;\n  }\n"]))),j=e=>{let{open:r,setOpen:t,title:o,url:a,confirmFn:i}=e;const{t:d}=(0,l.Bd)(),{mutate:c,status:u}=(0,v.L2)("".concat(a,"/").concat(r),"post");return(0,s.useEffect)(()=>{"success"===u&&t(null)},[u]),(0,p.jsx)(n.aF,{setOpen:t,open:!!r,children:(0,p.jsxs)(A,{children:[(0,p.jsx)("h2",{children:o||d("general.reallyDelete")}),(0,p.jsx)(n.CX,{isCancelFromRoute:!1,SubmitTitle:d("general.yes"),cancelTitle:d("general.no"),onClick:()=>a?c({_id:r}):i(),onCancel:()=>t(!1)})]})})};var y=t(35475),C=t(11906),w=t(51962),k=t(15795),S=t(19504),N=t(37216);const B=e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,F=(e,r)=>{let[t,o]=e,[a,n]=r;return Math.sqrt((a-t)**2+(n-o)**2)},I=e=>{let{id:r,geometry:t,properties:o,options:a,duration:n=4e3,easingFunction:i=B}=e;const[l,d]=(0,s.useState)(t),c=(0,s.useRef)(t),u=(0,s.useRef)([]),m=(0,s.useRef)(null),x=(0,s.useRef)(!1);return(0,s.useEffect)(()=>{let e=t;const r=c.current,o=u.current;let a=F(r,e);if(((e,r,t)=>{if(t.length<2)return!1;const[o,a]=t[t.length-1],[n,s]=t[t.length-2],i=F([n,s],[o,a]);return F([o,a],r)<i})(0,e,o))return void console.log("\u26a0 Orqaga qaytish aniqlandi! Lokatsiya yangilanmadi.");a<5e-4&&(console.log("\u26a0 Juda kichik harakat: Sun'iy tebranish qo\u2018shildi!"),e=(e=>{let[r,t]=e;return[r+1e-4*(Math.random()-.5),t+1e-4*(Math.random()-.5)]})(r),a=F(r,e));const n=Math.min(5e3,Math.max(2e3,2e8*a));x.current=!0;const s=Date.now(),l=()=>{const t=Date.now()-s;let o=Math.min(t/n,1);o=i(o);const a=[r[0]+(e[0]-r[0])*o,r[1]+(e[1]-r[1])*o];d(a),o<1?m.current=requestAnimationFrame(l):(x.current=!1,c.current=e,u.current.push(e))};return m.current&&cancelAnimationFrame(m.current),m.current=requestAnimationFrame(l),()=>{m.current&&(cancelAnimationFrame(m.current),x.current=!1)}},[t]),(0,p.jsx)(N.Ro,{geometry:l,properties:o,options:a},r)},M=e=>{let{storeCoordinates:r,couriers:t,showDriverName:o}=e;const[n,i]=(0,s.useState)({center:r,zoom:12,behaviors:["default","scrollZoom"]}),l=(0,s.useMemo)(()=>t,[t]);return(0,p.jsx)("div",{style:{height:"calc(100% - 140px)"},children:(0,p.jsx)(N.Xi,{query:{load:"package.full"},children:(0,p.jsx)(N.T5,{width:"100%",height:"100%",state:n,onBoundsChange:e=>{i(r=>(0,a.A)((0,a.A)({},r),{},{center:e.get("newCenter"),zoom:e.get("newZoom")}))},children:null===l||void 0===l?void 0:l.map((e,r)=>(0,p.jsx)(I,{id:null===e||void 0===e?void 0:e._id,geometry:[null===e||void 0===e?void 0:e.location.latitude,null===e||void 0===e?void 0:e.location.longitude],properties:{iconContent:r+1,iconCaption:o?"".concat((null===e||void 0===e?void 0:e.firstName)||""," ").concat((null===e||void 0===e?void 0:e.lastName)||""):void 0,balloonContentHeader:"".concat(null===e||void 0===e?void 0:e.firstName," ").concat(null===e||void 0===e?void 0:e.lastName)},options:{preset:!0!==(null===e||void 0===e?void 0:e.hasOrder)?"islands#greenAutoCircleIcon":"islands#blackAutoCircleIcon",draggable:!1},duration:2e4,easingFunction:e=>e*e},null===e||void 0===e?void 0:e._id))})})})};var R=t(87988),E=t(77837);const O=()=>{var e,r,t,h;const f=(0,S.A)(),[b,A]=(0,y.ok)(),[N,B]=(0,s.useState)(),[F,I]=(0,s.useState)(),O=(()=>{const{t:e}=(0,l.Bd)();return[{field:e("common.fullName"),renderCell:e=>(0,i.get)(e,"row.firstName","")+" "+(0,i.get)(e,"row.lastName",""),flex:1.5},{field:e("common.phoneNumber"),renderCell:e=>e.row.phoneNumber},{field:e("common.rating"),renderCell(e){var r,t;return 5!==(null===e||void 0===e||null===(r=e.row)||void 0===r?void 0:r.rating.toFixed(1))?null===e||void 0===e||null===(t=e.row)||void 0===t?void 0:t.rating.toFixed(1):"5"}}]})(),D=(0,m.L)(),{t:T}=(0,l.Bd)(),L=(0,d.j)(),z=(0,u.mN)(),[P,_]=(0,s.useState)([]),[q,H]=(0,s.useState)(),V=(0,o.Zp)(),[U,W]=(0,s.useState)(f.type||"table"),[Y,X]=(0,s.useState)(!0),[Z,G]=(0,s.useState)(2e5),J=(0,d.G)(e=>e.SocketState.render),[K,Q]=(0,s.useState)([]),$=()=>{B(void 0),z.reset({firstName:"",lastName:"",phoneNumber:"",password:"",carBrand:"",carColor:"",carModel:"",carNumber:"",imageUrl:""})},ee=e=>{e!==U&&(W(e),A({type:e}))};(0,s.useEffect)(()=>{f.type||A({type:"table"})},[f,A]);const{mutate:re,data:te,reset:oe,status:ae}=(0,v.L2)("courier/map","post",{},!0),{data:ne,status:se}=(0,v.gf)("store/get",{},{suspense:!1});(0,s.useEffect)(()=>{"map"===U&&re({radius:+Z})},[U,Z]),(0,s.useEffect)(()=>{"success"===se&&z.reset()},[se]);const ie=[null===ne||void 0===ne||null===(e=ne.data)||void 0===e||null===(r=e.addressLocation)||void 0===r?void 0:r.latitude,null===ne||void 0===ne||null===(t=ne.data)||void 0===t||null===(h=t.addressLocation)||void 0===h?void 0:h.longitude],le=(0,s.useMemo)(()=>({}),[]);return(0,s.useEffect)(()=>{J&&(oe(),L((0,E.N8)(!1)))},[J]),(0,s.useEffect)(()=>{const e=e=>{Q(r=>{const t=r.map(r=>r._id===e.data.courierId?(0,a.A)((0,a.A)({},r),{},{location:e.data.location}):r);return t})};return R.s.on("courierLocation",e),()=>{R.s.off("courierLocation",e)}},[]),(0,s.useEffect)(()=>{null!==te&&void 0!==te&&te.data&&(Q(e=>{const r=new Map(e.map(e=>[e.courierId,e]));return te.data.forEach(e=>{r.set(e._id,e)}),Array.from(r.values())}),oe())},[te]),(0,p.jsxs)("div",{className:"bg-white h-full",children:[(0,p.jsxs)(x.Ay,{className:"w-full flex gap-x-3 items-center p-2",children:[(0,p.jsx)(C.A,{variant:"table"===U?"contained":"outlined",sx:{height:36,textTransform:"none",backgroundColor:"table"===U?"#EB5B00":"transparent",borderColor:"#EB5B00",color:"table"===U?"#fff":"#EB5B00","&:hover":{backgroundColor:"table"===U?"#EB5B00":"rgba(235, 91, 0, 0.1)",borderColor:"#EB5B00"}},onClick:()=>ee("table"),children:T("general.courier")}),(0,p.jsx)(C.A,{variant:"map"===U?"contained":"outlined",sx:{height:36,textTransform:"none",backgroundColor:"map"===U?"#EB5B00":"transparent",borderColor:"#EB5B00",color:"map"===U?"#fff":"#EB5B00","&:hover":{backgroundColor:"map"===U?"#EB5B00":"rgba(235, 91, 0, 0.1)",borderColor:"#EB5B00"}},onClick:()=>ee("map"),children:T("general.map")})]}),"map"===U?(0,p.jsxs)(x.Ay,{className:"flex items-center justify-between px-2",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)(w.A,{id:"showDriverName",checked:Y,onChange:e=>{X(e.target.checked)}}),(0,p.jsx)("label",{htmlFor:"showDriverName",className:"hover",children:T("general.show_name")})]}),(0,p.jsx)("div",{children:(0,p.jsx)(k.A,{value:Z/1e3,onChange:e=>{const r=parseFloat(e.target.value)||0;G(1e3*r)},size:"small",placeholder:String(T("general.radius")),label:T("general.radius"),type:"number"})})]}):null,"table"===U?(0,p.jsx)(n.XI,{dataUrl:"courier/paging",columns:O,searchable:!0,onAddButton:D("courierCreate")?()=>L((0,c.GF)(!0)):void 0,onEditColumn:D("courierUpdate")?e=>{B(e._id),L((0,c.GF)(!0))}:void 0,onDeleteColumn:D("courierDelete")?e=>I(e._id):void 0,onRowClick:e=>V("/courier/".concat(e._id)),exQueryParams:le}):(0,p.jsx)(M,{couriers:K,storeCoordinates:ie,showDriverName:Y}),(0,p.jsx)(j,{open:F,setOpen:I,url:"courier/delete"}),(0,p.jsx)(n.wA,{FORM_ID:"courier",isEditing:!!N,customTitle:T("general.addCourier"),onClose:$,children:(0,p.jsx)(g,{formStore:z,resetForm:$,editingCourierId:N,productProps:{courierImages:P,setCourierImages:_,mainImageId:q,setMainImageId:H}})})]})};var D=t(96446),T=t(81045),L=t(85865),z=t(26494),P=t(19042),_=t(69974);const q=e=>{var r,t,n,s,i,d,c,u;let{courierInfoData:m,offAndOn:h,offAndOnData:v,watch:g,register:f,setValue:b}=e;const{t:A}=(0,l.Bd)(),{id:j}=(0,o.g)();return(0,p.jsxs)(x.Ay,{children:[(0,p.jsxs)(D.A,{sx:{background:"linear-gradient(135deg, #EB7B00 0%, #EB5B00 100%)",pt:6,pb:8,px:4,textAlign:"center",color:"white",position:"relative",borderTopLeftRadius:"15px",borderTopRightRadius:"15px"},children:[(0,p.jsx)(T.A,{src:"http://46.101.209.158:3003/v1/"+(null===m||void 0===m||null===(r=m.data)||void 0===r||null===(t=r.image)||void 0===t?void 0:t.url),sx:{width:120,height:120,mx:"auto",border:"4px solid white",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.05)"}}}),(0,p.jsx)(L.A,{variant:"h4",sx:{mt:2,fontWeight:"bold"},children:null===m||void 0===m||null===(n=m.data)||void 0===n?void 0:n.fullName})]}),(0,p.jsx)(z.A,{sx:{backgroundColor:"white",px:4,py:3},children:(0,p.jsxs)(D.A,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,p.jsxs)(D.A,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"#F7FAFC",borderRadius:2,transition:"transform 0.2s ease","&:hover":{transform:"translateX(8px)"}},children:[(0,p.jsx)(_.A,{style:{fontSize:20,color:"#EB5B00"}}),(0,p.jsx)(L.A,{variant:"body1",color:"text.primary",children:null===m||void 0===m||null===(s=m.data)||void 0===s?void 0:s.phoneNumber})]}),(0,p.jsx)(D.A,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"#F7FAFC",borderRadius:2,transition:"transform 0.2s ease","&:hover":{transform:"translateX(8px)"}},children:(0,p.jsxs)(L.A,{variant:"body2",sx:{color:"#546e7a",fontWeight:500,display:"flex",alignItems:"center",gap:1},children:[(0,p.jsx)("span",{style:{fontWeight:"bold",color:"#333333"},children:"Reyting:"}),(0,p.jsx)("span",{style:{fontSize:"0.9rem",color:"goldenrod"},children:5!==Number(null===m||void 0===m||null===(i=m.data)||void 0===i||null===(d=i.rating)||void 0===d?void 0:d.toFixed(1))?null===m||void 0===m||null===(c=m.data)||void 0===c||null===(u=c.rating)||void 0===u?void 0:u.toFixed(1):"5"}),(0,p.jsx)("span",{style:{fontSize:"0.9rem",color:"goldenrod"},children:" / 5"})]})}),(0,p.jsxs)(D.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:2,p:2,backgroundColor:"#F7FAFC",borderRadius:2},children:[(0,p.jsx)(L.A,{variant:"body2",sx:{fontWeight:"bold",color:g("isOnline")?"green":"red"},children:g("isOnline")?A("general.online"):A("general.offline")}),(0,p.jsx)(P.A,(0,a.A)((0,a.A)({checked:g("isOnline"),id:"isOnline"},f("isOnline")),{},{onChange:e=>{const r=e.target.checked;b("isOnline",r),h({_id:j,isOnline:r})},sx:{"& .MuiSwitch-thumb":{backgroundColor:g("isOnline")?"green":"red"},"& .MuiSwitch-track":{backgroundColor:g("isOnline")?"green":"red"}}}))]})]})})]})};var H=t(80045),V=t(63336),U=t(29013),W=t(24056),Y=t(10611);const X=(0,t(59662).A)([(0,p.jsx)("path",{d:"M19 7c0-1.1-.9-2-2-2h-3v2h3v2.65L13.52 14H10V9H6c-2.21 0-4 1.79-4 4v3h2c0 1.66 1.34 3 3 3s3-1.34 3-3h4.48L19 10.35zM7 17c-.55 0-1-.45-1-1h2c0 .55-.45 1-1 1"},"0"),(0,p.jsx)("path",{d:"M5 6h5v2H5zm14 7c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3m0 4c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"},"1")],"DeliveryDining");var Z=t(79574),G=t(61958),J=t(34046),K=t(44978),Q=t(95720),$=t(60446),ee=t.n($),re=t(51525),te=t.n(re);const oe=e=>{const r=Math.floor(e/3600),t=Math.floor(e%3600/60),o=e%60;return r>0?"".concat(r," soat ").concat(t," daqiqa"):t>0?"".concat(t," daqiqa ").concat(o," sekund"):"".concat(o," sekund")};var ae=t(72824);const ne=["children","value","index"];function se(e){const{children:r,value:t,index:o}=e,n=(0,H.A)(e,ne);return(0,p.jsx)("div",(0,a.A)((0,a.A)({role:"tabpanel",hidden:t!==o,id:"customer-tabpanel-".concat(o),"aria-labelledby":"customer-tab-".concat(o)},n),{},{children:t===o&&(0,p.jsx)(D.A,{sx:{p:3},children:r})}))}ee().extend(te());const ie=e=>{let{_id:r,id:t,amount:a,status:n,currency:s,date:i,status_color:l,courierLateTime:d,courierLateTimeToStore:c,courierInStoreAt:u}=e;const m=(0,o.Zp)();return(0,p.jsxs)(D.A,{sx:{mb:2,p:3,backgroundColor:"#F7FAFC",borderRadius:2,cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease","&:hover":{transform:"translateY(-4px)",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}},onClick:()=>m("/order/".concat(r)),children:[(0,p.jsxs)(D.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,p.jsxs)(D.A,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,p.jsx)(J.A,{style:{fontSize:20,color:"#6B46C1"}}),(0,p.jsxs)(L.A,{variant:"subtitle1",fontWeight:"bold",children:[(0,K.t)("general.order")," #",t]})]}),(0,p.jsx)("span",{style:{backgroundColor:l,color:"white",padding:"8px",borderRadius:"10px",fontSize:"13px"},children:n})]}),(0,p.jsxs)(D.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,p.jsx)("span",{children:"Buyurtma yaratilgan vaqti:"}),(0,p.jsx)(L.A,{variant:"body2",color:"text.secondary",children:i})]}),(0,p.jsxs)(D.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,p.jsx)("span",{children:"Buyurtma narxi:"}),(0,p.jsxs)(L.A,{variant:"subtitle1",fontWeight:"bold",color:"#EB5B00",children:[(0,ae.j)(a)," ",s]})]}),d?(0,p.jsxs)(D.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,p.jsx)("span",{children:"Kechikdi buyurtmaga:"}),(0,p.jsxs)("span",{className:"text-red-500",children:[oe(d)," ",(0,K.t)("general.late")]})]}):null,c?(0,p.jsxs)(D.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,p.jsx)("span",{children:"Kechikdi do'konga:"}),(0,p.jsxs)("span",{className:"text-red-500",children:[oe(c)," ",(0,K.t)("general.late")]})]}):null,(0,p.jsxs)(D.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,p.jsx)("span",{children:"Do'konga yetib kelgan vaqti:"}),(0,p.jsx)(L.A,{variant:"body2",color:"text.secondary",children:u})]})]})},le=e=>{var r,t,o,l,d;let{courierInfoData:c,historyOrders:u}=e;const[m,h]=s.useState(1),[v,g]=(0,s.useState)(!1),[f,b]=(0,s.useState)(!1),[A,j]=(0,y.ok)(),w=(0,S.A)(),{state:{data:k}}=(0,Q.A)();(0,s.useEffect)(()=>{N(v)},[v]),(0,s.useEffect)(()=>{B(f)},[f]);const N=e=>{j((0,a.A)((0,a.A)({},w),{},{isCourierLeft:e}))},B=e=>{j((0,a.A)((0,a.A)({},w),{},{isCourierLateToStore:e}))};return(0,p.jsxs)(V.A,{elevation:3,sx:{borderRadius:4,overflow:"hidden"},children:[(0,p.jsx)(D.A,{sx:{borderBottom:1,borderColor:"divider",backgroundColor:"#F7FAFC"},children:(0,p.jsxs)(U.A,{value:m,onChange:(e,r)=>{h(r)},sx:{"& .MuiTab-root":{minHeight:64,fontSize:"1rem"},"& .Mui-selected":{color:"#EB5B00 !important"},"& .MuiTabs-indicator":{backgroundColor:"#EB5B00"}},children:[(0,p.jsx)(W.A,{icon:(0,p.jsx)(X,{style:{fontSize:20}}),iconPosition:"start",label:(0,K.t)("tabs.avto")}),(0,p.jsx)(W.A,{icon:(0,p.jsx)(G.A,{style:{fontSize:20}}),iconPosition:"start",label:(0,K.t)("tabs.orders")})]})}),(0,p.jsx)(se,{value:m,index:0,children:(0,p.jsx)(D.A,{sx:{display:"block",mb:2},children:[{label:(0,K.t)("COURIER.carBrand"),value:null===c||void 0===c||null===(r=c.data)||void 0===r?void 0:r.carBrand},{label:(0,K.t)("COURIER.carModel"),value:null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.carModel},{label:(0,K.t)("COURIER.carNumber"),value:null===c||void 0===c||null===(o=c.data)||void 0===o?void 0:o.carNumber},{label:(0,K.t)("COURIER.carColor"),value:null===c||void 0===c||null===(l=c.data)||void 0===l?void 0:l.carColor}].map((e,r)=>(0,p.jsxs)(D.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[(0,p.jsxs)(L.A,{variant:"body1",fontWeight:"500",color:"text.secondary",sx:{minWidth:"120px"},children:[e.label,":"]}),(0,p.jsx)(L.A,{variant:"body1",fontWeight:"700",color:"text.primary",children:e.value||"-"})]},r))})}),(0,p.jsxs)(se,{value:m,index:1,children:[(0,p.jsxs)(x.Ay,{className:"flex items-center gap-2 pb-3",children:[(0,p.jsx)(n.wT,{}),(0,p.jsx)(C.A,{className:"bg-[#EB5B00] w-full",variant:"outlined",onClick:()=>{g(e=>!e)},children:v?(0,K.t)("driver.all_orders"):(0,K.t)("driver.late_orders")}),(0,p.jsx)(C.A,{className:"bg-[#EB5B00] w-full",variant:"outlined",onClick:()=>{b(e=>!e)},children:f?(0,K.t)("driver.all_orders"):(0,K.t)("driver.late_store")})]}),(0,p.jsx)(D.A,{sx:{maxHeight:"500px",overflowY:"auto"},children:null===u||void 0===u||null===(d=u.data)||void 0===d?void 0:d.map(e=>{var r,t;return(0,p.jsx)(ie,{id:null===e||void 0===e?void 0:e.number,_id:null===e||void 0===e?void 0:e._id,amount:null===e||void 0===e?void 0:e.totalPrice,status:null===e||void 0===e||null===(r=e.state)||void 0===r?void 0:r.name,status_color:null===e||void 0===e||null===(t=e.state)||void 0===t?void 0:t.color,currency:(0,i.get)(k,"currency","uzs"),date:null!==e&&void 0!==e&&e.createdAt?ee()(e.createdAt).format("YYYY-MM-DD HH:mm:ss"):"N/A",courierLateTime:null===e||void 0===e?void 0:e.courierLateTime,courierLateTimeToStore:null===e||void 0===e?void 0:e.courierLateTimeToStore,courierInStoreAt:null!==e&&void 0!==e&&e.courierInStoreAt?ee()(e.courierInStoreAt).format("YYYY-MM-DD HH:mm:ss"):"N/A"},null===e||void 0===e?void 0:e.number)})})]}),(0,p.jsx)(se,{value:m,index:2,children:(0,p.jsxs)(D.A,{sx:{p:3},children:[(0,p.jsxs)(D.A,{sx:{mb:4},children:[(0,p.jsxs)(D.A,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[(0,p.jsx)(Z.A,{style:{fontSize:24,color:"#6B46C1"}}),(0,p.jsx)(L.A,{variant:"h6",children:"Total Spent"})]}),(0,p.jsx)(L.A,{variant:"h4",color:"#6B46C1",fontWeight:"bold",mb:1,children:"$1,250.00"}),(0,p.jsx)(Y.A,{variant:"determinate",value:70,sx:{height:8,borderRadius:4,backgroundColor:"#E9D8FD","& .MuiLinearProgress-bar":{backgroundColor:"#6B46C1"}}})]}),(0,p.jsxs)(D.A,{sx:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:3},children:[(0,p.jsxs)(V.A,{sx:{p:3,backgroundColor:"#F7FAFC"},children:[(0,p.jsx)(L.A,{variant:"subtitle2",color:"text.secondary",mb:1,children:"Member Since"}),(0,p.jsx)(L.A,{variant:"h6",children:"January 15, 2024"})]}),(0,p.jsxs)(V.A,{sx:{p:3,backgroundColor:"#F7FAFC"},children:[(0,p.jsx)(L.A,{variant:"subtitle2",color:"text.secondary",mb:1,children:"Total Orders"}),(0,p.jsx)(L.A,{variant:"h6",children:"15 orders"})]})]})]})})]})},de=()=>{const[e,r]=(0,s.useState)("orders"),{t:t}=(0,l.Bd)(),{id:a}=(0,o.g)(),{control:n,watch:i,register:d,handleSubmit:c,setValue:m}=(0,u.mN)(),h=(0,S.A)(),{data:g,status:f}=(0,v.gf)("courier/get-by-id/".concat(a),{},{enabled:!!a,suspense:!1}),{mutate:b,data:A}=(0,v.L2)("order/paging","post",{},!0);(0,s.useEffect)(()=>{const e="true"===h.isCourierLeft,r="true"===h.isCourierLateToStore;b({courierId:a,dateFrom:h.dateFrom,dateTo:h.dateTo,isCourierLate:e,isCourierLateToStore:r})},[h.dateFrom,h.dateTo,h.isCourierLeft,h.isCourierLateToStore]);const{mutate:j,data:y}=(0,v.L2)("courier/set-online","post");return(0,s.useEffect)(()=>{var e;void 0!==(null===g||void 0===g||null===(e=g.data)||void 0===e?void 0:e.isOnline)&&m("isOnline",g.data.isOnline)},[g,m]),(0,p.jsx)(p.Fragment,{children:a&&(0,p.jsxs)(x.Ay,{className:"grid md:grid-cols-2 gap-4 p-2",children:[(0,p.jsx)(q,{courierInfoData:g,offAndOn:j,offAndOnData:y,watch:i,register:d,setValue:m}),(0,p.jsx)(le,{historyOrders:null===A||void 0===A?void 0:A.data,courierInfoData:g})]})})},ce=()=>(0,p.jsxs)(o.BV,{children:[(0,p.jsx)(o.qh,{path:":id",element:(0,p.jsx)(de,{})}),(0,p.jsx)(o.qh,{path:"*",element:(0,p.jsx)(O,{})})]})},26494:(e,r,t)=>{t.d(r,{A:()=>p});var o=t(58168),a=t(98587),n=t(65043),s=t(58387),i=t(98610),l=t(34535),d=t(6431),c=t(92532),u=t(72372);function m(e){return(0,u.Ay)("MuiCardContent",e)}(0,c.A)("MuiCardContent",["root"]);var x=t(70579);const h=["className","component"],v=(0,l.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,r)=>r.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),p=n.forwardRef(function(e,r){const t=(0,d.b)({props:e,name:"MuiCardContent"}),{className:n,component:l="div"}=t,c=(0,a.A)(t,h),u=(0,o.A)({},t,{component:l}),p=(e=>{const{classes:r}=e;return(0,i.A)({root:["root"]},m,r)})(u);return(0,x.jsx)(v,(0,o.A)({as:l,className:(0,s.A)(p.root,n),ownerState:u,ref:r},c))})},34046:(e,r,t)=>{var o=t(24994);r.A=void 0;var a=o(t(40039)),n=t(70579);r.A=(0,a.default)((0,n.jsx)("path",{d:"M20 8v12c0 1.1-.9 2-2 2H6c-1.1 0-2-.9-2-2V8c0-1.86 1.28-3.41 3-3.86V2h3v2h4V2h3v2.14c1.72.45 3 2 3 3.86M6 12v2h10v2h2v-4z"}),"Backpack")},61958:(e,r,t)=>{var o=t(24994);r.A=void 0;var a=o(t(40039)),n=t(70579);r.A=(0,a.default)((0,n.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}),"History")},69974:(e,r,t)=>{t.d(r,{A:()=>n});var o=t(59662),a=t(70579);const n=(0,o.A)((0,a.jsx)("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02z"}),"Phone")},72824:(e,r,t)=>{t.d(r,{j:()=>o});const o=e=>{if(e||0===e){return(Math.round(100*(e+Number.EPSILON))/100).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}).replaceAll(","," ")}return""}},79574:(e,r,t)=>{t.d(r,{A:()=>n});var o=t(59662),a=t(70579);const n=(0,o.A)([(0,a.jsx)("path",{d:"M5 8h2v8H5zm7 0H9c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1m-1 6h-1v-4h1zm7-6h-3c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1m-1 6h-1v-4h1z"},"0"),(0,a.jsx)("path",{d:"M2 4v16h20V4zm2 14V6h16v12z"},"1")],"Money")},81045:(e,r,t)=>{t.d(r,{A:()=>j});var o=t(98587),a=t(58168),n=t(65043),s=t(58387),i=t(98610),l=t(34535),d=t(6431),c=t(59662),u=t(70579);const m=(0,c.A)((0,u.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");var x=t(92532),h=t(72372);function v(e){return(0,h.Ay)("MuiAvatar",e)}(0,x.A)("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);var p=t(4162);const g=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],f=(0,l.Ay)("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.root,r[t.variant],t.colorDefault&&r.colorDefault]}})(e=>{let{theme:r}=e;return{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:r.typography.fontFamily,fontSize:r.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(r.vars||r).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:(0,a.A)({color:(r.vars||r).palette.background.default},r.vars?{backgroundColor:r.vars.palette.Avatar.defaultBg}:(0,a.A)({backgroundColor:r.palette.grey[400]},r.applyStyles("dark",{backgroundColor:r.palette.grey[600]})))}]}}),b=(0,l.Ay)("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,r)=>r.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),A=(0,l.Ay)(m,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,r)=>r.fallback})({width:"75%",height:"75%"});const j=n.forwardRef(function(e,r){const t=(0,d.b)({props:e,name:"MuiAvatar"}),{alt:l,children:c,className:m,component:x="div",slots:h={},slotProps:j={},imgProps:y,sizes:C,src:w,srcSet:k,variant:S="circular"}=t,N=(0,o.A)(t,g);let B=null;const F=function(e){let{crossOrigin:r,referrerPolicy:t,src:o,srcSet:a}=e;const[s,i]=n.useState(!1);return n.useEffect(()=>{if(!o&&!a)return;i(!1);let e=!0;const n=new Image;return n.onload=()=>{e&&i("loaded")},n.onerror=()=>{e&&i("error")},n.crossOrigin=r,n.referrerPolicy=t,n.src=o,a&&(n.srcset=a),()=>{e=!1}},[r,t,o,a]),s}((0,a.A)({},y,{src:w,srcSet:k})),I=w||k,M=I&&"error"!==F,R=(0,a.A)({},t,{colorDefault:!M,component:x,variant:S}),E=(e=>{const{classes:r,variant:t,colorDefault:o}=e,a={root:["root",t,o&&"colorDefault"],img:["img"],fallback:["fallback"]};return(0,i.A)(a,v,r)})(R),[O,D]=(0,p.A)("img",{className:E.img,elementType:b,externalForwardedProps:{slots:h,slotProps:{img:(0,a.A)({},y,j.img)}},additionalProps:{alt:l,src:w,srcSet:k,sizes:C},ownerState:R});return B=M?(0,u.jsx)(O,(0,a.A)({},D)):c||0===c?c:I&&l?l[0]:(0,u.jsx)(A,{ownerState:R,className:E.fallback}),(0,u.jsx)(f,(0,a.A)({as:x,ownerState:R,className:(0,s.A)(E.root,m),ref:r},N,{children:B}))})}}]);
//# sourceMappingURL=884.c3a5f08a.chunk.js.map