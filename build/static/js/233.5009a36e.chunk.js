"use strict";(self.webpackChunkbestune_admin=self.webpackChunkbestune_admin||[]).push([[233],{88892:function(n,e,t){var i=t(29439),o=t(72791),r=t(73405),a=t(80184);e.Z=function(n){var e=n.getCoordinate,t=n.center,d=n.height,l=(0,o.useState)(t),s=(0,i.Z)(l,2),c=s[0],u=s[1];return(0,o.useEffect)((function(){u(t)}),[t]),(0,a.jsx)(r.Yy,{children:(0,a.jsxs)(r.D5,{width:"100%",height:d||"500px",defaultState:{center:null!==t&&void 0!==t&&t.latitude?[null===t||void 0===t?void 0:t.latitude,null===t||void 0===t?void 0:t.longitude]:[41.315163390767026,69.27958692367339],zoom:14,behaviors:["default","scrollZoom"]},onClick:function(n){var t={latitude:n.get("coords")[0],longitude:n.get("coords")[1]};u(t),e(t)},modules:["geoObject.addon.editor"],children:[(0,a.jsx)(r.ah,{geometry:[null===c||void 0===c?void 0:c.latitude,null===c||void 0===c?void 0:c.longitude]}),(0,a.jsx)(r.ot,{}),(0,a.jsx)(r.Bo,{options:{float:"left"}}),(0,a.jsx)(r.Sj,{options:{float:"right"}}),(0,a.jsx)(r.Ly,{options:{float:"right"}})]})})}},1903:function(n,e,t){t.d(e,{Z:function(){return l}});var i,o=t(30168),r=t(47191),a=(0,t(17939).default)(r.LD)(i||(i=(0,o.Z)(["\n  display: flex;\n  flex-direction: column-reverse;\n  border: none;\n  width: 100%;\n  padding-bottom: 20px;\n  .quill {\n    .ql-container {\n      .ql-tooltip {\n        transform: translateX(97px);\n        z-index: 10;\n      }\n      .ql-editor {\n        background-color: #fff;\n        padding: 15px;\n        border-radius: 12px;\n        min-height: 80px;\n        transition: all 0.3s;\n        border: 1px solid #d9d9d9;\n        p {\n          margin: 0;\n          font-size: 14px;\n        }\n      }\n    }\n  }\n  .ql-toolbar {\n    padding: 0;\n    transition: opacity 1s ease-out;\n    border-radius: 0;\n    border-bottom: none;\n    margin-top: 10px;\n    button {\n      border: none;\n      margin: 0 5px;\n      svg {\n        width: 24px !important;\n        height: 24px !important;\n        fill: #000 !important;\n        path {\n          fill: #000;\n        }\n      }\n    }\n  }\n  .ql-editing {\n    left: 30px !important;\n    transform: translateX(0px) !important;\n    z-index: 100;\n  }\n"]))),d=t(80184),l=function(n){var e=n.value,t=n.onChange,i=n.onImageUpload,o=n.isError,r=n.type;return(0,d.jsx)(a,{controls:[["bold","italic","underline","strike","clean","unorderedList","orderedList","alignLeft","alignCenter","alignRight"]],isError:!!o,value:e,onChange:t,onImageUpload:i,type:r})}},66233:function(n,e,t){t.r(e),t.d(e,{default:function(){return Tn}});var i,o,r=t(57689),a=t(29439),d=t(61889),l=t(21836),s=t(62750),c=t(72466),u=t(90388),m=t(59460),p=t(25850),f=t(30168),x=t(17939),h=x.default.div(i||(i=(0,f.Z)(["\n  .MuiToggleButton-root {\n    border-radius: 12px;\n    background-color: #f5f5f5 !important;\n    z-index: 2;\n    transition: all 0.3s ease;\n    &.active {\n      background-color: #3e5189 !important;\n    }\n  }\n"]))),v=t(80184),g=function(){var n=(0,r.s0)(),e=(0,r.TH)().pathname;return(0,v.jsx)(h,{path:(0,p.Yt)(e),children:(0,v.jsxs)(c.Z,{color:"primary",value:(0,p.Yt)(e),exclusive:!0,onChange:function(e,t){t&&n("/order/".concat(t))},"aria-label":"Platform",children:[(0,v.jsx)(u.Z,{value:"table",className:"table"===(0,p.Yt)(e)?"active":"",children:(0,v.jsx)(m.Pp,{})}),(0,v.jsx)(u.Z,{value:"board",className:"board"===(0,p.Yt)(e)?"active":"",children:(0,v.jsx)(m.b1,{})})]})})},b=t(72791),j=t(39230),y=t(29001),N=t(79405),Z=t(35980),k=t(97892),w=t.n(k),C=t(763),A=t(90816),S=x.default.div(o||(o=(0,f.Z)(["\n  margin-bottom: 5px;\n  .MuiInputBase-root {\n    background-color: ",";\n    color: "," !important;\n  }\n  & .MuiSelect-select.Mui-disabled {\n    color: "," !important;\n    -webkit-text-fill-color: "," !important;\n  }\n\n  & svg {\n    path {\n      fill: "," !important;\n    }\n  }\n"])),(function(n){return n.stateColor}),(function(n){return n.luma>60?"#232323":"#ffffff"}),(function(n){return n.luma>60?"#232323":"#ffffff"}),(function(n){return n.luma>60?"#232323":"#ffffff"}),(function(n){return n.luma>60?"#232323":"#ffffff"})),_=t(4942),z=t(1413),P=t(75912),I=t(27391),E=t(1048),q=t(39500),L=t(71257),Y=t(35834),T=t(11087);var B,D,U=function(n){var e=n.options,t=void 0===e?[]:e,i=n.optionsUrl,o=void 0===i?"":i,r=n.returnOnlyId,d=void 0===r||r,l=n.label,c=n.disabled,u=n.placeholder,m=n.filterName,p=n.nameProp,f=void 0===p?"name":p,x=n.exQueryParams,h=void 0===x?{}:x,g=n.dataProp,y=void 0===g?"data.data":g,N=n.mapData,Z=n.onChange,k=(0,b.useState)(),w=(0,a.Z)(k,2),A=w[0],S=w[1],B=(0,b.useState)(),D=(0,a.Z)(B,2),U=D[0],M=D[1],V=(0,L.Z)(U,600),F=V.debouncedValue,O=V.isDebouncing,Q=(0,b.useState)(null),G=(0,a.Z)(Q,2),K=G[0],R=G[1],W=localStorage.getItem("i18nextLng")||"uz";(0,b.useEffect)((function(){S({search:U})}),[F]);var X=(0,s.h_)(o,(0,z.Z)((0,z.Z)({},A),h),{enabled:!!o,suspense:!1}),H=X.data,J=X.isFetching,$=function(n){return null!==n&&void 0!==n&&n.firstName?"".concat(null===n||void 0===n?void 0:n.firstName," ").concat(null===n||void 0===n?void 0:n.lastName):null===n||void 0===n?void 0:n[f]},nn=((0,C.get)(H,y)||t).map((function(n){return(0,z.Z)((0,z.Z)({},n),{},{name:$(n)})})),en=(0,T.lr)(),tn=(0,a.Z)(en,2),on=(tn[0],tn[1]),rn=(0,Y.Z)(),an=(0,j.$G)().t;return(0,v.jsxs)(E.M,{children:[l&&(0,v.jsx)("label",{children:l}),(0,v.jsx)(P.Z,{options:N?N(nn):nn,getOptionLabel:function(n){var e;return(null===n||void 0===n||null===(e=n.name)||void 0===e?void 0:e[W])||""},onChange:function(n,e){null===Z||void 0===Z||Z(e),R(d?null===e||void 0===e?void 0:e._id:e),m&&(e?on((0,z.Z)((0,z.Z)({},rn),{},(0,_.Z)({},m,null===e||void 0===e?void 0:e._id))):(delete rn[m],on((0,z.Z)({},rn))))},loading:J||O,disabled:c,sx:{"& fieldset":{border:"none"}},loadingText:"izlamoqda...",noOptionsText:!O&&"malumot topilmadi",value:d?(0,q.e)(nn,K):K,renderInput:function(n){return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(I.Z,(0,z.Z)((0,z.Z)({},n),{},{inputProps:(0,z.Z)((0,z.Z)({},n.inputProps),{},{onChange:function(e){var t,i;null===n||void 0===n||null===(t=n.inputProps)||void 0===t||null===(i=t.onChange)||void 0===i||i.call(t,e),M(e.target.value||"")}}),onBlur:function(){return M(void 0)},variant:"outlined",fullWidth:!0,placeholder:u||an("LABELS.ROLE_ALL.TITLE")}))})}})]})},M=function(){var n=(0,b.useState)(),e=(0,a.Z)(n,2),t=e[0],i=e[1],o=(0,N.T)(),c=((0,y.w)(),(0,s.uC)("order/state/".concat(null===t||void 0===t?void 0:t.orderId),"put",{onSuccess:function(){i(void 0),o((0,l.xV)(!0))}}).mutate);(0,b.useEffect)((function(){t&&c({stateId:t.stateId,_id:t.orderId,position:1})}),[t]);var u=function(n){var e=(0,j.$G)().t;return[{field:e("common.number"),renderCell:function(n){return n.row.number},flex:.6},{field:e("common.price"),renderCell:function(n){var e=n.row;return(0,A.Y)(e.totalPrice)},flex:.6},{field:e("common.customer"),renderCell:function(n){var e=n.row;return(0,C.get)(e,"customer.firstName","")+" "+(0,C.get)(e,"customer.lastName","")}},{field:e("common.phoneNumber"),renderCell:function(n){var e;return null===(e=n.row.customer)||void 0===e?void 0:e.phoneNumber}},{field:e("common.receiverPhoneNumber"),renderCell:function(n){var e;return null===(e=n.row.receiverCustomer)||void 0===e?void 0:e.phoneNumber}},{field:e("common.paymentType"),renderCell:function(n){var t=n.row;return e("enum.".concat(t.paymentType))},flex:.6},{field:e("common.time"),renderCell:function(n){var e=n.row;return w()(e.createdAt).format("DD.MM.YYYY HH:mm")}},{field:e("common.status"),renderCell:function(e){var t,i,o,r,a,d=e.row,l=null===d||void 0===d||null===(t=d.state)||void 0===t||null===(i=t.color)||void 0===i?void 0:i.substring(1),s=parseInt(l,16),c=.2126*(s>>16&255)+.7152*(s>>8&255)+.0722*(s>>0&255);return(0,v.jsx)(S,{stateColor:null===d||void 0===d||null===(o=d.state)||void 0===o?void 0:o.color,luma:c,onClick:function(n){return n.stopPropagation()},children:(0,v.jsx)(Z.Ph,{onChange:function(e){return n({stateId:e,orderId:d._id})},customValue:d.stateId,optionsUrl:"order-state/get-all",disabled:"completed"===(null===(r=d.state)||void 0===r?void 0:r.state)||"cancelled"===(null===(a=d.state)||void 0===a?void 0:a.state)})})}}]}(i),m=(0,r.s0)(),p=(0,j.$G)().t,f=(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(d.ZP,{container:!0,width:200,children:(0,v.jsx)(d.ZP,{item:!0,sm:12,children:(0,v.jsx)(U,{optionsUrl:"order-state/get-all",filterName:"stateId",placeholder:p("common.status"),dataProp:"data"})})}),(0,v.jsx)(g,{})]});return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(Z.iA,{dataUrl:"/order/paging",columns:u,headerChildren:f,searchable:!0,onAddButton:function(){return m("/order/add")},onRowClick:function(n){return m("/order/".concat(n._id))},exQueryParams:{stateId:void 0}})})},V=t(93433),F=t(48541),O=t(31976),Q=t(77865),G=t(13400),K=function(n,e){var t,i=b.useState(null),o=(0,a.Z)(i,2),r=o[0],d=o[1],l=function(){d(null)};return(0,v.jsxs)("div",{className:"d-flex justify-content-between align-items-center lane_title",children:[(0,v.jsx)("h3",{children:n.title}),(0,v.jsx)("div",{children:0===(null===(t=n.cards)||void 0===t?void 0:t.length)?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(G.Z,{"aria-owns":r?"simple-menu":void 0,"aria-haspopup":"true",onClick:function(n){d(n.currentTarget)}}),(0,v.jsx)(O.Z,{id:"simple-menu",anchorEl:r,open:Boolean(r),onClose:l,children:(0,v.jsx)(Q.Z,{onClick:function(){e({ids:[null===n||void 0===n?void 0:n.id]}),n.onDelete(null===n||void 0===n?void 0:n.id),l()},children:"Statusni o'chirish"})})]}):" "})]})},R=x.default.div(B||(B=(0,f.Z)(["\n  position: relative;\n  overflow-y: hidden !important;\n  background-color: #fff;\n  padding: 20px;\n  border-radius: 12px;\n  box-shadow: 0px 0px 4px 0px rgba(0, 0, 0, 0.07);\n  .header {\n    display: flex;\n    align-items: center;\n    justify-content: end;\n    margin-bottom: 10px;\n  }\n  .react-trello-board {\n    background-color: transparent;\n    height: 75vh !important;\n    padding: 0;\n    .react-trello-lane {\n      position: relative;\n      border-radius: 12px;\n      border: 1px solid #d9d9d9;\n      background-color: #ffffff;\n      width: 260px;\n      max-height: 70vh;\n      & {\n        width: 200px;\n      }\n      div:nth-child(2):not(div.smooth-dnd-draggable-wrapper) {\n        margin-top: 45px;\n        &::-webkit-scrollbar {\n          width: 10px;\n        }\n        &::-webkit-scrollbar-track {\n          background-color: #f6f6f6;\n          border-radius: 3px;\n        }\n        &::-webkit-scrollbar-thumb {\n          background-color: #d9d9d9;\n          border-radius: 3px;\n\n          &:hover {\n            background-color: #999;\n          }\n        }\n      }\n      width: 12px;\n      header {\n        padding-bottom: 3px;\n        margin-bottom: 5px;\n        button {\n          display: none;\n        }\n      }\n      .lane_title {\n        position: absolute;\n        top: 0;\n        left: 0;\n        height: 48px;\n        width: 100%;\n        border-radius: 8px 8px 0 0;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        padding: 0 12px;\n        border-bottom: 1px solid #d9d9d9;\n      }\n    }\n    .react-trello-card {\n      border-radius: 8px;\n      border: 1px solid #d9d9d9;\n      background-color: #f8f8f8;\n      min-height: 70px;\n      textarea {\n        pointer-events: none !important;\n        font-size: 14px;\n        font-weight: 600;\n        color: #006ffd;\n      }\n      span:nth-child(2) textarea {\n        color: #000;\n        text-align: left;\n      }\n      div {\n        textarea {\n          color: #888888;\n          font-size: 14px;\n          font-weight: 500;\n        }\n      }\n    }\n    .smooth-dnd-draggable-wrapper,\n    .smooth-dnd-container {\n      article {\n        header {\n          display: flex;\n          flex-direction: column;\n          span {\n            width: 100%;\n          }\n          textarea {\n          }\n        }\n        div {\n          margin: 0 !important ;\n          padding: 0 !important;\n        }\n      }\n    }\n  }\n  .add-lane-form {\n    border-radius: 12px;\n    padding: 10px;\n    width: 300px;\n    background-color: #d9d9d9;\n    .MuiInputBase-input {\n      border: 1px solid #999;\n      background-color: white;\n    }\n  }\n  .filters {\n    .MuiAutocomplete-root {\n      position: relative;\n    }\n    margin-bottom: 1rem;\n    label {\n      position: absolute;\n      top: -15px;\n    }\n  }\n  .load-more {\n    width: 100%;\n    background-color: transparent !important;\n    height: 30px;\n  }\n"])));x.default.div(D||(D=(0,f.Z)(["\n  background-color: #f5f5f5;\n  border: 1px solid #f5f5f5;\n  border-radius: 12px;\n  margin-right: 18px;\n  .MuiToggleButton-root {\n    border-radius: 12px;\n    &:last-child {\n      background-color: #0f6fdf;\n      border-radius: 12px !important;\n      z-index: 2;\n      transition: all 0.3s ease !important;\n\n      &:hover {\n        background-color: #0f6fdf;\n      }\n    }\n    &:first-child {\n      border: none;\n      border-radius: 12px !important;\n      transition: all 0.3s ease !important;\n\n      &:hover {\n        background-color: #0f6fdf;\n      }\n    }\n  }\n"])));var W,X,H,J,$,nn,en=(0,F.er)({"Add another lane":"+Status qo'shish","Click to add card":"Buyurtma qo'shish","Delete lane":"Statusni o'chirish","Lane actions":"Status ustidagi amallar",button:{"Add card":"Buyurtma qo'shing","Add lane":"Status qo'shish",Cancel:"Bekor qilish"},placeholder:{title:"Nomi",description:"Tavsif",label:"Yorliq"}}),tn=function(){var n=(0,Y.Z)(),e=(0,j.$G)().t,t=(0,r.s0)(),i=(0,b.useState)(),o=(0,a.Z)(i,2),d=o[0],l=o[1],c=(0,b.useState)(!1),u=(0,a.Z)(c,2),m=u[0],p=u[1],f=(0,b.useState)(""),x=(0,a.Z)(f,2),h=x[0],N=x[1],k=(0,b.useState)({}),w=(0,a.Z)(k,2),C=w[0],A=w[1],S=(0,b.useState)({}),P=(0,a.Z)(S,2),I=P[0],E=P[1],q=((0,y.w)(),(0,s.h_)("order-state/get-all",(0,z.Z)({},n),{suspense:!1})),L=q.data,T=q.status,B=(0,s.uC)("order/paging","post",{onSuccess:function(n,e){var t=n.data,i=e.stateId;l((function(n){return n?n.map((function(n){if(n._id===i){var e,o,r=1===I[i]?[]:n.orders||[],a=new Set(r.map((function(n){return n._id}))),d=null===t||void 0===t||null===(e=t.data)||void 0===e||null===(o=e.filter((function(n){return!a.has(n._id)})))||void 0===o?void 0:o.map((function(n){var e;return{number:n.number,totalPrice:n.totalPrice,addressName:n.addressName,createdAt:n.createdAt,state:null===(e=n.state)||void 0===e?void 0:e.state,_id:n._id,uniqueId:"".concat(n._id,"-").concat(n.createdAt)}}));return(0,z.Z)((0,z.Z)({},n),{},{orders:[].concat((0,V.Z)(r),(0,V.Z)(d||[]))})}return n})):n})),A((function(n){return(0,z.Z)((0,z.Z)({},n),{},(0,_.Z)({},i,!1))}))},onError:function(n,e){var t=e.stateId;A((function(n){return(0,z.Z)((0,z.Z)({},n),{},(0,_.Z)({},t,!1))}))}}),D=B.mutate;(0,b.useEffect)((function(){if("success"===T&&null!==L&&void 0!==L&&L.data){l(L.data);var n=L.data.reduce((function(n,e){return(0,z.Z)((0,z.Z)({},n),{},(0,_.Z)({},e._id,1))}),{});E(n),L.data.forEach((function(n){A((function(e){return(0,z.Z)((0,z.Z)({},e),{},(0,_.Z)({},n._id,!0))})),D({page:1,limit:10,stateId:n._id})}))}}),[T,null===L||void 0===L?void 0:L.data]),(0,b.useEffect)((function(){d&&Object.values(C).every((function(n){return!n}))&&p(!0)}),[d,C]);var U=(0,s.uC)("order/state/".concat(h),"put",{onSuccess:function(){N("")}}).mutate,M=(0,s.uC)("status","put").mutate,O=(0,s.uC)("status","delete").mutate,Q=(0,b.useMemo)((function(){return m?function(n){var e=localStorage.getItem("i18nextLng")||"uz";return{lanes:null===n||void 0===n?void 0:n.map((function(n){var t,i;return{cards:(null===(t=n.orders)||void 0===t?void 0:t.map((function(n,e){return{id:n.uniqueId||n._id,label:"".concat(n.totalPrice," UZS"),title:"#".concat(n.number),description:n.addressName,draggable:!["completed","cancelled"].includes(n.state),metadata:{originalId:n._id}}})))||[],id:null===n||void 0===n?void 0:n._id,title:null===(i=n.name)||void 0===i?void 0:i[e],statusColor:n.color,style:{width:280,borderTop:"".concat("#ffffff"!==n.color?n.color:"#364880"," 5px solid")}}}))}}(d||[]):{lanes:[]}}),[d,m]);return(0,v.jsxs)(R,{children:[(0,v.jsx)("div",{className:"header",children:(0,v.jsx)(g,{})}),m?(0,v.jsx)(F.ZP,{data:Q,editable:!0,handleDragEnd:function(n,e,t,i,o){var r;N((null===(r=o.metadata)||void 0===r?void 0:r.originalId)||o.id),setTimeout((function(){var n;return U({position:i,stateId:t,_id:null===o||void 0===o||null===(n=o.metadata)||void 0===n?void 0:n.originalId})}),0)},handleLaneDragEnd:function(n,e,t){M({_id:t.id,position:+e+1})},editLaneTitle:!1,canAddLanes:!1,hideCardDeleteIcon:!0,onCardClick:function(n,e){var i=null===e||void 0===e?void 0:e.originalId;i&&t("/order/".concat(i))},components:{LaneHeader:function(n){return K(n,O)},AddCardLink:function(n){var t=n.laneId;return(0,v.jsx)(Z.c7,{title:C[t]?e("general.loading"):e("general.loadMore"),className:"load-more",disabled:C[t],onClick:function(){return function(n){if(!C[n]){A((function(e){return(0,z.Z)((0,z.Z)({},e),{},(0,_.Z)({},n,!0))}));var e=(I[n]||1)+1;E((function(t){return(0,z.Z)((0,z.Z)({},t),{},(0,_.Z)({},n,e))})),D({page:e,limit:10,stateId:n})}}(t)}})}},lang:"ru",t:en}):(0,v.jsx)(Z.gb,{})]})},on=x.default.div(W||(W=(0,f.Z)(["\n  margin-top: 12px;\n"]))),rn=x.default.div(X||(X=(0,f.Z)(["\n  border-radius: 12px;\n  background: #fff;\n  box-shadow: 0px 0px 4px 0px rgba(0, 0, 0, 0.07);\n  padding: 16px;\n  height: calc(100vh - 110px);\n  overflow: auto;\n  .tab {\n    margin-bottom: 16px;\n    .tab-btn {\n      color: #999;\n      font-size: 14px;\n      font-weight: 600;\n      padding: 12px;\n      width: 50%;\n      border: none;\n      border-bottom: 2px solid #e9e9e9;\n      background: none;\n      cursor: pointer;\n      &.active {\n        color: #000;\n        border-bottom: 2px solid #006ffd;\n      }\n    }\n  }\n  .search {\n    display: flex;\n    align-items: center;\n    justify-content: end;\n    > div {\n      width: 100%;\n    }\n    .clear-basket {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      max-width: 42px;\n      min-width: 42px;\n      height: 42px;\n      border-radius: 10px;\n      background: #f5f5f5;\n      margin-left: 30px;\n      cursor: pointer;\n      svg path {\n        fill: #999;\n      }\n    }\n  }\n  .product-card {\n    position: relative;\n    padding: 10px;\n    border-radius: 16px;\n    background: #f5f5f5;\n    cursor: pointer;\n    .amount {\n      position: absolute;\n      top: -10px;\n      left: -10px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-size: 12px;\n      font-weight: 600;\n      min-width: 25px;\n      padding: 5px;\n      height: 25px;\n      border-radius: 50%;\n      background-color: #006ffd;\n      color: #fff;\n    }\n    .name {\n      display: -webkit-box;\n      -webkit-line-clamp: 1;\n      -webkit-box-orient: vertical;\n      color: #454545;\n      font-size: 14px;\n      line-height: 20px;\n      overflow: hidden;\n    }\n    .price {\n      display: block;\n      font-size: 14px;\n      margin-top: 10px;\n      font-weight: 600;\n    }\n    .in-stock {\n      font-size: 12px;\n      color: #999;\n    }\n  }\n  .basket-item {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 8px 0;\n    border-bottom: 1px solid #e9e9e9;\n    .name {\n      font-size: 14px;\n      color: #454545;\n      padding-left: 10px;\n      width: 75%;\n      word-wrap: break-word;\n    }\n    .action {\n      display: flex;\n      align-items: center;\n      span {\n        border-radius: 8px;\n        background: #f5f5f5;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n      .icon {\n        width: 34px;\n        height: 34px;\n        cursor: pointer;\n      }\n      .amount-input {\n        display: block;\n        height: 34px;\n        padding: 0 10px;\n        width: 64px;\n        margin: 0 8px;\n        border-radius: 8px;\n        background: #f5f5f5;\n        border: none;\n        font-size: 16px;\n        font-weight: 600;\n        text-align: center;\n      }\n    }\n  }\n"]))),an=t(61134),dn=t(29749),ln=function(n){var e,t,i=n.basketItems,o=n.setBasketItems,r=(0,b.useState)("product"),l=(0,a.Z)(r,2),c=l[0],u=l[1],p=(0,an.cI)(),f=p.control,x=p.watch,h=(0,L.Z)(x("search"),500).debouncedValue,g=(0,j.$G)().t,y=(0,Y.Z)(),N=(0,T.lr)(),k=(0,a.Z)(N,2),w=k[0],S=(k[1],(0,b.useState)({page:w.get("page")||1,limit:w.get("limit")||10,search:w.get("search")||""})),_=(0,a.Z)(S,2),P=_[0],I=(_[1],(0,dn.Z)().state.data),E=(0,s.uC)("product/paging","post",{onSuccess:function(n){console.log("Product created successfully:")},onError:function(n){console.error("Error creating product:",n)}}),q=E.data,B=E.mutate;(0,b.useEffect)((function(){B((0,z.Z)((0,z.Z)({},P),y))}),[B,h]);var D=function(n,e,t){var r=null===i||void 0===i?void 0:i.find((function(e){return e._id===(null===n||void 0===n?void 0:n._id)}));if(r)return"minus"===e&&1===r.amount?o((function(n){return n.filter((function(n){return n._id!==r._id}))})):o((function(i){return i.map((function(i){if(i._id===(null===n||void 0===n?void 0:n._id)){var o=i.amount;return(0,z.Z)((0,z.Z)({},i),{},{amount:t?"noValue"===t?"":Number(t)<=n.inStock?Number(t):o:e?"minus"===e&&o>1?o-1:"plus"===e&&r.amount<n.inStock?o+1:o:r.amount<n.inStock?o+1:o})}return i}))}));n&&o((function(e){return[].concat((0,V.Z)(e),[(0,z.Z)((0,z.Z)({},n),{},{amount:1})])}))};return(0,v.jsxs)(rn,{children:[(0,v.jsxs)("div",{className:"tab",children:[(0,v.jsx)("button",{className:"tab-btn ".concat("product"===c&&"active"),onClick:function(){return u("product")},children:g("order.products")}),(0,v.jsx)("button",{className:"tab-btn ".concat("basket"===c&&"active"),onClick:function(){return u("basket")},children:g("order.basket")})]}),(0,v.jsxs)("div",{className:"mb-3 search",children:["product"===c&&(0,v.jsx)(Z.oi,{control:f,name:"search",placeholder:g("general.search")}),"basket"===c&&(0,v.jsx)("div",{className:"clear-basket",onClick:function(){return o([])},children:(0,v.jsx)(m.pJ,{})})]}),"product"===c&&(0,v.jsx)(d.ZP,{container:!0,spacing:2,children:null===q||void 0===q||null===(e=q.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.map((function(n){var e=i.find((function(e){return e._id===n._id}));return(0,v.jsx)(d.ZP,{item:!0,md:4,children:(0,v.jsxs)("div",{className:"product-card",onClick:function(){return D(n)},children:[e&&(0,v.jsx)("span",{className:"amount",children:null===e||void 0===e?void 0:e.amount}),(0,v.jsx)("span",{className:"name",children:n.name}),(0,v.jsxs)("span",{className:"price",children:[(0,A.Y)(n.salePrice)," ",(0,C.get)(I,"currency","uzs")]}),(0,v.jsx)("span",{className:"in-stock",children:(0,A.Y)(n.inStock)})]})})}))}),"basket"===c&&(0,v.jsx)("div",{children:null===i||void 0===i?void 0:i.map((function(n){return(0,v.jsxs)("div",{className:"basket-item",children:[(0,v.jsx)("span",{className:"name",children:n.name}),(0,v.jsxs)("div",{className:"action",children:[(0,v.jsx)("span",{className:"icon",onClick:function(){return D(n,"minus")},children:(0,v.jsx)(m.V_,{})}),(0,v.jsx)("input",{type:"text",className:"amount-input",value:n.amount,onChange:function(e){return D(n,"",e.target.value||"noValue")}}),(0,v.jsx)("span",{className:"icon",onClick:function(){return D(n,"plus")},children:(0,v.jsx)(m.pO,{})})]})]})}))})]})},sn=x.default.div(H||(H=(0,f.Z)(["\n  border-radius: 12px;\n  background: #fff;\n  box-shadow: 0px 0px 4px 0px rgba(0, 0, 0, 0.07);\n  padding: 16px;\n  max-height: calc(100vh - 110px);\n  overflow: auto;\n  .item {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 12px;\n    .key {\n      font-size: 14px;\n    }\n    .value {\n      font-size: 14px;\n      font-weight: 600;\n    }\n    &:last-of-type {\n      .key {\n        font-weight: 600;\n      }\n    }\n  }\n  .submit-btn {\n    width: 100%;\n  }\n"]))),cn=x.default.div(J||(J=(0,f.Z)(["\n  width: 860px;\n  height: 500px;\n  background-color: #fff;\n  border-radius: 24px;\n  overflow: hidden;\n  .modal-form {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n    padding: 24px;\n    .title {\n      display: flex;\n      align-items: center;\n      margin-bottom: 24px;\n      h2 {\n        font-size: 20px;\n        font-weight: 600;\n        margin-left: 23px;\n      }\n    }\n    .address-options {\n      position: absolute;\n      box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.1);\n      padding: 10px 0;\n      border-radius: 10px;\n      background-color: #fff;\n      max-height: 300px;\n      overflow: auto;\n      z-index: 1;\n      .option {\n        padding: 8px 15px;\n        cursor: pointer;\n        &:hover {\n          background-color: #f5f5f5;\n        }\n      }\n    }\n    .save-btn {\n      width: 100%;\n      margin-top: auto;\n    }\n  }\n"]))),un=t(1903),mn=t(30709),pn=t(75985),fn=t(88892),xn=t(68096),hn=t(58406),vn=(0,x.default)(hn.Z)($||($=(0,f.Z)(["\n  height: 45px;\n  .MuiSelect-select {\n    background-color: #fff;\n    padding: 0px 12px;\n    height: 45px !important;\n    border-radius: 10px !important;\n    border: 1px solid #d9d9d9;\n    line-height: 48px;\n  }\n  & ~ .text-error {\n    position: absolute;\n    bottom: -20px;\n  }\n"]))),gn=x.default.div(nn||(nn=(0,f.Z)(["\n  padding: 6px 0;\n  label {\n    color: #232323;\n    font-weight: 500;\n    font-size: 14px;\n  }\n"])));var bn,jn,yn,Nn=function(n){return{style:{color:n?"initial":"white"}}},Zn=function(n){var e=n.control,t=n.options,i=void 0===t?[]:t,o=n.name,r=n.label,a=n.disabled,d=void 0!==a&&a,l=n.optionsUrl,c=(n.className,n.placeholder,n.setValue,n.defaultValue),u=void 0===c?"":c,m=n.filterOptions,p=n.setAdditionalItem,f=n.rules,x=void 0===f?{required:{value:!0,message:"Majburiy"}}:f,h=n.onChange,g=(0,j.$G)().t,y=(0,s.uC)(l||"","post",{onSuccess:function(){console.log("success")}}),N=y.mutate,Z=y.data;y.reset,y.status,(0,b.useEffect)((function(){N({optionsFromUrl:Z})}),[N]),(0,b.useEffect)((function(){Z?console.log("Fetched optionsFromUrl:"):console.warn("optionsFromUrl is undefined")}),[Z]),Z&&Z.data;var k=(null!==Z&&void 0!==Z&&Z.data.data&&Array.isArray(Z.data.data)?Z.data.data:i).map((function(n){return(0,z.Z)((0,z.Z)({},n),{},{name:n.firstName?"".concat(n.firstName," ").concat(n.lastName):n.carBrand?"Brand: ".concat(n.carBrand,", Model: ").concat(n.carModel):"Number: ".concat(n.carNumber)})}));return(0,v.jsxs)(v.Fragment,{children:[r&&(0,v.jsxs)(gn,{className:"select-label",children:[(0,v.jsx)("label",{children:r}),(0,v.jsx)("span",{children:r&&null!==x&&void 0!==x&&x.required?(0,v.jsx)("span",{className:"text-error mt-1",children:"*"}):null})]}),(0,v.jsx)(xn.Z,{fullWidth:!0,variant:"outlined",children:(0,v.jsx)(an.Qr,{name:o,control:e,rules:x,render:function(n){var e,t=n.field,i=t.onChange,r=t.value,a=t.ref,l=t.onBlur,s=n.fieldState,c=!!s.error;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(vn,{onChange:function(n){i(n),null===h||void 0===h||h(n.target.value,null===k||void 0===k?void 0:k.find((function(e){var t;return(null===e||void 0===e?void 0:e._id)===(null===n||void 0===n||null===(t=n.target)||void 0===t?void 0:t.value)})))},value:r,labelId:o,id:o,ref:a,onBlur:l,color:s.error?"error":void 0,SelectDisplayProps:Nn(r),disabled:d,sx:{"& fieldset":{border:"none"}},children:(null===k||void 0===k?void 0:k.length)>0?null===(e=m?m(k):k)||void 0===e?void 0:e.map((function(n){return(0,v.jsxs)(Q.Z,{value:n._id,children:[n.fullName,null===p||void 0===p?void 0:p(n.fullName)]},n._id)})):(0,v.jsx)(Q.Z,{disabled:!0,value:void 0,children:"Hech narsa topilmadi\u26d4"})}),c&&(0,v.jsx)("h6",{className:"text-error mt-1",children:g("general.required")})]})},defaultValue:u})})]})},kn=function(n){var e,t,i,o=n.basketItems,l=n.formStore,c=(0,b.useState)(!1),u=(0,a.Z)(c,2),p=u[0],f=u[1],x=(0,b.useState)(!1),h=(0,a.Z)(x,2),g=h[0],y=h[1],N=(0,b.useState)(),k=(0,a.Z)(N,2),S=k[0],_=k[1],P=(0,b.useState)(""),I=(0,a.Z)(P,2),E=I[0],q=I[1],Y=(0,j.$G)().t,T=(0,an.cI)(),B=T.control,D=T.setValue,U=T.handleSubmit,M=T.watch,V=T.setError,F=((0,L.Z)(E,1e3).debouncedValue,(0,r.s0)()),O=(0,r.UO)().id,Q=o.reduce((function(n,e){return n+e.salePrice*e.amount}),0),G=(0,b.useState)(""),K=(0,a.Z)(G,2),R=K[0],W=K[1],X=(0,dn.Z)().state.data,H=(0,s.uC)("address/by-name","post",{onSuccess:function(){f(!0)},onError:function(n){console.error("Error fetching address:",n)}}),J=H.mutate,$=H.data;(0,b.useEffect)((function(){"string"===typeof E&&E.trim()&&J({name:E})}),[E]);var nn=(0,s.uC)("order/create","post",{onSuccess:function(){F("/order")}}),en=nn.mutate,tn=nn.status,on=(0,s.uC)("address/by-point","post",{onSuccess:function(n){var e=n.data;l?(null===l||void 0===l||l.setValue("addressName",null===e||void 0===e?void 0:e.name),null===l||void 0===l||l.setValue("addressLocation",S),null===l||void 0===l||l.setError("addressName",{})):(D("addressName",null===e||void 0===e?void 0:e.name),D("addressLocation",S),V("addressName",{}))},onError:function(n){console.error("Error fetching address:",n)}}),rn=on.mutate;(0,b.useEffect)((function(){null!==S&&void 0!==S&&S.latitude&&null!==S&&void 0!==S&&S.longitude?rn({latitude:S.latitude,longitude:S.longitude}):console.error("Coordinates are missing")}),[rn,S]);var ln=(0,s.h_)("order/get-by-id/".concat(O),{},{enabled:!!O}).data,xn=null===ln||void 0===ln||null===(e=ln.data)||void 0===e?void 0:e.courierId,hn=(0,s.uC)("order/set-courier","post",{onSuccess:function(n){W(n.data.courierId)},onError:function(n){console.error("API Error:",n)}}),vn=hn.mutate;hn.data,hn.status,hn.isLoading;return(0,v.jsxs)(sn,{children:[!O&&(0,v.jsx)("h3",{className:"mb-3",children:Y("order.formalization")}),(0,v.jsxs)("form",{onSubmit:U((function(n){if(!o.length)return pn.Am.warning(Y("order.chooseProduct"));if(o.find((function(n){return!(n.amount>0)})))return pn.Am.warning(Y("order.validAmount"));var e=(0,z.Z)((0,z.Z)({},n),{},{deliveryDate:w()(n.deliveryDate).format(),items:o.map((function(n){return{productId:n._id,amount:n.amount}})),addressLocation:{latitude:null===S||void 0===S?void 0:S.latitude,longitude:null===S||void 0===S?void 0:S.longitude}});en(e)})),children:[(0,v.jsxs)(d.ZP,{container:!0,spacing:2,children:[(0,v.jsx)(d.ZP,{item:!0,sm:12,children:(0,v.jsxs)("div",{onClick:function(){return y(!0)},children:[(0,v.jsx)(Z.oi,{control:l?l.control:B,name:"addressName",placeholder:"Yetkazib berish manzili",searchIcon:!0,onCustomChange:function(n){q(n)}}),(0,v.jsx)("div",{className:"address-options",children:p&&(null===$||void 0===$||null===(t=$.data)||void 0===t?void 0:t.map((function(n){return(0,v.jsx)("div",{className:"option",onClick:function(){D("addressName",n.name),D("addressLocation",{latitude:n.latitude,longitude:n.longitude,name:n.name}),_({latitude:n.latitude,longitude:n.longitude,name:n.name}),f(!1)},children:n.name})})))})]})}),(0,v.jsx)(d.ZP,{item:!0,md:6,children:(0,v.jsx)(Z.oi,{control:l?null===l||void 0===l?void 0:l.control:B,name:"houseNumber",placeholder:"Uy raqami",rules:{required:!1},label:"Uy raqami"})}),(0,v.jsx)(d.ZP,{item:!0,md:6,children:(0,v.jsx)(Z.oi,{control:l?null===l||void 0===l?void 0:l.control:B,name:"entrance",placeholder:"Kirish",rules:{required:!1},label:"Kirish"})}),(0,v.jsx)(d.ZP,{item:!0,md:6,children:(0,v.jsx)(Z.oi,{control:l?null===l||void 0===l?void 0:l.control:B,name:"floor",placeholder:"Qavat",rules:{required:!1},label:"Qavat"})}),(0,v.jsx)(d.ZP,{item:!0,md:6,children:(0,v.jsx)(Z.oi,{control:l?null===l||void 0===l?void 0:l.control:B,name:"apartmentNumber",placeholder:"Kvartira raqami",rules:{required:!1},label:"Kvartira raqami"})}),(0,v.jsx)(d.ZP,{item:!0,sm:12,children:(0,v.jsx)(Z.oi,{control:l?null===l||void 0===l?void 0:l.control:B,name:"receiverFirstName",label:Y("order.receiver"),rules:{required:!1}})}),(0,v.jsx)(d.ZP,{item:!0,sm:12,children:(0,v.jsx)(Z.sb,{control:l?null===l||void 0===l?void 0:l.control:B,name:"phoneNumber",label:Y("common.phoneNumber")})}),(0,v.jsx)(d.ZP,{item:!0,sm:12,children:(0,v.jsx)(Z.sp,{label:Y("common.date"),control:l?null===l||void 0===l?void 0:l.control:B,name:"deliveryDate",minDate:w()(new Date)})}),(0,v.jsx)(d.ZP,{item:!0,sm:12,children:(0,v.jsx)(Z.p7,{control:l?null===l||void 0===l?void 0:l.control:B,name:"paymentType",options:mn.G4,label:Y("common.paymentType")})}),(0,v.jsx)(d.ZP,{item:!0,sm:12,children:(0,v.jsx)(Zn,{control:l?null===l||void 0===l?void 0:l.control:B,name:"setCourier",label:Y("common.courier"),optionsUrl:"courier/paging",value:R,defaultValue:xn,onChange:function(n){W(n),vn({courierId:n,_id:O})}})}),(0,v.jsxs)(d.ZP,{item:!0,sm:12,children:[(0,v.jsx)("label",{className:"custom-label",children:Y("common.description")}),(0,v.jsx)(un.Z,{value:null===l||void 0===l?void 0:l.watch("comment"),onChange:function(n){l?null===l||void 0===l||l.setValue("comment",n):D("comment",n)}})]})]}),!O&&(0,v.jsxs)("div",{className:"info",children:[(0,v.jsxs)("div",{className:"item",children:[(0,v.jsxs)("span",{className:"key",children:[Y("order.allProducts"),":"]}),(0,v.jsxs)("span",{className:"value",children:[(0,A.Y)(Q)," ",(0,C.get)(X,"currency","uzs")]})]}),(0,v.jsxs)("div",{className:"item",children:[(0,v.jsxs)("span",{className:"key",children:[Y("order.deliveryPrice"),":"]}),(0,v.jsxs)("span",{className:"value",children:[(0,A.Y)(0)," ",(0,C.get)(X,"currency","uzs")]})]}),(0,v.jsxs)("div",{className:"item",children:[(0,v.jsxs)("span",{className:"key",children:[Y("order.totalPrice"),":"]}),(0,v.jsxs)("span",{className:"value",children:[(0,A.Y)(Q+0)," ",(0,C.get)(X,"currency","uzs")]})]})]}),!O&&(0,v.jsx)(Z.c7,{variant:"contained",title:"Rasmiylashtirish",className:"submit-btn",type:"submit",disabled:"loading"===tn})]}),(0,v.jsx)(Z.u_,{setOpen:y,open:g,children:(0,v.jsx)(cn,{children:(0,v.jsxs)(d.ZP,{container:!0,height:"100%",children:[(0,v.jsx)(d.ZP,{item:!0,md:6,children:(0,v.jsxs)("div",{className:"modal-form",children:[(0,v.jsxs)("div",{className:"title",children:[(0,v.jsx)("span",{onClick:function(){return y(!1)},children:(0,v.jsx)(m.qg,{})}),(0,v.jsx)("h2",{children:"Yangi manzil qo'shish"})]}),(0,v.jsxs)(d.ZP,{container:!0,spacing:2,children:[(0,v.jsxs)(d.ZP,{item:!0,md:12,position:"relative",children:[(0,v.jsx)(Z.oi,{control:l?l.control:B,name:"addressName",placeholder:"Yetkazib berish manzili",searchIcon:!0,onCustomChange:function(n){q(n)}}),(0,v.jsx)("div",{className:"address-options",children:p&&(null===$||void 0===$||null===(i=$.data)||void 0===i?void 0:i.map((function(n){return(0,v.jsx)("div",{className:"option",onClick:function(){D("addressName",n.name),D("addressLocation",{latitude:n.latitude,longitude:n.longitude,name:n.name}),_({latitude:n.latitude,longitude:n.longitude,name:n.name}),f(!1)},children:n.name})})))})]}),(0,v.jsx)(d.ZP,{item:!0,md:6,children:(0,v.jsx)(Z.oi,{control:l?null===l||void 0===l?void 0:l.control:B,name:"houseNumber",placeholder:"Uy raqami",rules:{required:!1},label:"Uy raqami"})}),(0,v.jsx)(d.ZP,{item:!0,md:6,children:(0,v.jsx)(Z.oi,{control:l?null===l||void 0===l?void 0:l.control:B,name:"entrance",placeholder:"Kirish",rules:{required:!1},label:"Kirish"})}),(0,v.jsx)(d.ZP,{item:!0,md:6,children:(0,v.jsx)(Z.oi,{control:l?null===l||void 0===l?void 0:l.control:B,name:"floor",placeholder:"Qavat",rules:{required:!1},label:"Qavat"})}),(0,v.jsx)(d.ZP,{item:!0,md:6,children:(0,v.jsx)(Z.oi,{control:l?null===l||void 0===l?void 0:l.control:B,name:"apartmentNumber",placeholder:"Kvartira raqami",label:"Kvartira raqami",rules:{required:!1}})})]}),(0,v.jsx)(Z.c7,{title:"Saqlash",variant:"contained",color:"success",className:"save-btn",onClick:function(){return y(!1)}})]})}),(0,v.jsx)(d.ZP,{item:!0,md:6,children:(0,v.jsx)("div",{className:"map",children:(0,v.jsx)(fn.Z,{getCoordinate:_,center:M("addressLocation")})})})]})})})]})},wn=function(){var n=(0,b.useState)([]),e=(0,a.Z)(n,2),t=e[0],i=e[1];return(0,v.jsx)(on,{children:(0,v.jsxs)(d.ZP,{container:!0,spacing:3,children:[(0,v.jsx)(d.ZP,{item:!0,md:8,children:(0,v.jsx)(ln,{basketItems:t,setBasketItems:i})}),(0,v.jsx)(d.ZP,{item:!0,md:4,children:(0,v.jsx)(kn,{basketItems:t})})]})})},Cn=x.default.div(bn||(bn=(0,f.Z)(["\n  padding: 10px 0;\n  .top {\n    display: flex;\n    align-items: center;\n    width: 100%;\n    .state-select {\n      min-width: 180px;\n      margin-top: -3px;\n      div {\n        width: 100% !important;\n      }\n      margin-right: 15px;\n    }\n    .payment-type {\n      display: flex;\n      align-items: center;\n      padding: 4px 12px;\n      border-radius: 12px;\n      background: #fff;\n      width: 100%;\n      .type {\n        margin-left: 11px;\n        span {\n          color: #999;\n          font-size: 12px;\n          font-weight: 500;\n        }\n        h4 {\n          font-weight: 500;\n          font-size: 15px;\n        }\n      }\n      .state {\n        margin-left: auto;\n        color: #eb5757;\n        font-size: 15px;\n      }\n    }\n  }\n"]))),An=x.default.div(jn||(jn=(0,f.Z)(["\n  border-radius: 12px;\n  background: #fff;\n  padding: 20px;\n  margin-top: 24px;\n  .steps {\n    position: relative;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding-bottom: 20px;\n    border-bottom: 1px dashed #e9e9e9;\n    .icon {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      width: 56px;\n      height: 56px;\n      border-radius: 50%;\n      background-color: #e9e9e9;\n      &.active {\n        background-color: #f7e14b;\n        .line {\n          background: #f7e14b;\n        }\n        svg path {\n          fill: #000;\n        }\n      }\n      .line {\n        position: absolute;\n        width: 21.5%;\n        height: 4px;\n        background: #f5f5f5;\n        transform: translateX(-71%);\n      }\n    }\n  }\n  .products {\n    min-height: 450px;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n\n    .product_info {\n      width: 100%;\n      display: flex;\n      flex-direction: column;\n      gap: 12px;\n\n      li {\n        list-style: none;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        font-size: 18px;\n\n        span {\n          color: #999;\n        }\n\n        .main {\n          color: #000;\n          font-weight: 600;\n        }\n      }\n    }\n  }\n  .product {\n    display: flex;\n    align-items: center;\n    padding: 16px 0;\n    border-bottom: 1px dashed #e9e9e9;\n    &:last-of-type {\n      border-bottom: none;\n    }\n    .default-image {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      width: 48px;\n      height: 48px;\n      border-radius: 12px;\n      background: #f3f3f8;\n      margin-right: 12px;\n      overflow: hidden;\n      img {\n        width: 100%;\n        height: 100%;\n        object-fit: cover;\n      }\n      svg {\n        width: 20px;\n        height: 20px;\n      }\n    }\n    .info {\n      .name {\n        display: block;\n        color: #454545;\n        font-size: 14px;\n        font-weight: 500;\n        margin-bottom: 5px;\n      }\n      .amount-price {\n        font-size: 14px;\n        font-weight: 700;\n      }\n    }\n    .action {\n      display: flex;\n      margin-left: auto;\n      span {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        width: 36px;\n        height: 36px;\n        border-radius: 50%;\n        background: #f3f3f8;\n        cursor: pointer;\n        &:first-of-type {\n          margin-right: 16px;\n          svg {\n            width: 22px;\n            height: 22px;\n          }\n        }\n      }\n    }\n  }\n"]))),Sn=t(86657),_n=t(84544),zn=function(n){var e,t=n.formStore,i=n.state,o=n.order,r=(0,b.useState)(0),d=(0,a.Z)(r,2),l=d[0],s=d[1],c=(0,b.useState)(),u=(0,a.Z)(c,2),p=u[0],f=u[1],x=(0,j.$G)().t,h=(0,dn.Z)().state.data,g=(0,an.Dq)({control:null===t||void 0===t?void 0:t.control,name:"items"}),y=g.fields,N=g.remove,k=g.update,w="created"===i?1:"inProcess"===i?2:"inDelivery"===i?3:"completed"===i?4:0;return(0,v.jsxs)(An,{children:[(0,v.jsxs)("div",{className:"steps",children:[(0,v.jsx)("span",{className:"icon ".concat(w&&"active"),children:(0,v.jsx)(m.Ye,{})}),(0,v.jsxs)("span",{className:"icon ".concat(w>1&&"active"),children:[(0,v.jsx)(m.T3,{}),(0,v.jsx)("div",{className:"line"})]}),(0,v.jsxs)("span",{className:"icon ".concat(w>2&&"active"),children:[(0,v.jsx)(m.Yw,{}),(0,v.jsx)("div",{className:"line"})]}),(0,v.jsxs)("span",{className:"icon ".concat(w>3&&"active"),children:[(0,v.jsx)(m.U6,{}),(0,v.jsx)("div",{className:"line"})]})]}),(0,v.jsxs)("div",{className:"products",children:[(0,v.jsx)("div",{children:null===y||void 0===y?void 0:y.map((function(n,e){return(0,v.jsxs)("div",{className:"product",children:[(0,v.jsx)("span",{className:"default-image",children:n.product.mainImage?(0,v.jsx)("img",{src:"https://backend.uygaayt.kahero.uz/employee-api/v1//"+n.product.mainImage.url,alt:"product"}):(0,v.jsx)(m.Q_,{})}),(0,v.jsxs)("div",{className:"info",children:[(0,v.jsx)("span",{className:"name",children:n.product.name}),(0,v.jsxs)("div",{className:"amount-price",children:[n.amount," x ",(0,A.Y)(n.price)," ",(0,C.get)(h,"currency","uzs")]})]}),"completed"!==i&&"cancelled"!==i&&(0,v.jsx)("div",{className:"action",children:"inDelivery"!==i&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("span",{onClick:function(){return s(e+1)},children:(0,v.jsx)(m.pJ,{})}),(0,v.jsx)("span",{onClick:function(){return f((0,z.Z)((0,z.Z)({},n),{},{index:e}))},children:(0,v.jsx)(Sn.Z,{})})]})})]})}))}),(0,v.jsxs)("ul",{className:"product_info",children:[(0,v.jsxs)("li",{children:[(0,v.jsx)("span",{children:"Barcha mahsulotlar:"})," ",(0,v.jsxs)("b",{children:[(0,A.Y)((0,C.get)(o,"itemPrice",0))," ",(0,C.get)(h,"currency","uzs")]})]}),(0,v.jsxs)("li",{children:[(0,v.jsx)("span",{children:"Yetkazib berish:"}),(0,v.jsxs)("b",{children:[(0,A.Y)((0,C.get)(o,"deliveryPrice",0))," ",(0,C.get)(h,"currency","uzs")]})]}),(0,v.jsxs)("li",{children:[(0,v.jsx)("span",{className:"main",children:"Umumiy:"})," ",(0,v.jsxs)("b",{children:[(0,A.Y)((0,C.get)(o,"totalPrice",0))," ",(0,C.get)(h,"currency","uzs")]})]})]})]}),(0,v.jsx)(_n.Z,{open:l,setOpen:s,confirmFn:function(){N(l-1),s(0)}}),(0,v.jsx)(Z.u_,{setOpen:f,open:!!p,children:(0,v.jsxs)("div",{className:"custom-modal",children:[(0,v.jsxs)("span",{className:"d-block mb-2",children:[null===p||void 0===p?void 0:p.product.name," (",x("common.residue"),":"," ",(null===p||void 0===p||null===(e=p.product)||void 0===e?void 0:e.inStock)||0,")"]}),(0,v.jsx)(Z.oi,{control:null===t||void 0===t?void 0:t.control,name:"items.".concat(null===p||void 0===p?void 0:p.index,".amount"),type:"number",onCustomChange:function(n){n.floatValue<=p.product.inStock&&k(null===p||void 0===p?void 0:p.index,(0,z.Z)((0,z.Z)({},p),{},{amount:(null===n||void 0===n?void 0:n.floatValue)||0}))}}),(0,v.jsx)(Z.c7,{title:x("general.save"),fullWidth:!0,variant:"contained",className:"mt-3",onClick:function(){t.watch("items.".concat(null===p||void 0===p?void 0:p.index,".amount"))<=p.product.inStock?f(null):pn.Am.warn("Max: ".concat(p.product.inStock))}})]})})]})},Pn=x.default.div(yn||(yn=(0,f.Z)(["\n  max-height: calc(100vh - 110px);\n  overflow: auto;\n  .card {\n    padding: 16px 20px;\n    border-radius: 12px;\n    background: #fff;\n    box-shadow: 0px 0px 4px 0px rgba(0, 0, 0, 0.07);\n    margin-bottom: 16px;\n    &:last-of-type {\n      margin-bottom: 0;\n    }\n    .title {\n      font-size: 18px;\n      border-bottom: 1px dashed #e9e9e9;\n      padding-bottom: 10px;\n      margin-bottom: 16px;\n    }\n    .info {\n      display: flex;\n      align-items: center;\n      .image {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        background-color: #f3f3f8;\n        width: 56px;\n        height: 56px;\n        border-radius: 50%;\n        margin-right: 12px;\n        overflow: hidden;\n        img {\n          width: 100%;\n          height: 100%;\n          object-fit: cover;\n        }\n        svg {\n          width: 25px;\n          height: 25px;\n        }\n      }\n      .phone {\n        color: #999;\n        font-size: 14px;\n      }\n    }\n    .car {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      border-top: 1px dashed #e9e9e9;\n      margin-top: 16px;\n      padding-top: 16px;\n      .number {\n        padding: 3px 7px;\n        font-weight: 600;\n        font-size: 15px;\n        border-radius: 4px;\n        background: #f5f5f5;\n      }\n    }\n  }\n\n  .comment_boxes {\n    display: flex;\n    align-items: flex-start;\n    flex-wrap: wrap;\n    gap: 10px;\n\n    .comment_box {\n      width: 76px;\n      background-color: inherit;\n\n      .comment_img {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        box-shadow: 0px 0px 12px -2px rgba(0, 0, 0, 0.12);\n        border-radius: 6px;\n        width: 100%;\n        height: 62px;\n\n        img {\n          width: 80%;\n          object-fit: cover;\n        }\n      }\n\n      p {\n        display: inline-block;\n        font-size: 10px !important;\n        font-weight: 600;\n        color: #000;\n        width: 100%;\n        white-space: nowrap;\n        overflow: hidden !important;\n        text-overflow: ellipsis;\n      }\n    }\n  }\n"]))),In=t(4729),En=function(n){var e,t,i,o,r,a=n.formStore,d=n.order;return(0,v.jsxs)(Pn,{children:[(0,v.jsx)(kn,{basketItems:[],formStore:a}),(0,v.jsxs)("div",{className:"card mt-3",children:[(0,v.jsx)("h4",{className:"title",children:"Mijoz"}),(0,v.jsxs)("div",{className:"info border-bottom mb-3 pb-3",children:[(0,v.jsx)("div",{className:"image",children:null!==d&&void 0!==d&&null!==(e=d.customer)&&void 0!==e&&e.image?(0,v.jsx)("img",{src:"https://picsum.photos/100",alt:""}):(0,v.jsx)(m.Q_,{})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("h4",{className:"name",children:(0,C.get)(d,"customer.firstName","")+" "+(0,C.get)(d,"customer.lastName","")}),(0,v.jsx)("span",{className:"phone",children:null===d||void 0===d||null===(t=d.customer)||void 0===t?void 0:t.phoneNumber})]})]}),"completed"===(0,C.get)(d,"state.state","")&&(0,v.jsxs)("div",{children:[(0,v.jsx)("h3",{className:"mb-2",children:"Reyting va izoh"}),(0,C.get)(d,"rateComment","")&&(0,v.jsx)("p",{className:"border-bottom pb-3",children:(0,C.get)(d,"rateComment","")}),(0,v.jsx)("div",{className:"py-3 border-bottom",children:(0,v.jsx)(In.Z,{name:"read-only",value:(0,C.get)(d,"rate",5),readOnly:!0})}),(0,v.jsx)("div",{className:"comment_boxes pt-3",children:(0,C.get)(d,"rateComments",[]).map((function(n){return(0,v.jsxs)("div",{className:"comment_box",children:[(0,v.jsx)("div",{className:"comment_img",children:(0,v.jsx)("img",{src:"https://backend.uygaayt.kahero.uz/employee-api/v1/"+(0,C.get)(n,"image.url",""),alt:"rate"})}),(0,v.jsx)("p",{children:(0,C.get)(n,"title","")})]})}))})]})]}),d.courier&&(0,v.jsxs)("div",{className:"card",children:[(0,v.jsx)("h4",{className:"title",children:"Kuryer"}),(0,v.jsxs)("div",{className:"info",children:[(0,v.jsx)("div",{className:"image",children:null!==d&&void 0!==d&&null!==(i=d.courier)&&void 0!==i&&i.image?(0,v.jsx)("img",{src:"https://backend.uygaayt.kahero.uz/employee-api/v1//"+(null===d||void 0===d||null===(o=d.courier)||void 0===o||null===(r=o.image)||void 0===r?void 0:r.url),alt:""}):(0,v.jsx)("span",{children:(0,v.jsx)(m.Q_,{})})}),(0,v.jsxs)("div",{children:[(0,v.jsxs)("h4",{className:"name",children:[(0,C.get)(d,"courier.firstName","")," ",(0,C.get)(d,"courier.lastName","")]}),(0,v.jsx)("span",{className:"phone",children:(0,C.get)(d,"courier.phoneNumber","")})]})]}),(0,v.jsxs)("div",{className:"car",children:[(0,v.jsx)("span",{className:"name",children:(0,C.get)(d,"courier.carBrand","")}),(0,v.jsx)("span",{className:"number",children:(0,C.get)(d,"courier.carNumber","")})]})]})]})},qn=t(59434),Ln=t(55210),Yn=function(){var n,e,t,i,o,l,c=(0,r.UO)().id,u=(0,j.$G)().t,m=(0,an.cI)(),p=m.setValue,f=m.reset,x=m.handleSubmit,h=(m.control,(0,N.C)((function(n){return n.SocketState.render}))),g=(0,qn.I0)(),y=localStorage.getItem("i18nextLng")||"uz",k=(0,b.useState)(""),w=(0,a.Z)(k,2),A=(w[0],w[1],(0,s.h_)("order/get-by-id/".concat(c),{},{enabled:!!c})),S=A.data,_=A.status,P=A.refetch,I=null===S||void 0===S?void 0:S.data,E="completed"===(null===I||void 0===I||null===(n=I.state)||void 0===n?void 0:n.state),q="cancelled"===(null===I||void 0===I||null===(e=I.state)||void 0===e?void 0:e.state),L=(0,s.h_)("order-state/get-all",{},{suspense:!1}),Y=L.data,T=(L.refetch,(0,s.uC)("order/state/".concat(null===I||void 0===I?void 0:I._id),"put",{onSuccess:function(){P(),pn.Am.success(u("general.success"))}}).mutate),B=(0,s.uC)("order/update","put").mutate;(0,b.useEffect)((function(){"success"===_&&(p("items",null===I||void 0===I?void 0:I.items),f({items:null===I||void 0===I?void 0:I.items,addressName:null===I||void 0===I?void 0:I.addressName,addressLocation:null===I||void 0===I?void 0:I.addressLocation,customer:(0,C.get)(I,"customer.firstName","")+" "+(0,C.get)(I,"customer.lastName",""),receiverFirstName:(0,C.get)(I,"receiverCustomer.firstName",""),phoneNumber:null===I||void 0===I?void 0:I.customer.phoneNumber,paymentType:null===I||void 0===I?void 0:I.paymentType,houseNumber:null===I||void 0===I?void 0:I.houseNumber,entrance:null===I||void 0===I?void 0:I.entrance,floor:null===I||void 0===I?void 0:I.floor,deliveryDate:(0,C.get)(I,"deliveryDate",""),apartmentNumber:null===I||void 0===I?void 0:I.apartmentNumber}),setTimeout((function(){return p("comment",null===I||void 0===I?void 0:I.comment)}),0))}),[_]);var D=x((function(n){var e,t=(0,z.Z)((0,z.Z)({},n),{},{items:null===(e=n.items)||void 0===e?void 0:e.map((function(n){return{productId:n.productId,amount:n.amount}})),_id:null===I||void 0===I?void 0:I._id,cardId:null===I||void 0===I?void 0:I._id});B(t)})),U=null===Y||void 0===Y||null===(t=Y.data)||void 0===t?void 0:t.findIndex((function(n){return n._id===(null===I||void 0===I?void 0:I.state._id)}));return(0,b.useEffect)((function(){h&&(P(),g((0,Ln.zm)(!1)))}),[h]),(0,v.jsx)(Cn,{children:(0,v.jsxs)(d.ZP,{container:!0,columnSpacing:3,children:[(0,v.jsxs)(d.ZP,{item:!0,md:8,children:[(0,v.jsxs)("div",{className:"top",children:[!q&&!E&&(0,v.jsxs)("div",{className:"d-flex",children:[(0,v.jsx)(Z.c7,{title:null===Y||void 0===Y||null===(i=Y.data[U+1])||void 0===i||null===(o=i.name)||void 0===o?void 0:o[y],variant:"contained",className:"me-3",onClick:function(){var n;return T({stateId:null===Y||void 0===Y||null===(n=Y.data[U+1])||void 0===n?void 0:n._id,_id:null===I||void 0===I?void 0:I._id,position:1})}}),(0,v.jsx)(Z.c7,{title:"Bekor qilish",variant:"outlined",color:"error",className:"me-3",onClick:function(){return T({stateId:null===Y||void 0===Y?void 0:Y.data[(null===Y||void 0===Y?void 0:Y.data.length)-1]._id,_id:null===I||void 0===I?void 0:I._id,position:1})}})]}),(0,v.jsxs)("div",{className:"payment-type",children:[(0,v.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAG6SURBVHgB7ZPLTsJAFIb/Di0gpVgRr5h4i9G4VOPCxJ2P4cYn8Cl8DXc+h4kP4MoYDQnRECOIhUJLbaEXT4dQSCyyYMvfTDqXM9+cM+cMMNO0Ei7vrm9ZwCRMqQA+s+pmXWQQriAEYw2L6jyKCyps18RHswXNdGPtBPrAAoijk3nFhCT1N6RFGUfFE2wQzHH7c8KOi5JWwmu1AtfvkVsefrou2p2ViBEBF+fbWC/o0cLx2jmUpEobfdy/luB5Pi4O97Gb3wZLtFEzy9zOdgz+H0DZAFBQzQimplcJluf9t28NaUnEztIiGQvkeZavpyiCUMlkBopci/YyxEhNLUf95WyWoA20bRuSmOhfR0Lm4DjFAkeVy8zhdHsTpu3g+bM6yTweqDvDEAzyLLxHOZ0K88jV9SxKVOd/YKM1DEG3a7yFCqiiKloTXcr0weoKHILpTp2XEYf3LBhxWa7rOfiBADHh8fGD8YSzzQwKioLzvV2kKDGOb+GlVkZZ0+B6OTrNRceZg2kt/QWG0lrK6BDvX4+8DtepuG0K8UPXoRlhTcoYJ5EeyY0vYGucQaWp8zZJxGH0/izMNLV+ASXZrtTxzAUrAAAAAElFTkSuQmCC",alt:"money"}),(0,v.jsxs)("div",{className:"type",children:[(0,v.jsx)("span",{children:"To'lov turi"}),(0,v.jsx)("h4",{children:u("enum.".concat(null===I||void 0===I?void 0:I.paymentType))})]}),(0,v.jsx)("span",{className:"state",children:"cash"===(null===I||void 0===I?void 0:I.paymentType)&&"completed"===I.state.state||null!==I&&void 0!==I&&I.isPaid?"To'langan":"To'lanmagan"})]}),!E&&!q&&(0,v.jsx)(Z.c7,{title:"Saqlash",variant:"contained",className:"ms-3",onClick:D})]}),(0,v.jsx)(zn,{formStore:m,state:null===I||void 0===I||null===(l=I.state)||void 0===l?void 0:l.state,order:I})]}),(0,v.jsx)(d.ZP,{item:!0,md:4,children:(0,v.jsx)(En,{formStore:m,order:I})})]})})},Tn=function(){return(0,v.jsxs)(r.Z5,{children:[(0,v.jsx)(r.AW,{path:"table",element:(0,v.jsx)(M,{})}),(0,v.jsx)(r.AW,{path:"board",element:(0,v.jsx)(tn,{})}),(0,v.jsx)(r.AW,{path:"add",element:(0,v.jsx)(wn,{})}),(0,v.jsx)(r.AW,{path:":id",element:(0,v.jsx)(Yn,{})}),(0,v.jsx)(r.AW,{path:"*",element:(0,v.jsx)(r.Fg,{to:"/order/table",replace:!0})})]})}},30709:function(n,e,t){t.d(e,{Fv:function(){return a},G4:function(){return i},od:function(){return r},v5:function(){return o}});var i=[{_id:"cash",name:"Naqd",trans_key:"cash"},{_id:"card",name:"Karta",trans_key:"card"}],o=[{_id:"percent",name:"Foiz",trans_key:"percent"},{_id:"amount",name:"Miqdor",trans_key:"amount"}],r=[{name:"Funksionallik",key:"functionality",role:"role"},{name:"Minimal buyurtma bahosi",key:"clientSettings",role:"role"},{name:"Asosiy manzil radiusi",key:"mainAddress",role:"role"},{name:"Veb-sayt shartlari",key:"websiteConditions",role:"role"}],a=[{rate:5},{rate:4},{rate:3},{rate:2},{rate:1}]},90816:function(n,e,t){t.d(e,{Y:function(){return i}});var i=function(n){return n||0==n?n.toLocaleString().replaceAll(","," "):""}}}]);
//# sourceMappingURL=233.5009a36e.chunk.js.map