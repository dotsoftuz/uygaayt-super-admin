{"version":3,"file":"static/js/566.24005714.chunk.js","mappings":"gOAMA,MA0CA,EA1CeA,KACb,MAAM,EAAEC,IAAMC,EAAAA,EAAAA,MACRC,GAAWC,EAAAA,EAAAA,MACXC,ECJ0BC,MAChC,MAAM,EAAEL,IAAMC,EAAAA,EAAAA,MAEd,MAAO,CACL,CACEK,MAAON,EAAE,mBACTO,UAAAA,CAAUC,GAAW,IAAV,IAAEC,GAAKD,EAChB,MAAME,GAAWC,EAAAA,EAAAA,KAAIF,EAAK,oBAAqB,IACzCG,EAASF,EAASG,OAAS,GAC3BC,EAAcF,EAAM,GAAAG,OAAML,EAASM,MAAM,EAAG,IAAG,OAAQN,EAE7D,OACEO,EAAAA,EAAAA,KAAA,QAAMC,MAAON,EAASF,OAAWS,EAAUC,SACxCN,GAGP,GAEF,CACER,MAAON,EAAE,sBACTO,UAAAA,CAAUc,GAAW,IAAV,IAAEZ,GAAKY,EAChB,OAAOV,EAAAA,EAAAA,KAAIF,EAAK,uBAAwB,GAC1C,GAEF,CACEH,MAAO,cACPgB,UAAU,EACVC,WAAYvB,EAAE,sBACdO,UAAAA,CAAUiB,GAAW,IAAV,IAAEf,GAAKe,EAChB,OAAOb,EAAAA,EAAAA,KAAIF,EAAK,eAAgB,GAClC,GAEF,CACEH,MAAO,mBACPgB,UAAU,EACVC,WAAYvB,EAAE,qBACdO,UAAAA,CAAUkB,GAAW,IAAV,IAAEhB,GAAKgB,EAChB,OAAOC,EAAAA,EAAAA,IAAaf,EAAAA,EAAAA,KAAIF,EAAK,cAAe,IAC9C,KDlCYJ,GAKVsB,GACJC,EAAAA,EAAAA,MAACC,EAAAA,GAAI,CAACC,UAAU,+EAA8EV,SAAA,EAC5FH,EAAAA,EAAAA,KAACY,EAAAA,GAAI,CAACC,UAAU,kBAAiBV,UAC/BH,EAAAA,EAAAA,KAACc,EAAAA,GAAkB,CACjBC,WAAW,kBACXC,WAAW,cACXC,YAAalC,EAAE,mBACfmC,eAAiBC,GAAiB,OAANA,QAAM,IAANA,OAAM,EAANA,EAAQC,eAGxCpB,EAAAA,EAAAA,KAACY,EAAAA,GAAI,CAACC,UAAU,mCAAkCV,UAChDH,EAAAA,EAAAA,KAACqB,EAAAA,GAAe,OAElBrB,EAAAA,EAAAA,KAACY,EAAAA,GAAI,CAACC,UAAU,kBAAiBV,UAC/BH,EAAAA,EAAAA,KAACsB,EAAAA,GAAY,CAACC,IAjBL,kCAuBf,OACEvB,EAAAA,EAAAA,KAAAwB,EAAAA,SAAA,CAAArB,UACEH,EAAAA,EAAAA,KAACyB,EAAAA,GAAK,CACJtC,QAASA,EACTuC,QAAQ,kBACRC,eAAgBjB,EAEhBkB,cAAe,CAAC,EAChBC,WAAarC,GAAQP,EAAS,aAADa,OAAcN,EAAIsC,WE/BvD,EARcC,KAEV/B,EAAAA,EAAAA,KAACgC,EAAAA,GAAM,CAAA7B,UACLH,EAAAA,EAAAA,KAACiC,EAAAA,GAAK,CAACC,KAAK,IAAIC,SAASnC,EAAAA,EAAAA,KAACoC,EAAiB,O,mCCN1C,MAAM3B,EAAgB4B,IAC3B,GAAIA,GAAqB,IAAXA,EAAc,CAI1B,OAFgBC,KAAKC,MAAkC,KAA3BF,EAASG,OAAOC,UAAkB,KAG3DC,eAAe,QAAS,CACvBC,sBAAuB,EACvBC,sBAAuB,IAExBC,WAAW,IAAK,IACrB,CACA,MAAO,G","sources":["pages/customer_analytics/container/CustomerAnalytics.tsx","pages/customer_analytics/container/customer_analytics.columns.tsx","pages/customer_analytics/index.tsx","utils/numberFormat.ts"],"sourcesContent":["import { AutoCompleteFilter, ExportButton, RangeDatePicker, Table } from \"components\";\r\nimport { useCustomerColumns } from \"./customer_analytics.columns\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { Grid } from \"@mui/material\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nconst Client = () => {\r\n  const { t } = useTranslation();\r\n  const navigate = useNavigate();\r\n  const columns = useCustomerColumns();\r\n\r\n  const exportUrl = `/report/customer/export/`;\r\n\r\n\r\n  const renderHeader = (\r\n    <Grid className=\"w-full lg:w-[60%] md:flex md:grid-cols-3 gap-3 justify-end items-center py-2\">\r\n      <Grid className=\"md:w-[30%] py-1\" >\r\n        <AutoCompleteFilter\r\n          optionsUrl=\"customer/paging\"\r\n          filterName=\"customer_id\"\r\n          placeholder={t(\"common.customer\")}\r\n          getOptionLabel={(option) => option?.firstName}\r\n        />\r\n      </Grid>\r\n      <Grid className=\"md:w-[40%] py-1 flex justify-end\" >\r\n        <RangeDatePicker />\r\n      </Grid>\r\n      <Grid className=\"md:w-[30%] py-1\" >\r\n        <ExportButton url={exportUrl} />\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n\r\n\r\n  return (\r\n    <>\r\n      <Table\r\n        columns={columns}\r\n        dataUrl=\"report/customer\"\r\n        headerChildren={renderHeader}\r\n        // searchable\r\n        exQueryParams={{}}\r\n        onRowClick={(row) => navigate(`/customer/${row._id}`)}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Client;\r\n","import { GridColumns } from \"@mui/x-data-grid\";\r\nimport { get } from \"lodash\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { numberFormat } from \"utils/numberFormat\";\r\n\r\nexport const useCustomerColumns = (): GridColumns => {\r\n  const { t } = useTranslation();\r\n\r\n  return [\r\n    {\r\n      field: t(\"common.fullName\"),\r\n      renderCell({ row }) {\r\n        const fullName = get(row, \"customer.fullName\", \"\");\r\n        const isLong = fullName.length > 20;\r\n        const displayText = isLong ? `${fullName.slice(0, 20)}...` : fullName;\r\n    \r\n        return (\r\n          <span title={isLong ? fullName : undefined}>\r\n            {displayText}\r\n          </span>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      field: t(\"common.phoneNumber\"),\r\n      renderCell({ row }) {\r\n        return get(row, \"customer.phoneNumber\", \"\");\r\n      },\r\n    },\r\n    {\r\n      field: \"totalOrders\",\r\n      sortable: true,\r\n      headerName: t(\"common.orderAmount\")!,\r\n      renderCell({ row }) {\r\n        return get(row, \"total_amount\", \"\");\r\n      },\r\n    },\r\n    {\r\n      field: \"totalOrdersPrice\",\r\n      sortable: true,\r\n      headerName: t(\"common.orderPrice\")!,\r\n      renderCell({ row }) {\r\n        return numberFormat(get(row, \"total_price\", \"\"));\r\n      },\r\n    },\r\n  ];\r\n};\r\n","import {Route, Routes } from \"react-router-dom\";\r\nimport CustomerAnalytics from \"./container/CustomerAnalytics\";\r\n\r\nconst index = () => {\r\n  return (\r\n    <Routes>\r\n      <Route path=\"*\" element={<CustomerAnalytics/>} />\r\n    </Routes>\r\n  );\r\n};\r\n\r\nexport default index;\r\n","export const numberFormat = (number: any) => {\r\n  if (number || number === 0) {\r\n    // Floating-point xatoliklarni oldini olish\r\n    const rounded = Math.round((number + Number.EPSILON) * 100) / 100;\r\n\r\n    return rounded\r\n      .toLocaleString(\"en-US\", {\r\n        minimumFractionDigits: 0, // Har doim 2 kasr\r\n        maximumFractionDigits: 0, // Kasr 2 dan oshmaydi\r\n      })\r\n      .replaceAll(\",\", \" \"); // Minglik ajratgich\r\n  }\r\n  return \"\";\r\n};\r\n"],"names":["Client","t","useTranslation","navigate","useNavigate","columns","useCustomerColumns","field","renderCell","_ref","row","fullName","get","isLong","length","displayText","concat","slice","_jsx","title","undefined","children","_ref2","sortable","headerName","_ref3","_ref4","numberFormat","renderHeader","_jsxs","Grid","className","AutoCompleteFilter","optionsUrl","filterName","placeholder","getOptionLabel","option","firstName","RangeDatePicker","ExportButton","url","_Fragment","Table","dataUrl","headerChildren","exQueryParams","onRowClick","_id","index","Routes","Route","path","element","CustomerAnalytics","number","Math","round","Number","EPSILON","toLocaleString","minimumFractionDigits","maximumFractionDigits","replaceAll"],"sourceRoot":""}