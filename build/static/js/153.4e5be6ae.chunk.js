"use strict";(self.webpackChunkbestune_admin=self.webpackChunkbestune_admin||[]).push([[153],{18153:function(e,r,t){t.r(r),t.d(r,{default:function(){return X}});var n=t(57689),i=t(1413),o=t(29439),s=t(71796),a=t(72791),l=t(20068),d=t(81918),c=t(97892),x=t.n(c),u=t(763),h=t(39230),f=t(80184),g=t(61889),m=t(32188),p=t(75985),b=t(84544),j=t(35834),v=t(11087),Z=function(){var e=(0,a.useState)(),r=(0,o.Z)(e,2),t=r[0],c=r[1],Z=(0,a.useState)(),y=(0,o.Z)(Z,2),w=y[0],k=y[1],z=(0,h.$G)().t,S=(0,j.Z)(),C=(0,v.lr)(),W=(0,o.Z)(C,2),I=(W[0],W[1]),N=(0,n.s0)();(0,a.useEffect)((function(){S.storeId||I((0,i.Z)((0,i.Z)({},S),{},{storeId:"uygaayt"}))}),[]);var R=(0,m.uC)("review/toggle-visibility/".concat(w),"post",{onSuccess:function(){p.Am.success("Sharh ko'rinishi o'zgartirildi"),k(void 0)},onError:function(e){p.Am.error((null===e||void 0===e?void 0:e.message)||"Xatolik yuz berdi"),k(void 0)}}).mutate;var M=function(e){var r=(0,h.$G)().t;return[{field:r("common.customer"),flex:1.2,renderCell:function(e){var r=e.row,t=(0,u.get)(r,"customer.firstName",""),n=(0,u.get)(r,"customer.lastName",""),i=(0,u.get)(r,"customer.phoneNumber",""),o="".concat(t," ").concat(n).trim()||"Mijoz";return(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{style:{fontWeight:500},children:o}),i&&(0,f.jsx)("div",{style:{fontSize:"12px",color:"#6b7280"},children:i})]})}},{field:r("common.rating"),width:150,renderCell:function(e){var r=e.row,t=(0,u.get)(r,"rating",0);return(0,f.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[Array.from({length:5},(function(e,r){return r+1})).map((function(e){return(0,f.jsx)("span",{style:{color:e<=t?"#fbbf24":"#d1d5db",fontSize:"16px"},children:"\u2605"},e)})),(0,f.jsx)("span",{style:{marginLeft:"4px",fontSize:"14px",fontWeight:500},children:t})]})}},{field:r("common.comment"),flex:1.5,renderCell:function(e){var r=e.row,t=(0,u.get)(r,"comment",""),n=(null===t||void 0===t?void 0:t.length)>50?"".concat(t.substring(0,50),"..."):t||"-";return(0,f.jsx)(l.Z,{title:t||"",arrow:!0,children:(0,f.jsx)("span",{style:{fontSize:"14px"},children:n})})}},{field:"store",headerName:"Do'kon",flex:1,renderCell:function(e){var r=e.row,t=(0,u.get)(r,"store.name",""),n=(0,u.get)(r,"storeId","");return"uygaayt"===n?"Uygaayt Market":t||n||"-"}},{field:"order",headerName:"Buyurtma",width:120,renderCell:function(e){var r=e.row,t=(0,u.get)(r,"order.number","");return t?"#".concat(t):"-"}},{field:"product",headerName:"Mahsulot",flex:1,renderCell:function(e){var r=e.row,t=(0,u.get)(r,"product.name","");return t&&("object"===typeof t?t.uz||t.ru||t.en:t)||"-"}},{field:r("common.status"),width:120,renderCell:function(e){var r=e.row,t=(0,u.get)(r,"isVisible",!0);return(0,f.jsx)(d.Z,{label:t?"Ko'rinadi":"Yashirilgan",color:t?"success":"default",size:"small",sx:{fontWeight:600}})}},{field:r("common.date"),width:180,renderCell:function(e){var r=e.row;return x()((0,u.get)(r,"createdAt","")).format("DD.MM.YYYY HH:mm")}},{field:"actions",headerName:"Amal",width:150,align:"center",headerAlign:"center",sortable:!1,filterable:!1,disableColumnMenu:!0,renderCell:function(r){var t=r.row;return(0,f.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:(0,f.jsx)("button",{onClick:function(r){r.stopPropagation(),e&&e(t)},style:{padding:"4px 8px",fontSize:"12px",borderRadius:"4px",border:"1px solid #e5e7eb",background:"white",cursor:"pointer"},onMouseOver:function(e){e.currentTarget.style.background="#f3f4f6"},onMouseOut:function(e){e.currentTarget.style.background="white"},children:(0,u.get)(t,"isVisible",!0)?"Yashirish":"Ko'rsatish"})})}}]}((function(e){k(e._id),R({isVisible:!(0,u.get)(e,"isVisible",!0)})})),Y=(0,a.useState)(""),A=(0,o.Z)(Y,2),D=A[0],P=A[1],_=(0,f.jsxs)(g.ZP,{className:"w-full lg:w-[60%] md:flex md:grid-cols-3 gap-3 justify-end items-center py-2",children:[(0,f.jsx)(g.ZP,{className:"md:w-[30%] py-1",children:(0,f.jsx)(s.he,{optionsUrl:"store/paging",filterName:"storeId",placeholder:"Do'kon bo'yicha",getOptionLabel:function(e){return(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e._id)}})}),(0,f.jsx)(g.ZP,{className:"md:w-[30%] py-1",children:(0,f.jsx)(s.he,{optionsUrl:"customer/paging",filterName:"customerId",placeholder:z("common.customer"),getOptionLabel:function(e){return"".concat((null===e||void 0===e?void 0:e.firstName)||""," ").concat((null===e||void 0===e?void 0:e.lastName)||"").trim()||(null===e||void 0===e?void 0:e.phoneNumber)}})}),(0,f.jsx)(g.ZP,{className:"md:w-[30%] py-1",children:(0,f.jsxs)("select",{className:"w-full px-3 py-2 border rounded-md",value:D,onChange:function(e){return P(e.target.value)},children:[(0,f.jsx)("option",{value:"",children:"Barcha baholar"}),(0,f.jsx)("option",{value:"5",children:"5 yulduz"}),(0,f.jsx)("option",{value:"4",children:"4 yulduz"}),(0,f.jsx)("option",{value:"3",children:"3 yulduz"}),(0,f.jsx)("option",{value:"2",children:"2 yulduz"}),(0,f.jsx)("option",{value:"1",children:"1 yulduz"})]})})]}),U=(0,a.useMemo)((function(){return{rating:D||void 0}}),[D]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s.iA,{dataUrl:"review/paging",columns:M,searchable:!0,headerChildren:_,exQueryParams:U,onRowClick:function(e){N("/review/".concat(e._id))},onDeleteColumn:function(e){return c(e._id)}}),(0,f.jsx)(b.Z,{open:t,setOpen:c,url:"review/delete"})]})},y=t(697),w=t(20890),k=t(35527),z=t(57621),S=t(93044),C=t(39504),W=t(4729),I=t(94721),N=t(3710),R=t(29569),M=t(63833),Y=t(94939),A=t(14913),D=t(3834),P=t(27655),_=t(89736),U=t(76086),H=t(31694),O=t(37032),T=t(44302),V=function(){var e,r,t=(0,n.UO)().id,i=(0,n.s0)(),o=((0,h.$G)().t,(0,m.h_)("review/get-by-id/".concat(t),{},{enabled:!!t})),a=o.data,l=o.status,c=o.refetch,b=null===a||void 0===a?void 0:a.data,j=(0,m.uC)("review/toggle-visibility/".concat(t),"post",{onSuccess:function(){p.Am.success("Sharh ko'rinishi o'zgartirildi"),c()},onError:function(e){p.Am.error((null===e||void 0===e?void 0:e.message)||"Xatolik yuz berdi")}}).mutate;if("loading"===l)return(0,f.jsx)(y.Z,{sx:{p:4,display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:(0,f.jsx)(w.Z,{variant:"h6",color:"text.secondary",children:"Yuklanmoqda..."})});if("error"===l||!b)return(0,f.jsxs)(y.Z,{sx:{p:4},children:[(0,f.jsx)(T.Z,{}),(0,f.jsx)(y.Z,{sx:{mt:3,p:3,borderRadius:2,bgcolor:"error.light",color:"error.contrastText"},children:(0,f.jsx)(w.Z,{variant:"h6",children:"Sharh topilmadi"})})]});var v="".concat((0,u.get)(b,"customer.firstName","")," ").concat((0,u.get)(b,"customer.lastName","")).trim()||"Mijoz",Z=(0,u.get)(b,"rating",0),V=(0,u.get)(b,"isVisible",!0);return(0,f.jsxs)(y.Z,{sx:{p:{xs:2,sm:3,md:4},background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",minHeight:"100vh"},children:[(0,f.jsx)(k.Z,{elevation:3,sx:{p:3,mb:3,borderRadius:3,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},children:(0,f.jsxs)(y.Z,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[(0,f.jsx)(T.Z,{}),(0,f.jsxs)(y.Z,{sx:{flex:1},children:[(0,f.jsx)(w.Z,{variant:"h4",sx:{fontWeight:700,mb:.5},children:"Sharh Tafsilotlari"}),(0,f.jsx)(w.Z,{variant:"body2",sx:{opacity:.9},children:"Sharhning barcha ma'lumotlari"})]}),(0,f.jsx)(d.Z,{icon:V?(0,f.jsx)(N.Z,{}):(0,f.jsx)(R.Z,{}),label:V?"Ko'rinadi":"Yashirilgan",sx:{bgcolor:V?"rgba(255,255,255,0.3)":"rgba(255,255,255,0.2)",color:"white",fontWeight:600,fontSize:"0.875rem"}})]})}),(0,f.jsxs)(g.ZP,{container:!0,spacing:3,children:[(0,f.jsx)(g.ZP,{item:!0,xs:12,md:8,children:(0,f.jsxs)(z.Z,{elevation:4,sx:{mb:3,borderRadius:3,overflow:"hidden",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-4px)",boxShadow:6}},children:[(0,f.jsx)(y.Z,{sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",p:2,color:"white"},children:(0,f.jsxs)(y.Z,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,f.jsx)(S.Z,{sx:{bgcolor:"rgba(255,255,255,0.3)",width:56,height:56},children:(0,f.jsx)(M.Z,{sx:{fontSize:32}})}),(0,f.jsxs)(y.Z,{sx:{flex:1},children:[(0,f.jsx)(w.Z,{variant:"h6",sx:{fontWeight:700,mb:.5},children:v}),(0,u.get)(b,"customer.phoneNumber")&&(0,f.jsxs)(y.Z,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,f.jsx)(Y.Z,{sx:{fontSize:16}}),(0,f.jsx)(w.Z,{variant:"body2",sx:{opacity:.9},children:(0,u.get)(b,"customer.phoneNumber")})]})]})]})}),(0,f.jsxs)(C.Z,{sx:{p:3},children:[(0,f.jsxs)(k.Z,{elevation:0,sx:{p:2.5,mb:3,borderRadius:2,background:"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)",border:"1px solid #fbbf24"},children:[(0,f.jsxs)(y.Z,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[(0,f.jsx)(A.Z,{sx:{color:"#f59e0b",fontSize:28}}),(0,f.jsx)(w.Z,{variant:"h6",sx:{fontWeight:700,color:"#92400e"},children:"Baho"})]}),(0,f.jsxs)(y.Z,{sx:{display:"flex",alignItems:"center",gap:2,pl:5},children:[(0,f.jsx)(W.Z,{value:Z,readOnly:!0,precision:.5,size:"large",sx:{"& .MuiRating-iconFilled":{color:"#f59e0b"}}}),(0,f.jsxs)(w.Z,{variant:"h5",sx:{fontWeight:700,color:"#92400e",ml:1},children:[Z," / 5"]})]})]}),(0,u.get)(b,"comment")&&(0,f.jsxs)(k.Z,{elevation:0,sx:{p:3,mb:3,borderRadius:2,background:"linear-gradient(135deg, #e0e7ff 0%, #c7d2fe 100%)",border:"1px solid #818cf8"},children:[(0,f.jsxs)(y.Z,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[(0,f.jsx)(D.Z,{sx:{color:"#4f46e5",fontSize:24}}),(0,f.jsx)(w.Z,{variant:"h6",sx:{fontWeight:700,color:"#312e81"},children:"Sharh"})]}),(0,f.jsx)(w.Z,{variant:"body1",sx:{lineHeight:1.8,color:"#1e1b4b",fontSize:"1rem"},children:(0,u.get)(b,"comment")})]}),(null===(e=(0,u.get)(b,"rateComments"))||void 0===e?void 0:e.length)>0&&(0,f.jsxs)(y.Z,{sx:{mb:3},children:[(0,f.jsx)(w.Z,{variant:"h6",sx:{fontWeight:700,mb:2,color:"#1f2937"},children:"Tanlangan Xususiyatlar"}),(0,f.jsx)(y.Z,{sx:{display:"flex",flexWrap:"wrap",gap:1.5},children:(0,u.get)(b,"rateComments",[]).map((function(e,r){var t,n;return(0,f.jsx)(d.Z,{icon:null!==(t=e.image)&&void 0!==t&&t.url?(0,f.jsx)("img",{src:e.image.url,alt:"",style:{width:"24px",height:"24px",borderRadius:"6px"}}):void 0,label:(null===(n=e.title)||void 0===n?void 0:n.uz)||e.title||"",sx:{background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)",border:"1px solid #0ea5e9",fontWeight:600,fontSize:"0.875rem",py:2.5,px:1,"&:hover":{background:"linear-gradient(135deg, #e0f2fe 0%, #bae6fd 100%)",transform:"scale(1.05)"},transition:"all 0.2s"}},r)}))})]}),(null===(r=(0,u.get)(b,"images"))||void 0===r?void 0:r.length)>0&&(0,f.jsxs)(y.Z,{sx:{mb:3},children:[(0,f.jsxs)(y.Z,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[(0,f.jsx)(P.Z,{sx:{color:"#6366f1",fontSize:24}}),(0,f.jsxs)(w.Z,{variant:"h6",sx:{fontWeight:700,color:"#1f2937"},children:["Rasmlar (",(0,u.get)(b,"images",[]).length,")"]})]}),(0,f.jsx)(y.Z,{sx:{display:"grid",gridTemplateColumns:{xs:"repeat(2, 1fr)",sm:"repeat(3, 1fr)",md:"repeat(4, 1fr)"},gap:2},children:(0,u.get)(b,"images",[]).map((function(e,r){return(0,f.jsx)(k.Z,{elevation:3,sx:{position:"relative",width:"100%",paddingTop:"100%",borderRadius:3,overflow:"hidden",cursor:"pointer",border:"2px solid transparent",transition:"all 0.3s","&:hover":{transform:"scale(1.05)",borderColor:"#6366f1",boxShadow:6}},onClick:function(){var r=e.url||e.webpUrl;r&&window.open(r,"_blank")},children:(0,f.jsx)("img",{src:e.url||e.webpUrl,alt:"Review ".concat(r+1),style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}})},r)}))})]})]})]})}),(0,f.jsx)(g.ZP,{item:!0,xs:12,md:4,children:(0,f.jsxs)(z.Z,{elevation:4,sx:{borderRadius:3,overflow:"hidden",position:"sticky",top:20},children:[(0,f.jsx)(y.Z,{sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",p:2,color:"white"},children:(0,f.jsx)(w.Z,{variant:"h6",sx:{fontWeight:700},children:"Qo'shimcha Ma'lumotlar"})}),(0,f.jsxs)(C.Z,{sx:{p:3},children:[(0,u.get)(b,"order")&&(0,f.jsxs)(k.Z,{elevation:0,sx:{p:2,mb:2,borderRadius:2,background:"#f8fafc",border:"1px solid #e2e8f0",transition:"all 0.2s","&:hover":{background:"#f1f5f9",transform:"translateX(4px)"}},children:[(0,f.jsxs)(y.Z,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:1},children:[(0,f.jsx)(_.Z,{sx:{color:"#3b82f6",fontSize:20}}),(0,f.jsx)(w.Z,{variant:"subtitle2",sx:{fontWeight:600,color:"#64748b"},children:"Buyurtma"})]}),(0,f.jsxs)(w.Z,{variant:"h6",sx:{cursor:"pointer",color:"#3b82f6",fontWeight:700,"&:hover":{textDecoration:"underline"}},onClick:function(){return i("/order/".concat((0,u.get)(b,"order._id")))},children:["#",(0,u.get)(b,"order.number","")]})]}),(0,u.get)(b,"product")&&(0,f.jsxs)(k.Z,{elevation:0,sx:{p:2,mb:2,borderRadius:2,background:"#f8fafc",border:"1px solid #e2e8f0",transition:"all 0.2s","&:hover":{background:"#f1f5f9",transform:"translateX(4px)"}},children:[(0,f.jsxs)(y.Z,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:1},children:[(0,f.jsx)(U.Z,{sx:{color:"#10b981",fontSize:20}}),(0,f.jsx)(w.Z,{variant:"subtitle2",sx:{fontWeight:600,color:"#64748b"},children:"Mahsulot"})]}),(0,f.jsx)(w.Z,{variant:"body1",sx:{fontWeight:600,color:"#1e293b"},children:"object"===typeof(0,u.get)(b,"product.name")?(0,u.get)(b,"product.name.uz")||(0,u.get)(b,"product.name.ru")||(0,u.get)(b,"product.name.en"):(0,u.get)(b,"product.name")})]}),(0,f.jsxs)(k.Z,{elevation:0,sx:{p:2,mb:2,borderRadius:2,background:"#f8fafc",border:"1px solid #e2e8f0",transition:"all 0.2s","&:hover":{background:"#f1f5f9",transform:"translateX(4px)"}},children:[(0,f.jsxs)(y.Z,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:1},children:[(0,f.jsx)(H.Z,{sx:{color:"#8b5cf6",fontSize:20}}),(0,f.jsx)(w.Z,{variant:"subtitle2",sx:{fontWeight:600,color:"#64748b"},children:"Do'kon"})]}),(0,f.jsx)(w.Z,{variant:"body1",sx:{fontWeight:600,color:"#1e293b"},children:"uygaayt"===(0,u.get)(b,"storeId")?"Uygaayt Market":(0,u.get)(b,"store.name","")||(0,u.get)(b,"storeId","")})]}),(0,f.jsxs)(k.Z,{elevation:0,sx:{p:2,mb:3,borderRadius:2,background:"#f8fafc",border:"1px solid #e2e8f0",transition:"all 0.2s","&:hover":{background:"#f1f5f9",transform:"translateX(4px)"}},children:[(0,f.jsxs)(y.Z,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:1},children:[(0,f.jsx)(O.Z,{sx:{color:"#f59e0b",fontSize:20}}),(0,f.jsx)(w.Z,{variant:"subtitle2",sx:{fontWeight:600,color:"#64748b"},children:"Sana"})]}),(0,f.jsx)(w.Z,{variant:"body1",sx:{fontWeight:600,color:"#1e293b"},children:b.createdAt?x()(b.createdAt).format("DD.MM.YYYY HH:mm"):"-"})]}),(0,f.jsx)(I.Z,{sx:{my:2}}),(0,f.jsx)(y.Z,{children:(0,f.jsx)(s.c7,{title:V?"Sharhni Yashirish":"Sharhni Ko'rsatish",variant:V?"outlined":"contained",color:V?"error":"primary",onClick:function(){b&&j({isVisible:!(0,u.get)(b,"isVisible",!0)})},fullWidth:!0,sx:{py:1.5,fontSize:"1rem",fontWeight:600,borderRadius:2}})})]})]})})]})]})},X=function(){return(0,f.jsxs)(n.Z5,{children:[(0,f.jsx)(n.AW,{path:":id",element:(0,f.jsx)(V,{})}),(0,f.jsx)(n.AW,{path:"*",element:(0,f.jsx)(Z,{})})]})}}}]);
//# sourceMappingURL=153.4e5be6ae.chunk.js.map