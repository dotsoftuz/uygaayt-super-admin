{"version":3,"file":"static/js/172.923368fe.chunk.js","mappings":"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","sources":["pages/employee/components/EmployeeForm.tsx","pages/employee/index.tsx","pages/employee/container/Employee.tsx","pages/employee/container/employee.columns.tsx"],"sourcesContent":["import { FC, useEffect, useState } from \"react\";\nimport { Grid } from \"@mui/material\";\nimport {\n  AutoCompleteForm,\n  MainButton,\n  PhoneInput,\n  TextInput,\n} from \"components\";\nimport { UseFormReturn } from \"react-hook-form\";\nimport { useApi, useApiMutation } from \"hooks/useApi/useApiHooks\";\nimport { useTranslation } from \"react-i18next\";\n\ninterface IEmployeesForm {\n  formStore: UseFormReturn<any>;\n  editingEmployeeId?: any;\n  resetForm: () => void;\n}\nconst EmployeeFrom: FC<IEmployeesForm> = ({\n  formStore,\n  editingEmployeeId,\n  resetForm,\n}) => {\n  const { t } = useTranslation();\n  const { control, handleSubmit, reset, watch } = formStore;\n  const [checkData, setCheckData] = useState<any>();\n\n  const { } = useApi(\n    `employee/check?phoneNumber=${watch(\"phoneNumber\")}`,\n    {},\n    {\n      enabled: watch(\"phoneNumber\")?.length > 12 && !editingEmployeeId,\n      suspense: false,\n      onSuccess({ data }) {\n        setCheckData(data);\n      },\n    }\n  );\n\n  const { mutate, status } = useApiMutation(\n    editingEmployeeId ? `employee/update` : \"employee/create\",\n    editingEmployeeId ? \"put\" : \"post\"\n  );\n\n  const { data: getByIdData, status: getByIdStatus } = useApi(`employee/get-by-id/${editingEmployeeId}`, {}, {\n    enabled: !!editingEmployeeId,\n    suspense: false\n  })\n\n  useEffect(() => {\n    if (status === \"success\") {\n      resetForm();\n    }\n  }, [status]);\n\n  const submit = (data: any) => {\n    mutate({\n      _id: editingEmployeeId,\n      ...data,\n    });\n  };\n\n  useEffect(() => {\n    if (getByIdStatus === 'success') {\n      reset({\n        ...getByIdData.data,\n        roleId: getByIdData.data.role?._id,\n      });\n    }\n  }, [getByIdData, getByIdStatus]);\n\n  return (\n    <div className=\"custom-drawer\">\n      <form id=\"employee\" onSubmit={handleSubmit(submit)}>\n        <Grid container spacing={2}>\n          <Grid item md={12}>\n            <PhoneInput\n              control={control}\n              name=\"phoneNumber\"\n              label={t(\"common.phoneNumber\")}\n            />\n            {checkData?._id && !editingEmployeeId && (\n              <div className=\"d-flex justify-content-between\">\n                <span className=\"text-error mt-2\">\n                  {t(\"common.alreadyExistEmployee\")}\n                </span>\n                <MainButton\n                  title={t(\"general.add\")}\n                  onClick={() => {\n                    reset({\n                      ...checkData,\n                      _id: undefined,\n                    });\n                    setCheckData(null);\n                  }}\n                />\n              </div>\n            )}\n          </Grid>\n          <Grid item md={12}>\n            <TextInput\n              control={control}\n              name=\"firstName\"\n              label={t(\"common.firstName\")}\n            />\n          </Grid>\n          <Grid item md={12}>\n            <TextInput\n              control={control}\n              name=\"lastName\"\n              label={t(\"common.lastName\")}\n            />\n          </Grid>\n          <Grid item md={12}>\n            <TextInput\n              control={control}\n              name=\"password\"\n              label={t(\"common.password\")}\n              type=\"password\"\n              rules={{ required: false }}\n            />\n          </Grid>\n          <Grid item md={12}>\n            <AutoCompleteForm\n              name=\"roleId\"\n              control={control}\n              optionsUrl=\"role/paging\"\n              dataProp=\"data.data\"\n              label={t(\"common.role\")}\n            />\n          </Grid>\n        </Grid>\n      </form>\n    </div>\n  );\n}\n\nexport default EmployeeFrom;\n","import Employee from \"./container/Employee\";\n\nexport default Employee;\n","import { FormDrawer, Table } from \"components\";\nimport { useState } from \"react\";\nimport { useEmployeeColumns } from \"./employee.columns\";\nimport { useAppDispatch } from \"../../../store/storeHooks\";\nimport { setOpenDrawer } from \"components/elements/FormDrawer/formdrawer.slice\";\nimport { useForm } from \"react-hook-form\";\nimport EmployeeFrom from \"../components/EmployeeForm\";\nimport { useTranslation } from \"react-i18next\";\nimport { useRoleManager } from \"services/useRoleManager\";\nimport WarningModal from \"components/common/WarningModal/WarningModal\";\n\nconst Employee = () => {\n  const [editingEmployeeId, setEditingEmployeeId] = useState<any>();\n  const [employeeId, setEmployeeId] = useState<any>();\n  const columns = useEmployeeColumns();\n  const hasAccess = useRoleManager();\n  const { t } = useTranslation();\n  const dis = useAppDispatch();\n  const formStore = useForm<any>();\n\n  const resetForm = () => {\n    setEditingEmployeeId(undefined);\n    formStore.reset({\n      firstName: \"\",\n      lastName: \"\",\n      phoneNumber: \"\",\n      password: \"\",\n      roleId: \"\",\n    });\n  };\n\n  return (\n    <>\n      <Table\n        dataUrl=\"employee/paging\"\n        columns={columns}\n        searchable\n        onAddButton={hasAccess('employeeCreate') ? () => dis(setOpenDrawer(true)) : undefined}\n        onEditColumn={hasAccess('employeeUpdate') ? (row) => {\n          setEditingEmployeeId(row._id);\n          dis(setOpenDrawer(true));\n        } : undefined}\n        onDeleteColumn={hasAccess('employeeDelete') ? (row) => setEmployeeId(row._id) : undefined}\n        exQueryParams={{}}\n      />\n      <WarningModal open={employeeId} setOpen={setEmployeeId} url=\"employee/delete\" />\n      <FormDrawer\n        FORM_ID=\"employee\"\n        isEditing={!!editingEmployeeId}\n        customTitle={t(\"general.addEmployee\")}\n        onClose={resetForm}\n      >\n        <EmployeeFrom\n          formStore={formStore}\n          resetForm={resetForm}\n          editingEmployeeId={editingEmployeeId}\n        />\n      </FormDrawer>\n    </>\n  );\n};\n\nexport default Employee;\n","import { GridColumns } from \"@mui/x-data-grid\";\nimport { get } from \"lodash\";\nimport { useTranslation } from \"react-i18next\";\n\nexport const useEmployeeColumns = (): GridColumns => {\n  const { t } = useTranslation();\n\n  return [\n    {\n      field: t(\"common.fullName\"),\n      renderCell(params) {\n        return get(params, 'row.firstName', '') + \" \" + get(params, 'row.lastName', '');\n      },\n      flex: 1.5\n    },\n    {\n      field: t(\"common.phoneNumber\"),\n      renderCell(params) {\n        return params.row.phoneNumber;\n      },\n    },\n    {\n      field: t(\"common.role\"),\n      renderCell(params) {\n        return params.row.role?.name;\n      },\n    },\n  ];\n};\n"],"names":["formStore","editingEmployeeId","resetForm","t","useTranslation","control","handleSubmit","reset","watch","useState","checkData","setCheckData","useApi","enabled","length","suspense","onSuccess","data","useApiMutation","mutate","status","getByIdData","getByIdStatus","useEffect","roleId","role","_id","className","id","onSubmit","Grid","container","spacing","item","md","name","label","title","onClick","undefined","type","rules","required","optionsUrl","dataProp","setEditingEmployeeId","employeeId","setEmployeeId","columns","field","renderCell","params","get","flex","row","phoneNumber","useEmployeeColumns","hasAccess","useRoleManager","dis","useAppDispatch","useForm","firstName","lastName","password","dataUrl","searchable","onAddButton","setOpenDrawer","onEditColumn","onDeleteColumn","exQueryParams","WarningModal","open","setOpen","url","FORM_ID","isEditing","customTitle","onClose"],"sourceRoot":""}