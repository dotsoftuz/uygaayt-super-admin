"use strict";(self.webpackChunkbestune_admin=self.webpackChunkbestune_admin||[]).push([[586],{88892:function(e,r,n){var t=n(29439),i=n(72791),o=n(73405),a=n(80184);r.Z=function(e){var r=e.getCoordinate,n=e.center,s=e.height,l=(0,i.useState)(n),c=(0,t.Z)(l,2),d=c[0],m=c[1],u=(0,i.useRef)(null);(0,i.useEffect)((function(){n&&(m(n),u.current&&u.current.setCenter([n.latitude,n.longitude]))}),[n]);return(0,a.jsx)(o.Yy,{children:(0,a.jsxs)(o.D5,{width:"100%",height:s||"500px",defaultState:{center:null!==n&&void 0!==n&&n.latitude?[null===n||void 0===n?void 0:n.latitude,null===n||void 0===n?void 0:n.longitude]:[41.315163390767026,69.27958692367339],zoom:14,behaviors:["default","scrollZoom"]},instanceRef:function(e){u.current=e},onClick:function(e){var n={latitude:e.get("coords")[0],longitude:e.get("coords")[1]};m(n),r(n)},children:[(0,a.jsx)(o.ah,{geometry:[null===d||void 0===d?void 0:d.latitude,null===d||void 0===d?void 0:d.longitude]}),(0,a.jsx)(o.ot,{}),(0,a.jsx)(o.Bo,{options:{float:"left"},onClick:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){var n={latitude:e.coords.latitude,longitude:e.coords.longitude};m(n),r(n),u.current&&u.current.setCenter([n.latitude,n.longitude],14)}),(function(e){console.error("Geolocation error:",e)})):console.error("Geolocation is not supported by this browser.")}}),(0,a.jsx)(o.Sj,{options:{float:"right"}}),(0,a.jsx)(o.Ly,{options:{float:"right"}})]})})}},1903:function(e,r,n){n.d(r,{Z:function(){return l}});var t,i=n(30168),o=n(47191),a=(0,n(17939).default)(o.LD)(t||(t=(0,i.Z)(["\n  display: flex;\n  flex-direction: column-reverse;\n  border: none;\n  width: 100%;\n  padding-bottom: 20px;\n  .quill {\n    .ql-container {\n      .ql-tooltip {\n        transform: translateX(97px);\n        z-index: 10;\n      }\n      .ql-editor {\n        background-color: #fff;\n        padding: 15px;\n        border-radius: 12px;\n        min-height: 80px;\n        transition: all 0.3s;\n        border: 1px solid #d9d9d9;\n        p {\n          margin: 0;\n          font-size: 14px;\n        }\n      }\n    }\n  }\n  .ql-toolbar {\n    padding: 0;\n    transition: opacity 1s ease-out;\n    border-radius: 0;\n    border-bottom: none;\n    margin-top: 10px;\n    button {\n      border: none;\n      margin: 0 5px;\n      svg {\n        width: 24px !important;\n        height: 24px !important;\n        fill: #000 !important;\n        path {\n          fill: #000;\n        }\n      }\n    }\n  }\n  .ql-editing {\n    left: 30px !important;\n    transform: translateX(0px) !important;\n    z-index: 100;\n  }\n"]))),s=n(80184),l=function(e){var r=e.value,n=e.onChange,t=e.onImageUpload,i=e.isError,o=e.type;return(0,s.jsx)(a,{controls:[["bold","italic","underline","strike","clean","unorderedList","orderedList","alignLeft","alignCenter","alignRight"]],isError:!!i,value:r,onChange:n,onImageUpload:t,type:o})}},95894:function(e,r,n){n.d(r,{Z:function(){return h}});var t,i,o=n(72791),a=n(61134),s=n(30168),l=n(17939),c=((0,l.default)("div")(t||(t=(0,s.Z)(['\n  border: 1px solid;\n  border-color: "grey" !important;\n  outline: none;\n']))),(0,l.default)("div")(i||(i=(0,s.Z)(["\n  .react-time-picker {\n    width: 100%;\n    .react-time-picker__wrapper {\n      width: 100%;\n      border-radius: 8px;\n      border: 1px solid #d9d9d9;\n      box-sizing: border-box;\n      color: #333333 !important;\n      padding: 9px 16px;\n      font-size: 16px;\n      line-height: 20px;\n      letter-spacing: -0.02em;\n      outline: none;\n      font-weight: 500;\n      transition: all 0.1s ease-out;\n      font-weight: 500;\n      transition: 0.2s ease all;\n      .react-time-picker__inputGroup {\n        input {\n          outline-color: #949494;\n        }\n      }\n    }\n    .react-time-picker__clock {\n      display: none;\n    }\n  }\n"])))),d=n(64717),m=n(39230),u=n(80184),x=function(e){var r=e.control,n=e.name,t=e.errors,i=e.rules,o=e.label,s=(0,m.$G)().t;return(0,u.jsxs)(c,{children:[o&&(0,u.jsx)("label",{className:"custom-label",children:o}),(0,u.jsx)(a.Qr,{control:r,name:n,rules:i,render:function(e){var r=e.field,n=r.onChange,t=r.value;return(0,u.jsx)(d.Z,{clockIcon:null,className:"time-picker",onChange:n,value:t,format:"HH:mm",hourPlaceholder:"HH",minutePlaceholder:"mm",locale:"uz-UZ"})}}),!!t[n]&&(0,u.jsx)("h6",{className:"text-error mt-1",children:s("general.required")})]})},h=(0,o.memo)(x)},72151:function(e,r,n){n.r(r),n.d(r,{default:function(){return Te}});var t=n(57689),i=n(29439),o=n(45489),a=n(50131),s=n(763),l=n(39230),c=n(81918),d=n(13400),m=n(31976),u=n(23786),x=n(52898),h=n(72791),p=n(80184),f=function(e){var r=e.row,n=e.onView,t=e.onEdit,o=e.onDelete,a=e.onActivate,s=(0,h.useState)(null),l=(0,i.Z)(s,2),c=l[0],f=l[1],g=Boolean(c),v=function(){f(null)},j=function(e){e(),v()};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(d.Z,{onClick:function(e){e.stopPropagation(),f(e.currentTarget)},size:"small",sx:{color:"#EB5B00"},children:(0,p.jsx)(x.Z,{})}),(0,p.jsxs)(m.Z,{anchorEl:c,open:g,onClose:v,onClick:function(e){return e.stopPropagation()},children:[n&&(0,p.jsx)(u.Z,{onClick:function(){return j((function(){return n(r)}))},children:"\ud83d\udc41 Ko'rish"}),t&&(0,p.jsx)(u.Z,{onClick:function(){return j((function(){return t(r)}))},children:"\u270f\ufe0f Tahrir"}),!r.isActive&&a&&(0,p.jsx)(u.Z,{onClick:function(){return j((function(){return a(r)}))},children:"\u2795 Aktivlashtirish"}),o&&(0,p.jsx)(u.Z,{onClick:function(){return j((function(){return o(r)}))},children:"\ud83d\uddd1 O'chirish"})]})]})},g=n(79405),v=n(36978),j=n(61134),Z=n(29001),b=n(61889),y=n(58406),P=n(84544),w=n(62750),C=n(75985),k=n(697),I=n(13603),S=n(43896),T=n(94925),z=n(94294),F=n(94721),D=n(1903),A=n(95894),M=n(88892),N=n(71257),R=n(76189),B=(0,R.Z)((0,p.jsx)("path",{d:"M20 4H4v2h16zm1 10v-2l-1-5H4l-1 5v2h1v6h10v-6h4v6h2v-6zm-9 4H6v-4h6z"}),"Store"),q=(0,R.Z)((0,p.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"LocationOn"),E=(0,R.Z)((0,p.jsx)("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4"}),"AttachMoney"),W=(0,R.Z)((0,p.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm2 16H8v-2h8zm0-4H8v-2h8zm-3-5V3.5L18.5 9z"}),"Description"),H=(0,R.Z)((0,p.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings"),_=n(5397),V=(0,R.Z)((0,p.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),O=function(e){var r=e.formStore,n=e.editingStoreId,t=e.resetForm,a=e.storeProps,s=(0,l.$G)().t,c=r.control,d=r.handleSubmit,m=r.reset,u=r.watch,x=r.setValue,f=r.formState,g=a.logoImage,v=a.setLogoImage,Z=a.bannerImage,y=a.setBannerImage,P=(0,h.useState)(!1),C=(0,i.Z)(P,2),R=(C[0],C[1]),O=(0,h.useState)(),L=(0,i.Z)(O,2),Y=L[0],U=L[1],X=(0,h.useState)(""),G=(0,i.Z)(X,2),$=G[0],Q=G[1],K=(0,N.Z)($,1e3).debouncedValue;(0,h.useEffect)((function(){x("logoImage",g||void 0)}),[g,x]),(0,h.useEffect)((function(){x("bannerImage",Z||void 0)}),[Z,x]);var J=(0,j.Dq)({control:c,name:"workDays"}),ee=J.fields,re=J.append,ne=J.remove,te=(0,w.uC)(n?"store/update":"store/create",n?"put":"post",{}),ie=te.mutate,oe=te.status,ae=(0,w.uC)("address/by-name","post",{onSuccess:function(){R(!0)}}),se=ae.mutate,le=(ae.data,(0,w.uC)("address/by-point","post",{onSuccess:function(e){var r=e.data;x("addressName",null===r||void 0===r?void 0:r.name)}}).mutate);(0,h.useEffect)((function(){"string"===typeof $&&$.trim()&&se({name:$})}),[K]),(0,h.useEffect)((function(){null!==Y&&void 0!==Y&&Y.latitude&&null!==Y&&void 0!==Y&&Y.longitude&&le({latitude:Y.latitude,longitude:Y.longitude})}),[Y]);var ce=(0,w.h_)("store/get-by-id/".concat(n),{},{enabled:!!n&&!(null!==n&&void 0!==n&&n.startsWith("store_")),suspense:!1}),de=ce.data,me=ce.status;(0,h.useEffect)((function(){if("success"===me&&null!==de&&void 0!==de&&de.data){var e,r,n,t,i=de.data;if(m({name:i.name||"",phoneNumber:i.phoneNumber||"",password:"",email:i.email||"",website:i.website||"",addressName:i.addressName||"",addressLocation:i.addressLocation||null,type:i.type||"shop",brandColor:i.brandColor||"#ef6c1d",categoryIds:i.categoryIds||[],orderMinimumPrice:i.orderMinimumPrice||"",deliveryPrice:i.deliveryPrice||"",itemPrepTimeFrom:i.itemPrepTimeFrom||"",itemPrepTimeTo:i.itemPrepTimeTo||"",workTime:i.workTime||"",startTime:11===(null===(e=i.workTime)||void 0===e?void 0:e.length)?null===(r=i.workTime)||void 0===r?void 0:r.slice(0,5):"",endTime:11===(null===(n=i.workTime)||void 0===n?void 0:n.length)?null===(t=i.workTime)||void 0===t?void 0:t.slice(-5):"",workDays:i.workDays||[],description:i.description||"",descriptionTranslate:i.descriptionTranslate||{uz:"",ru:"",en:""},isActive:void 0===i.isActive||i.isActive,isVerified:i.isVerified||!1,isPremium:i.isPremium||!1,averageRating:i.averageRating||0,acceptCash:i.acceptCash||!1,acceptCard:i.acceptCard||!1,acceptOnlinePayment:i.acceptOnlinePayment||!1}),U(i.addressLocation),i.logoId){var o={_id:i.logoId,url:"".concat("http://localhost:3003/v1","/image/").concat(i.logoId)};v(o),x("logoImage",o)}else v(null),x("logoImage",void 0);if(i.bannerId){var a={_id:i.bannerId,url:"".concat("http://localhost:3003/v1","/image/").concat(i.bannerId)};y(a),x("bannerImage",a)}else y(null),x("bannerImage",void 0)}}),[me,de,v,y,x]),(0,h.useEffect)((function(){"success"===oe&&(m({name:"",phoneNumber:"",password:"",email:"",website:"",addressName:"",addressLocation:null,type:"shop",brandColor:"#ef6c1d",categoryIds:[],orderMinimumPrice:"",deliveryPrice:"",itemPrepTimeFrom:"",itemPrepTimeTo:"",workTime:"",startTime:"",endTime:"",workDays:[],description:"",descriptionTranslate:{uz:"",ru:"",en:""},isActive:!0,isVerified:!1,isPremium:!1,averageRating:0,acceptCash:!1,acceptCard:!1,acceptOnlinePayment:!1}),U(void 0),v(null),y(null),x("logoImage",void 0),x("bannerImage",void 0),t())}),[oe,x]);var ue=[{value:0,label:"Yakshanba"},{value:1,label:"Dushanba"},{value:2,label:"Seshanba"},{value:3,label:"Chorshanba"},{value:4,label:"Payshanba"},{value:5,label:"Juma"},{value:6,label:"Shanba"}],xe=(0,h.useState)(0),he=(0,i.Z)(xe,2),pe=he[0],fe=he[1];return(0,p.jsxs)("form",{id:"store",onSubmit:d((function(e){var r={name:e.name,phoneNumber:e.phoneNumber,password:e.password||void 0,email:e.email||void 0,website:e.website||void 0,addressName:e.addressName||"",addressLocation:Y||void 0,type:e.type||"shop",brandColor:e.brandColor||"#ef6c1d",categoryIds:e.categoryIds||[],orderMinimumPrice:e.orderMinimumPrice?+e.orderMinimumPrice:0,deliveryPrice:e.deliveryPrice?+e.deliveryPrice:0,itemPrepTimeFrom:e.itemPrepTimeFrom?+e.itemPrepTimeFrom:5,itemPrepTimeTo:e.itemPrepTimeTo?+e.itemPrepTimeTo:10,workTime:e.startTime&&e.endTime?"".concat(e.startTime,"-").concat(e.endTime):"",workDays:e.workDays||[],description:e.description||"",descriptionTranslate:e.descriptionTranslate||void 0,logoId:(null===g||void 0===g?void 0:g._id)||void 0,bannerId:(null===Z||void 0===Z?void 0:Z._id)||void 0,isActive:void 0===e.isActive||e.isActive,isVerified:e.isVerified||!1,isPremium:e.isPremium||!1,averageRating:e.averageRating?+e.averageRating:0,acceptCash:e.acceptCash||!1,acceptCard:e.acceptCard||!1,acceptOnlinePayment:e.acceptOnlinePayment||!1};r.password||delete r.password,ie(r)})),children:[(0,p.jsx)(k.Z,{sx:{borderBottom:1,borderColor:"divider",mb:3,width:"100%",minWidth:0,overflow:"hidden"},children:(0,p.jsxs)(I.Z,{value:pe,onChange:function(e,r){fe(r)},variant:"scrollable",scrollButtons:"auto",sx:{width:"100%",minWidth:0,"& .MuiTab-root":{minHeight:48,textTransform:"none",fontSize:"14px",fontWeight:500},"& .MuiTabs-scroller":{width:"100%"}},children:[(0,p.jsx)(S.Z,{icon:(0,p.jsx)(B,{}),iconPosition:"start",label:"Asosiy ma'lumotlar"}),(0,p.jsx)(S.Z,{icon:(0,p.jsx)(q,{}),iconPosition:"start",label:"Manzil"}),(0,p.jsx)(S.Z,{icon:(0,p.jsx)(E,{}),iconPosition:"start",label:"Narxlar va vaqt"}),(0,p.jsx)(S.Z,{icon:(0,p.jsx)(W,{}),iconPosition:"start",label:"Tavsif"}),(0,p.jsx)(S.Z,{icon:(0,p.jsx)(H,{}),iconPosition:"start",label:"Sozlamalar"})]})}),0===pe&&(0,p.jsx)(k.Z,{sx:{width:"100%",minWidth:0},children:(0,p.jsxs)(b.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,p.jsx)(b.ZP,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,p.jsx)(o.oi,{control:c,name:"name",label:"Do'kon/Restoran nomi",placeholder:"Masalan: Uygaayt Do'kon",rules:{required:!0}})}),(0,p.jsx)(b.ZP,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,p.jsx)(o.sb,{control:c,name:"phoneNumber",label:s("common.phoneNumber"),rules:{required:!0}})}),!n&&(0,p.jsx)(b.ZP,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,p.jsx)(o.oi,{control:c,name:"password",type:"password",label:"Parol",rules:{required:!n,minLength:{value:4,message:"Parol kamida 4 ta belgi bo'lishi kerak"}},placeholder:"Parol kiriting (min 4 belgi)"})}),n&&(0,p.jsx)(b.ZP,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,p.jsx)(o.oi,{control:c,name:"password",type:"password",label:"Yangi parol (ixtiyoriy)",rules:{required:!1,minLength:{value:4,message:"Parol kamida 4 ta belgi bo'lishi kerak"}},placeholder:"Parolni yangilash uchun kiriting"})}),(0,p.jsx)(b.ZP,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,p.jsx)(o.oi,{control:c,name:"email",type:"email",label:"Email",placeholder:"Masalan: info@store.uz",rules:{required:!1}})}),(0,p.jsx)(b.ZP,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,p.jsx)(o.oi,{control:c,name:"website",type:"url",label:"Veb-sayt URL",placeholder:"Masalan: https://www.store.uz",rules:{required:!1}})}),(0,p.jsx)(b.ZP,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,p.jsx)(o.p7,{control:c,name:"type",label:"Turi",options:[{_id:"shop",name:"Do'kon"},{_id:"restaurant",name:"Restoran"}],rules:{required:!0}})}),(0,p.jsx)(b.ZP,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,p.jsx)(o.zH,{control:c,name:"brandColor",label:"Brend rangi",placeholder:"#ef6c1d",rules:{required:!0}})}),(0,p.jsx)(b.ZP,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,p.jsx)(o.Ls,{control:c,name:"categoryIds",optionsUrl:"category/paging",label:"Toifalar",returnOnlyId:!0,rules:{required:!1},multiple:!0})}),(0,p.jsxs)(b.ZP,{item:!0,xs:12,children:[(0,p.jsx)(T.Z,{sx:{mb:2,fontWeight:600,fontSize:"16px"},children:"Rasmlar"}),(0,p.jsxs)(b.ZP,{container:!0,spacing:2,children:[(0,p.jsxs)(b.ZP,{item:!0,xs:12,md:6,children:[(0,p.jsx)(T.Z,{sx:{mb:1,fontWeight:500},children:"Logo rasm"}),(0,p.jsx)(o.aG,{control:c,setValue:x,name:"logoImage",rules:{required:!1},getImage:function(e){v(e)}}),g&&(0,p.jsxs)(z.Z,{size:"small",color:"error",fullWidth:!0,sx:{mt:1},onClick:function(){v(null),x("logoImage",void 0)},children:[(0,p.jsx)(_.Z,{})," O'chirish"]})]}),(0,p.jsxs)(b.ZP,{item:!0,xs:12,md:6,children:[(0,p.jsx)(T.Z,{sx:{mb:1,fontWeight:500},children:"Banner rasm"}),(0,p.jsx)(o.aG,{control:c,setValue:x,name:"bannerImage",rules:{required:!1},getImage:function(e){y(e)}}),Z&&(0,p.jsxs)(z.Z,{size:"small",color:"error",fullWidth:!0,sx:{mt:1},onClick:function(){y(null),x("bannerImage",void 0)},children:[(0,p.jsx)(_.Z,{})," O'chirish"]})]})]})]})]})}),1===pe&&(0,p.jsx)(k.Z,{sx:{width:"100%",minWidth:0},children:(0,p.jsxs)(b.ZP,{container:!0,spacing:2,alignItems:"centert",children:[(0,p.jsx)(b.ZP,{item:!0,xs:12,children:(0,p.jsx)(o.oi,{control:c,name:"addressName",label:s("common.address"),placeholder:"Masalan: Toshkent shahar, Chilonzor tumani, Bunyodkor ko'chasi",rules:{required:!1},onCustomChange:function(e){return Q(e)}})}),(0,p.jsxs)(b.ZP,{item:!0,xs:12,children:[(0,p.jsx)(T.Z,{sx:{mb:1,fontWeight:600},children:"Xarita (Manzilni belgilash)"}),(0,p.jsx)(M.Z,{getCoordinate:U,center:u("addressLocation"),height:"400px"})]})]})}),2===pe&&(0,p.jsx)(k.Z,{sx:{width:"100%",minWidth:0},children:(0,p.jsxs)(b.ZP,{container:!0,spacing:2,alignItems:"centert",children:[(0,p.jsx)(b.ZP,{item:!0,xs:12,children:(0,p.jsx)(T.Z,{sx:{mb:2,fontWeight:600,fontSize:"16px"},children:"Narxlar"})}),(0,p.jsx)(b.ZP,{item:!0,xs:12,md:4,sx:{display:"flex",flexDirection:"column"},children:(0,p.jsx)(o.oi,{control:c,name:"orderMinimumPrice",type:"number",label:"Minimal buyurtma narxi (so'm)",placeholder:"Masalan: 50000",rules:{required:!1}})}),(0,p.jsx)(b.ZP,{item:!0,xs:12,md:4,sx:{display:"flex",flexDirection:"column"},children:(0,p.jsx)(o.oi,{control:c,name:"deliveryPrice",type:"number",label:"Yetkazib berish narxi (so'm)",placeholder:"Masalan: 15000",rules:{required:!1}})}),(0,p.jsx)(b.ZP,{item:!0,xs:12,md:4,sx:{display:"flex",flexDirection:"column"},children:(0,p.jsx)(o.oi,{control:c,name:"averageRating",type:"number",label:"O'rtacha reyting (0-5)",placeholder:"Masalan: 4.5",rules:{required:!1,min:0,max:5}})}),(0,p.jsx)(b.ZP,{item:!0,xs:12,children:(0,p.jsx)(F.Z,{sx:{my:3}})}),(0,p.jsx)(b.ZP,{item:!0,xs:12,children:(0,p.jsx)(T.Z,{sx:{mb:2,fontWeight:600,fontSize:"16px"},children:"Tayyorlash vaqti"})}),(0,p.jsx)(b.ZP,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,p.jsx)(o.oi,{control:c,name:"itemPrepTimeFrom",type:"number",label:"Tayyorlash vaqti (minut) - dan",placeholder:"Masalan: 15",rules:{required:!1}})}),(0,p.jsx)(b.ZP,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,p.jsx)(o.oi,{control:c,name:"itemPrepTimeTo",type:"number",label:"Tayyorlash vaqti (minut) - gacha",placeholder:"Masalan: 30",rules:{required:!1}})}),(0,p.jsx)(b.ZP,{item:!0,xs:12,children:(0,p.jsx)(F.Z,{sx:{my:3}})}),(0,p.jsx)(b.ZP,{item:!0,xs:12,children:(0,p.jsx)(T.Z,{sx:{mb:2,fontWeight:600,fontSize:"16px"},children:"Ish vaqti"})}),(0,p.jsx)(b.ZP,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,p.jsx)(A.Z,{control:c,name:"startTime",errors:f.errors,label:"Ish vaqti (boshlanish)",rules:{required:!1}})}),(0,p.jsx)(b.ZP,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,p.jsx)(A.Z,{control:c,name:"endTime",errors:f.errors,label:"Ish vaqti (tugash)",rules:{required:!1}})}),(0,p.jsx)(b.ZP,{item:!0,xs:12,children:(0,p.jsx)(F.Z,{sx:{my:3}})}),(0,p.jsxs)(b.ZP,{item:!0,xs:12,children:[(0,p.jsx)(T.Z,{sx:{mb:2,fontWeight:600,fontSize:"16px"},children:"Hafta kunlari"}),ee.map((function(e,r){return(0,p.jsxs)(b.ZP,{container:!0,spacing:2,sx:{mt:1},children:[(0,p.jsx)(b.ZP,{item:!0,xs:12,md:3,children:(0,p.jsx)(o.p7,{control:c,name:"workDays.".concat(r,".day"),label:"Kun",options:ue.map((function(e){return{_id:e.value.toString(),name:e.label}})),rules:{required:!0}})}),(0,p.jsx)(b.ZP,{item:!0,xs:12,md:3,children:(0,p.jsx)(A.Z,{control:c,name:"workDays.".concat(r,".startTime"),label:"Boshlanish",errors:f.errors,rules:{required:!0}})}),(0,p.jsx)(b.ZP,{item:!0,xs:12,md:3,children:(0,p.jsx)(A.Z,{control:c,name:"workDays.".concat(r,".endTime"),label:"Tugash",errors:f.errors,rules:{required:!0}})}),(0,p.jsx)(b.ZP,{item:!0,xs:12,md:2,children:(0,p.jsx)(k.Z,{sx:{pt:2},children:(0,p.jsx)(o.XZ,{control:c,name:"workDays.".concat(r,".isWorking"),label:"Ishlaydi"})})}),(0,p.jsx)(b.ZP,{item:!0,xs:12,md:1,children:(0,p.jsx)(k.Z,{sx:{pt:1},children:(0,p.jsx)(z.Z,{color:"error",onClick:function(){return ne(r)},size:"small",children:(0,p.jsx)(_.Z,{})})})})]},e.id)})),(0,p.jsx)(z.Z,{variant:"outlined",startIcon:(0,p.jsx)(V,{}),onClick:function(){return re({day:0,startTime:"09:00",endTime:"18:00",isWorking:!0})},sx:{mt:2},children:"Kun qo'shish"})]})]})}),3===pe&&(0,p.jsx)(k.Z,{sx:{width:"100%",minWidth:0},children:(0,p.jsxs)(b.ZP,{container:!0,spacing:2,alignItems:"centert",children:[(0,p.jsxs)(b.ZP,{item:!0,xs:12,children:[(0,p.jsx)(T.Z,{sx:{mb:1,fontWeight:600},children:"Asosiy tavsif"}),(0,p.jsx)(D.Z,{value:u("description")||"",onChange:function(e){return x("description",e)}})]}),(0,p.jsx)(b.ZP,{item:!0,xs:12,children:(0,p.jsx)(F.Z,{sx:{my:3}})}),(0,p.jsx)(b.ZP,{item:!0,xs:12,children:(0,p.jsx)(T.Z,{sx:{mb:2,fontWeight:600,fontSize:"16px"},children:"Ko'p tilli tavsif"})}),(0,p.jsxs)(b.ZP,{item:!0,xs:12,md:4,children:[(0,p.jsx)(T.Z,{sx:{mb:1},children:"O'zbekcha"}),(0,p.jsx)(D.Z,{value:u("descriptionTranslate.uz")||"",onChange:function(e){return x("descriptionTranslate.uz",e)}})]}),(0,p.jsxs)(b.ZP,{item:!0,xs:12,md:4,children:[(0,p.jsx)(T.Z,{sx:{mb:1},children:"Ruscha"}),(0,p.jsx)(D.Z,{value:u("descriptionTranslate.ru")||"",onChange:function(e){return x("descriptionTranslate.ru",e)}})]}),(0,p.jsxs)(b.ZP,{item:!0,xs:12,md:4,children:[(0,p.jsx)(T.Z,{sx:{mb:1},children:"Inglizcha"}),(0,p.jsx)(D.Z,{value:u("descriptionTranslate.en")||"",onChange:function(e){return x("descriptionTranslate.en",e)}})]})]})}),4===pe&&(0,p.jsx)(k.Z,{sx:{width:"100%",minWidth:0},children:(0,p.jsxs)(b.ZP,{container:!0,spacing:2,alignItems:"centert",children:[(0,p.jsxs)(b.ZP,{item:!0,xs:12,children:[(0,p.jsx)(T.Z,{sx:{mb:2,fontWeight:600,fontSize:"16px"},children:"To'lov usullari"}),(0,p.jsxs)(b.ZP,{container:!0,spacing:2,children:[(0,p.jsx)(b.ZP,{item:!0,children:(0,p.jsx)(o.XZ,{control:c,name:"acceptCard",label:"Karta"})}),(0,p.jsx)(b.ZP,{item:!0,children:(0,p.jsx)(o.XZ,{control:c,name:"acceptCash",label:"Naqd"})}),(0,p.jsx)(b.ZP,{item:!0,children:(0,p.jsx)(o.XZ,{control:c,name:"acceptOnlinePayment",label:"Onlayn to'lov"})})]})]}),(0,p.jsx)(b.ZP,{item:!0,xs:12,children:(0,p.jsx)(F.Z,{sx:{my:3}})}),(0,p.jsxs)(b.ZP,{item:!0,xs:12,children:[(0,p.jsx)(T.Z,{sx:{mb:2,fontWeight:600,fontSize:"16px"},children:"Statuslar"}),(0,p.jsxs)(b.ZP,{container:!0,spacing:2,children:[(0,p.jsx)(b.ZP,{item:!0,children:(0,p.jsx)(o.XZ,{control:c,name:"isActive",label:"Faol"})}),(0,p.jsx)(b.ZP,{item:!0,children:(0,p.jsx)(o.XZ,{control:c,name:"isVerified",label:"Tasdiqlangan"})}),(0,p.jsx)(b.ZP,{item:!0,children:(0,p.jsx)(o.XZ,{control:c,name:"isPremium",label:"Premium"})})]})]})]})})]})},L=function(){var e,r,n,d,m=(0,Z.w)(),x=(0,g.T)(),k=(0,l.$G)().t,I=(0,j.cI)(),S=(0,t.s0)(),T=(0,h.useState)(),z=(0,i.Z)(T,2),F=z[0],D=z[1],A=(0,h.useState)(""),M=(0,i.Z)(A,2),N=M[0],R=M[1],B=(0,h.useState)(null),q=(0,i.Z)(B,2),E=q[0],W=q[1],H=(0,h.useState)(null),_=(0,i.Z)(H,2),V=_[0],L=_[1],Y=(0,w.uC)("store/activate","put",{onSuccess:function(){C.Am.success(k("general.success"))},onError:function(){C.Am.error("Xatolik yuz berdi")}}).mutate,U=(e=function(e){S("/stores_restaurants/".concat(e._id))},r=m("storeUpdate")?function(e){D(e._id),x((0,v.dl)(!0))}:void 0,n=m("store")?function(e){return function(e){R(e)}(e._id)}:void 0,d=function(e){window.confirm("".concat(e.name," do'konini aktivlashtirmoqchimisiz?"))&&Y({_id:e._id,isActive:!e.isActive})},[{field:"ID",headerName:"ID",width:80,renderCell:function(e){var r=e.row;return(0,s.get)(r,"_id","").slice(-4)||(0,s.get)(r,"id","")}},{field:(0,(0,l.$G)().t)("common.name"),headerName:"Do'kon nomi",flex:1,minWidth:250,renderCell:function(e){var r=e.row,n=(0,s.get)(r,"name",""),t=(null===n||void 0===n?void 0:n.length)>40?"".concat(n.substring(0,40),"..."):n;return(0,p.jsx)(a.Z,{title:n,arrow:!0,children:(0,p.jsx)("span",{style:{fontWeight:500},children:t})})}},{field:"type",headerName:"Turi",width:130,renderCell:function(e){var r=e.row,n=(0,s.get)(r,"type",""),t=(0,s.get)(r,"categoryId",""),i=(0,s.get)(r,"category",""),o="",a="#6B7280";return"shop"===n||"store"===t||"Do'kon"===i?(o="Do'kon",a="#10B981"):"restaurant"===n||"restaurant"===t||"Restoran"===i?(o="Restoran",a="#EF4444"):o=n||i||"-",(0,p.jsx)(c.Z,{label:o,sx:{backgroundColor:a,color:"white",fontWeight:600,fontSize:"0.75rem"},size:"small"})}},{field:"phoneNumber",headerName:"Telefon",width:150,renderCell:function(e){var r=e.row,n=(0,s.get)(r,"phoneNumber","-");return(0,p.jsx)(a.Z,{title:n,arrow:!0,children:(0,p.jsx)("span",{children:n})})}},{field:"status",headerName:"Status",width:130,renderCell:function(e){var r=e.row,n=(0,s.get)(r,"isActive",!1),t=!n&&(0,s.get)(r,"isInReview",!1),i="Nofaol",o="error";return n?(i="Faol",o="success"):t&&(i="Tekshiruvda",o="warning"),(0,p.jsx)(c.Z,{label:i,color:o,size:"small",sx:{fontWeight:600}})}},{field:"actions",headerName:"Amal",width:100,align:"center",headerAlign:"center",sortable:!1,filterable:!1,disableColumnMenu:!0,renderCell:function(t){var i=t.row;return(0,p.jsx)(f,{row:i,onView:e,onEdit:r,onDelete:n,onActivate:d})}}]),X=(0,h.useMemo)((function(){return{isActive:I.watch("isActiveQuery")||void 0,categoryId:I.watch("categoryId")||void 0,orderSort:I.watch("orderSort")||void 0}}),[I.watch("isActiveQuery"),I.watch("categoryId"),I.watch("orderSort")]),G=(0,p.jsxs)(b.ZP,{className:"lg:w-[80%] w-full flex flex-wrap gap-2 items-center mt-2 ml-2 pb-2",children:[(0,p.jsx)(b.ZP,{item:!0,children:(0,p.jsx)(o.XZ,{control:I.control,label:k("enum.active"),name:"isActiveQuery"})}),(0,p.jsx)(b.ZP,{item:!0,children:(0,p.jsxs)(y.Z,{style:{width:"150px",paddingBlock:"4px",borderRadius:"10px"},size:"small",value:I.watch("orderSort")||"",onChange:function(e){return I.setValue("orderSort",e.target.value)},displayEmpty:!0,children:[I.watch("orderSort")&&(0,p.jsx)(u.Z,{value:"",children:"Tozalash"}),!I.watch("orderSort")&&(0,p.jsx)(u.Z,{value:"",hidden:!0,disabled:!0,children:"Buyurtma soni"}),(0,p.jsx)(u.Z,{value:"mostActive",children:"Eng faol"}),(0,p.jsx)(u.Z,{value:"leastActive",children:"Eng kam"})]})}),(0,p.jsx)(b.ZP,{item:!0,children:(0,p.jsx)(o.he,{optionsUrl:"category/paging",filterName:"categoryId",placeholder:k("common.category"),onChange:function(){}})}),(0,p.jsx)(b.ZP,{item:!0,children:(0,p.jsx)(o.j3,{url:"/store/export",extraParams:X})})]}),$=function(){D(null),W(null),L(null),I.reset({name:"",phoneNumber:"",password:"",email:"",website:"",addressName:"",addressLocation:null,type:"shop",categoryIds:[],orderMinimumPrice:"",deliveryPrice:"",itemPrepTimeFrom:"",itemPrepTimeTo:"",startTime:"",endTime:"",workDays:[],description:"",descriptionTranslate:{uz:"",ru:"",en:""},isActive:!0,isVerified:!1,isPremium:!1,averageRating:0,acceptCash:!1,acceptCard:!1,acceptOnlinePayment:!1,isActiveQuery:I.watch("isActiveQuery"),categoryId:I.watch("categoryId"),orderSort:I.watch("orderSort")})};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.iA,{columns:U,dataUrl:"store/paging",searchable:!0,headerChildren:G,onAddButton:m("store")?function(){return x((0,v.dl)(!0))}:void 0,onEditColumn:m("storeUpdate")?function(e){D(e._id),x((0,v.dl)(!0))}:void 0,onRowClick:function(e){S("/stores_restaurants/".concat(e._id))},exQueryParams:X,mapData:function(e){return e||[]}}),N&&(0,p.jsx)(P.Z,{open:N,setOpen:R,url:"store/delete"}),(0,p.jsx)(o._8,{FORM_ID:"store",isEditing:!!F,customTitle:F?"Do'konni tahrirlash":"Do'kon qo'shish",onClose:$,children:(0,p.jsx)(O,{formStore:I,editingStoreId:F,resetForm:$,storeProps:{logoImage:E,setLogoImage:W,bannerImage:V,setBannerImage:L}})})]})},Y=function(){return(0,p.jsx)(L,{})},U=n(35527),X=n(93044),G=n(20890),$=n(39504),Q=n(89891),K=n(94939),J=(0,R.Z)((0,p.jsx)("path",{d:"M20 2H4c-1 0-2 .9-2 2v3.01c0 .72.43 1.34 1 1.69V20c0 1.1 1.1 2 2 2h14c.9 0 2-.9 2-2V8.7c.57-.35 1-.97 1-1.69V4c0-1.1-1-2-2-2m-5 12H9v-2h6zm5-7H4V4l16-.02z"}),"Inventory"),ee=n(89736),re=n(29749),ne="stores_restaurants_local",te=function(){try{var e=localStorage.getItem(ne);return e?JSON.parse(e):[]}catch(r){return console.error("Error reading stores from localStorage:",r),[]}},ie=n(20068),oe=function(e){var r=e.storeInfoData,n=e.storeId,i=e.onStatusChange,o=((0,re.Z)().state.data,(0,l.$G)().t),a=(0,t.s0)(),s=(0,w.uC)("store/activate","put",{onSuccess:function(){C.Am.success(o("general.success")),null===i||void 0===i||i()},onError:function(){C.Am.error("Xatolik yuz berdi")}}).mutate,d=null!==n&&void 0!==n&&n.startsWith("store_")?te().find((function(e){return e._id===n})):null===r||void 0===r?void 0:r.data,m=null!==n&&void 0!==n&&n.startsWith("store_")?0:(null===d||void 0===d?void 0:d.totalProducts)||0;if(!d)return(0,p.jsx)("div",{children:"Yuklanmoqda..."});var u=d.logoId?"".concat("http://localhost:3003/v1","/image/").concat(d.logoId):void 0;return(0,p.jsxs)(U.Z,{elevation:3,sx:{borderRadius:4,overflow:"hidden"},children:[(0,p.jsxs)(k.Z,{sx:{background:d.isActive?"linear-gradient(135deg, #EB7B00 0%, #EB5B00 100%)":"linear-gradient(135deg, #FFA500 0%, #FF8C00 100%)",pt:6,pb:8,px:4,textAlign:"center",color:"white",position:"relative"},children:[(0,p.jsx)(X.Z,{src:u,sx:{width:120,height:120,mx:"auto",border:"4px solid white",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.05)"}},children:(0,p.jsx)(B,{sx:{fontSize:60}})}),(0,p.jsx)(G.Z,{variant:"h4",sx:{mt:2,fontWeight:"bold"},children:d.name}),(0,p.jsxs)(k.Z,{sx:{mt:2,display:"flex",justifyContent:"center",gap:1},children:[(0,p.jsx)(c.Z,{label:d.isActive?"\u2705 Faol":"\ud83d\udfe5 Nofaol",sx:{backgroundColor:d.isActive?"rgba(255,255,255,0.3)":"rgba(255,255,255,0.2)",color:"white",fontWeight:"bold"}}),(0,p.jsx)(c.Z,{label:"Do'kon"===d.category||"store"===d.categoryId?"Do'kon":"Restoran",sx:{backgroundColor:"rgba(255,255,255,0.3)",color:"white",fontWeight:"bold"}})]})]}),(0,p.jsx)($.Z,{sx:{backgroundColor:"white",borderRadius:"20px 20px 0 0",px:4,py:3},children:(0,p.jsxs)(k.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,p.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"#F7FAFC",borderRadius:2,transition:"transform 0.2s ease","&:hover":{transform:"translateX(8px)"}},children:[(0,p.jsx)(K.Z,{style:{fontSize:20,color:"#EB5B00"}}),(0,p.jsx)(G.Z,{variant:"body1",color:"text.primary",children:d.phoneNumber})]}),d.addressName&&(0,p.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"#F7FAFC",borderRadius:2,transition:"transform 0.2s ease","&:hover":{transform:"translateX(8px)"}},children:[(0,p.jsx)(q,{style:{fontSize:20,color:"#EB5B00"}}),(0,p.jsx)(G.Z,{variant:"body1",color:"text.primary",children:d.addressName})]}),void 0!==d.commissionPercent&&d.commissionPercent>0&&(0,p.jsx)(ie.Z,{title:"Platforma ulushi: ".concat(d.commissionPercent,"% | Do'kon daromadi: 100% - ").concat(d.commissionPercent,"% = ").concat(100-d.commissionPercent,"%"),arrow:!0,children:(0,p.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"#F7FAFC",borderRadius:2,cursor:"help"},children:[(0,p.jsx)(E,{style:{fontSize:20,color:"#EB5B00"}}),(0,p.jsxs)(G.Z,{variant:"body1",color:"text.primary",children:["Komissiya: ",d.commissionPercent,"%"]})]})}),(0,p.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:2,p:2,backgroundColor:"#F7FAFC",borderRadius:2},children:[(0,p.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",gap:2,cursor:"pointer","&:hover":{opacity:.7}},onClick:function(){return a("/product?storeId=".concat(n))},children:[(0,p.jsx)(J,{style:{fontSize:20,color:"#EB5B00"}}),(0,p.jsxs)(G.Z,{variant:"body1",color:"text.primary",children:["Tovarlar soni: ",m]})]}),(0,p.jsx)(z.Z,{variant:"contained",startIcon:(0,p.jsx)(ee.Z,{}),onClick:function(){return a("/product?storeId=".concat(n))},sx:{backgroundColor:"#EB5B00","&:hover":{backgroundColor:"#EB7B00"}},children:"Tovarlar"})]}),(0,p.jsxs)(k.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,backgroundColor:"#F7FAFC",borderRadius:2,mt:2},children:[(0,p.jsx)(G.Z,{variant:"body1",fontWeight:"bold",children:"Holatni o'zgartirish:"}),(0,p.jsx)(Q.Z,{checked:d.isActive||!1,onChange:function(e){var r=e.target.checked;if(null!==n&&void 0!==n&&n.startsWith("store_")){var t=te(),o=t.find((function(e){return e._id===n}));o&&(o.isActive=r,o.updatedAt=(new Date).toISOString(),localStorage.setItem("stores_restaurants_local",JSON.stringify(t)),C.Am.success(r?"Do'kon aktivlashtirildi!":"Do'kon nofaol qilindi!"),null===i||void 0===i||i())}else r&&s({id:n})},color:"primary"})]})]})})]})},ae=n(1413),se=n(45987),le=(0,R.Z)((0,p.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}),"History"),ce=(0,R.Z)((0,p.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M9 17H7v-5h2zm4 0h-2v-3h2zm0-5h-2v-2h2zm4 5h-2V7h2z"}),"Analytics"),de=(0,R.Z)((0,p.jsx)("path",{d:"M4 10h3v7H4zm6.5 0h3v7h-3zM2 19h20v3H2zm15-9h3v7h-3zm-5-9L2 6v2h20V6z"}),"AccountBalance"),me=(0,R.Z)((0,p.jsx)("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download"),ue=n(90816),xe=n(97892),he=n.n(xe),pe=n(35834),fe=n(39281),ge=n(79836),ve=n(56890),je=n(35855),Ze=n(53994),be=n(53382),ye=(0,R.Z)((0,p.jsx)("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp"),Pe=(0,R.Z)((0,p.jsx)("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V8h16z"}),"CalendarToday"),we=function(e){var r=e.storeId,n=e.store,t=(0,l.$G)().t,a=(0,pe.Z)(),s=(0,h.useState)(null),c=(0,i.Z)(s,2),d=c[0],m=c[1],u=(0,w.uC)("store/accounting","post",{}),x=u.mutate,f=u.data;(0,h.useEffect)((function(){r&&a.dateFrom&&a.dateTo&&x({storeId:r,dateFrom:a.dateFrom,dateTo:a.dateTo})}),[r,a.dateFrom,a.dateTo]),(0,h.useEffect)((function(){null!==f&&void 0!==f&&f.data&&m(f.data)}),[f]);if(!n)return(0,p.jsx)("div",{children:"Yuklanmoqda..."});var g=d||{totalPaid:0,weeklyPayments:[],monthlyPayments:[],platformCommission:0,storeRevenue:0},v=n.commissionPercent||0,j=g.totalPaid*(v/100),Z=g.totalPaid-j;return(0,p.jsxs)(k.Z,{sx:{p:3},children:[(0,p.jsxs)(k.Z,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,p.jsxs)(G.Z,{variant:"h4",fontWeight:"bold",children:["Hisob-kitoblar - ",n.name]}),(0,p.jsxs)(k.Z,{sx:{display:"flex",gap:2},children:[(0,p.jsx)(z.Z,{variant:"outlined",startIcon:(0,p.jsx)(me,{}),onClick:function(){console.log("Exporting PDF for store:",r)},children:"PDF"}),(0,p.jsx)(z.Z,{variant:"outlined",startIcon:(0,p.jsx)(me,{}),onClick:function(){console.log("Exporting Excel for store:",r)},children:"Excel"})]})]}),(0,p.jsx)(k.Z,{sx:{mb:3},children:(0,p.jsx)(o.$m,{})}),(0,p.jsxs)(b.ZP,{container:!0,spacing:3,sx:{mb:3},children:[(0,p.jsx)(b.ZP,{item:!0,xs:12,md:6,children:(0,p.jsxs)(U.Z,{sx:{p:3,backgroundColor:"#F7FAFC",borderRadius:2},children:[(0,p.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[(0,p.jsx)(E,{style:{fontSize:24,color:"#EB5B00"}}),(0,p.jsx)(G.Z,{variant:"h6",children:"To'langan summalar"})]}),(0,p.jsxs)(G.Z,{variant:"h4",color:"primary",fontWeight:"bold",children:[(0,ue.Y)(g.totalPaid||0)," ",t("common.symbol")]})]})}),(0,p.jsx)(b.ZP,{item:!0,xs:12,md:6,children:(0,p.jsxs)(U.Z,{sx:{p:3,backgroundColor:"#F7FAFC",borderRadius:2},children:[(0,p.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[(0,p.jsx)(ye,{style:{fontSize:24,color:"#EB5B00"}}),(0,p.jsx)(G.Z,{variant:"h6",children:"Platforma ulushi"})]}),(0,p.jsxs)(G.Z,{variant:"h4",color:"primary",fontWeight:"bold",children:[(0,ue.Y)(j)," ",t("common.symbol")]}),(0,p.jsxs)(G.Z,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["(",v,"% komissiya)"]})]})}),(0,p.jsx)(b.ZP,{item:!0,xs:12,md:6,children:(0,p.jsxs)(U.Z,{sx:{p:3,backgroundColor:"#F7FAFC",borderRadius:2},children:[(0,p.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[(0,p.jsx)(E,{style:{fontSize:24,color:"#10B981"}}),(0,p.jsx)(G.Z,{variant:"h6",children:"Do'kon daromadi"})]}),(0,p.jsxs)(G.Z,{variant:"h4",color:"success.main",fontWeight:"bold",children:[(0,ue.Y)(Z)," ",t("common.symbol")]}),(0,p.jsxs)(G.Z,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["(100% - ",v,"% = ",100-v,"%)"]})]})})]}),(0,p.jsxs)(b.ZP,{container:!0,spacing:3,children:[(0,p.jsx)(b.ZP,{item:!0,xs:12,md:6,children:(0,p.jsxs)(U.Z,{sx:{p:3,borderRadius:2},children:[(0,p.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[(0,p.jsx)(Pe,{style:{fontSize:24,color:"#EB5B00"}}),(0,p.jsx)(G.Z,{variant:"h6",fontWeight:"bold",children:"Haftalik to'lov hisoboti"})]}),(0,p.jsx)(fe.Z,{children:(0,p.jsxs)(ge.Z,{size:"small",children:[(0,p.jsx)(ve.Z,{children:(0,p.jsxs)(je.Z,{children:[(0,p.jsx)(Ze.Z,{children:"Hafta"}),(0,p.jsx)(Ze.Z,{align:"right",children:"Summa"})]})}),(0,p.jsx)(be.Z,{children:g.weeklyPayments&&g.weeklyPayments.length>0?g.weeklyPayments.map((function(e,r){return(0,p.jsxs)(je.Z,{children:[(0,p.jsx)(Ze.Z,{children:e.week||"Hafta ".concat(r+1)}),(0,p.jsxs)(Ze.Z,{align:"right",children:[(0,ue.Y)(e.amount||0)," ",t("common.symbol")]})]},r)})):(0,p.jsx)(je.Z,{children:(0,p.jsx)(Ze.Z,{colSpan:2,align:"center",children:"Ma'lumot yo'q"})})})]})})]})}),(0,p.jsx)(b.ZP,{item:!0,xs:12,md:6,children:(0,p.jsxs)(U.Z,{sx:{p:3,borderRadius:2},children:[(0,p.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[(0,p.jsx)(Pe,{style:{fontSize:24,color:"#EB5B00"}}),(0,p.jsx)(G.Z,{variant:"h6",fontWeight:"bold",children:"Oylik to'lov hisoboti"})]}),(0,p.jsx)(fe.Z,{children:(0,p.jsxs)(ge.Z,{size:"small",children:[(0,p.jsx)(ve.Z,{children:(0,p.jsxs)(je.Z,{children:[(0,p.jsx)(Ze.Z,{children:"Oy"}),(0,p.jsx)(Ze.Z,{align:"right",children:"Summa"})]})}),(0,p.jsx)(be.Z,{children:g.monthlyPayments&&g.monthlyPayments.length>0?g.monthlyPayments.map((function(e,r){return(0,p.jsxs)(je.Z,{children:[(0,p.jsx)(Ze.Z,{children:e.month||"Oy ".concat(r+1)}),(0,p.jsxs)(Ze.Z,{align:"right",children:[(0,ue.Y)(e.amount||0)," ",t("common.symbol")]})]},r)})):(0,p.jsx)(je.Z,{children:(0,p.jsx)(Ze.Z,{colSpan:2,align:"center",children:"Ma'lumot yo'q"})})})]})})]})})]})]})},Ce=["children","value","index"];function ke(e){var r=e.children,n=e.value,t=e.index,i=(0,se.Z)(e,Ce);return(0,p.jsx)("div",(0,ae.Z)((0,ae.Z)({role:"tabpanel",hidden:n!==t,id:"store-tabpanel-".concat(t),"aria-labelledby":"store-tab-".concat(t)},i),{},{children:n===t&&(0,p.jsx)(k.Z,{sx:{p:3},children:r})}))}var Ie=function(e){var r,n,a=e.storeId,s=e.store,c=(0,h.useState)(0),d=(0,i.Z)(c,2),m=d[0],u=d[1],x=(0,l.$G)().t,f=(0,pe.Z)(),g=((0,t.s0)(),(0,w.uC)("order/paging","post",{})),v=g.mutate,j=g.data,Z=(0,w.uC)("store/statistics","post",{}),y=Z.mutate,P=Z.data;(0,h.useEffect)((function(){0===m&&a&&v({storeId:a,dateFrom:f.dateFrom,dateTo:f.dateTo})}),[m,f.dateFrom,f.dateTo,a]),(0,h.useEffect)((function(){1===m&&a&&y({storeId:a,dateFrom:f.dateFrom,dateTo:f.dateTo})}),[m,f.dateFrom,f.dateTo,a]);var C=function(e){console.log("Exporting store ".concat(a," as ").concat(e))},T=(null===j||void 0===j||null===(r=j.data)||void 0===r?void 0:r.data)||[],F=(null===P||void 0===P?void 0:P.data)||{},D=T.length>0?null===(n=T[0])||void 0===n?void 0:n.createdAt:s.lastOrderDate;return(0,p.jsxs)(U.Z,{elevation:3,sx:{borderRadius:4,overflow:"hidden",flex:1},children:[(0,p.jsx)(k.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,p.jsxs)(I.Z,{value:m,onChange:function(e,r){u(r)},"aria-label":"store tabs",sx:{"& .MuiTab-root":{textTransform:"none",fontWeight:600},"& .Mui-selected":{color:"#EB5B00"}},children:[(0,p.jsx)(S.Z,{icon:(0,p.jsx)(le,{}),iconPosition:"start",label:"Buyurtmalar"}),(0,p.jsx)(S.Z,{icon:(0,p.jsx)(ce,{}),iconPosition:"start",label:"Statistika"}),(0,p.jsx)(S.Z,{icon:(0,p.jsx)(de,{}),iconPosition:"start",label:"Hisob-kitoblar"})]})}),(0,p.jsxs)(ke,{value:m,index:0,children:[(0,p.jsx)(k.Z,{sx:{mb:3},children:(0,p.jsxs)(b.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,p.jsx)(b.ZP,{item:!0,children:(0,p.jsx)(o.$m,{})}),(0,p.jsx)(b.ZP,{item:!0,children:(0,p.jsx)(o.j3,{url:"/store/".concat(a,"/export"),extraParams:{dateFrom:f.dateFrom,dateTo:f.dateTo}})})]})}),(0,p.jsx)(k.Z,{sx:{mb:2},children:(0,p.jsxs)(G.Z,{variant:"h6",gutterBottom:!0,children:["Oxirgi buyurtma vaqti: ",D?he()(D).format("YYYY-MM-DD HH:mm"):"Hozircha buyurtma yo'q"]})}),(0,p.jsx)(o.iA,{columns:[{field:"id",headerName:"ID",width:100,renderCell:function(e){var r,n=e.row;return(null===(r=n._id)||void 0===r?void 0:r.slice(-4))||n.id||"-"}},{field:"date",headerName:"Sana",flex:1,minWidth:150,renderCell:function(e){var r=e.row;return r.createdAt?he()(r.createdAt).format("YYYY-MM-DD HH:mm"):"-"}},{field:"amount",headerName:"Summa",flex:1,minWidth:120,renderCell:function(e){var r=e.row;return(0,ue.Y)(r.totalPrice||r.amount||0)+" "+x("common.symbol")}},{field:"status",headerName:"Status",width:150,renderCell:function(e){return e.row.status||"-"}}],dataUrl:"order/paging",searchable:!1,exQueryParams:{storeId:a,dateFrom:f.dateFrom,dateTo:f.dateTo}})]}),(0,p.jsxs)(ke,{value:m,index:1,children:[(0,p.jsx)(k.Z,{sx:{mb:3},children:(0,p.jsx)(o.$m,{})}),(0,p.jsxs)(b.ZP,{container:!0,spacing:3,children:[(0,p.jsx)(b.ZP,{item:!0,xs:12,md:6,children:(0,p.jsxs)(U.Z,{sx:{p:3,backgroundColor:"#F7FAFC",borderRadius:2},children:[(0,p.jsx)(G.Z,{variant:"h6",gutterBottom:!0,children:"Kunlik buyurtmalar"}),(0,p.jsx)(G.Z,{variant:"h4",color:"primary",children:F.dailyOrders||0})]})}),(0,p.jsx)(b.ZP,{item:!0,xs:12,md:6,children:(0,p.jsxs)(U.Z,{sx:{p:3,backgroundColor:"#F7FAFC",borderRadius:2},children:[(0,p.jsx)(G.Z,{variant:"h6",gutterBottom:!0,children:"Haftalik buyurtmalar"}),(0,p.jsx)(G.Z,{variant:"h4",color:"primary",children:F.weeklyOrders||0})]})}),(0,p.jsx)(b.ZP,{item:!0,xs:12,children:(0,p.jsxs)(U.Z,{sx:{p:3,backgroundColor:"#F7FAFC",borderRadius:2},children:[(0,p.jsxs)(k.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,p.jsx)(G.Z,{variant:"h6",children:"Umumiy daromad"}),(0,p.jsxs)(k.Z,{sx:{display:"flex",gap:2},children:[(0,p.jsx)(z.Z,{variant:"outlined",startIcon:(0,p.jsx)(me,{}),onClick:function(){return C("excel")},children:"Excel"}),(0,p.jsx)(z.Z,{variant:"outlined",startIcon:(0,p.jsx)(me,{}),onClick:function(){return C("pdf")},children:"PDF"})]})]}),(0,p.jsxs)(G.Z,{variant:"h4",color:"primary",children:[(0,ue.Y)(F.totalRevenue||s.totalRevenue||0)," ",x("common.symbol")]})]})})]})]}),(0,p.jsx)(ke,{value:m,index:2,children:(0,p.jsx)(we,{storeId:a,store:s})})]})},Se=function(){var e=(0,t.UO)().id,r=(0,w.h_)("store/get-by-id/".concat(e),{},{enabled:!!e,suspense:!1}),n=r.data,i=(r.status,null===n||void 0===n?void 0:n.data);return(0,p.jsx)(p.Fragment,{children:e&&i&&(0,p.jsxs)(b.ZP,{className:"grid lg:flex gap-4 p-2",children:[(0,p.jsx)(oe,{storeInfoData:n,storeId:e,onStatusChange:function(){}}),(0,p.jsx)(Ie,{storeId:e,store:i})]})})},Te=function(){return(0,p.jsxs)(t.Z5,{children:[(0,p.jsx)(t.AW,{path:":id",element:(0,p.jsx)(Se,{})}),(0,p.jsx)(t.AW,{path:"*",element:(0,p.jsx)(Y,{})})]})}},90816:function(e,r,n){n.d(r,{Y:function(){return t}});var t=function(e){return e||0===e?(Math.round(100*(e+Number.EPSILON))/100).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}).replaceAll(","," "):""}},52898:function(e,r,n){var t=n(64836);r.Z=void 0;var i=t(n(45649)),o=n(80184);r.Z=(0,i.default)((0,o.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert")},94939:function(e,r,n){var t=n(76189),i=n(80184);r.Z=(0,t.Z)((0,i.jsx)("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02z"}),"Phone")},89736:function(e,r,n){var t=n(76189),i=n(80184);r.Z=(0,t.Z)((0,i.jsx)("path",{d:"M18 6h-2c0-2.21-1.79-4-4-4S8 3.79 8 6H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m-8 4c0 .55-.45 1-1 1s-1-.45-1-1V8h2zm2-6c1.1 0 2 .9 2 2h-4c0-1.1.9-2 2-2m4 6c0 .55-.45 1-1 1s-1-.45-1-1V8h2z"}),"ShoppingBag")},93044:function(e,r,n){n.d(r,{Z:function(){return y}});var t=n(29439),i=n(63366),o=n(87462),a=n(72791),s=n(59278),l=n(94419),c=n(66934),d=n(98357),m=n(76189),u=n(80184),x=(0,m.Z)((0,u.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person"),h=n(75878),p=n(21217);function f(e){return(0,p.ZP)("MuiAvatar",e)}(0,h.Z)("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);var g=n(18833),v=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],j=(0,c.ZP)("div",{name:"MuiAvatar",slot:"Root",overridesResolver:function(e,r){var n=e.ownerState;return[r.root,r[n.variant],n.colorDefault&&r.colorDefault]}})((function(e){var r=e.theme;return{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:r.typography.fontFamily,fontSize:r.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(r.vars||r).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:(0,o.Z)({color:(r.vars||r).palette.background.default},r.vars?{backgroundColor:r.vars.palette.Avatar.defaultBg}:(0,o.Z)({backgroundColor:r.palette.grey[400]},r.applyStyles("dark",{backgroundColor:r.palette.grey[600]})))}]}})),Z=(0,c.ZP)("img",{name:"MuiAvatar",slot:"Img",overridesResolver:function(e,r){return r.img}})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),b=(0,c.ZP)(x,{name:"MuiAvatar",slot:"Fallback",overridesResolver:function(e,r){return r.fallback}})({width:"75%",height:"75%"});var y=a.forwardRef((function(e,r){var n=(0,d.i)({props:e,name:"MuiAvatar"}),c=n.alt,m=n.children,x=n.className,h=n.component,p=void 0===h?"div":h,y=n.slots,P=void 0===y?{}:y,w=n.slotProps,C=void 0===w?{}:w,k=n.imgProps,I=n.sizes,S=n.src,T=n.srcSet,z=n.variant,F=void 0===z?"circular":z,D=(0,i.Z)(n,v),A=null,M=function(e){var r=e.crossOrigin,n=e.referrerPolicy,i=e.src,o=e.srcSet,s=a.useState(!1),l=(0,t.Z)(s,2),c=l[0],d=l[1];return a.useEffect((function(){if(i||o){d(!1);var e=!0,t=new Image;return t.onload=function(){e&&d("loaded")},t.onerror=function(){e&&d("error")},t.crossOrigin=r,t.referrerPolicy=n,t.src=i,o&&(t.srcset=o),function(){e=!1}}}),[r,n,i,o]),c}((0,o.Z)({},k,{src:S,srcSet:T})),N=S||T,R=N&&"error"!==M,B=(0,o.Z)({},n,{colorDefault:!R,component:p,variant:F}),q=function(e){var r=e.classes,n={root:["root",e.variant,e.colorDefault&&"colorDefault"],img:["img"],fallback:["fallback"]};return(0,l.Z)(n,f,r)}(B),E=(0,g.Z)("img",{className:q.img,elementType:Z,externalForwardedProps:{slots:P,slotProps:{img:(0,o.Z)({},k,C.img)}},additionalProps:{alt:c,src:S,srcSet:T,sizes:I},ownerState:B}),W=(0,t.Z)(E,2),H=W[0],_=W[1];return A=R?(0,u.jsx)(H,(0,o.Z)({},_)):m||0===m?m:N&&c?c[0]:(0,u.jsx)(b,{ownerState:B,className:q.fallback}),(0,u.jsx)(j,(0,o.Z)({as:p,ownerState:B,className:(0,s.Z)(q.root,x),ref:r},D,{children:A}))}))},39504:function(e,r,n){n.d(r,{Z:function(){return f}});var t=n(87462),i=n(63366),o=n(72791),a=n(59278),s=n(94419),l=n(66934),c=n(98357),d=n(75878),m=n(21217);function u(e){return(0,m.ZP)("MuiCardContent",e)}(0,d.Z)("MuiCardContent",["root"]);var x=n(80184),h=["className","component"],p=(0,l.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:function(e,r){return r.root}})((function(){return{padding:16,"&:last-child":{paddingBottom:24}}})),f=o.forwardRef((function(e,r){var n=(0,c.i)({props:e,name:"MuiCardContent"}),o=n.className,l=n.component,d=void 0===l?"div":l,m=(0,i.Z)(n,h),f=(0,t.Z)({},n,{component:d}),g=function(e){var r=e.classes;return(0,s.Z)({root:["root"]},u,r)}(f);return(0,x.jsx)(p,(0,t.Z)({as:d,className:(0,a.Z)(g.root,o),ownerState:f,ref:r},m))}))},18833:function(e,r,n){n.d(r,{Z:function(){return x}});var t=n(4942),i=n(87462),o=n(63366),a=n(6117),s=n(95219),l=n(70472),c=n(18659),d=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],m=["component","slots","slotProps"],u=["component"];function x(e,r){var n=r.className,x=r.elementType,h=r.ownerState,p=r.externalForwardedProps,f=r.getSlotOwnerState,g=r.internalForwardedProps,v=(0,o.Z)(r,d),j=p.component,Z=p.slots,b=void 0===Z?(0,t.Z)({},e,void 0):Z,y=p.slotProps,P=void 0===y?(0,t.Z)({},e,void 0):y,w=(0,o.Z)(p,m),C=b[e]||x,k=(0,l.Z)(P[e],h),I=(0,c.Z)((0,i.Z)({className:n},v,{externalForwardedProps:"root"===e?w:void 0,externalSlotProps:k})),S=I.props.component,T=I.internalRef,z=(0,o.Z)(I.props,u),F=(0,a.Z)(T,null==k?void 0:k.ref,r.ref),D=f?f(z):{},A=(0,i.Z)({},h,D),M="root"===e?S||j:S,N=(0,s.Z)(C,(0,i.Z)({},"root"===e&&!j&&!b[e]&&g,"root"!==e&&!b[e]&&g,z,M&&{as:M},{ref:F}),A);return Object.keys(D).forEach((function(e){delete N[e]})),[C,N]}}}]);
//# sourceMappingURL=586.af2e24ac.chunk.js.map