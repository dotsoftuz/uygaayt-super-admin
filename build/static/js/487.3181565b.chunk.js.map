{"version":3,"file":"static/js/487.3181565b.chunk.js","mappings":"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","sources":["pages/integration/container/Integration.styled.ts","pages/integration/container/Integration.tsx","pages/integration/index.tsx"],"sourcesContent":["import styled from \"styled-components\";\n\nexport const IntegrationStyled = styled.div`\n  display: flex;\n  background-color: #fff;\n  padding: 20px;\n  border-radius: 12px;\n  height: 100%;\n  .card {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 180px;\n    height: 100px;\n    border: 1px solid #ddd;\n    border-radius: 3px;\n    margin-right: 10px;\n    cursor: pointer;\n  }\n`;\n\nexport const InegrationCard = styled.div`\n  padding: 20px;\n  width: 880px;\n  height: 440px;\n  border-radius: 12px;\n  background-color: #ffffff;\n  position: relative !important;\n  box-sizing: border-box;\n\n  .integration-logo {\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n    img {\n      width: 200px;\n      max-height: 180px;\n      object-fit: contain;\n    }\n  }\n\n  .integration_loader {\n    position: relative;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n  }\n`;\n\nexport const IntegrationInfo = styled.div`\n  max-height: 100%;\n\n  h2 {\n    font-size: 22px;\n    text-align: center;\n    padding: 15px 0;\n  }\n  p {\n    font-size: 14px;\n  }\n\n  .fields_val {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n    padding-top: 10px;\n\n    li {\n      list-style-type: none;\n      padding: 0 10px;\n      font-size: 14px;\n      border-left: 2px solid darkgoldenrod;\n      display: flex;\n\n      span {\n        color: darkgrey;\n        cursor: pointer;\n        display: flex;\n        gap: 10px;\n        word-break: break-all;\n\n        i {\n          width: 88%;\n        }\n\n        svg {\n          path {\n            fill: #eb469f;\n          }\n        }\n      }\n    }\n  }\n`;\n","import { Box, Grid } from \"@mui/material\";\nimport { CopyIcon } from \"assets/svgs\";\nimport { CommonLoader, Modal, SelectForm, TextInput } from \"components\";\nimport CommonButton from \"components/common/commonButton/Button\";\nimport { useApi, useApiMutation } from \"hooks/useApi/useApiHooks\";\nimport useCopyToClipboard from \"hooks/useClipboard\";\nimport { useState } from \"react\";\nimport { useFieldArray, useForm } from \"react-hook-form\";\nimport { useTranslation } from \"react-i18next\";\nimport { toast } from \"react-toastify\";\nimport {\n  InegrationCard,\n  IntegrationInfo,\n  IntegrationStyled,\n} from \"./Integration.styled\";\nimport { get } from \"lodash\";\n\nconst Integration = () => {\n  const [integrationId, setIntegrationId] = useState<string>(\"\");\n  const [integration, setIntegration] = useState<any>();\n  const [update, setUpdate] = useState<boolean>(false);\n  const { control, handleSubmit, setValue } = useForm();\n  const { fields } = useFieldArray({\n    control,\n    name: \"fields\",\n  });\n\n  const { t } = useTranslation();\n\n  // const { data, refetch, isLoading } = useApi(\"integration\");\n  const { data, reset, isLoading} = useApiMutation(`integration`, \"post\", {\n    // onSuccess() {\n    //   refetch();\n    //   refetchInteg();\n    //   toast.success(t(\"general.success\"));\n    // },\n  });\n\n  const [copiedText, copy] = useCopyToClipboard();\n\n  const { mutate } = useApiMutation(`integration/${integrationId}`, \"put\", {\n    onSuccess() {\n      reset();\n      refetchInteg();\n      toast.success(t(\"general.success\"));\n    },\n  });\n\n  const submit = handleSubmit((data: any) => {\n    const requestData = {\n      ...integration,\n      fields: data.fields,\n    };\n    mutate(requestData);\n  });\n\n  const {\n    data: integ,\n    isFetching: loading,\n    refetch: refetchInteg,\n  } = useApi(\n    `integration/${integrationId}`,\n    {},\n    {\n      enabled: !!integrationId,\n      onSuccess(data) {\n        setIntegration(data?.data);\n      },\n    }\n  );\n\n  const handleInstalled = (bool: boolean) => {\n    mutate({ isInstalled: bool });\n  };\n\n  return (\n    <IntegrationStyled>\n      {data?.data?.map((item: any) => (\n        <div\n          className=\"card\"\n          onClick={() => {\n            setValue(\"fields\", item.fields);\n            setIntegrationId(item._id);\n          }}\n        >\n          <h3 className=\"name\">{item.name}</h3>\n        </div>\n      ))}\n      <Modal\n        open={!!integrationId}\n        onClose={() => {\n          setIntegrationId(\"\");\n          setUpdate(false);\n        }}\n      >\n        <InegrationCard>\n          {loading ? (\n            <div className=\"integration_loader\">\n              <CommonLoader />\n            </div>\n          ) : (\n            <Grid container>\n              <Grid item md={6}>\n                <div className=\"integration-logo\">\n                  <img\n                    src={process.env.REACT_APP_BASE_URL + integration?.logo}\n                    alt=\"integration.logo\"\n                  />\n                  <h3 className=\"py-2\">{integration?.name}</h3>\n                  <div>\n                    {integration?.isInstalled ? (\n                      <div className=\"d-flex gap-3\">\n                        <CommonButton title=\"O'rnatilgan\" disabled />\n\n                        <CommonButton\n                          title=\"O'chirish\"\n                          disabled={isLoading}\n                          onClick={() => handleInstalled(false)}\n                        />\n                      </div>\n                    ) : (\n                      <CommonButton\n                        title=\"O'rnatish\"\n                        className=\"designed\"\n                        disabled={isLoading}\n                        onClick={() => handleInstalled(true)}\n                      />\n                    )}\n                  </div>\n                </div>\n              </Grid>\n              <Grid item md={6}>\n                <Box\n                  sx={{\n                    height: \"400px\",\n                    boxSizing: \"border-box\",\n                    overflow: \"auto\",\n                  }}\n                >\n                  {integration?.isInstalled && !update && (\n                    <div className=\"d-flex justify-content-end\">\n                      <CommonButton\n                        title=\"Tahrirlash\"\n                        onClick={() => setUpdate(true)}\n                      />\n                    </div>\n                  )}\n                  {update ? (\n                    <>\n                      {fields.map((field: any, index) =>\n                        field.fieldType === \"input\" ? (\n                          <div className=\"mb-2\" key={field.id}>\n                            <TextInput\n                              control={control}\n                              name={`fields.${index}.fieldValue`}\n                              label={field.fieldName}\n                            />\n                          </div>\n                        ) : field.fieldType === \"select\" ? (\n                          <div className=\"mb-2\" key={field.id}>\n                            <SelectForm\n                              control={control}\n                              name={`fields.${index}.fieldValue`}\n                              options={field.options?.map((option: any) => ({\n                                _id: option.value,\n                                name: option.text,\n                              }))}\n                              label={field.fieldName}\n                            />\n                          </div>\n                        ) : (\n                          \"\"\n                        )\n                      )}\n                      <div className=\"d-flex justify-content-end gap-2 py-2\">\n                        <CommonButton\n                          title=\"Orqaga\"\n                          onClick={() => setUpdate(false)}\n                        />\n                        {/* <MainButton\n                      variant=\"contained\"\n                      title={t(\"general.save\")}\n                      className=\"mt-1\"\n                      fullWidth\n                      onClick={submit}\n                    /> */}\n                        <CommonButton\n                          title={t(\"general.save\")!}\n                          className=\"designed\"\n                          onClick={submit}\n                        />\n                      </div>\n                    </>\n                  ) : (\n                    <IntegrationInfo>\n                      <h2>Tarif</h2>\n                      <p>{integration?.description}</p>\n\n                      <ul className=\"fields_val\">\n                        {fields.map((item: any) => (\n                          <li key={item.fieldValue}>\n                            {item.fieldName}:{\" \"}\n                            {item.fieldValue && (\n                              <span>\n                                <i>&nbsp; {item.fieldValue}</i>\n                                <CopyIcon\n                                  onClick={() => copy(item.fieldValue)}\n                                />\n                              </span>\n                            )}\n                          </li>\n                        ))}\n                        {get(integ, \"data.infoFields\", []).map(\n                          (info: Record<string, any>) => (\n                            <li key={info.fieldValue}>\n                              {info.fieldName}:{\" \"}\n                              {info.fieldValue && (\n                                <span>\n                                  <i>&nbsp; {info.fieldValue}</i>\n                                  <CopyIcon\n                                    onClick={() => copy(info.fieldValue)}\n                                  />\n                                </span>\n                              )}\n                            </li>\n                          )\n                        )}\n                      </ul>\n                    </IntegrationInfo>\n                  )}\n                </Box>\n              </Grid>\n            </Grid>\n          )}\n        </InegrationCard>\n      </Modal>\n    </IntegrationStyled>\n  );\n};\n\nexport default Integration;\n","import Integration from './container/Integration'\n\nconst index = () => {\n   return <Integration />\n}\n\nexport default index\n"],"names":["IntegrationStyled","styled","InegrationCard","IntegrationInfo","useState","integrationId","setIntegrationId","integration","setIntegration","update","setUpdate","useForm","control","handleSubmit","setValue","fields","useFieldArray","name","t","useTranslation","useApiMutation","data","reset","isLoading","useCopyToClipboard","copy","mutate","onSuccess","refetchInteg","toast","submit","requestData","useApi","enabled","integ","loading","isFetching","refetch","handleInstalled","bool","isInstalled","map","item","className","onClick","_id","open","onClose","Grid","container","md","src","process","logo","alt","title","disabled","Box","sx","height","boxSizing","overflow","field","index","fieldType","label","fieldName","id","options","option","value","text","description","fieldValue","get","info"],"sourceRoot":""}