{"version":3,"file":"static/js/669.9b6289d0.chunk.js","mappings":"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","sources":["pages/attribute/components/AttributeForm.tsx","pages/attribute/index.tsx","pages/attribute/container/Attribute.tsx","pages/attribute/container/attribute.columns.tsx"],"sourcesContent":["import { FC, useEffect } from \"react\";\nimport { Grid, Typography } from \"@mui/material\";\nimport { TextInput } from \"components\";\nimport { Controller, UseFormReturn } from \"react-hook-form\";\nimport { useApi, useApiMutation } from \"hooks/useApi/useApiHooks\";\nimport { useTranslation } from \"react-i18next\";\n\ninterface IEmployeesForm {\n  formStore: UseFormReturn<any>;\n  editingAttributeId: string | undefined;\n  resetForm: () => void;\n}\n\nconst AttributeForm: FC<IEmployeesForm> = ({\n  formStore,\n  editingAttributeId,\n  resetForm,\n}) => {\n  const { t } = useTranslation();\n  const { control, handleSubmit, reset, watch, setValue } = formStore;\n\n  const { mutate, status } = useApiMutation(\n    editingAttributeId ? `/attribute/update` : \"/attribute/create\",\n    editingAttributeId ? \"post\" : \"post\"\n  );\n\n  const { data: getByIdData, status: getByIdStatus } = useApi(\n    `attribute/get-by-id/${editingAttributeId}`,\n    {},\n    {\n      enabled: !!editingAttributeId,\n      suspense: false,\n    }\n  );\n\n  useEffect(() => {\n    if (status === \"success\") {\n      resetForm(); // Reset form after successful submission\n    }\n  }, [status]);\n\n  const submit = (data: any) => {\n    mutate({\n      _id: editingAttributeId,\n      ...data,\n    });\n  };\n\n  useEffect(() => {\n    if (getByIdStatus === \"success\") {\n      reset({\n        name: getByIdData.data.name,\n      });\n    }\n  }, [getByIdStatus, getByIdData]);\n\n  useEffect(() => {\n    // Reset the form if editingAttributeId changes to undefined (for create mode)\n    if (!editingAttributeId) {\n      reset({\n        name: \"\",\n      });\n    }\n  }, [editingAttributeId, reset]);\n\n  return (\n    <div className=\"custom-drawer\">\n      <form id=\"attribute\" onSubmit={handleSubmit(submit)}>\n        <Grid container spacing={2}>\n          <Grid item md={12}>\n            <TextInput\n              control={control}\n              name=\"name.uz\"\n              label={t('common.title') + ' (Uz)'}\n            />\n          </Grid>\n          <Grid item md={12}>\n            <TextInput\n              control={control}\n              name=\"name.ru\"\n              label={t('common.title') + ' (Ru)'}\n            />\n          </Grid>\n          <Grid item md={12}>\n            <TextInput\n              control={control}\n              name=\"name.en\"\n              label={t('common.title') + ' (En)'}\n            />\n          </Grid>\n        </Grid>\n      </form>\n    </div>\n  );\n};\n\nexport default AttributeForm;\n","import Attribute from \"./container/Attribute\";\n\nexport default Attribute;\n","import { FormDrawer, Table } from \"components\";\nimport { useMemo, useState } from \"react\";\nimport { useAttributeColumns } from \"./attribute.columns\";\nimport { useAppDispatch } from \"../../../store/storeHooks\";\nimport { setOpenDrawer } from \"components/elements/FormDrawer/formdrawer.slice\";\nimport { useForm } from \"react-hook-form\";\nimport AttributeForm from \"../components/AttributeForm\";\nimport { useTranslation } from \"react-i18next\";\nimport { useRoleManager } from \"services/useRoleManager\";\nimport WarningModal from \"components/common/WarningModal/WarningModal\";\n\nconst Attribute = () => {\n  const [editingAttributeId, setEditingAttributeId] = useState<any>();\n  const [attributeId, setAttributeId] = useState<any>();\n  const columns = useAttributeColumns();\n  const hasAccess = useRoleManager();\n  const { t } = useTranslation();\n  const dis = useAppDispatch();\n  const formStore = useForm<any>();\n\n  const resetForm = () => {\n    setEditingAttributeId(undefined);\n    formStore.reset({\n      name: { uz: \"\", ru: \"\", en: \"\" },\n    });\n  };\n\n  const queryParams = useMemo(() => ({}), []);\n\n  return (\n    <>\n      <Table\n        dataUrl=\"attribute/paging\"\n        columns={columns}\n        searchable\n        onAddButton={() => {\n          dis(setOpenDrawer(true));\n        }}\n        onEditColumn={(row) => {\n          setEditingAttributeId(row._id);\n          dis(setOpenDrawer(true));\n        }}\n        onDeleteColumn={(row) => setAttributeId(row._id)}\n        exQueryParams={queryParams}\n      />\n      <WarningModal open={attributeId} setOpen={setAttributeId} url=\"attribute/delete\" />\n      <FormDrawer\n        FORM_ID=\"attribute\"\n        isEditing={!!editingAttributeId}\n        customTitle={t(\"attribute.add\")}\n        onClose={resetForm}\n      >\n        <AttributeForm\n          formStore={formStore}\n          resetForm={resetForm}\n          editingAttributeId={editingAttributeId}\n        />\n      </FormDrawer>\n    </>\n  );\n};\n\nexport default Attribute;\n","import { GridColumns } from \"@mui/x-data-grid\";\nimport { Tooltip } from \"antd\";\nimport { get } from \"lodash\";\nimport { useTranslation } from \"react-i18next\";\n\nexport const useAttributeColumns = (): GridColumns => {\n  const { t } = useTranslation();\n  const currentLang = localStorage.getItem(\"i18nextLng\") || \"uz\"; \n\n  return [\n    {\n      field: t(\"common.name\"),\n      renderCell({ row }) {\n        const title = row?.name?.[currentLang];\n        const truncatedTitle = title?.length > 50 ? `${title.substring(0, 50)}...` : title;\n    \n        return (\n          <Tooltip title={title} arrow>\n            <span>{truncatedTitle}</span>\n          </Tooltip>\n        );\n      },\n    }\n    \n    // {\n    //   field: t(\"common.store\"),\n    //   renderCell({ row }) {\n    //     return get(row, \"store.name\", \"-\");\n    //   },\n    // },\n  ];\n};\n"],"names":["formStore","editingAttributeId","resetForm","t","useTranslation","control","handleSubmit","reset","watch","setValue","useApiMutation","mutate","status","useApi","enabled","suspense","getByIdData","data","getByIdStatus","useEffect","name","className","id","onSubmit","_id","Grid","container","spacing","item","md","label","useState","setEditingAttributeId","attributeId","setAttributeId","columns","currentLang","localStorage","getItem","field","renderCell","row","title","truncatedTitle","length","substring","arrow","useAttributeColumns","useRoleManager","dis","useAppDispatch","useForm","undefined","uz","ru","en","queryParams","useMemo","dataUrl","searchable","onAddButton","setOpenDrawer","onEditColumn","onDeleteColumn","exQueryParams","WarningModal","open","setOpen","url","FORM_ID","isEditing","customTitle","onClose"],"sourceRoot":""}