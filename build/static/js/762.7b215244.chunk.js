"use strict";(self.webpackChunkbestune_admin=self.webpackChunkbestune_admin||[]).push([[762],{88892:function(e,n,t){var s=t(29439),i=t(72791),a=t(73405),r=t(80184);n.Z=function(e){var n=e.getCoordinate,t=e.center,o=e.height,l=(0,i.useState)(t),c=(0,s.Z)(l,2),d=c[0],u=c[1],m=(0,i.useRef)(null);(0,i.useEffect)((function(){t&&(u(t),m.current&&m.current.setCenter([t.latitude,t.longitude]))}),[t]);return(0,r.jsx)(a.Yy,{children:(0,r.jsxs)(a.D5,{width:"100%",height:o||"500px",defaultState:{center:null!==t&&void 0!==t&&t.latitude?[null===t||void 0===t?void 0:t.latitude,null===t||void 0===t?void 0:t.longitude]:[41.315163390767026,69.27958692367339],zoom:14,behaviors:["default","scrollZoom"]},instanceRef:function(e){m.current=e},onClick:function(e){var t={latitude:e.get("coords")[0],longitude:e.get("coords")[1]};u(t),n(t)},children:[(0,r.jsx)(a.ah,{geometry:[null===d||void 0===d?void 0:d.latitude,null===d||void 0===d?void 0:d.longitude]}),(0,r.jsx)(a.ot,{}),(0,r.jsx)(a.Bo,{options:{float:"left"},onClick:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){var t={latitude:e.coords.latitude,longitude:e.coords.longitude};u(t),n(t),m.current&&m.current.setCenter([t.latitude,t.longitude],14)}),(function(e){console.error("Geolocation error:",e)})):console.error("Geolocation is not supported by this browser.")}}),(0,r.jsx)(a.Sj,{options:{float:"right"}}),(0,r.jsx)(a.Ly,{options:{float:"right"}})]})})}},1903:function(e,n,t){t.d(n,{Z:function(){return l}});var s,i=t(30168),a=t(47191),r=(0,t(17939).default)(a.LD)(s||(s=(0,i.Z)(["\n  display: flex;\n  flex-direction: column-reverse;\n  border: none;\n  width: 100%;\n  padding-bottom: 20px;\n  .quill {\n    .ql-container {\n      .ql-tooltip {\n        transform: translateX(97px);\n        z-index: 10;\n      }\n      .ql-editor {\n        background-color: #fff;\n        padding: 15px;\n        border-radius: 12px;\n        min-height: 80px;\n        transition: all 0.3s;\n        border: 1px solid #d9d9d9;\n        p {\n          margin: 0;\n          font-size: 14px;\n        }\n      }\n    }\n  }\n  .ql-toolbar {\n    padding: 0;\n    transition: opacity 1s ease-out;\n    border-radius: 0;\n    border-bottom: none;\n    margin-top: 10px;\n    button {\n      border: none;\n      margin: 0 5px;\n      svg {\n        width: 24px !important;\n        height: 24px !important;\n        fill: #000 !important;\n        path {\n          fill: #000;\n        }\n      }\n    }\n  }\n  .ql-editing {\n    left: 30px !important;\n    transform: translateX(0px) !important;\n    z-index: 100;\n  }\n"]))),o=t(80184),l=function(e){var n=e.value,t=e.onChange,s=e.onImageUpload,i=e.isError,a=e.type;return(0,o.jsx)(r,{controls:[["bold","italic","underline","strike","clean","unorderedList","orderedList","alignLeft","alignCenter","alignRight"]],isError:!!i,value:n,onChange:t,onImageUpload:s,type:a})}},32762:function(e,n,t){t.r(n),t.d(n,{default:function(){return J}});var s,i,a,r,o=t(1413),l=t(29439),c=t(61889),d=t(697),u=t(89891),m=t(68096),p=t(58406),x=t(23786),h=t(20890),v=t(30168),g=t(17939),f=g.default.div(s||(s=(0,v.Z)(["\n  .tabs {\n    background: #fff;\n    border-radius: 0px 12px 12px 0px;\n    .tab {\n      position: relative;\n      color: #454545;\n      font-size: 14px;\n      padding: 14px 16px;\n      border-bottom: 1px solid #f5f5f5;\n      cursor: pointer;\n      &.active {\n        font-weight: 500;\n      }\n      .left-border {\n        position: absolute;\n        left: 0;\n        top: 0;\n        bottom: 0;\n        width: 6px;\n        background-color: #EB5B00;\n      }\n    }\n  }\n  .settings {\n    border-radius: 12px;\n    background: #fff;\n    padding: 0 20px;\n    height: calc(100vh - 100px);\n    box-sizing: border-box;\n    overflow: auto;\n    padding-bottom: 20px;\n    .item {\n      border: 1px solid #e8e8e8;\n      padding: 15px;\n      border-radius: 15px;\n      .key {\n        display: block;\n        color: #333;\n        margin-bottom: 5px;\n        font-size: 15px;\n      }\n    }\n  }\n"]))),j=g.default.span(i||(i=(0,v.Z)(["\n  color: #000;\n"]))),b=g.default.div(a||(a=(0,v.Z)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: sticky;\n  top: 0;\n  z-index: 70;\n  height: 80px;\n  background-color: #fff;\n"]))),y=(0,g.default)(p.Z)({width:"100%",borderRadius:"12px",border:"1px solid #e9e9e9",outline:"none",maxWidth:"250px","& .MuiSelect-select":{display:"flex",borderRadius:"10px",border:"none"}}),_=(0,g.default)(x.Z)({minWidth:"250px",display:"flex",alignItems:"center"}),k=(g.default.div(r||(r=(0,v.Z)(["\n  border-radius: 12px;\n  background: #fff;\n  padding: 20px;\n  height: calc(100vh - 100px);\n  overflow: auto;\n  .note {\n    display: flex;\n    align-items: center;\n    color: #00c537;\n    font-size: 15px;\n    border-radius: 12px;\n    background: #e5f9eb;\n    padding: 12px;\n    svg {\n      margin-right: 12px;\n    }\n  }\n  .warning {\n    display: flex;\n    align-items: center;\n    color: #ffb345;\n    font-size: 15px;\n    border-radius: 12px;\n    background: rgba(255, 179, 69, 0.1);\n    padding: 12px;\n    margin-top: 10px;\n    margin-bottom: 24px;\n    svg {\n      margin-right: 12px;\n    }\n  }\n"]))),t(30709)),Z=t(72791),C=t(29001),N=t(71796),P=t(39230),w=[{translationKey:"uzbekistan",flag:"uzbekistan",prefix:"+998",pattern:"99 999 99 99"},{translationKey:"kazakhstan",flag:"kazakhstan",prefix:"+7",pattern:"999 999 9999"}],S=t(61134),D=t(32188),q=t(75985),z=t(11087),M=t(88892),I=t(80184),O=function(){var e=(0,P.$G)().t,n=(0,Z.useState)(),t=(0,l.Z)(n,2),s=t[0],i=t[1],a=(0,S.cI)(),r=a.handleSubmit,o=(a.watch,a.setValue,(0,D.h_)("/settings-general")),d=o.data,u=o.status,m=o.refetch,p=(0,D.uC)("/settings-general","put",{onSuccess:function(){m(),q.Am.success(e("general.success"))}}).mutate;return(0,Z.useEffect)((function(){if("success"===u){var e=d.data;i(e.locationCenter)}}),[u]),(0,I.jsxs)("form",{onSubmit:r((function(e){p({locationCenter:s})})),id:"main-map-center",children:[(0,I.jsxs)(b,{children:[(0,I.jsx)("h2",{children:e("settings.map_address")}),(0,I.jsx)(N.c7,{title:e("general.save"),variant:"contained",type:"submit",form:"main-map-center"})]}),(0,I.jsx)(c.ZP,{container:!0,mb:3,spacing:2,children:(0,I.jsx)(c.ZP,{item:!0,md:12,children:(0,I.jsx)(M.Z,{getCoordinate:i,center:s,height:"480px"})})})]})},T=t(1903),E=function(){var e=(0,P.$G)().t,n=(0,S.cI)(),t=n.handleSubmit,s=n.watch,i=n.setValue,a=(0,D.h_)("/settings-general",{},{suspense:!1}),r=a.data,o=a.refetch,l=(a.status,(0,D.uC)("/settings-general","put",{onSuccess:function(n){n.data&&(o(),q.Am.success(e("general.success")))}})),d=l.mutate,u=l.status;return(0,Z.useEffect)((function(){var e;i("termsOfUse",null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.termsOfUse)}),[r]),(0,I.jsxs)("form",{id:"website_conditions",onSubmit:t((function(e){d(e)})),children:[(0,I.jsxs)(b,{children:[(0,I.jsx)(j,{children:e("settings.website_conditions")}),(0,I.jsx)(N.c7,{title:e("general.save"),variant:"contained",type:"submit",form:"website_conditions",disabled:"loading"===u})]}),(0,I.jsx)(c.ZP,{container:!0,children:(0,I.jsx)(c.ZP,{md:12,sm:12,children:(0,I.jsx)(T.Z,{value:s("termsOfUse"),onChange:function(e){return i("termsOfUse",e)}})})})]})},A=t(26088),B=(0,A.Z)("div")({position:"relative",minWidth:"90px",height:"51.6px",borderRadius:"0 8px 8px 0",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 8px",cursor:"pointer",transition:"all 0.4s",border:"1px solid rgba(49,57,73,0.1)","&::before":{content:'""',position:"absolute",width:"43px",height:"50.6px",background:"#EB5B00",top:-.2,left:"0",right:"auto",transition:"all 0.4s"},"&.show::before":{left:"45.5px",borderTopRightRadius:"8px",borderBottomRightRadius:"8px"}}),R=(0,A.Z)("div")({}),W=(0,t(76189).Z)((0,I.jsx)("path",{d:"M7.5 11C9.43 11 11 9.43 11 7.5S9.43 4 7.5 4 4 5.57 4 7.5 5.57 11 7.5 11m0-5C8.33 6 9 6.67 9 7.5S8.33 9 7.5 9 6 8.33 6 7.5 6.67 6 7.5 6M4.0025 18.5832 18.59 3.9955l1.4142 1.4143L5.4167 19.9974zM16.5 13c-1.93 0-3.5 1.57-3.5 3.5s1.57 3.5 3.5 3.5 3.5-1.57 3.5-3.5-1.57-3.5-3.5-3.5m0 5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"Percent");var V=function(e){var n,t=(null===(n=String(e))||void 0===n?void 0:n.replace(/[^\d.-]/g,"")).split(".");return t[0]=t[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$& "),"string"===typeof t[1]?(t[1]=t[1].slice(0,3),t.join(".")):t[0]},G=/([0-9]+[.|,][0-9])|([0-9][.|,][0-9]+)|([0-9]+)/g,U=t(57689),F=function(e){var n,t,s,i=e.data,a=(0,P.$G)().t,r=((0,U.UO)().id,(0,D.h_)("/discount/get/premium",{},{suspense:!1})),l=r.data,u=r.refetch,m=r.status,p=(0,S.cI)({defaultValues:{premiumDiscount:{amount:0,type:"amount",number:1}}}),x=p.handleSubmit,h=p.register,v=p.watch,g=(p.control,p.setValue),f=p.reset,y=p.formState.errors,_=(0,D.uC)("/discount/premium/update","post",{onSuccess:function(e){e.data&&(u(),q.Am.success(a("general.success")))}}),k=_.mutate,C=_.status;return(0,Z.useEffect)((function(){if("success"===m){var e,n=null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.premiumDiscount;n&&f({premiumDiscount:{amount:n.amount||0,number:1,type:n.type||"amount"}})}}),[m,l,f]),(0,I.jsxs)("form",{id:"website_conditions",onSubmit:x((function(e){var n,t;k({premiumDiscount:(0,o.Z)((0,o.Z)({},e.premiumDiscount),{},{amount:Number(null===(n=String(null===(t=e.premiumDiscount)||void 0===t?void 0:t.amount))||void 0===n?void 0:n.replace(" ","")),number:1})})})),children:[(0,I.jsxs)(b,{children:[(0,I.jsx)(j,{children:a("settings.premium_discounts")}),(0,I.jsx)(N.c7,{title:a("general.save"),variant:"contained",type:"submit",form:"website_conditions",disabled:"loading"===C})]}),(0,I.jsx)(c.ZP,{container:!0,display:"block",children:(0,I.jsxs)(c.ZP,{item:!0,md:8,xs:8,display:"flex",gap:2,paddingBlock:1,children:[(0,I.jsx)(c.ZP,{item:!0,md:4,xs:4,children:(0,I.jsx)(N.II,{label:a("driver.".concat(v("premiumDiscount.type"))),params:(0,o.Z)({},h("premiumDiscount.amount",v("premiumDiscount.type")?{required:{value:!0,message:a("error_messages.percent_field_required")},pattern:{value:G,message:a("error_messages.place_enter_a_number")},max:"percent"===v("premiumDiscount.type")?{value:100,message:a("error_messages.no_more_then_100_can_be_entered")}:void 0,onChange:function(e){var n,t;return g("premiumDiscount.amount",v("premiumDiscount.type")?null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value:V(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value))}}:{required:{value:!0,message:a("error_messages.percent_field_required")},onChange:function(e){var n,t;return g("premiumDiscount.amount",v("premiumDiscount.type")?null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value:V(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value))}})),error:null===(n=y.premiumDiscount)||void 0===n?void 0:n.amount})}),(0,I.jsx)(c.ZP,{item:!0,md:3,xs:3,children:(0,I.jsx)(d.Z,{display:"flex",alignItems:"start",marginTop:"28px",children:(0,I.jsxs)(B,{className:"percent"===v("premiumDiscount.type")?"show":"",onClick:function(){return g("premiumDiscount.type","percent"===v("premiumDiscount.type")?"amount":"percent")},style:{borderColor:null!==(t=y.premiumDiscount)&&void 0!==t&&t.type?"red":"rgba(49,57,73,0.1)"},children:[(0,I.jsx)(R,{children:(0,I.jsx)(W,{})}),(0,I.jsx)(R,{style:{fontWeight:"500"},children:null===i||void 0===i||null===(s=i.data)||void 0===s?void 0:s.currency})]})})})]})})]})},L=t(5397),$=t(67783),K=t(59460),Q=function(e){var n,t,s,i=e.data,a=(0,P.$G)().t,r=((0,U.UO)().id,(0,D.h_)("/discount/get/bonus",{},{suspense:!1})),l=r.data,u=r.refetch,m=r.status,p=(0,S.cI)({defaultValues:{discounts:[{number:0,amount:0,type:"amount"}],defaultDiscount:{amount:0,type:"amount"}}}),x=p.handleSubmit,h=p.register,v=p.watch,g=p.control,f=p.setValue,y=p.reset,_=p.formState.errors,k=(0,D.uC)("discount/bonus/update","post",{onSuccess:function(e){e.data&&(u(),q.Am.success(a("general.success")))}}),C=k.mutate,w=k.status;(0,Z.useEffect)((function(){if("success"===m){var e,n,t=(null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.discounts)||[],s=(null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n.defaultDiscount)||[];y({discounts:t.map((function(e){return{number:e.number||0,amount:e.amount||0,type:e.type||"amount"}})),defaultDiscount:{amount:s.amount||0,type:s.type||"amount"}})}}),[m,l,y]);var z=(0,S.Dq)({name:"discounts",control:g}),M=z.fields,O=z.append,T=z.remove;return(0,I.jsxs)("form",{id:"website_conditions",onSubmit:x((function(e){var n,t,s;C({defaultDiscount:(0,o.Z)((0,o.Z)({},e.defaultDiscount),{},{amount:Number(null===(n=String(null===(t=e.defaultDiscount)||void 0===t?void 0:t.amount))||void 0===n?void 0:n.replace(" ","")),number:1}),discounts:null===(s=e.discounts)||void 0===s?void 0:s.map((function(e){var n;return(0,o.Z)((0,o.Z)({},e),{},{amount:Number(null===(n=String(e.amount))||void 0===n?void 0:n.replace(" ",""))})}))})})),children:[(0,I.jsxs)(b,{children:[(0,I.jsx)(j,{children:a("settings.initial_bonus")}),(0,I.jsx)(N.c7,{title:a("general.save"),variant:"contained",type:"submit",form:"website_conditions",disabled:"loading"===w})]}),(0,I.jsxs)(c.ZP,{container:!0,display:"block",children:[(0,I.jsxs)(c.ZP,{item:!0,md:8,xs:8,display:"flex",gap:2,paddingBlock:1,children:[(0,I.jsx)(c.ZP,{item:!0,md:4,xs:4,children:(0,I.jsx)(N.II,{label:a("driver.".concat(v("defaultDiscount.type"))),params:(0,o.Z)({},h("defaultDiscount.amount",v("defaultDiscount.type")?{required:{value:!0,message:a("error_messages.percent_field_required")},pattern:{value:G,message:a("error_messages.place_enter_a_number")},max:"percent"===v("defaultDiscount.type")?{value:100,message:a("error_messages.no_more_then_100_can_be_entered")}:void 0,onChange:function(e){var n,t;return f("defaultDiscount.amount",v("defaultDiscount.type")?null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value:V(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value))}}:{required:{value:!0,message:a("error_messages.percent_field_required")},onChange:function(e){var n,t;return f("defaultDiscount.amount",v("defaultDiscount.type")?null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value:V(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value))}})),error:null===(n=_.defaultDiscount)||void 0===n?void 0:n.amount})}),(0,I.jsx)(c.ZP,{item:!0,md:3,xs:3,children:(0,I.jsx)(d.Z,{display:"flex",alignItems:"start",marginTop:"28px",children:(0,I.jsxs)(B,{className:"percent"===v("defaultDiscount.type")?"show":"",onClick:function(){return f("defaultDiscount.type","percent"===v("defaultDiscount.type")?"amount":"percent")},style:{borderColor:null!==(t=_.defaultDiscount)&&void 0!==t&&t.type?"red":"rgba(49,57,73,0.1)"},children:[(0,I.jsx)(R,{children:(0,I.jsx)(W,{})}),(0,I.jsx)(R,{style:{fontWeight:"500"},children:null===i||void 0===i||null===(s=i.data)||void 0===s?void 0:s.currency})]})})})]}),M.map((function(e,n){var t,s,r,l,d;return(0,I.jsxs)(c.ZP,{container:!0,spacing:2,sx:{paddingBlock:1,display:"flex",flexWrap:"wrap"},children:[(0,I.jsx)(c.ZP,{item:!0,xs:12,sm:6,md:3,className:"flex items-end",children:(0,I.jsx)(N.oi,{control:g,name:"discounts.".concat(n,".number"),type:"number",rules:{required:!1},label:a("settings.number")})}),(0,I.jsx)(c.ZP,{item:!0,xs:12,sm:6,md:3,className:"flex items-end",children:(0,I.jsx)(N.II,{label:a("driver.".concat(v("discounts.".concat(n,".type")))),params:(0,o.Z)({},h("discounts.".concat(n,".amount"),v("discounts.".concat(n,".type"))?{required:{value:!0,message:a("error_messages.percent_field_required")},pattern:{value:G,message:a("error_messages.place_enter_a_number")},max:"percent"===v("discounts.".concat(n,".type"))?{value:100,message:a("error_messages.no_more_then_100_can_be_entered")}:void 0,onChange:function(e){var t,s;return f("discounts.".concat(n,".amount"),v("discounts.".concat(n,".type"))?null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value:V(null===e||void 0===e||null===(s=e.target)||void 0===s?void 0:s.value))}}:{required:{value:!0,message:a("error_messages.percent_field_required")},onChange:function(e){var t,s;return f("discounts.".concat(n,".amount"),v("discounts.".concat(n,".type"))?null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value:V(null===e||void 0===e||null===(s=e.target)||void 0===s?void 0:s.value))}})),error:null===(t=_.discounts)||void 0===t||null===(s=t[n])||void 0===s?void 0:s.amount})}),(0,I.jsx)(c.ZP,{item:!0,xs:12,sm:6,md:3,sx:{display:"flex",alignItems:"center",justifyContent:"center"},className:"flex items-end mt-5",children:(0,I.jsxs)(B,{className:"percent"===v("discounts.".concat(n,".type"))?"show":"",onClick:function(){return f("discounts.".concat(n,".type"),"percent"===v("discounts.".concat(n,".type"))?"amount":"percent")},style:{borderColor:null!==(r=_.discounts)&&void 0!==r&&null!==(l=r[n])&&void 0!==l&&l.type?"red":"rgba(49,57,73,0.1)"},children:[(0,I.jsx)(R,{children:(0,I.jsx)(W,{})}),(0,I.jsx)(R,{style:{fontWeight:500},children:null===i||void 0===i||null===(d=i.data)||void 0===d?void 0:d.currency})]})}),(0,I.jsx)(c.ZP,{item:!0,xs:12,sm:6,md:3,sx:{display:"flex",alignItems:"center",justifyContent:"center"},className:"flex items-end mt-5",children:(0,I.jsx)(L.Z,{sx:{cursor:"pointer",color:"#D54239",fontSize:"1.5rem"},onClick:function(){T(n)}})})]},e.id)})),(0,I.jsx)(c.ZP,{item:!0,xs:12,md:2,paddingBlock:2,children:(0,I.jsx)($.Z,{startIcon:(0,I.jsx)(K.pO,{}),type:"button",title:"".concat(a("general.add")),onClick:function(){O({number:0,amount:0,type:"amount"})}})})]})]})},H=function(e){var n=e.data,t=(0,P.$G)().t,s=((0,U.UO)().id,(0,D.h_)("/discount/get/regular",{},{suspense:!1})),i=s.data,a=s.refetch,r=s.status,l=(0,S.cI)({defaultValues:{discounts:[{number:0,amount:0,type:"amount"}]}}),d=l.handleSubmit,u=l.register,m=l.watch,p=l.control,x=l.setValue,h=l.reset,v=l.formState.errors,g=(0,D.uC)("/discount/update","post",{onSuccess:function(e){e.data&&(a(),q.Am.success(t("general.success")))}}),f=g.mutate,y=g.status;(0,Z.useEffect)((function(){if("success"===r){var e,n=(null===i||void 0===i||null===(e=i.data)||void 0===e?void 0:e.discounts)||[];h({discounts:n.map((function(e){return{number:e.number||0,amount:e.amount||0,type:e.type||"amount"}}))})}}),[r,i,h]);var _=(0,S.Dq)({name:"discounts",control:p}),k=_.fields,C=_.append,w=_.remove;return(0,I.jsxs)("form",{id:"website_conditions",onSubmit:d((function(e){var n;f({discounts:null===(n=e.discounts)||void 0===n?void 0:n.map((function(e){var n;return(0,o.Z)((0,o.Z)({},e),{},{amount:Number(null===(n=String(e.amount))||void 0===n?void 0:n.replace(" ",""))})}))})})),children:[(0,I.jsxs)(b,{children:[(0,I.jsx)(j,{children:t("settings.initial_discount")}),(0,I.jsx)(N.c7,{title:t("general.save"),variant:"contained",type:"submit",form:"website_conditions",disabled:"loading"===y})]}),(0,I.jsxs)(c.ZP,{container:!0,display:"block",children:[k.map((function(e,s){var i,a,r,l,d;return(0,I.jsxs)(c.ZP,{container:!0,spacing:2,sx:{paddingBlock:1,display:"flex",flexWrap:"wrap"},children:[(0,I.jsx)(c.ZP,{item:!0,xs:12,sm:6,md:3,className:"flex items-end",children:(0,I.jsx)(N.oi,{control:p,name:"discounts.".concat(s,".number"),type:"number",rules:{required:!1},label:t("settings.number")})}),(0,I.jsx)(c.ZP,{item:!0,xs:12,sm:6,md:3,className:"flex items-end",children:(0,I.jsx)(N.II,{label:t("driver.".concat(m("discounts.".concat(s,".type")))),params:(0,o.Z)({},u("discounts.".concat(s,".amount"),m("discounts.".concat(s,".type"))?{required:{value:!0,message:t("error_messages.percent_field_required")},pattern:{value:G,message:t("error_messages.place_enter_a_number")},max:"percent"===m("discounts.".concat(s,".type"))?{value:100,message:t("error_messages.no_more_then_100_can_be_entered")}:void 0,onChange:function(e){var n,t;return x("discounts.".concat(s,".amount"),m("discounts.".concat(s,".type"))?null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value:V(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value))}}:{required:{value:!0,message:t("error_messages.percent_field_required")},onChange:function(e){var n,t;return x("discounts.".concat(s,".amount"),m("discounts.".concat(s,".type"))?null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value:V(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value))}})),error:null===(i=v.discounts)||void 0===i||null===(a=i[s])||void 0===a?void 0:a.amount})}),(0,I.jsx)(c.ZP,{item:!0,xs:12,sm:6,md:3,sx:{display:"flex",alignItems:"center",justifyContent:"center"},className:"flex items-end mt-5",children:(0,I.jsxs)(B,{className:"percent"===m("discounts.".concat(s,".type"))?"show":"",onClick:function(){return x("discounts.".concat(s,".type"),"percent"===m("discounts.".concat(s,".type"))?"amount":"percent")},style:{borderColor:null!==(r=v.discounts)&&void 0!==r&&null!==(l=r[s])&&void 0!==l&&l.type?"red":"rgba(49,57,73,0.1)"},children:[(0,I.jsx)(R,{children:(0,I.jsx)(W,{})}),(0,I.jsx)(R,{style:{fontWeight:500},children:null===n||void 0===n||null===(d=n.data)||void 0===d?void 0:d.currency})]})}),(0,I.jsx)(c.ZP,{item:!0,xs:12,sm:6,md:3,sx:{display:"flex",alignItems:"center",justifyContent:"center"},className:"flex items-end mt-5",children:(0,I.jsx)(L.Z,{sx:{cursor:"pointer",color:"#D54239",fontSize:"1.5rem"},onClick:function(){w(s)}})})]},e.id)})),(0,I.jsx)(c.ZP,{item:!0,xs:12,md:2,paddingBlock:2,children:(0,I.jsx)($.Z,{startIcon:(0,I.jsx)(K.pO,{}),type:"button",title:"".concat(t("general.add")),onClick:function(){C({number:0,amount:0,type:"amount"})}})})]})]})},X=function(){var e,n,t=(0,z.lr)(),s=(0,l.Z)(t,2),i=(s[0],s[1],(0,Z.useState)(k.od[0].key)),a=(0,l.Z)(i,2),r=a[0],v=a[1],g=(0,C.w)(),M=(0,P.$G)().t,T=(0,Z.useState)(""),A=(0,l.Z)(T,2),V=A[0],G=A[1],U=(0,S.cI)(),L=U.control,$=U.reset,K=U.watch,X=U.register,J=U.handleSubmit,Y=U.setValue,ee=(0,D.h_)("settings-general",{},{onSuccess:function(e){var n=e.data;localStorage.setItem("settings",JSON.stringify(n))}}),ne=ee.data,te=ee.status,se=ee.refetch;(0,Z.useEffect)((function(){var e;null!==ne&&void 0!==ne&&null!==(e=ne.data)&&void 0!==e&&e.orderCalculateMethod&&Y("orderCalculateMethod",ne.data.orderCalculateMethod)}),[ne,Y]),console.log(null===ne||void 0===ne||null===(e=ne.data)||void 0===e?void 0:e.orderCalculateMethod);var ie=(0,D.uC)("settings-general","put",{onSuccess:function(){q.Am.success(M("general.success")),se()}}).mutate;(0,Z.useEffect)((function(){var e;"success"===te&&($(ne.data),G(null===(e=ne.data)||void 0===e?void 0:e.phonePrefix))}),[te]);var ae=J((function(e){var n=(0,o.Z)((0,o.Z)({},e),{},{orderCalculateMethod:e.orderCalculateMethod,orderPrice:e.orderPrice,phonePrefix:V,deliveryChangePrice:e.deliveryChangePrice||0,cashbackEnabled:void 0===e.cashbackEnabled||e.cashbackEnabled,cashbackPercentage:void 0!==e.cashbackPercentage?Number(e.cashbackPercentage):0,cashbackMinOrderAmount:void 0!==e.cashbackMinOrderAmount?Number(e.cashbackMinOrderAmount):0});console.log("Submitting settings:",n),ie(n)}));return(0,I.jsx)(f,{children:(0,I.jsxs)(c.ZP,{className:"md:flex",spacing:1,children:[(0,I.jsx)(c.ZP,{item:!0,className:"md:w-1/3 p-2",children:(0,I.jsx)("div",{className:"tabs",children:k.od.map((function(e){if(g(e.role))return(0,I.jsxs)("div",{className:"tab ".concat(r===e.key&&"active"),onClick:function(){return v(e.key)},children:[M("settings.".concat(e.name))," ",r===e.key&&(0,I.jsx)("div",{className:"left-border"})]},e.key)}))})}),(0,I.jsxs)(c.ZP,{className:"md:w-2/3 p-2",children:["functionality"===r&&(0,I.jsxs)("div",{className:"settings",children:[(0,I.jsxs)(b,{children:[(0,I.jsx)(j,{className:"md:text-2xl",children:M("settings.functionality")}),(0,I.jsx)(N.c7,{title:M("general.save"),variant:"contained",onClick:ae})]}),(0,I.jsxs)(c.ZP,{container:!0,spacing:2,children:[(0,I.jsx)(c.ZP,{item:!0,md:12,xs:12,children:(0,I.jsxs)("div",{className:"item",children:[(0,I.jsx)("span",{className:"key",children:M("settings.minimum_order_amount")}),(0,I.jsx)(N.oi,{control:L,name:"orderMinimumPrice",type:"number",rules:{required:!1}})]})}),(0,I.jsx)(c.ZP,{item:!0,md:12,xs:12,children:(0,I.jsxs)("div",{className:"item",children:[(0,I.jsx)("span",{className:"key",children:M("settings.switch_for_courier")}),(0,I.jsxs)(d.Z,{display:"flex",alignItems:"center",children:[(0,I.jsx)(u.Z,(0,o.Z)({checked:K("courierChangeOnline"),id:"courierChangeOnline"},X("courierChangeOnline"))),(0,I.jsx)("label",{className:"mb-1",htmlFor:"courierChangeOnline",children:M("general.allow")})]})]})}),(0,I.jsx)(c.ZP,{item:!0,md:12,xs:12,children:(0,I.jsxs)("div",{className:"item",children:[(0,I.jsx)("span",{className:"key",children:M("settings.banner_time")}),(0,I.jsx)(N.oi,{control:L,name:"bannerTime",type:"number"})]})}),(0,I.jsx)(c.ZP,{item:!0,md:12,xs:12,children:(0,I.jsxs)("div",{className:"item",children:[(0,I.jsx)("span",{className:"key",children:M("settings.store_radius")}),(0,I.jsx)(N.oi,{control:L,name:"storeRadius",type:"number",rules:{required:!1}})]})}),(0,I.jsx)(c.ZP,{item:!0,md:12,xs:12,children:(0,I.jsxs)("div",{className:"item",children:[(0,I.jsx)("span",{className:"key",children:M("settings.currency")}),(0,I.jsx)(N.oi,{control:L,name:"currency",type:"text",onCustomChange:function(e){var n=e.replace(/[^a-zA-Z'`]/g,"");Y("currency",n)}})]})}),(0,I.jsx)(c.ZP,{item:!0,md:12,xs:12,children:(0,I.jsxs)("div",{className:"item",children:[(0,I.jsx)("span",{className:"key",children:M("settings.order_delivery_time")}),(0,I.jsx)(N.oi,{control:L,name:"maxDeliveryTime",type:"number",rules:{required:!1}})]})}),(0,I.jsx)(c.ZP,{item:!0,md:12,xs:12,children:(0,I.jsxs)("div",{className:"item",children:[(0,I.jsx)("span",{className:"key",children:M("settings.couirer_return_time")}),(0,I.jsx)(N.oi,{control:L,name:"maxArrivalTime",type:"number",rules:{required:!1}})]})}),(0,I.jsx)(c.ZP,{item:!0,md:12,xs:12,children:(0,I.jsxs)("div",{className:"item",children:[(0,I.jsxs)("span",{className:"key",children:[M("settings.premium_days")," (kun)"]}),(0,I.jsx)(N.oi,{control:L,name:"premiumDays",type:"number",rules:{required:!1}})]})}),(0,I.jsx)(c.ZP,{item:!0,md:12,xs:12,children:(0,I.jsxs)("div",{className:"item",children:[(0,I.jsx)("span",{className:"key",children:M("settings.premium_price")}),(0,I.jsx)(N.oi,{control:L,name:"premiumPrice",type:"number",rules:{required:!1}})]})}),(0,I.jsx)(c.ZP,{item:!0,md:12,xs:12,children:(0,I.jsxs)("div",{className:"item",children:[(0,I.jsx)("span",{className:"key",children:M("general.order_calculate")}),(0,I.jsx)(m.Z,{fullWidth:!0,children:(0,I.jsx)(S.Qr,{name:"orderCalculateMethod",control:L,render:function(e){var n=e.field;return(0,I.jsxs)(p.Z,(0,o.Z)((0,o.Z)({},n),{},{value:n.value||"",sx:{borderRadius:"12px"},size:"medium",onChange:function(e){n.onChange(e.target.value),console.log("Tanlangan qiymat:",e.target.value)},children:[(0,I.jsx)(x.Z,{value:"by_distance",children:M("general.by_distance")}),(0,I.jsx)(x.Z,{value:"static",children:M("general.static")})]}))}})})]})}),K("orderCalculateMethod")&&(0,I.jsx)(c.ZP,{item:!0,md:12,xs:12,children:(0,I.jsxs)("div",{className:"item",children:[(0,I.jsx)("span",{className:"key",children:"by_distance"===K("orderCalculateMethod")?M("general.km_calculate_price"):M("general.static_price")}),(0,I.jsx)(N.oi,{control:L,name:"orderPrice",type:"number",rules:{min:{value:0,message:"Narx manfiy bo'lishi mumkin emas"}},inputProps:{min:0}})]})}),(0,I.jsx)(c.ZP,{item:!0,md:12,xs:12,children:(0,I.jsxs)("div",{className:"item",children:[(0,I.jsx)("span",{className:"key",children:M("general.savings_percentage")}),(0,I.jsx)(N.oi,{control:L,name:"customerSavedPercent",type:"number"})]})}),(0,I.jsx)(c.ZP,{item:!0,md:12,xs:12,children:(0,I.jsxs)("div",{className:"item",children:[(0,I.jsx)("span",{className:"key",children:"percent"===K("savedTimeCalculateMethod")?M("general.savings_time_percent"):M("general.savings_time_amount")}),(0,I.jsxs)("div",{className:"flex items-end justify-between",children:[(0,I.jsx)(N.oi,{control:L,name:"customerSavedTime",type:"number",rules:{required:!1,validate:function(e){return"percent"!==K("savedTimeCalculateMethod")||(e<=100||"Qiymat 100% dan katta")}}}),(0,I.jsx)(c.ZP,{className:"flex",children:(0,I.jsxs)(B,{className:"percent"===K("savedTimeCalculateMethod")?"show":"",onClick:function(){return Y("savedTimeCalculateMethod","percent"===K("savedTimeCalculateMethod")?"amount":"percent")},children:[(0,I.jsx)(R,{children:(0,I.jsx)(W,{})}),(0,I.jsx)(R,{children:(0,I.jsx)("span",{style:{fontSize:"11px"},children:"Miqdor"})})]})})]})]})}),(0,I.jsx)(c.ZP,{item:!0,md:12,xs:12,children:(0,I.jsxs)("div",{className:"item",children:[(0,I.jsx)("span",{className:"key",children:M("settings.invitePromocode")}),(0,I.jsxs)("div",{className:"flex items-end justify-between",children:[(0,I.jsx)(N.oi,{control:L,name:"invitePromocodeAmount",type:"number",rules:{required:!1,validate:function(e){return"percent"!==K("invitePromocodeType")||(e<=100||"Qiymat 100% dan katta")}}}),(0,I.jsx)(c.ZP,{className:"flex",children:(0,I.jsxs)(B,{className:"percent"===K("invitePromocodeType")?"show":"",onClick:function(){return Y("invitePromocodeType","percent"===K("invitePromocodeType")?"amount":"percent")},children:[(0,I.jsx)(R,{children:(0,I.jsx)(W,{})}),(0,I.jsx)(R,{children:(0,I.jsx)("span",{style:{fontSize:"11px"},children:"Miqdor"})})]})})]})]})}),(0,I.jsx)(c.ZP,{item:!0,md:12,xs:12,children:(0,I.jsxs)("div",{className:"item",children:[(0,I.jsx)("span",{className:"key",children:M("settings.delivery_change_limit")}),(0,I.jsx)(N.oi,{control:L,name:"deliveryChangeLimit",type:"number"})]})}),(0,I.jsx)(c.ZP,{item:!0,md:12,xs:12,children:(0,I.jsxs)("div",{className:"item",children:[(0,I.jsx)("span",{className:"key",children:M("settings.delivery_change_price")}),(0,I.jsx)(N.oi,{control:L,name:"deliveryChangePrice",type:"number",rules:{required:!1}})]})}),(0,I.jsx)(c.ZP,{item:!0,md:12,xs:12,children:(0,I.jsx)("div",{className:"item",style:{borderTop:"2px solid #e0e0e0",paddingTop:"20px",marginTop:"20px"},children:(0,I.jsx)(h.Z,{fontSize:"18px",fontWeight:"bold",marginBottom:"15px",children:M("settings.cashback_settings")||"Cashback Sozlamalari"})})}),(0,I.jsx)(c.ZP,{item:!0,md:12,xs:12,children:(0,I.jsxs)("div",{className:"item",children:[(0,I.jsx)("span",{className:"key",children:M("settings.cashback_enabled")||"Cashback yoqilgan"}),(0,I.jsxs)(d.Z,{display:"flex",alignItems:"center",children:[(0,I.jsx)(u.Z,(0,o.Z)({checked:null===(n=K("cashbackEnabled"))||void 0===n||n,id:"cashbackEnabled"},X("cashbackEnabled"))),(0,I.jsx)("label",{className:"mb-1",htmlFor:"cashbackEnabled",children:M("general.allow")})]})]})}),(0,I.jsx)(c.ZP,{item:!0,md:12,xs:12,children:(0,I.jsxs)("div",{className:"item",children:[(0,I.jsx)("span",{className:"key",children:M("settings.cashback_percentage")||"Cashback foizi (%)"}),(0,I.jsx)(N.oi,{control:L,name:"cashbackPercentage",type:"number",rules:{required:!1,min:{value:0,message:"Foiz manfiy bo'lishi mumkin emas"},max:{value:100,message:"Foiz 100 dan oshmasligi kerak"}},inputProps:{min:0,max:100,step:.1}}),(0,I.jsx)(h.Z,{fontSize:"12px",color:"#666",marginTop:"5px",children:M("settings.cashback_percentage_hint")||"Masalan: 5% = har 100,000 so'm uchun 5,000 so'm cashback"})]})}),(0,I.jsx)(c.ZP,{item:!0,md:12,xs:12,children:(0,I.jsxs)("div",{className:"item",children:[(0,I.jsx)("span",{className:"key",children:M("settings.cashback_min_order_amount")||"Minimal buyurtma summasi"}),(0,I.jsx)(N.oi,{control:L,name:"cashbackMinOrderAmount",type:"number",rules:{required:!1,min:{value:0,message:"Summa manfiy bo'lishi mumkin emas"}},inputProps:{min:0}}),(0,I.jsx)(h.Z,{fontSize:"12px",color:"#666",marginTop:"5px",children:M("settings.cashback_min_order_amount_hint")||"Bu summadan kam bo'lsa cashback berilmaydi (0 = cheklov yo'q)"})]})}),(0,I.jsx)(c.ZP,{item:!0,md:12,xs:12,children:(0,I.jsx)("div",{className:"item",children:(0,I.jsxs)(d.Z,{children:[(0,I.jsx)(h.Z,{fontSize:"13px",color:"#000",children:M("common.phone_prefix_comment")}),(0,I.jsx)(d.Z,{marginTop:"10px",children:(0,I.jsx)(y,{value:V,onChange:function(e){G(e.target.value)},sx:{"& fieldset":{border:"none"}},children:w.map((function(e){return(0,I.jsxs)(_,{value:null===e||void 0===e?void 0:e.prefix,children:[(0,I.jsx)("img",{src:"/images/phone/".concat(null===e||void 0===e?void 0:e.flag,".svg"),alt:null===e||void 0===e?void 0:e.flag,style:{width:"32px"}}),(0,I.jsxs)(h.Z,{fontFamily:"SF Pro Display",marginLeft:"12px",marginBottom:0,children:[M("common.country.".concat(null===e||void 0===e?void 0:e.translationKey)),"\xa0 (",null===e||void 0===e?void 0:e.prefix,")"]})]},null===e||void 0===e?void 0:e.flag)}))})})]})})})]})]}),"discountOrder"===r&&(0,I.jsx)("div",{className:"settings",children:(0,I.jsx)(H,{data:ne})}),"bonusOrder"===r&&(0,I.jsx)("div",{className:"settings",children:(0,I.jsx)(Q,{data:ne})}),"premiumDiscountOrder"===r&&(0,I.jsx)("div",{className:"settings",children:(0,I.jsx)(F,{data:ne})}),"mainAddress"===r&&(0,I.jsx)("div",{className:"settings",children:(0,I.jsx)(O,{})}),"websiteConditions"===r&&(0,I.jsx)("div",{className:"settings",children:(0,I.jsx)(E,{})})]})]})})},J=function(){return(0,I.jsx)(X,{})}},30709:function(e,n,t){t.d(n,{Fv:function(){return r},G4:function(){return s},od:function(){return a},v5:function(){return i}});var s=[{_id:"cash",name:"Naqd",trans_key:"cash"}],i=[{_id:"percent",name:"Foiz",trans_key:"percent"},{_id:"amount",name:"Miqdor",trans_key:"amount"}],a=[{name:"functionality",key:"functionality",role:"role"},{name:"discounts",key:"discountOrder",role:"role"},{name:"bonus",key:"bonusOrder",role:"role"},{name:"premium_discounts",key:"premiumDiscountOrder",role:"role"},{name:"main_address",key:"mainAddress",role:"role"},{name:"website_conditions",key:"websiteConditions",role:"role"}],r=[{rate:5},{rate:4},{rate:3},{rate:2},{rate:1}]},5397:function(e,n,t){var s=t(76189),i=t(80184);n.Z=(0,s.Z)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")}}]);
//# sourceMappingURL=762.7b215244.chunk.js.map