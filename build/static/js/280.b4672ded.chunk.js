"use strict";(self.webpackChunkbestune_admin=self.webpackChunkbestune_admin||[]).push([[280],{88892:function(n,e,o){var t=o(29439),i=o(72791),r=o(73405),a=o(80184);e.Z=function(n){var e=n.getCoordinate,o=n.center,d=n.height,s=(0,i.useState)(o),l=(0,t.Z)(s,2),c=l[0],u=l[1];return(0,i.useEffect)((function(){u(o)}),[o]),(0,a.jsx)(r.Yy,{children:(0,a.jsxs)(r.D5,{width:"100%",height:d||"500px",defaultState:{center:null!==o&&void 0!==o&&o.latitude?[null===o||void 0===o?void 0:o.latitude,null===o||void 0===o?void 0:o.longitude]:[41.315163390767026,69.27958692367339],zoom:14,behaviors:["default","scrollZoom"]},onClick:function(n){var o={latitude:n.get("coords")[0],longitude:n.get("coords")[1]};u(o),e(o)},modules:["geoObject.addon.editor"],children:[(0,a.jsx)(r.ah,{geometry:[null===c||void 0===c?void 0:c.latitude,null===c||void 0===c?void 0:c.longitude]}),(0,a.jsx)(r.ot,{}),(0,a.jsx)(r.Bo,{options:{float:"left"}}),(0,a.jsx)(r.Sj,{options:{float:"right"}}),(0,a.jsx)(r.Ly,{options:{float:"right"}})]})})}},1903:function(n,e,o){o.d(e,{Z:function(){return s}});var t,i=o(30168),r=o(47191),a=(0,o(17939).default)(r.LD)(t||(t=(0,i.Z)(["\n  display: flex;\n  flex-direction: column-reverse;\n  border: none;\n  width: 100%;\n  padding-bottom: 20px;\n  .quill {\n    .ql-container {\n      .ql-tooltip {\n        transform: translateX(97px);\n        z-index: 10;\n      }\n      .ql-editor {\n        background-color: #fff;\n        padding: 15px;\n        border-radius: 12px;\n        min-height: 80px;\n        transition: all 0.3s;\n        border: 1px solid #d9d9d9;\n        p {\n          margin: 0;\n          font-size: 14px;\n        }\n      }\n    }\n  }\n  .ql-toolbar {\n    padding: 0;\n    transition: opacity 1s ease-out;\n    border-radius: 0;\n    border-bottom: none;\n    margin-top: 10px;\n    button {\n      border: none;\n      margin: 0 5px;\n      svg {\n        width: 24px !important;\n        height: 24px !important;\n        fill: #000 !important;\n        path {\n          fill: #000;\n        }\n      }\n    }\n  }\n  .ql-editing {\n    left: 30px !important;\n    transform: translateX(0px) !important;\n    z-index: 100;\n  }\n"]))),d=o(80184),s=function(n){var e=n.value,o=n.onChange,t=n.onImageUpload,i=n.isError,r=n.type;return(0,d.jsx)(a,{controls:[["bold","italic","underline","strike","clean","unorderedList","orderedList","alignLeft","alignCenter","alignRight"]],isError:!!i,value:e,onChange:o,onImageUpload:t,type:r})}},90243:function(n,e,o){o.r(e),o.d(e,{default:function(){return T}});var t,i,r,a=o(1413),d=o(29439),s=o(61889),l=o(30168),c=o(17939),u=c.default.div(t||(t=(0,l.Z)(["\n  padding: 20px;\n  border-radius: 12px;\n  background: #fff;\n  box-shadow: 0px 0px 4px 0px rgba(0, 0, 0, 0.07);\n  .working-time {\n    display: flex;\n    align-items: end;\n    justify-content: space-between;\n    > div {\n      width: 48%;\n    }\n  }\n  .address-options {\n    position: absolute;\n    box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.1);\n    padding: 10px 0;\n    border-radius: 10px;\n    background-color: #fff;\n    max-height: 300px;\n    overflow: auto;\n    z-index: 10;\n    .option {\n      padding: 8px 15px;\n      cursor: pointer;\n      &:hover {\n        background-color: #f5f5f5;\n      }\n    }\n  }\n  .save-btn {\n    text-align: right;\n  }\n\n  .copyBtn {\n    width: 40px;\n    height: 40px;\n    border-radius: 10px;\n    background-color: #f5f5f5;\n\n    svg {\n      path {\n        fill: blue;\n      }\n    }\n  }\n"]))),m=o(35980),p=o(61134),x=o(39230),g=o(1903),f=o(72791),h=((0,c.default)("div")(i||(i=(0,l.Z)(['\n  border: 1px solid;\n  border-color: "grey" !important;\n  outline: none;\n']))),(0,c.default)("div")(r||(r=(0,l.Z)(["\n  .react-time-picker {\n    width: 100%;\n    .react-time-picker__wrapper {\n      width: 100%;\n      border-radius: 8px;\n      border: 1px solid #d9d9d9;\n      box-sizing: border-box;\n      color: #333333 !important;\n      padding: 9px 16px;\n      font-size: 16px;\n      line-height: 20px;\n      letter-spacing: -0.02em;\n      outline: none;\n      font-weight: 500;\n      transition: all 0.1s ease-out;\n      font-weight: 500;\n      transition: 0.2s ease all;\n      .react-time-picker__inputGroup {\n        input {\n          outline-color: #949494;\n        }\n      }\n    }\n    .react-time-picker__clock {\n      display: none;\n    }\n  }\n"])))),v=o(64717),b=o(80184),j=function(n){var e=n.control,o=n.name,t=n.errors,i=n.rules,r=n.label,a=(0,x.$G)().t;return(0,b.jsxs)(h,{children:[r&&(0,b.jsx)("label",{className:"custom-label",children:r}),(0,b.jsx)(p.Qr,{control:e,name:o,rules:i,render:function(n){var e=n.field,o=e.onChange,t=e.value;return(0,b.jsx)(v.Z,{clockIcon:null,className:"time-picker",onChange:o,value:t,format:"HH:mm",hourPlaceholder:"HH",minutePlaceholder:"mm",locale:"uz-UZ"})}}),!!t[o]&&(0,b.jsx)("h6",{className:"text-error mt-1",children:a("general.required")})]})},k=(0,f.memo)(j),w=o(62750),N=o(88892),Z=o(71257),C=o(87910),y=function(){var n,e=(0,f.useState)(!1),o=(0,d.Z)(e,2),t=o[0],i=o[1],r=(0,f.useState)(),l=(0,d.Z)(r,2),c=l[0],h=l[1],v=(0,f.useState)(""),j=(0,d.Z)(v,2),y=j[0],T=j[1],q=((0,Z.Z)(y,1e3).debouncedValue,(0,C.Z)()),S=(0,d.Z)(q,2),L=(S[0],S[1],(0,p.cI)()),_=L.control,z=L.setValue,I=L.handleSubmit,E=L.formState,P=L.reset,G=L.watch,H=(0,x.$G)().t,U=(0,w.h_)("store/get",{},{suspense:!1}),V=U.data,B=U.status,D=(0,w.uC)("address/by-name","post",{onSuccess:function(){i(!0)}}),X=D.mutate,$=D.data;(0,f.useEffect)((function(){"string"===typeof y&&y.trim()&&X({name:y})}),[y]);var O=(0,w.uC)("store/update","put").mutate,Q=(0,w.uC)("address/by-point","post",{onSuccess:function(n){var e=n.data;z("addressName",null===e||void 0===e?void 0:e.name)}}),R=Q.mutate;(0,f.useEffect)((function(){null!==c&&void 0!==c&&c.latitude&&null!==c&&void 0!==c&&c.longitude?R({latitude:c.latitude,longitude:c.longitude}):console.error("Coordinates are missing")}),[R,c]),(0,f.useEffect)((function(){if("success"===B){var n,e,o,t,i=null===V||void 0===V?void 0:V.data;P((0,a.Z)((0,a.Z)({},i),{},{imageId:i.image,startTime:11===(null===(n=i.workTime)||void 0===n?void 0:n.length)?null===(e=i.workTime)||void 0===e?void 0:e.slice(0,5):"",endTime:11===(null===(o=i.workTime)||void 0===o?void 0:o.length)?null===(t=i.workTime)||void 0===t?void 0:t.slice(-5):"",addressLocation:i.addressLocation}))}}),[B,V]);return(0,b.jsx)(u,{children:(0,b.jsx)("form",{onSubmit:I((function(n){var e={name:n.name,imageId:n.imageId._id,description:n.description,workTime:n.startTime?"".concat(n.startTime,"-").concat(n.endTime):void 0,phoneNumber:n.phoneNumber,addressName:n.addressName,addressLocation:c};O(e)})),children:(0,b.jsxs)(s.ZP,{container:!0,spacing:3,children:[(0,b.jsxs)(s.ZP,{item:!0,md:6,children:[(0,b.jsx)("div",{className:"d-flex gap-4",children:(0,b.jsx)(m.aG,{control:_,setValue:z,name:"imageId",rules:{required:!1},className:"mb-3",accept:".png, .jpg, .jpeg"})}),(0,b.jsx)("div",{className:"mb-3",children:(0,b.jsx)(m.oi,{control:_,name:"name",label:H("common.companyName")})}),(0,b.jsxs)("div",{className:"mb-3 working-time",children:[(0,b.jsx)(k,{control:_,name:"startTime",errors:E.errors,label:H("common.workTime"),rules:{required:!0}}),(0,b.jsx)(k,{control:_,name:"endTime",errors:E.errors,rules:{required:!0}})]}),(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)(m.oi,{control:_,name:"addressName",label:H("common.address"),rules:{required:!1},onCustomChange:function(n){return T(n)}}),(0,b.jsx)("div",{className:"address-options",children:t&&(null===$||void 0===$||null===(n=$.data)||void 0===n?void 0:n.map((function(n){return(0,b.jsx)("div",{className:"option",onClick:function(){z("addressName",n.name),z("addressLocation",{latitude:n.latitude,longitude:n.longitude}),i(!1)},children:n.name})})))})]}),(0,b.jsx)("div",{className:"mb-3",children:(0,b.jsx)(m.sb,{control:_,name:"phoneNumber",label:H("common.phoneNumber"),rules:{required:!1}})}),(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)("label",{className:"custom-label",children:H("common.description")}),(0,b.jsx)(g.Z,{value:G("description"),onChange:function(n){return z("description",n)}})]})]}),(0,b.jsxs)(s.ZP,{item:!0,md:6,children:[(0,b.jsx)("div",{className:"save-btn",children:(0,b.jsx)(m.c7,{title:H("general.save"),variant:"contained",type:"submit"})}),(0,b.jsxs)("div",{className:"mt-5",children:[(0,b.jsx)("br",{}),(0,b.jsx)(N.Z,{getCoordinate:h,center:G("addressLocation"),height:"70vh"})]})]})]})})})},T=y}}]);
//# sourceMappingURL=280.b4672ded.chunk.js.map