{"version":3,"file":"static/js/210.3be1a0bd.chunk.js","mappings":"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","sources":["pages/category/components/CategoryForm.tsx","pages/category/container/Category.tsx","pages/category/container/category.columns.tsx","pages/category/index.tsx","pages/category/info/CategoryChildForm.tsx","pages/category/info/CategoryChild.tsx","pages/category/info/categoryChild.columns.tsx","utils/numberFormat.ts"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport { Grid } from \"@mui/material\";\nimport { AutoCompleteForm, ImageInput, TextInput } from \"components\";\nimport { UseFormReturn } from \"react-hook-form\";\nimport { useApi, useApiMutation } from \"hooks/useApi/useApiHooks\";\nimport { useTranslation } from \"react-i18next\";\n\ninterface IBranchForm {\n  formStore: UseFormReturn<any>;\n  resetForm: () => void;\n  editingCategoryId?: any;\n  setRender?: React.Dispatch<React.SetStateAction<boolean>>;\n\n}\n\nconst CategoryForm: React.FC<IBranchForm> = ({\n  formStore,\n  resetForm,\n  editingCategoryId,\n  setRender,\n}) => {\n  const { t } = useTranslation();\n  const { control, handleSubmit, reset, setValue } = formStore;\n\n  const { mutate, status } = useApiMutation<any>(\n    editingCategoryId\n      ? `category/update`\n      : \"category/create\",\n    editingCategoryId ? \"put\" : \"post\",\n  );\n\n  const { data: getByIdData, status: getByIdStatus } = useApi(`category/get-by-id/${editingCategoryId}`, {}, {\n    enabled: !!editingCategoryId,\n    suspense: false\n  })\n\n  const sumbit = (data: any) => {\n    mutate({\n      ...data,\n      imageId: data.imageId?._id,\n      _id: editingCategoryId,\n      ...(editingCategoryId ? {} : { storeId: \"uygaayt\" }),\n    });\n  };\n\n  useEffect(() => {\n    if (status === \"success\") {\n      resetForm();\n      setRender?.(prev => !prev);\n    }\n  }, [status]);\n\n  useEffect(() => {\n    if (getByIdStatus === 'success'  && getByIdData?.data) {\n      reset({\n        name: getByIdData.data.name,\n        imageId: getByIdData.data.image,\n      });\n    }\n  }, [getByIdStatus, getByIdData]);\n\n  return (\n    <div className=\"custom-drawer\">\n      <form id=\"category\" onSubmit={handleSubmit(sumbit)}>\n        <Grid container spacing={2}>\n          <Grid item md={12}>\n            <TextInput name=\"name.uz\" control={control} label={t(\"common.name\") + ' (Uz)'} />\n          </Grid>\n          <Grid item md={12}>\n            <TextInput name=\"name.ru\" control={control} label={t(\"common.name\") + ' (Ru)'} />\n          </Grid>\n          <Grid item md={12}>\n            <TextInput name=\"name.en\" control={control} label={t(\"common.name\") + ' (En)'} />\n          </Grid>\n          <Grid item md={12}>\n            <label className=\"py-2\" htmlFor=\"\">{t('general.recommendation_img')}</label><br /><br />\n            <ImageInput\n              control={control}\n              setValue={setValue}\n              name=\"imageId\"\n              accept=\".png, .jpg, .jpeg\"\n            />\n          </Grid>\n        </Grid>\n      </form>\n    </div>\n  );\n};\n\nexport default CategoryForm;\n","import { DragTable, FormDrawer, Table } from \"components\";\nimport { useCategoryCol } from \"./category.columns\";\nimport { useAppDispatch } from \"store/storeHooks\";\nimport { setOpenDrawer } from \"components/elements/FormDrawer/formdrawer.slice\";\nimport { useTranslation } from \"react-i18next\";\nimport { useState } from \"react\";\nimport CategoryForm from \"../components/CategoryForm\";\nimport { useForm } from \"react-hook-form\";\nimport WarningModal from \"components/common/WarningModal/WarningModal\";\nimport { useRoleManager } from \"services/useRoleManager\";\n\nconst Category = () => {\n  const [render, setRender] = useState<boolean>(false);\n  // const columns = useCategoryColumns();\n  const [editingCategoryId, setEditingCategoryId] = useState<any>();\n  const [categoryId, setCategoryId] = useState<any>();\n  const columnsDrag = useCategoryCol({ setEditingCategoryId, setCategoryId });\n  const dis = useAppDispatch();\n  const { t } = useTranslation();\n  const formStore = useForm<any>();\n  const hasAccess = useRoleManager();\n\n  const resetForm = () => {\n    setEditingCategoryId(undefined);\n    formStore.reset({\n      name: { uz: \"\", ru: \"\", en: \"\" },\n      imageId: \"\",\n    });\n  };\n\n  return (\n    <>\n      {/* <Table\n        columns={columns}\n        dataUrl=\"category/product\"\n        searchable\n        onAddButton={() => dis(setOpenDrawer(true))}\n        onEditColumn={(row) => {\n          setEditingCategoryId(row._id);\n          dis(setOpenDrawer(true));\n        }}\n        onDeleteColumn={(row) => setCategoryId(row._id)}\n      /> */}\n\n      <DragTable\n        columns={columnsDrag}\n        dataUrl=\"/category/paging\"\n        dragUrl=\"/category/positions\"\n        dragKey=\"categoryIds\"\n        render={render}\n        setRender={setRender}\n        onAddButton={hasAccess(\"categoryCreate\") ? () => dis(setOpenDrawer(true)) : undefined}\n      />\n      <WarningModal\n        open={categoryId}\n        setOpen={setCategoryId}\n        setRender={setRender}\n        url=\"category/delete\"\n      />\n      <FormDrawer\n        FORM_ID=\"category\"\n        isEditing={!!editingCategoryId}\n        customTitle={t(\"general.addCategory\")}\n        onClose={resetForm}\n      >\n        <CategoryForm\n          formStore={formStore}\n          setRender={setRender}\n          resetForm={resetForm}\n          editingCategoryId={editingCategoryId}\n        />\n      </FormDrawer>\n    </>\n  );\n};\n\nexport default Category;\n","import { IconButton } from \"@mui/material\";\nimport { GridColumns } from \"@mui/x-data-grid\";\nimport { DeleteIcon } from \"assets/svgs\";\nimport { setOpenDrawer } from \"components/elements/FormDrawer/formdrawer.slice\";\nimport EditIcon from \"components/elements/Table/assets/EditIcon\";\nimport { get } from \"lodash\";\nimport { useTranslation } from \"react-i18next\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useRoleManager } from \"services/useRoleManager\";\nimport { useAppDispatch } from \"store/storeHooks\";\nimport { numberFormat } from \"utils/numberFormat\";\n\nexport const useCategoryColumns = (): GridColumns => {\n  const { t } = useTranslation();\n\n  return [\n    {\n      field: t(\"common.categoryName\"),\n      renderCell({ row }) {\n        return get(row, \"name\", \"\");\n      },\n    },\n  ];\n};\n\ninterface IUseStoreCol {\n  setCategoryId?: React.Dispatch<React.SetStateAction<string>>;\n  setEditingCategoryId?: React.Dispatch<React.SetStateAction<string>>;\n}\n\nexport const useCategoryCol = ({\n  setCategoryId,\n  setEditingCategoryId,\n}: IUseStoreCol) => {\n  const dis = useAppDispatch();\n  const { t } = useTranslation();\n  const hasAccess = useRoleManager();\n  const navigate = useNavigate();\n  const currentLang = localStorage.getItem(\"i18nextLng\") || \"uz\";\n\n  return [\n    {\n      key: \"sort\",\n      width: \"5%\",\n    },\n    {\n      title: \"№\",\n      dataIndex: \"id\",\n      key: \"id\",\n      width: \"5%\",\n      render: (item: any, record: any, index: number) => <>{index + 1}</>,\n    },\n    {\n      title: t(\"common.categoryName\"),\n      dataIndex: \"name\",\n      key: \"name\",\n      render: (text: string, record: any) => (\n        <p style={{cursor: \"pointer\"}}\n          className=\"text-blue-600 hover:text-blue-800 font-medium\"\n          onClick={() => navigate(`/category_child?parentId=${record._id}`, { state: { categoryId: record._id } })}\n        > \n        {/* @ts-ignore */}\n          {text?.[currentLang]}\n        </p>\n      ),\n    },\n    {\n      title: t(\"common.product\") + \" soni\",\n      dataIndex: \"productCount\",\n      key: \"productCount\",\n      render: (text: string, record: any) => {\n        return numberFormat(text);\n      },\n    },\n    {\n      title: \"\",\n      render: (_: any, record: any) => {\n        return (\n          <div className=\"d-flex gap-2 justify-content-end\">\n            {hasAccess(\"categoryUpdate\") && (\n              <IconButton\n                onClick={() => {\n                  setEditingCategoryId?.(record?._id);\n                  dis(setOpenDrawer(true));\n                }}\n              >\n                <EditIcon />\n              </IconButton>\n            )}\n            {hasAccess(\"categoryDelete\") && (\n              <IconButton onClick={() => {\n                setCategoryId?.(record?._id)\n              }}>\n                <DeleteIcon />\n              </IconButton>\n            )}\n          </div>\n        );\n      },\n    },\n  ];\n};\n","import {Route, Routes } from \"react-router-dom\";\nimport Category from \"./container/Category\";\nimport CategoryChild from \"./info/CategoryChild\";\n\nconst index = () => {\n  return (\n    <Routes>\n      <Route path=\":id\" element={<CategoryChild />} />\n      <Route path=\"*\" element={<Category/>} />\n    </Routes>\n  );\n};\n\nexport default index;\n","import React, { useEffect } from \"react\";\nimport { Grid } from \"@mui/material\";\nimport { AutoCompleteForm, ImageInput, TextInput } from \"components\";\nimport { UseFormReturn } from \"react-hook-form\";\nimport { useApi, useApiMutation } from \"hooks/useApi/useApiHooks\";\nimport { useTranslation } from \"react-i18next\";\nimport useAllQueryParams from \"hooks/useGetAllQueryParams/useAllQueryParams\";\n\ninterface IBranchForm {\n  formStore: UseFormReturn<any>;\n  resetForm: () => void;\n  editingCategoryId?: any;\n  setRender?: React.Dispatch<React.SetStateAction<boolean>>;\n\n}\n\nconst CategoryChildForm: React.FC<IBranchForm> = ({\n  formStore,\n  resetForm,\n  editingCategoryId,\n  setRender,\n}) => {\n  const { t } = useTranslation();\n  const { control, handleSubmit, reset, setValue } = formStore;\n  const allParams = useAllQueryParams();\n\n\n  const { mutate, status } = useApiMutation<any>(\n    editingCategoryId\n      ? `category/update`\n      : \"category/create\",\n    editingCategoryId ? \"put\" : \"post\"\n  );\n\n  const { data: getByIdData, status: getByIdStatus } = useApi(`category/get-by-id/${editingCategoryId}`, {}, {\n    enabled: !!editingCategoryId,\n    suspense: false\n  })\n\n  const sumbit = (data: any) => {\n    mutate({\n      ...data,\n      imageId: data.imageId?._id,\n      _id: editingCategoryId,\n      parentId: allParams.parentId,\n      ...(editingCategoryId ? {} : { storeId: \"uygaayt\" }),\n    });\n  };\n\n  useEffect(() => {\n    if (status === \"success\") {\n      resetForm();\n      setRender?.(prev => !prev);\n    }\n  }, [status]);\n\n  useEffect(() => {\n    if (getByIdStatus === 'success') {\n      reset({\n        name: getByIdData.data.name,\n        imageId: getByIdData.data.image,\n      });\n    }\n  }, [getByIdStatus, getByIdData]);\n\n  return (\n    <div className=\"custom-drawer\">\n      <form id=\"category\" onSubmit={handleSubmit(sumbit)}>\n        <Grid container spacing={2}>\n          <Grid item md={12}>\n            <TextInput name=\"name.uz\" control={control} label={t(\"common.name\") + ' (Uz)'} />\n          </Grid>\n          <Grid item md={12}>\n            <TextInput name=\"name.ru\" control={control} label={t(\"common.name\") + ' (Ru)'} />\n          </Grid>\n          <Grid item md={12}>\n            <TextInput name=\"name.en\" control={control} label={t(\"common.name\") + ' (En)'} />\n          </Grid>\n          <Grid item md={12}>\n            <ImageInput\n              control={control}\n              setValue={setValue}\n              name=\"imageId\"\n              rules={{ required: false }}\n              accept=\".png, .jpg, .jpeg\"\n            />\n          </Grid>\n        </Grid>\n      </form>\n    </div>\n  );\n};\n\nexport default CategoryChildForm;\n","import { DragTable, FormDrawer, Table } from \"components\";\nimport { useCategoryCol, useCategoryColumns } from \"./categoryChild.columns\"\nimport { useAppDispatch } from \"store/storeHooks\";\nimport { setOpenDrawer } from \"components/elements/FormDrawer/formdrawer.slice\";\nimport { useTranslation } from \"react-i18next\";\nimport { useState } from \"react\";\nimport CategoryForm from \"../components/CategoryForm\";\nimport { useForm } from \"react-hook-form\";\nimport WarningModal from \"components/common/WarningModal/WarningModal\";\nimport { useRoleManager } from \"services/useRoleManager\";\nimport useAllQueryParams from \"hooks/useGetAllQueryParams/useAllQueryParams\";\nimport CategoryChildForm from \"./CategoryChildForm\";\n\nconst CategoryChild = () => {\n  const [render, setRender] = useState<boolean>(false);\n  // const columns = useCategoryColumns();\n  const [editingCategoryId, setEditingCategoryId] = useState<any>();\n  const [categoryId, setCategoryId] = useState<any>();\n  const columnsDrag = useCategoryCol({ setEditingCategoryId, setCategoryId });\n  const dis = useAppDispatch();\n  const { t } = useTranslation();\n  const formStore = useForm<any>();\n  const hasAccess = useRoleManager();\n\n  const resetForm = () => {\n    setEditingCategoryId(undefined);\n    formStore.reset({\n      name: \"\",\n      imageId: \"\",\n    });\n  };\n\n  const allParams = useAllQueryParams();\n\n  return (\n    <>\n      {/* <Table\n        columns={columns}\n        dataUrl=\"category/product\"\n        searchable\n        onAddButton={() => dis(setOpenDrawer(true))}\n        onEditColumn={(row) => {\n          setEditingCategoryId(row._id);\n          dis(setOpenDrawer(true));\n        }}\n        onDeleteColumn={(row) => setCategoryId(row._id)}\n      /> */}\n\n      <DragTable\n        columns={columnsDrag}\n        dataUrl={`/category/paging`}\n        dragUrl=\"/category/positions\"\n        dragKey=\"categoryIds\"\n        render={render}\n        setRender={setRender}\n        onAddButton={() => dis(setOpenDrawer(true))}\n        exQueryParams={{\n          parentId: allParams.parentId,\n        }}\n      />\n      <WarningModal\n        open={categoryId}\n        setOpen={setCategoryId}\n        setRender={setRender}\n        url=\"category/delete\"\n      />\n      <FormDrawer\n        FORM_ID=\"category\"\n        isEditing={!!editingCategoryId}\n        customTitle={t(\"general.addCategory\")}\n        onClose={resetForm}\n      >\n        <CategoryChildForm\n          formStore={formStore}\n          setRender={setRender}\n          resetForm={resetForm}\n          editingCategoryId={editingCategoryId}\n        />\n      </FormDrawer>\n    </>\n  );\n};\n\nexport default CategoryChild;\n","import { IconButton } from \"@mui/material\";\nimport { GridColumns } from \"@mui/x-data-grid\";\nimport { DeleteIcon } from \"assets/svgs\";\nimport { setOpenDrawer } from \"components/elements/FormDrawer/formdrawer.slice\";\nimport EditIcon from \"components/elements/Table/assets/EditIcon\";\nimport { get } from \"lodash\";\nimport { useTranslation } from \"react-i18next\";\nimport { useRoleManager } from \"services/useRoleManager\";\nimport { useAppDispatch } from \"store/storeHooks\";\nimport { numberFormat } from \"utils/numberFormat\";\n\nexport const useCategoryColumns = (): GridColumns => {\n  const { t } = useTranslation();\n\n  return [\n    {\n      field: t(\"common.categoryName\"),\n      renderCell({ row }) {\n        return get(row, \"name\", \"\");\n      },\n    },\n  ];\n};\n\ninterface IUseStoreCol {\n  setCategoryId?: React.Dispatch<React.SetStateAction<string>>;\n  setEditingCategoryId?: React.Dispatch<React.SetStateAction<string>>;\n}\n\nexport const useCategoryCol = ({\n  setCategoryId,\n  setEditingCategoryId,\n}: IUseStoreCol) => {\n  const dis = useAppDispatch();\n  const { t } = useTranslation();\n  const hasAccess = useRoleManager();\n  const currentLang = localStorage.getItem(\"i18nextLng\") || \"uz\";\n\n  return [\n    {\n      key: \"sort\",\n      width: \"5%\",\n    },\n    {\n      title: \"№\",\n      dataIndex: \"id\",\n      key: \"id\",\n      width: \"5%\",\n      render: (item: any, record: any, index: number) => <>{index + 1}</>,\n    },\n    {\n      title: t(\"common.categoryName\"),\n      dataIndex: \"name\",\n      key: \"name\",\n      render: (text: string, record: any) => (\n          // @ts-ignore\n          text?.[currentLang]\n      ),\n    },\n    {\n      title: t(\"common.product\") + \" soni\",\n      dataIndex: \"productCount\",\n      key: \"productCount\",\n      render: (text: string, record: any) => {\n        return numberFormat(text);\n      },\n    },\n    {\n      title: \"\",\n      render: (_: any, record: any) => {\n        return (\n          <div className=\"d-flex gap-2 justify-content-end\">\n            {hasAccess(\"categoryCreate\") && (\n              <IconButton\n                onClick={() => {\n                  setEditingCategoryId?.(record?._id);\n                  dis(setOpenDrawer(true));\n                }}\n              >\n                <EditIcon />\n              </IconButton>\n            )}\n            {hasAccess(\"categoryDelete\") && (\n              <IconButton onClick={() => setCategoryId?.(record?._id)}>\n                <DeleteIcon />\n              </IconButton>\n            )}\n          </div>\n        );\n      },\n    },\n  ];\n};\n","export const numberFormat = (number: any) => {\n  if (number || number === 0) {\n    // Floating-point xatoliklarni oldini olish\n    const rounded = Math.round((number + Number.EPSILON) * 100) / 100;\n\n    return rounded\n      .toLocaleString(\"en-US\", {\n        minimumFractionDigits: 0, // Har doim 2 kasr\n        maximumFractionDigits: 0, // Kasr 2 dan oshmaydi\n      })\n      .replaceAll(\",\", \" \"); // Minglik ajratgich\n  }\n  return \"\";\n};\n"],"names":["formStore","resetForm","editingCategoryId","setRender","t","useTranslation","control","handleSubmit","reset","setValue","useApiMutation","mutate","status","useApi","enabled","suspense","getByIdData","data","getByIdStatus","useEffect","prev","name","imageId","image","className","id","onSubmit","_id","storeId","Grid","container","spacing","item","md","label","htmlFor","accept","useState","render","setEditingCategoryId","categoryId","setCategoryId","columnsDrag","dis","useAppDispatch","hasAccess","useRoleManager","navigate","useNavigate","currentLang","localStorage","getItem","key","width","title","dataIndex","record","index","text","style","cursor","onClick","state","numberFormat","_","IconButton","setOpenDrawer","EditIcon","useCategoryCol","useForm","undefined","uz","ru","en","columns","dataUrl","dragUrl","dragKey","onAddButton","WarningModal","open","setOpen","url","FORM_ID","isEditing","customTitle","onClose","path","element","CategoryChild","allParams","useAllQueryParams","parentId","rules","required","exQueryParams","number","Math","round","Number","EPSILON","toLocaleString","minimumFractionDigits","maximumFractionDigits","replaceAll"],"sourceRoot":""}