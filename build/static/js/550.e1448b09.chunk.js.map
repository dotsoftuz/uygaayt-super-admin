{"version":3,"file":"static/js/550.e1448b09.chunk.js","mappings":"8OAgDA,EA1Ce,WACb,IAAQA,GAAMC,EAAAA,EAAAA,MAAND,EACFE,GAAWC,EAAAA,EAAAA,MACXC,ECJ0B,WAChC,IAAQJ,GAAMC,EAAAA,EAAAA,MAAND,EAER,MAAO,CACL,CACEK,MAAOL,EAAE,mBACTM,WAAU,YAAW,IAARC,EAAG,EAAHA,IACLC,GAAWC,EAAAA,EAAAA,KAAIF,EAAK,oBAAqB,IACzCG,EAASF,EAASG,OAAS,GAC3BC,EAAcF,EAAM,UAAMF,EAASK,MAAM,EAAG,IAAG,OAAQL,EAE7D,OACE,iBAAMM,MAAOJ,EAASF,OAAWO,EAAU,SACxCH,GAGP,GAEF,CACEP,MAAOL,EAAE,sBACTM,WAAU,YAAW,IAARC,EAAG,EAAHA,IACX,OAAOE,EAAAA,EAAAA,KAAIF,EAAK,uBAAwB,GAC1C,GAEF,CACEF,MAAO,cACPW,UAAU,EACVC,WAAYjB,EAAE,sBACdM,WAAU,YAAW,IAARC,EAAG,EAAHA,IACX,OAAOE,EAAAA,EAAAA,KAAIF,EAAK,eAAgB,GAClC,GAEF,CACEF,MAAO,mBACPW,UAAU,EACVC,WAAYjB,EAAE,qBACdM,WAAU,YAAW,IAARC,EAAG,EAAHA,IACX,OAAOW,EAAAA,EAAAA,IAAaT,EAAAA,EAAAA,KAAIF,EAAK,cAAe,IAC9C,GAGN,CDrCkBY,GAKVC,GACJ,UAACC,EAAA,GAAI,CAACC,UAAU,+EAA8E,WAC5F,SAACD,EAAA,GAAI,CAACC,UAAU,kBAAiB,UAC/B,SAAC,KAAkB,CACjBC,WAAW,kBACXC,WAAW,cACXC,YAAazB,EAAE,mBACf0B,eAAgB,SAACC,GAAM,OAAW,OAANA,QAAM,IAANA,OAAM,EAANA,EAAQC,SAAS,OAGjD,SAACP,EAAA,GAAI,CAACC,UAAU,mCAAkC,UAChD,SAAC,KAAe,OAElB,SAACD,EAAA,GAAI,CAACC,UAAU,kBAAiB,UAC/B,SAAC,KAAY,CAACO,IAjBL,kCAuBf,OACE,+BACE,SAAC,KAAK,CACJzB,QAASA,EACT0B,QAAQ,kBACRC,eAAgBX,EAEhBY,cAAe,CAAC,EAChBC,WAAY,SAAC1B,GAAG,OAAKL,EAAS,aAAD,OAAcK,EAAI2B,KAAM,KAI7D,EEnCA,EARc,WACZ,OACE,SAAC,KAAM,WACL,SAAC,KAAK,CAACC,KAAK,IAAIC,SAAS,SAACC,EAAiB,OAGjD,C,wDCTO,IAAMnB,EAAe,SAACoB,GAC3B,OAAIA,GAAqB,IAAXA,GAEIC,KAAKC,MAAkC,KAA3BF,EAASG,OAAOC,UAAkB,KAG3DC,eAAe,QAAS,CACvBC,sBAAuB,EACvBC,sBAAuB,IAExBC,WAAW,IAAK,KAEd,EACT,C","sources":["pages/customer_analytics/container/CustomerAnalytics.tsx","pages/customer_analytics/container/customer_analytics.columns.tsx","pages/customer_analytics/index.tsx","utils/numberFormat.ts"],"sourcesContent":["import { AutoCompleteFilter, ExportButton, RangeDatePicker, Table } from \"components\";\nimport { useCustomerColumns } from \"./customer_analytics.columns\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Grid } from \"@mui/material\";\nimport { useTranslation } from \"react-i18next\";\n\nconst Client = () => {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const columns = useCustomerColumns();\n\n  const exportUrl = `/report/customer/export/`;\n\n\n  const renderHeader = (\n    <Grid className=\"w-full lg:w-[60%] md:flex md:grid-cols-3 gap-3 justify-end items-center py-2\">\n      <Grid className=\"md:w-[30%] py-1\" >\n        <AutoCompleteFilter\n          optionsUrl=\"customer/paging\"\n          filterName=\"customer_id\"\n          placeholder={t(\"common.customer\")}\n          getOptionLabel={(option) => option?.firstName}\n        />\n      </Grid>\n      <Grid className=\"md:w-[40%] py-1 flex justify-end\" >\n        <RangeDatePicker />\n      </Grid>\n      <Grid className=\"md:w-[30%] py-1\" >\n        <ExportButton url={exportUrl} />\n      </Grid>\n    </Grid>\n  );\n\n\n  return (\n    <>\n      <Table\n        columns={columns}\n        dataUrl=\"report/customer\"\n        headerChildren={renderHeader}\n        // searchable\n        exQueryParams={{}}\n        onRowClick={(row) => navigate(`/customer/${row._id}`)}\n      />\n    </>\n  );\n};\n\nexport default Client;\n","import { GridColumns } from \"@mui/x-data-grid\";\nimport { get } from \"lodash\";\nimport { useTranslation } from \"react-i18next\";\nimport { numberFormat } from \"utils/numberFormat\";\n\nexport const useCustomerColumns = (): GridColumns => {\n  const { t } = useTranslation();\n\n  return [\n    {\n      field: t(\"common.fullName\"),\n      renderCell({ row }) {\n        const fullName = get(row, \"customer.fullName\", \"\");\n        const isLong = fullName.length > 20;\n        const displayText = isLong ? `${fullName.slice(0, 20)}...` : fullName;\n    \n        return (\n          <span title={isLong ? fullName : undefined}>\n            {displayText}\n          </span>\n        );\n      },\n    },\n    {\n      field: t(\"common.phoneNumber\"),\n      renderCell({ row }) {\n        return get(row, \"customer.phoneNumber\", \"\");\n      },\n    },\n    {\n      field: \"totalOrders\",\n      sortable: true,\n      headerName: t(\"common.orderAmount\")!,\n      renderCell({ row }) {\n        return get(row, \"total_amount\", \"\");\n      },\n    },\n    {\n      field: \"totalOrdersPrice\",\n      sortable: true,\n      headerName: t(\"common.orderPrice\")!,\n      renderCell({ row }) {\n        return numberFormat(get(row, \"total_price\", \"\"));\n      },\n    },\n  ];\n};\n","import {Route, Routes } from \"react-router-dom\";\nimport CustomerAnalytics from \"./container/CustomerAnalytics\";\n\nconst index = () => {\n  return (\n    <Routes>\n      <Route path=\"*\" element={<CustomerAnalytics/>} />\n    </Routes>\n  );\n};\n\nexport default index;\n","export const numberFormat = (number: any) => {\n  if (number || number === 0) {\n    // Floating-point xatoliklarni oldini olish\n    const rounded = Math.round((number + Number.EPSILON) * 100) / 100;\n\n    return rounded\n      .toLocaleString(\"en-US\", {\n        minimumFractionDigits: 0, // Har doim 2 kasr\n        maximumFractionDigits: 0, // Kasr 2 dan oshmaydi\n      })\n      .replaceAll(\",\", \" \"); // Minglik ajratgich\n  }\n  return \"\";\n};\n"],"names":["t","useTranslation","navigate","useNavigate","columns","field","renderCell","row","fullName","get","isLong","length","displayText","slice","title","undefined","sortable","headerName","numberFormat","useCustomerColumns","renderHeader","Grid","className","optionsUrl","filterName","placeholder","getOptionLabel","option","firstName","url","dataUrl","headerChildren","exQueryParams","onRowClick","_id","path","element","CustomerAnalytics","number","Math","round","Number","EPSILON","toLocaleString","minimumFractionDigits","maximumFractionDigits","replaceAll"],"sourceRoot":""}