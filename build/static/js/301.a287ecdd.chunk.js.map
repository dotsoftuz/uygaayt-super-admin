{"version":3,"file":"static/js/301.a287ecdd.chunk.js","mappings":"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","sources":["pages/rating/components/RatingForm.tsx","pages/rating/container/Rating.styled.ts","pages/rating/index.tsx","pages/rating/container/Rating.tsx","pages/rating/container/rating.columns.tsx","types/enums.ts"],"sourcesContent":["import { FC, useEffect } from \"react\";\nimport { Grid } from \"@mui/material\";\nimport { ImageInput, TextInput } from \"components\";\nimport { UseFormReturn } from \"react-hook-form\";\nimport { useApi, useApiMutation } from \"hooks/useApi/useApiHooks\";\nimport { useTranslation } from \"react-i18next\";\n\ninterface IRatingForm {\n  formStore: UseFormReturn<any>;\n  editingRatingId: string;\n  resetForm: () => void;\n  rate: number;\n}\n\nconst RatingForm: FC<IRatingForm> = ({\n  formStore,\n  editingRatingId,\n  resetForm,\n  rate\n}) => {\n  const { t } = useTranslation();\n  const { control, handleSubmit, reset, watch, setValue } = formStore;\n\n  const { mutate, status } = useApiMutation(\n    editingRatingId ? `rate-comment/update` : \"rate-comment/create\",\n    editingRatingId ? \"put\" : \"post\"\n  );\n\n  const { data: getByIdData, status: getByIdStatus } = useApi(`rate-comment/get-by-id/${editingRatingId}`, {}, {\n    enabled: !!editingRatingId,\n    suspense: false,\n  })\n\n  useEffect(() => {\n    if (status === \"success\") {\n      resetForm();\n    }\n  }, [status]);\n\n  const submit = (data: any) => {\n    mutate({\n      _id: editingRatingId,\n      ...data,\n      imageId: data.imageId?._id,\n      rate\n    });\n  };\n\n  useEffect(() => {\n    if (getByIdStatus === 'success') {\n      reset({\n        title: getByIdData.data.title,\n        imageId: getByIdData.data.image,\n      });\n    }\n  }, [getByIdStatus, getByIdData]);\n\n  return (\n    <div className=\"custom-drawer\">\n      <form id=\"rating\" onSubmit={handleSubmit(submit)}>\n        <Grid container spacing={2}>\n          <Grid item md={12}>\n            <TextInput\n              control={control}\n              name=\"title.uz\"\n              label='Uz'\n            />\n          </Grid>\n          <Grid item md={12}>\n            <TextInput\n              control={control}\n              name=\"title.ru\"\n              label='Ru'\n            />\n          </Grid>\n          <Grid item md={12}>\n            <TextInput\n              control={control}\n              name=\"title.en\"\n              label='En'\n            />\n          </Grid>\n          <Grid item md={12}>\n            <label className=\"py-2\" htmlFor=\"\">{t('general.recommendation_img')}</label><br /><br />\n            <ImageInput control={control} setValue={setValue} name=\"imageId\" />\n          </Grid>\n        </Grid>\n      </form>\n    </div>\n  );\n};\n\nexport default RatingForm;\n","import styled from \"styled-components\";\n\nexport const RatingStyled = styled.div`\n  margin-top: 10px;\n  .ratings {\n    left: 20px;\n    padding: 10px 20px;\n    margin: auto !important;\n    .rating {\n      display: flex;\n      margin: auto !important;\n      align-items: center;\n      justify-content: center;\n      margin-right: 8px;\n      border-radius: 12px;\n      border: 1px solid #f3f3f8;\n      padding: 4px 12px;\n      width: 112px;\n      cursor: pointer;\n      &.active {\n        background: #EB5B00;\n        border: 1px solid #EB5B00;\n      }\n      svg {\n        margin: 0 1px;\n      }\n    }\n  }\n`;\n","import Rating from \"./container/Rating\";\n\nexport default Rating;\n","import { FormDrawer, Table } from \"components\";\nimport { useMemo, useState } from \"react\";\nimport { useRatingColumns } from \"./rating.columns\";\nimport { useAppDispatch } from \"../../../store/storeHooks\";\nimport { setOpenDrawer } from \"components/elements/FormDrawer/formdrawer.slice\";\nimport { useForm } from \"react-hook-form\";\nimport RatingForm from \"../components/RatingForm\";\nimport { useTranslation } from \"react-i18next\";\nimport WarningModal from \"components/common/WarningModal/WarningModal\";\nimport { RatingStyled } from \"./Rating.styled\";\nimport { RATINGS } from \"types/enums\";\nimport { StarIcon } from \"assets/svgs\";\nimport { useRoleManager } from \"services/useRoleManager\";\n\nconst Rating = () => {\n  const [editingRatingId, setEditingRatingId] = useState<any>();\n  const [ratingId, setRatingId] = useState<any>();\n  const columns = useRatingColumns();\n  const { t } = useTranslation();\n  const dis = useAppDispatch();\n  const formStore = useForm<any>();\n  const [rate, setRate] = useState(5);\n\n  const resetForm = () => {\n    setEditingRatingId(undefined);\n    formStore.reset({\n      title: {\n        uz: \"\",\n        ru: \"\",\n        en: \"\",\n      },\n      imageId: \"\",\n    });\n  };\n\n  const renderHeader = (\n    <div className=\"w-full lg:w-[80%] ratings gap-2 grid grid-cols-1 sm:grid-cols-3 md:grid-cols-5\">\n      {RATINGS.map((item) => {\n        return (\n          <div\n            className={`rating  ${rate === item.rate && \"active\"}`}\n            onClick={() => setRate(item.rate)}\n          >\n            {Array.from({ length: item.rate }, (_, i) => i + 1).map((e) => (\n              <StarIcon />\n            ))}\n          </div>\n        );\n      })}\n    </div>\n  );\n\n  const hasAccess = useRoleManager();\n\n  const queryParams = useMemo(() => ({\n    rate\n  }), [rate]);\n\n  return (\n    <RatingStyled>\n      <Table\n        dataUrl=\"rate-comment/paging\"\n        columns={columns}\n        headerChildren={renderHeader}\n        exQueryParams={queryParams}\n        onAddButton={\n          hasAccess(\"rateCommentCreate\")\n            ? () => dis(setOpenDrawer(true))\n            : undefined\n        }\n        onEditColumn={\n          hasAccess(\"rateCommentUpdate\")\n            ? (row) => {\n              setEditingRatingId(row._id);\n              dis(setOpenDrawer(true));\n            }\n            : undefined\n        }\n        onDeleteColumn={\n          hasAccess(\"rateCommentDelete\")\n            ? (row) => setRatingId(row._id)\n            : undefined\n        }\n      />\n      <WarningModal open={ratingId} setOpen={setRatingId} url=\"rate-comment/delete\" />\n      <FormDrawer\n        FORM_ID=\"rating\"\n        isEditing={!!editingRatingId}\n        customTitle={t(\"general.addBanner\")}\n        onClose={resetForm}\n      >\n        <RatingForm\n          formStore={formStore}\n          resetForm={resetForm}\n          editingRatingId={editingRatingId}\n          rate={rate}\n        />\n      </FormDrawer>\n    </RatingStyled>\n  );\n};\n\nexport default Rating;\n","import { GridColumns } from \"@mui/x-data-grid\";\nimport { get } from \"lodash\";\nimport { useTranslation } from \"react-i18next\";\n\nexport const useRatingColumns = (): GridColumns => {\n  const { t } = useTranslation();\n\n  return [\n    {\n      field: t(\"common.name\"),\n      renderCell({ row }) {\n        return get(row, 'title.uz', '')\n      },\n    },\n  ];\n};\n","import { useTranslation } from \"react-i18next\";\nimport { IRoleData } from \"store/reducers/LoginSlice\";\n\n\nexport const PAYMENT_TYPES = [\n  {\n    _id: \"cash\",\n    name: \"Naqd\",\n    trans_key: \"cash\",\n  },\n  // {\n  //   _id: \"card\",\n  //   name: \"Karta\",\n  //   trans_key: \"card\",\n  // },\n];\n\nexport const DISCOUNT_TYPES = [\n  {\n    _id: \"percent\",\n    name: \"Foiz\",\n    trans_key: \"percent\",\n  },\n  {\n    _id: \"amount\",\n    name: \"Miqdor\",\n    trans_key: \"amount\",\n  },\n];\n\ninterface ISettingsTabs {\n  name: string;\n  key: string;\n  role: keyof IRoleData;\n}\n\nexport const SETTINGS_TABS: ISettingsTabs[] = [\n  {\n    name: \"functionality\",\n    key: \"functionality\",\n    role: \"role\",  // o'zgartirish kere measure\n  },\n  {\n    name: \"discounts\",\n    key: \"discountOrder\",\n    role: \"role\",  // o'zgartirish kere \n  },\n  {\n    name: \"bonus\",\n    key: \"bonusOrder\",\n    role: \"role\",  // o'zgartirish kere \n  },\n  {\n    name: \"premium_discounts\",\n    key: \"premiumDiscountOrder\",\n    role: \"role\",  // o'zgartirish kere \n  },\n  {\n    name: \"main_address\",\n    key: \"mainAddress\",\n    role: \"role\",  // o'zgartirish kere measure\n  },\n  {\n    name: \"website_conditions\",\n    key: \"websiteConditions\",\n    role: \"role\", // o'zgartirish kere siteSettings\n  },\n  // {\n  //   name: \"Shaharlar\",\n  //   key: \"cities\",\n  //   role: \"city\",\n  // },\n];\n\nexport const MINIMUM_ORDER_OPTIONS = [\n  {\n    _id: \"percent\",\n    name: \"Foiz\",\n    trans_key: \"percent\",\n  },\n  {\n    _id: \"amount\",\n    name: \"Miqdor\",\n    trans_key: \"amount\",\n  },\n];\n\n\nexport const RATINGS = [\n  {\n    rate: 5,\n  },\n  {\n    rate: 4,\n  },\n  {\n    rate: 3,\n  },\n  {\n    rate: 2,\n  },\n  {\n    rate: 1,\n  },\n];"],"names":["formStore","editingRatingId","resetForm","rate","t","useTranslation","control","handleSubmit","reset","setValue","watch","useApiMutation","mutate","status","useApi","enabled","suspense","getByIdData","data","getByIdStatus","useEffect","title","imageId","image","className","id","onSubmit","_id","Grid","container","spacing","item","md","name","label","htmlFor","RatingStyled","styled","useState","setEditingRatingId","ratingId","setRatingId","columns","field","renderCell","row","get","dis","useAppDispatch","useForm","setRate","undefined","uz","ru","en","renderHeader","RATINGS","onClick","Array","from","length","_","i","map","e","hasAccess","useRoleManager","queryParams","useMemo","dataUrl","headerChildren","exQueryParams","onAddButton","setOpenDrawer","onEditColumn","onDeleteColumn","WarningModal","open","setOpen","url","FORM_ID","isEditing","customTitle","onClose","PAYMENT_TYPES","trans_key","DISCOUNT_TYPES","SETTINGS_TABS","key","role"],"sourceRoot":""}