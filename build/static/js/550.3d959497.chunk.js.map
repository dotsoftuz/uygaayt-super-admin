{"version":3,"file":"static/js/550.3d959497.chunk.js","mappings":"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","sources":["pages/category/components/CategoryForm.tsx","pages/category/index.tsx","pages/category/container/Category.tsx","pages/category/container/category.columns.tsx"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport { Grid } from \"@mui/material\";\nimport { AutoCompleteForm, ImageInput, TextInput } from \"components\";\nimport { UseFormReturn } from \"react-hook-form\";\nimport { useApi, useApiMutation } from \"hooks/useApi/useApiHooks\";\nimport { useTranslation } from \"react-i18next\";\n\ninterface IBranchForm {\n  formStore: UseFormReturn<any>;\n  resetForm: () => void;\n  editingCategoryId?: any;\n  setRender?: React.Dispatch<React.SetStateAction<boolean>>;\n\n}\n\nconst CategoryForm: React.FC<IBranchForm> = ({\n  formStore,\n  resetForm,\n  editingCategoryId,\n  setRender,\n}) => {\n  const { t } = useTranslation();\n  const { control, handleSubmit, reset, setValue } = formStore;\n\n  const { mutate, status } = useApiMutation<any>(\n    editingCategoryId\n      ? `category/update`\n      : \"category/create\",\n    editingCategoryId ? \"put\" : \"post\"\n  );\n\n  const { data: getByIdData, status: getByIdStatus } = useApi(`category/get-by-id/${editingCategoryId}`, {}, {\n    enabled: !!editingCategoryId,\n    suspense: false\n  })\n\n  const sumbit = (data: any) => {\n    mutate({\n      ...data,\n      imageId: data.imageId?._id,\n      _id: editingCategoryId,\n    });\n  };\n\n  useEffect(() => {\n    if (status === \"success\") {\n      resetForm();\n      setRender?.(true);\n    }\n  }, [status]);\n\n  useEffect(() => {\n    if (getByIdStatus === 'success') {\n      reset({\n        name: getByIdData.data.name,\n        imageId: getByIdData.data.image,\n      });\n    }\n  }, [getByIdStatus, getByIdData]);\n\n  return (\n    <div className=\"custom-drawer\">\n      <form id=\"category\" onSubmit={handleSubmit(sumbit)}>\n        <Grid container spacing={2}>\n          <Grid item md={12}>\n            <TextInput name=\"name\" control={control} label={t(\"common.name\")} />\n          </Grid>\n          <Grid item md={12}>\n            <ImageInput\n              control={control}\n              setValue={setValue}\n              name=\"imageId\"\n              rules={{ required: false }}\n              accept=\".png, .jpg, .jpeg\"\n            />\n          </Grid>\n        </Grid>\n      </form>\n    </div>\n  );\n};\n\nexport default CategoryForm;\n","import Category from \"./container/Category\";\n\nexport default Category;\n","import { DragTable, FormDrawer, Table } from \"components\";\nimport { useCategoryCol, useCategoryColumns } from \"./category.columns\";\nimport { useAppDispatch } from \"store/storeHooks\";\nimport { setOpenDrawer } from \"components/elements/FormDrawer/formdrawer.slice\";\nimport { useTranslation } from \"react-i18next\";\nimport { useState } from \"react\";\nimport CategoryForm from \"../components/CategoryForm\";\nimport { useForm } from \"react-hook-form\";\nimport WarningModal from \"components/common/WarningModal/WarningModal\";\nimport { useRoleManager } from \"services/useRoleManager\";\n\nconst Category = () => {\n  const [render, setRender] = useState<boolean>(false);\n  // const columns = useCategoryColumns();\n  const [editingCategoryId, setEditingCategoryId] = useState<any>();\n  const [categoryId, setCategoryId] = useState<any>();\n  const columnsDrag = useCategoryCol({ setEditingCategoryId, setCategoryId });\n  const dis = useAppDispatch();\n  const { t } = useTranslation();\n  const formStore = useForm<any>();\n  const hasAccess = useRoleManager();\n\n  const resetForm = () => {\n    setEditingCategoryId(undefined);\n    formStore.reset({\n      name: \"\",\n      imageId: \"\",\n    });\n  };\n\n  return (\n    <>\n      {/* <Table\n        columns={columns}\n        dataUrl=\"category/product\"\n        searchable\n        onAddButton={() => dis(setOpenDrawer(true))}\n        onEditColumn={(row) => {\n          setEditingCategoryId(row._id);\n          dis(setOpenDrawer(true));\n        }}\n        onDeleteColumn={(row) => setCategoryId(row._id)}\n      /> */}\n\n      <DragTable\n        columns={columnsDrag}\n        dataUrl=\"/category/paging\"\n        dragUrl=\"/category/positions\"\n        dragKey=\"categoryIds\"\n        render={render}\n        setRender={setRender}\n        onAddButton={() => dis(setOpenDrawer(true))}\n      />\n      <WarningModal\n        open={categoryId}\n        setOpen={setCategoryId}\n        // setRender={setRender}\n        url=\"category/delete\"\n      />\n      <FormDrawer\n        FORM_ID=\"category\"\n        isEditing={!!editingCategoryId}\n        customTitle={t(\"general.addCategory\")}\n        onClose={resetForm}\n      >\n        <CategoryForm\n          formStore={formStore}\n          setRender={setRender}\n          resetForm={resetForm}\n          editingCategoryId={editingCategoryId}\n        />\n      </FormDrawer>\n    </>\n  );\n};\n\nexport default Category;\n","import { IconButton } from \"@mui/material\";\nimport { GridColumns } from \"@mui/x-data-grid\";\nimport { DeleteIcon } from \"assets/svgs\";\nimport { setOpenDrawer } from \"components/elements/FormDrawer/formdrawer.slice\";\nimport EditIcon from \"components/elements/Table/assets/EditIcon\";\nimport { get } from \"lodash\";\nimport { useTranslation } from \"react-i18next\";\nimport { useRoleManager } from \"services/useRoleManager\";\nimport { useAppDispatch } from \"store/storeHooks\";\n\nexport const useCategoryColumns = (): GridColumns => {\n  const { t } = useTranslation();\n\n  return [\n    {\n      field: t(\"common.categoryName\"),\n      renderCell({ row }) {\n        return get(row, \"name\", \"\");\n      },\n    },\n  ];\n};\n\ninterface IUseStoreCol {\n  setCategoryId?: React.Dispatch<React.SetStateAction<string>>;\n  setEditingCategoryId?: React.Dispatch<React.SetStateAction<string>>;\n}\n\nexport const useCategoryCol = ({\n  setCategoryId,\n  setEditingCategoryId,\n}: IUseStoreCol) => {\n  const dis = useAppDispatch();\n  const { t } = useTranslation();\n  const hasAccess = useRoleManager();\n\n  return [\n    {\n      key: \"sort\",\n      width: \"5%\",\n    },\n    {\n      title: \"â„–\",\n      dataIndex: \"id\",\n      key: \"id\",\n      width: \"5%\",\n      render: (item: any, record: any, index: number) => <>{index + 1}</>,\n    },\n    {\n      title: t(\"common.categoryName\"),\n      dataIndex: \"name\",\n    },\n    {\n      title: \"\",\n      render: (_: any, record: any) => {\n        return (\n          <div className=\"d-flex gap-2 justify-content-end\">\n            {hasAccess(\"categoryCreate\") && (\n              <IconButton\n                onClick={() => {\n                  setEditingCategoryId?.(record?._id);\n                  dis(setOpenDrawer(true));\n                }}\n              >\n                <EditIcon />\n              </IconButton>\n            )}\n            {hasAccess(\"categoryDelete\") && (\n              <IconButton onClick={() => setCategoryId?.(record?._id)}>\n                <DeleteIcon />\n              </IconButton>\n            )}\n          </div>\n        );\n      },\n    },\n  ];\n};\n"],"names":["formStore","resetForm","editingCategoryId","setRender","t","useTranslation","control","handleSubmit","reset","setValue","useApiMutation","mutate","status","useApi","enabled","suspense","getByIdData","data","getByIdStatus","useEffect","name","imageId","image","className","id","onSubmit","_id","Grid","container","spacing","item","md","label","rules","required","accept","useState","render","setEditingCategoryId","categoryId","setCategoryId","columnsDrag","dis","useAppDispatch","hasAccess","useRoleManager","key","width","title","dataIndex","record","index","_","IconButton","onClick","setOpenDrawer","EditIcon","useCategoryCol","useForm","undefined","columns","dataUrl","dragUrl","dragKey","onAddButton","WarningModal","open","setOpen","url","FORM_ID","isEditing","customTitle","onClose"],"sourceRoot":""}