"use strict";(self.webpackChunkbestune_admin=self.webpackChunkbestune_admin||[]).push([[801],{3613:(e,n,t)=>{t.d(n,{A:()=>l});var s,i=t(57528),r=t(29769);const a=(0,t(66253).default)(r.dS)(s||(s=(0,i.A)(["\n  display: flex;\n  flex-direction: column-reverse;\n  border: none;\n  width: 100%;\n  padding-bottom: 20px;\n  .quill {\n    .ql-container {\n      .ql-tooltip {\n        transform: translateX(97px);\n        z-index: 10;\n      }\n      .ql-editor {\n        background-color: #fff;\n        padding: 15px;\n        border-radius: 12px;\n        min-height: 80px;\n        transition: all 0.3s;\n        border: 1px solid #d9d9d9;\n        p {\n          margin: 0;\n          font-size: 14px;\n        }\n      }\n    }\n  }\n  .ql-toolbar {\n    padding: 0;\n    transition: opacity 1s ease-out;\n    border-radius: 0;\n    border-bottom: none;\n    margin-top: 10px;\n    button {\n      border: none;\n      margin: 0 5px;\n      svg {\n        width: 24px !important;\n        height: 24px !important;\n        fill: #000 !important;\n        path {\n          fill: #000;\n        }\n      }\n    }\n  }\n  .ql-editing {\n    left: 30px !important;\n    transform: translateX(0px) !important;\n    z-index: 100;\n  }\n"])));var o=t(70579);const l=e=>{const{value:n,onChange:t,onImageUpload:s,isError:i,type:r}=e;return(0,o.jsx)(a,{controls:[["bold","italic","underline","strike","clean","unorderedList","orderedList","alignLeft","alignCenter","alignRight"]],isError:!!i,value:n,onChange:t,onImageUpload:s,type:r})}},6790:(e,n,t)=>{t.d(n,{J1:()=>s,br:()=>r,eM:()=>i,lq:()=>a});const s=[{_id:"cash",name:"Naqd",trans_key:"cash"}],i=[{_id:"percent",name:"Foiz",trans_key:"percent"},{_id:"amount",name:"Miqdor",trans_key:"amount"}],r=[{name:"functionality",key:"functionality",role:"role"},{name:"discounts",key:"discountOrder",role:"role"},{name:"bonus",key:"bonusOrder",role:"role"},{name:"premium_discounts",key:"premiumDiscountOrder",role:"role"},{name:"main_address",key:"mainAddress",role:"role"},{name:"website_conditions",key:"websiteConditions",role:"role"}],a=[{rate:5},{rate:4},{rate:3},{rate:2},{rate:1}]},14801:(e,n,t)=>{t.r(n),t.d(n,{default:()=>Z});var s,i,r,a,o=t(89379),l=t(68903),d=t(96446),c=t(19042),u=t(53193),m=t(72221),p=t(32143),x=t(85865),v=t(57528),g=t(66253);const h=g.default.div(s||(s=(0,v.A)(["\n  .tabs {\n    background: #fff;\n    border-radius: 0px 12px 12px 0px;\n    .tab {\n      position: relative;\n      color: #454545;\n      font-size: 14px;\n      padding: 14px 16px;\n      border-bottom: 1px solid #f5f5f5;\n      cursor: pointer;\n      &.active {\n        font-weight: 500;\n      }\n      .left-border {\n        position: absolute;\n        left: 0;\n        top: 0;\n        bottom: 0;\n        width: 6px;\n        background-color: #EB5B00;\n      }\n    }\n  }\n  .settings {\n    border-radius: 12px;\n    background: #fff;\n    padding: 0 20px;\n    height: calc(100vh - 100px);\n    box-sizing: border-box;\n    overflow: auto;\n    padding-bottom: 20px;\n    .item {\n      border: 1px solid #e8e8e8;\n      padding: 15px;\n      border-radius: 15px;\n      .key {\n        display: block;\n        color: #333;\n        margin-bottom: 5px;\n        font-size: 15px;\n      }\n    }\n  }\n"]))),y=g.default.span(i||(i=(0,v.A)(["\n  color: #000;\n"]))),f=g.default.div(r||(r=(0,v.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: sticky;\n  top: 0;\n  z-index: 70;\n  height: 80px;\n  background-color: #fff;\n"]))),j=(0,g.default)(m.A)({width:"100%",borderRadius:"12px",border:"1px solid #e9e9e9",outline:"none",maxWidth:"250px","& .MuiSelect-select":{display:"flex",borderRadius:"10px",border:"none"}}),b=(0,g.default)(p.A)({minWidth:"250px",display:"flex",alignItems:"center"});g.default.div(a||(a=(0,v.A)(["\n  border-radius: 12px;\n  background: #fff;\n  padding: 20px;\n  height: calc(100vh - 100px);\n  overflow: auto;\n  .note {\n    display: flex;\n    align-items: center;\n    color: #00c537;\n    font-size: 15px;\n    border-radius: 12px;\n    background: #e5f9eb;\n    padding: 12px;\n    svg {\n      margin-right: 12px;\n    }\n  }\n  .warning {\n    display: flex;\n    align-items: center;\n    color: #ffb345;\n    font-size: 15px;\n    border-radius: 12px;\n    background: rgba(255, 179, 69, 0.1);\n    padding: 12px;\n    margin-top: 10px;\n    margin-bottom: 24px;\n    svg {\n      margin-right: 12px;\n    }\n  }\n"])));var _=t(6790),A=t(65043),k=t(83501),N=t(19303),C=t(74117);const w=[{translationKey:"uzbekistan",flag:"uzbekistan",prefix:"+998",pattern:"99 999 99 99"},{translationKey:"kazakhstan",flag:"kazakhstan",prefix:"+7",pattern:"999 999 9999"}];var D=t(24858),S=t(61698),q=t(47503),z=t(35475),M=t(37802),O=t(70579);const P=()=>{const{t:e}=(0,C.Bd)(),[n,t]=(0,A.useState)(),{handleSubmit:s,watch:i,setValue:r}=(0,D.mN)(),{data:a,status:o,refetch:d}=(0,S.gf)("/settings-general"),{mutate:c}=(0,S.L2)("/settings-general","put",{onSuccess(){d(),q.oR.success(e("general.success"))}});return(0,A.useEffect)(()=>{if("success"===o){const e=a.data;t(e.locationCenter)}},[o]),(0,O.jsxs)("form",{onSubmit:s(e=>{c({locationCenter:n})}),id:"main-map-center",children:[(0,O.jsxs)(f,{children:[(0,O.jsx)("h2",{children:e("settings.map_address")}),(0,O.jsx)(N.O6,{title:e("general.save"),variant:"contained",type:"submit",form:"main-map-center"})]}),(0,O.jsx)(l.Ay,{container:!0,mb:3,spacing:2,children:(0,O.jsx)(l.Ay,{item:!0,md:12,children:(0,O.jsx)(M.A,{getCoordinate:t,center:n,height:"480px"})})})]})};var T=t(3613);const R=()=>{const{t:e}=(0,C.Bd)(),{handleSubmit:n,watch:t,setValue:s}=(0,D.mN)(),{data:i,refetch:r,status:a}=(0,S.gf)("/settings-general",{},{suspense:!1}),{mutate:o,status:d}=(0,S.L2)("/settings-general","put",{onSuccess(n){let{data:t}=n;t&&(r(),q.oR.success(e("general.success")))}});return(0,A.useEffect)(()=>{var e;s("termsOfUse",null===i||void 0===i||null===(e=i.data)||void 0===e?void 0:e.termsOfUse)},[i]),(0,O.jsxs)("form",{id:"website_conditions",onSubmit:n(e=>{o(e)}),children:[(0,O.jsxs)(f,{children:[(0,O.jsx)(y,{children:e("settings.website_conditions")}),(0,O.jsx)(N.O6,{title:e("general.save"),variant:"contained",type:"submit",form:"website_conditions",disabled:"loading"===d})]}),(0,O.jsx)(l.Ay,{container:!0,children:(0,O.jsx)(l.Ay,{md:12,sm:12,children:(0,O.jsx)(T.A,{value:t("termsOfUse"),onChange:e=>s("termsOfUse",e)})})})]})};var B=t(40280);const I=(0,B.A)("div")({position:"relative",minWidth:"90px",height:"51.6px",borderRadius:"0 8px 8px 0",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 8px",cursor:"pointer",transition:"all 0.4s",border:"1px solid rgba(49,57,73,0.1)","&::before":{content:'""',position:"absolute",width:"43px",height:"50.6px",background:"#EB5B00",top:-.2,left:"0",right:"auto",transition:"all 0.4s"},"&.show::before":{left:"45.5px",borderTopRightRadius:"8px",borderBottomRightRadius:"8px"}}),L=(0,B.A)("div")({});const E=(0,t(59662).A)((0,O.jsx)("path",{d:"M7.5 11C9.43 11 11 9.43 11 7.5S9.43 4 7.5 4 4 5.57 4 7.5 5.57 11 7.5 11m0-5C8.33 6 9 6.67 9 7.5S8.33 9 7.5 9 6 8.33 6 7.5 6.67 6 7.5 6M4.0025 18.5832 18.59 3.9955l1.4142 1.4143L5.4167 19.9974zM16.5 13c-1.93 0-3.5 1.57-3.5 3.5s1.57 3.5 3.5 3.5 3.5-1.57 3.5-3.5-1.57-3.5-3.5-3.5m0 5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"Percent");const V=function(e){var n;let t=(null===(n=String(e))||void 0===n?void 0:n.replace(/[^\d.-]/g,"")).split(".");return t[0]=t[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$& "),"string"===typeof t[1]?(t[1]=t[1].slice(0,3),t.join(".")):t[0]},W=/([0-9]+[.|,][0-9])|([0-9][.|,][0-9]+)|([0-9]+)/g;var U=t(73216);const F=e=>{var n,t,s;let{data:i}=e;const{t:r}=(0,C.Bd)(),{id:a}=(0,U.g)(),{data:c,refetch:u,status:m}=(0,S.gf)("/discount/get/premium",{},{suspense:!1}),{handleSubmit:p,register:x,watch:v,control:g,setValue:h,reset:j,formState:{errors:b}}=(0,D.mN)({defaultValues:{premiumDiscount:{amount:0,type:"amount",number:1}}}),{mutate:_,status:k}=(0,S.L2)("/discount/premium/update","post",{onSuccess(e){let{data:n}=e;n&&(u(),q.oR.success(r("general.success")))}});return(0,A.useEffect)(()=>{if("success"===m){var e;const n=null===c||void 0===c||null===(e=c.data)||void 0===e?void 0:e.premiumDiscount;n&&j({premiumDiscount:{amount:n.amount||0,number:1,type:n.type||"amount"}})}},[m,c,j]),(0,O.jsxs)("form",{id:"website_conditions",onSubmit:p(e=>{var n,t;_({premiumDiscount:(0,o.A)((0,o.A)({},e.premiumDiscount),{},{amount:Number(null===(n=String(null===(t=e.premiumDiscount)||void 0===t?void 0:t.amount))||void 0===n?void 0:n.replace(" ","")),number:1})})}),children:[(0,O.jsxs)(f,{children:[(0,O.jsx)(y,{children:r("settings.premium_discounts")}),(0,O.jsx)(N.O6,{title:r("general.save"),variant:"contained",type:"submit",form:"website_conditions",disabled:"loading"===k})]}),(0,O.jsx)(l.Ay,{container:!0,display:"block",children:(0,O.jsxs)(l.Ay,{item:!0,md:8,xs:8,display:"flex",gap:2,paddingBlock:1,children:[(0,O.jsx)(l.Ay,{item:!0,md:4,xs:4,children:(0,O.jsx)(N.pd,{label:r("driver.".concat(v("premiumDiscount.type"))),params:(0,o.A)({},x("premiumDiscount.amount",v("premiumDiscount.type")?{required:{value:!0,message:r("error_messages.percent_field_required")},pattern:{value:W,message:r("error_messages.place_enter_a_number")},max:"percent"===v("premiumDiscount.type")?{value:100,message:r("error_messages.no_more_then_100_can_be_entered")}:void 0,onChange:e=>{var n,t;return h("premiumDiscount.amount",v("premiumDiscount.type")?null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value:V(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value))}}:{required:{value:!0,message:r("error_messages.percent_field_required")},onChange:e=>{var n,t;return h("premiumDiscount.amount",v("premiumDiscount.type")?null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value:V(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value))}})),error:null===(n=b.premiumDiscount)||void 0===n?void 0:n.amount})}),(0,O.jsx)(l.Ay,{item:!0,md:3,xs:3,children:(0,O.jsx)(d.A,{display:"flex",alignItems:"start",marginTop:"28px",children:(0,O.jsxs)(I,{className:"percent"===v("premiumDiscount.type")?"show":"",onClick:()=>h("premiumDiscount.type","percent"===v("premiumDiscount.type")?"amount":"percent"),style:{borderColor:null!==(t=b.premiumDiscount)&&void 0!==t&&t.type?"red":"rgba(49,57,73,0.1)"},children:[(0,O.jsx)(L,{children:(0,O.jsx)(E,{})}),(0,O.jsx)(L,{style:{fontWeight:"500"},children:null===i||void 0===i||null===(s=i.data)||void 0===s?void 0:s.currency})]})})})]})})]})};var K=t(51387),X=t(99866),G=t(58885);const H=e=>{var n,t,s;let{data:i}=e;const{t:r}=(0,C.Bd)(),{id:a}=(0,U.g)(),{data:c,refetch:u,status:m}=(0,S.gf)("/discount/get/bonus",{},{suspense:!1}),{handleSubmit:p,register:x,watch:v,control:g,setValue:h,reset:j,formState:{errors:b}}=(0,D.mN)({defaultValues:{discounts:[{number:0,amount:0,type:"amount"}],defaultDiscount:{amount:0,type:"amount"}}}),{mutate:_,status:k}=(0,S.L2)("discount/bonus/update","post",{onSuccess(e){let{data:n}=e;n&&(u(),q.oR.success(r("general.success")))}});(0,A.useEffect)(()=>{if("success"===m){var e,n;const t=(null===c||void 0===c||null===(e=c.data)||void 0===e?void 0:e.discounts)||[],s=(null===c||void 0===c||null===(n=c.data)||void 0===n?void 0:n.defaultDiscount)||[];j({discounts:t.map(e=>({number:e.number||0,amount:e.amount||0,type:e.type||"amount"})),defaultDiscount:{amount:s.amount||0,type:s.type||"amount"}})}},[m,c,j]);const{fields:w,append:z,remove:M}=(0,D.jz)({name:"discounts",control:g});return(0,O.jsxs)("form",{id:"website_conditions",onSubmit:p(e=>{var n,t,s;_({defaultDiscount:(0,o.A)((0,o.A)({},e.defaultDiscount),{},{amount:Number(null===(n=String(null===(t=e.defaultDiscount)||void 0===t?void 0:t.amount))||void 0===n?void 0:n.replace(" ","")),number:1}),discounts:null===(s=e.discounts)||void 0===s?void 0:s.map(e=>{var n;return(0,o.A)((0,o.A)({},e),{},{amount:Number(null===(n=String(e.amount))||void 0===n?void 0:n.replace(" ",""))})})})}),children:[(0,O.jsxs)(f,{children:[(0,O.jsx)(y,{children:r("settings.initial_bonus")}),(0,O.jsx)(N.O6,{title:r("general.save"),variant:"contained",type:"submit",form:"website_conditions",disabled:"loading"===k})]}),(0,O.jsxs)(l.Ay,{container:!0,display:"block",children:[(0,O.jsxs)(l.Ay,{item:!0,md:8,xs:8,display:"flex",gap:2,paddingBlock:1,children:[(0,O.jsx)(l.Ay,{item:!0,md:4,xs:4,children:(0,O.jsx)(N.pd,{label:r("driver.".concat(v("defaultDiscount.type"))),params:(0,o.A)({},x("defaultDiscount.amount",v("defaultDiscount.type")?{required:{value:!0,message:r("error_messages.percent_field_required")},pattern:{value:W,message:r("error_messages.place_enter_a_number")},max:"percent"===v("defaultDiscount.type")?{value:100,message:r("error_messages.no_more_then_100_can_be_entered")}:void 0,onChange:e=>{var n,t;return h("defaultDiscount.amount",v("defaultDiscount.type")?null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value:V(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value))}}:{required:{value:!0,message:r("error_messages.percent_field_required")},onChange:e=>{var n,t;return h("defaultDiscount.amount",v("defaultDiscount.type")?null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value:V(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value))}})),error:null===(n=b.defaultDiscount)||void 0===n?void 0:n.amount})}),(0,O.jsx)(l.Ay,{item:!0,md:3,xs:3,children:(0,O.jsx)(d.A,{display:"flex",alignItems:"start",marginTop:"28px",children:(0,O.jsxs)(I,{className:"percent"===v("defaultDiscount.type")?"show":"",onClick:()=>h("defaultDiscount.type","percent"===v("defaultDiscount.type")?"amount":"percent"),style:{borderColor:null!==(t=b.defaultDiscount)&&void 0!==t&&t.type?"red":"rgba(49,57,73,0.1)"},children:[(0,O.jsx)(L,{children:(0,O.jsx)(E,{})}),(0,O.jsx)(L,{style:{fontWeight:"500"},children:null===i||void 0===i||null===(s=i.data)||void 0===s?void 0:s.currency})]})})})]}),w.map((e,n)=>{var t,s,a,d,c;return(0,O.jsxs)(l.Ay,{container:!0,spacing:2,sx:{paddingBlock:1,display:"flex",flexWrap:"wrap"},children:[(0,O.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,className:"flex items-end",children:(0,O.jsx)(N.ks,{control:g,name:"discounts.".concat(n,".number"),type:"number",rules:{required:!1},label:r("settings.number")})}),(0,O.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,className:"flex items-end",children:(0,O.jsx)(N.pd,{label:r("driver.".concat(v("discounts.".concat(n,".type")))),params:(0,o.A)({},x("discounts.".concat(n,".amount"),v("discounts.".concat(n,".type"))?{required:{value:!0,message:r("error_messages.percent_field_required")},pattern:{value:W,message:r("error_messages.place_enter_a_number")},max:"percent"===v("discounts.".concat(n,".type"))?{value:100,message:r("error_messages.no_more_then_100_can_be_entered")}:void 0,onChange:e=>{var t,s;return h("discounts.".concat(n,".amount"),v("discounts.".concat(n,".type"))?null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value:V(null===e||void 0===e||null===(s=e.target)||void 0===s?void 0:s.value))}}:{required:{value:!0,message:r("error_messages.percent_field_required")},onChange:e=>{var t,s;return h("discounts.".concat(n,".amount"),v("discounts.".concat(n,".type"))?null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value:V(null===e||void 0===e||null===(s=e.target)||void 0===s?void 0:s.value))}})),error:null===(t=b.discounts)||void 0===t||null===(s=t[n])||void 0===s?void 0:s.amount})}),(0,O.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,sx:{display:"flex",alignItems:"center",justifyContent:"center"},className:"flex items-end mt-5",children:(0,O.jsxs)(I,{className:"percent"===v("discounts.".concat(n,".type"))?"show":"",onClick:()=>h("discounts.".concat(n,".type"),"percent"===v("discounts.".concat(n,".type"))?"amount":"percent"),style:{borderColor:null!==(a=b.discounts)&&void 0!==a&&null!==(d=a[n])&&void 0!==d&&d.type?"red":"rgba(49,57,73,0.1)"},children:[(0,O.jsx)(L,{children:(0,O.jsx)(E,{})}),(0,O.jsx)(L,{style:{fontWeight:500},children:null===i||void 0===i||null===(c=i.data)||void 0===c?void 0:c.currency})]})}),(0,O.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,sx:{display:"flex",alignItems:"center",justifyContent:"center"},className:"flex items-end mt-5",children:(0,O.jsx)(K.A,{sx:{cursor:"pointer",color:"#D54239",fontSize:"1.5rem"},onClick:()=>{M(n)}})})]},e.id)}),(0,O.jsx)(l.Ay,{item:!0,xs:12,md:2,paddingBlock:2,children:(0,O.jsx)(X.A,{startIcon:(0,O.jsx)(G.c1,{}),type:"button",title:"".concat(r("general.add")),onClick:()=>{z({number:0,amount:0,type:"amount"})}})})]})]})},J=e=>{let{data:n}=e;const{t:t}=(0,C.Bd)(),{id:s}=(0,U.g)(),{data:i,refetch:r,status:a}=(0,S.gf)("/discount/get/regular",{},{suspense:!1}),{handleSubmit:d,register:c,watch:u,control:m,setValue:p,reset:x,formState:{errors:v}}=(0,D.mN)({defaultValues:{discounts:[{number:0,amount:0,type:"amount"}]}}),{mutate:g,status:h}=(0,S.L2)("/discount/update","post",{onSuccess(e){let{data:n}=e;n&&(r(),q.oR.success(t("general.success")))}});(0,A.useEffect)(()=>{if("success"===a){var e;const n=(null===i||void 0===i||null===(e=i.data)||void 0===e?void 0:e.discounts)||[];x({discounts:n.map(e=>({number:e.number||0,amount:e.amount||0,type:e.type||"amount"}))})}},[a,i,x]);const{fields:j,append:b,remove:_}=(0,D.jz)({name:"discounts",control:m});return(0,O.jsxs)("form",{id:"website_conditions",onSubmit:d(e=>{var n;g({discounts:null===(n=e.discounts)||void 0===n?void 0:n.map(e=>{var n;return(0,o.A)((0,o.A)({},e),{},{amount:Number(null===(n=String(e.amount))||void 0===n?void 0:n.replace(" ",""))})})})}),children:[(0,O.jsxs)(f,{children:[(0,O.jsx)(y,{children:t("settings.initial_discount")}),(0,O.jsx)(N.O6,{title:t("general.save"),variant:"contained",type:"submit",form:"website_conditions",disabled:"loading"===h})]}),(0,O.jsxs)(l.Ay,{container:!0,display:"block",children:[j.map((e,s)=>{var i,r,a,d,x;return(0,O.jsxs)(l.Ay,{container:!0,spacing:2,sx:{paddingBlock:1,display:"flex",flexWrap:"wrap"},children:[(0,O.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,className:"flex items-end",children:(0,O.jsx)(N.ks,{control:m,name:"discounts.".concat(s,".number"),type:"number",rules:{required:!1},label:t("settings.number")})}),(0,O.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,className:"flex items-end",children:(0,O.jsx)(N.pd,{label:t("driver.".concat(u("discounts.".concat(s,".type")))),params:(0,o.A)({},c("discounts.".concat(s,".amount"),u("discounts.".concat(s,".type"))?{required:{value:!0,message:t("error_messages.percent_field_required")},pattern:{value:W,message:t("error_messages.place_enter_a_number")},max:"percent"===u("discounts.".concat(s,".type"))?{value:100,message:t("error_messages.no_more_then_100_can_be_entered")}:void 0,onChange:e=>{var n,t;return p("discounts.".concat(s,".amount"),u("discounts.".concat(s,".type"))?null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value:V(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value))}}:{required:{value:!0,message:t("error_messages.percent_field_required")},onChange:e=>{var n,t;return p("discounts.".concat(s,".amount"),u("discounts.".concat(s,".type"))?null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value:V(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value))}})),error:null===(i=v.discounts)||void 0===i||null===(r=i[s])||void 0===r?void 0:r.amount})}),(0,O.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,sx:{display:"flex",alignItems:"center",justifyContent:"center"},className:"flex items-end mt-5",children:(0,O.jsxs)(I,{className:"percent"===u("discounts.".concat(s,".type"))?"show":"",onClick:()=>p("discounts.".concat(s,".type"),"percent"===u("discounts.".concat(s,".type"))?"amount":"percent"),style:{borderColor:null!==(a=v.discounts)&&void 0!==a&&null!==(d=a[s])&&void 0!==d&&d.type?"red":"rgba(49,57,73,0.1)"},children:[(0,O.jsx)(L,{children:(0,O.jsx)(E,{})}),(0,O.jsx)(L,{style:{fontWeight:500},children:null===n||void 0===n||null===(x=n.data)||void 0===x?void 0:x.currency})]})}),(0,O.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,sx:{display:"flex",alignItems:"center",justifyContent:"center"},className:"flex items-end mt-5",children:(0,O.jsx)(K.A,{sx:{cursor:"pointer",color:"#D54239",fontSize:"1.5rem"},onClick:()=>{_(s)}})})]},e.id)}),(0,O.jsx)(l.Ay,{item:!0,xs:12,md:2,paddingBlock:2,children:(0,O.jsx)(X.A,{startIcon:(0,O.jsx)(G.c1,{}),type:"button",title:"".concat(t("general.add")),onClick:()=>{b({number:0,amount:0,type:"amount"})}})})]})]})},Q=()=>{var e;const[n,t]=(0,z.ok)(),[s,i]=(0,A.useState)(_.br[0].key),r=(0,k.L)(),{t:a}=(0,C.Bd)(),[v,g]=(0,A.useState)(""),{control:M,reset:T,watch:B,register:V,handleSubmit:W,setValue:U}=(0,D.mN)(),{data:K,status:X,refetch:G}=(0,S.gf)("settings-general",{},{onSuccess(e){let{data:n}=e;localStorage.setItem("settings",JSON.stringify(n))}});(0,A.useEffect)(()=>{var e;null!==K&&void 0!==K&&null!==(e=K.data)&&void 0!==e&&e.orderCalculateMethod&&U("orderCalculateMethod",K.data.orderCalculateMethod)},[K,U]),console.log(null===K||void 0===K||null===(e=K.data)||void 0===e?void 0:e.orderCalculateMethod);const{mutate:Q}=(0,S.L2)("settings-general","put",{onSuccess(){q.oR.success(a("general.success")),G()}});(0,A.useEffect)(()=>{var e;"success"===X&&(T(K.data),g(null===(e=K.data)||void 0===e?void 0:e.phonePrefix))},[X]);const Z=W(e=>{Q((0,o.A)((0,o.A)({},e),{},{orderCalculateMethod:e.orderCalculateMethod,orderPrice:e.orderPrice,phonePrefix:v,deliveryChangePrice:e.deliveryChangePrice||0}))});return(0,O.jsx)(h,{children:(0,O.jsxs)(l.Ay,{className:"md:flex",spacing:1,children:[(0,O.jsx)(l.Ay,{item:!0,className:"md:w-1/3 p-2",children:(0,O.jsx)("div",{className:"tabs",children:_.br.map(e=>{if(r(e.role))return(0,O.jsxs)("div",{className:"tab ".concat(s===e.key&&"active"),onClick:()=>i(e.key),children:[a("settings.".concat(e.name))," ",s===e.key&&(0,O.jsx)("div",{className:"left-border"})]},e.key)})})}),(0,O.jsxs)(l.Ay,{className:"md:w-2/3 p-2",children:["functionality"===s&&(0,O.jsxs)("div",{className:"settings",children:[(0,O.jsxs)(f,{children:[(0,O.jsx)(y,{className:"md:text-2xl",children:a("settings.functionality")}),(0,O.jsx)(N.O6,{title:a("general.save"),variant:"contained",onClick:Z})]}),(0,O.jsxs)(l.Ay,{container:!0,spacing:2,children:[(0,O.jsx)(l.Ay,{item:!0,md:12,xs:12,children:(0,O.jsxs)("div",{className:"item",children:[(0,O.jsx)("span",{className:"key",children:a("settings.minimum_order_amount")}),(0,O.jsx)(N.ks,{control:M,name:"orderMinimumPrice",type:"number",rules:{required:!1}})]})}),(0,O.jsx)(l.Ay,{item:!0,md:12,xs:12,children:(0,O.jsxs)("div",{className:"item",children:[(0,O.jsx)("span",{className:"key",children:a("settings.switch_for_courier")}),(0,O.jsxs)(d.A,{display:"flex",alignItems:"center",children:[(0,O.jsx)(c.A,(0,o.A)({checked:B("courierChangeOnline"),id:"courierChangeOnline"},V("courierChangeOnline"))),(0,O.jsx)("label",{className:"mb-1",htmlFor:"courierChangeOnline",children:a("general.allow")})]})]})}),(0,O.jsx)(l.Ay,{item:!0,md:12,xs:12,children:(0,O.jsxs)("div",{className:"item",children:[(0,O.jsx)("span",{className:"key",children:a("settings.banner_time")}),(0,O.jsx)(N.ks,{control:M,name:"bannerTime",type:"number"})]})}),(0,O.jsx)(l.Ay,{item:!0,md:12,xs:12,children:(0,O.jsxs)("div",{className:"item",children:[(0,O.jsx)("span",{className:"key",children:a("settings.store_radius")}),(0,O.jsx)(N.ks,{control:M,name:"storeRadius",type:"number",rules:{required:!1}})]})}),(0,O.jsx)(l.Ay,{item:!0,md:12,xs:12,children:(0,O.jsxs)("div",{className:"item",children:[(0,O.jsx)("span",{className:"key",children:a("settings.currency")}),(0,O.jsx)(N.ks,{control:M,name:"currency",type:"text",onCustomChange:e=>{const n=e.replace(/[^a-zA-Z'`]/g,"");U("currency",n)}})]})}),(0,O.jsx)(l.Ay,{item:!0,md:12,xs:12,children:(0,O.jsxs)("div",{className:"item",children:[(0,O.jsx)("span",{className:"key",children:a("settings.order_delivery_time")}),(0,O.jsx)(N.ks,{control:M,name:"maxDeliveryTime",type:"number",rules:{required:!1}})]})}),(0,O.jsx)(l.Ay,{item:!0,md:12,xs:12,children:(0,O.jsxs)("div",{className:"item",children:[(0,O.jsx)("span",{className:"key",children:a("settings.couirer_return_time")}),(0,O.jsx)(N.ks,{control:M,name:"maxArrivalTime",type:"number",rules:{required:!1}})]})}),(0,O.jsx)(l.Ay,{item:!0,md:12,xs:12,children:(0,O.jsxs)("div",{className:"item",children:[(0,O.jsxs)("span",{className:"key",children:[a("settings.premium_days")," (kun)"]}),(0,O.jsx)(N.ks,{control:M,name:"premiumDays",type:"number",rules:{required:!1}})]})}),(0,O.jsx)(l.Ay,{item:!0,md:12,xs:12,children:(0,O.jsxs)("div",{className:"item",children:[(0,O.jsx)("span",{className:"key",children:a("settings.premium_price")}),(0,O.jsx)(N.ks,{control:M,name:"premiumPrice",type:"number",rules:{required:!1}})]})}),(0,O.jsx)(l.Ay,{item:!0,md:12,xs:12,children:(0,O.jsxs)("div",{className:"item",children:[(0,O.jsx)("span",{className:"key",children:a("general.order_calculate")}),(0,O.jsx)(u.A,{fullWidth:!0,children:(0,O.jsx)(D.xI,{name:"orderCalculateMethod",control:M,render:e=>{let{field:n}=e;return(0,O.jsxs)(m.A,(0,o.A)((0,o.A)({},n),{},{value:n.value||"",sx:{borderRadius:"12px"},size:"medium",onChange:e=>{n.onChange(e.target.value),console.log("Tanlangan qiymat:",e.target.value)},children:[(0,O.jsx)(p.A,{value:"by_distance",children:a("general.by_distance")}),(0,O.jsx)(p.A,{value:"static",children:a("general.static")})]}))}})})]})}),B("orderCalculateMethod")&&(0,O.jsx)(l.Ay,{item:!0,md:12,xs:12,children:(0,O.jsxs)("div",{className:"item",children:[(0,O.jsx)("span",{className:"key",children:"by_distance"===B("orderCalculateMethod")?a("general.km_calculate_price"):a("general.static_price")}),(0,O.jsx)(N.ks,{control:M,name:"orderPrice",type:"number",rules:{min:{value:0,message:"Narx manfiy bo'lishi mumkin emas"}},inputProps:{min:0}})]})}),(0,O.jsx)(l.Ay,{item:!0,md:12,xs:12,children:(0,O.jsxs)("div",{className:"item",children:[(0,O.jsx)("span",{className:"key",children:a("general.savings_percentage")}),(0,O.jsx)(N.ks,{control:M,name:"customerSavedPercent",type:"number"})]})}),(0,O.jsx)(l.Ay,{item:!0,md:12,xs:12,children:(0,O.jsxs)("div",{className:"item",children:[(0,O.jsx)("span",{className:"key",children:"percent"===B("savedTimeCalculateMethod")?a("general.savings_time_percent"):a("general.savings_time_amount")}),(0,O.jsxs)("div",{className:"flex items-end justify-between",children:[(0,O.jsx)(N.ks,{control:M,name:"customerSavedTime",type:"number",rules:{required:!1,validate:e=>"percent"!==B("savedTimeCalculateMethod")||(e<=100||"Qiymat 100% dan katta")}}),(0,O.jsx)(l.Ay,{className:"flex",children:(0,O.jsxs)(I,{className:"percent"===B("savedTimeCalculateMethod")?"show":"",onClick:()=>U("savedTimeCalculateMethod","percent"===B("savedTimeCalculateMethod")?"amount":"percent"),children:[(0,O.jsx)(L,{children:(0,O.jsx)(E,{})}),(0,O.jsx)(L,{children:(0,O.jsx)("span",{style:{fontSize:"11px"},children:"Miqdor"})})]})})]})]})}),(0,O.jsx)(l.Ay,{item:!0,md:12,xs:12,children:(0,O.jsxs)("div",{className:"item",children:[(0,O.jsx)("span",{className:"key",children:a("settings.invitePromocode")}),(0,O.jsxs)("div",{className:"flex items-end justify-between",children:[(0,O.jsx)(N.ks,{control:M,name:"invitePromocodeAmount",type:"number",rules:{required:!1,validate:e=>"percent"!==B("invitePromocodeType")||(e<=100||"Qiymat 100% dan katta")}}),(0,O.jsx)(l.Ay,{className:"flex",children:(0,O.jsxs)(I,{className:"percent"===B("invitePromocodeType")?"show":"",onClick:()=>U("invitePromocodeType","percent"===B("invitePromocodeType")?"amount":"percent"),children:[(0,O.jsx)(L,{children:(0,O.jsx)(E,{})}),(0,O.jsx)(L,{children:(0,O.jsx)("span",{style:{fontSize:"11px"},children:"Miqdor"})})]})})]})]})}),(0,O.jsx)(l.Ay,{item:!0,md:12,xs:12,children:(0,O.jsxs)("div",{className:"item",children:[(0,O.jsx)("span",{className:"key",children:a("settings.delivery_change_limit")}),(0,O.jsx)(N.ks,{control:M,name:"deliveryChangeLimit",type:"number"})]})}),(0,O.jsx)(l.Ay,{item:!0,md:12,xs:12,children:(0,O.jsxs)("div",{className:"item",children:[(0,O.jsx)("span",{className:"key",children:a("settings.delivery_change_price")}),(0,O.jsx)(N.ks,{control:M,name:"deliveryChangePrice",type:"number",rules:{required:!1}})]})}),(0,O.jsx)(l.Ay,{item:!0,md:12,xs:12,children:(0,O.jsx)("div",{className:"item",children:(0,O.jsxs)(d.A,{children:[(0,O.jsx)(x.A,{fontSize:"13px",color:"#000",children:a("common.phone_prefix_comment")}),(0,O.jsx)(d.A,{marginTop:"10px",children:(0,O.jsx)(j,{value:v,onChange:e=>{g(e.target.value)},sx:{"& fieldset":{border:"none"}},children:w.map(e=>(0,O.jsxs)(b,{value:null===e||void 0===e?void 0:e.prefix,children:[(0,O.jsx)("img",{src:"/images/phone/".concat(null===e||void 0===e?void 0:e.flag,".svg"),alt:null===e||void 0===e?void 0:e.flag,style:{width:"32px"}}),(0,O.jsxs)(x.A,{fontFamily:"SF Pro Display",marginLeft:"12px",marginBottom:0,children:[a("common.country.".concat(null===e||void 0===e?void 0:e.translationKey)),"\xa0 (",null===e||void 0===e?void 0:e.prefix,")"]})]},null===e||void 0===e?void 0:e.flag))})})]})})})]})]}),"discountOrder"===s&&(0,O.jsx)("div",{className:"settings",children:(0,O.jsx)(J,{data:K})}),"bonusOrder"===s&&(0,O.jsx)("div",{className:"settings",children:(0,O.jsx)(H,{data:K})}),"premiumDiscountOrder"===s&&(0,O.jsx)("div",{className:"settings",children:(0,O.jsx)(F,{data:K})}),"mainAddress"===s&&(0,O.jsx)("div",{className:"settings",children:(0,O.jsx)(P,{})}),"websiteConditions"===s&&(0,O.jsx)("div",{className:"settings",children:(0,O.jsx)(R,{})})]})]})})},Z=()=>(0,O.jsx)(Q,{})},37802:(e,n,t)=>{t.d(n,{A:()=>a});var s=t(65043),i=t(37216),r=t(70579);const a=e=>{let{getCoordinate:n,center:t,height:a}=e;const[o,l]=(0,s.useState)(t),d=(0,s.useRef)(null);(0,s.useEffect)(()=>{t&&(l(t),d.current&&d.current.setCenter([t.latitude,t.longitude]))},[t]);return(0,r.jsx)(i.Xi,{children:(0,r.jsxs)(i.T5,{width:"100%",height:a||"500px",defaultState:{center:null!==t&&void 0!==t&&t.latitude?[null===t||void 0===t?void 0:t.latitude,null===t||void 0===t?void 0:t.longitude]:[41.315163390767026,69.27958692367339],zoom:14,behaviors:["default","scrollZoom"]},instanceRef:e=>{d.current=e},onClick:e=>{const t={latitude:e.get("coords")[0],longitude:e.get("coords")[1]};l(t),n(t)},children:[(0,r.jsx)(i.Ro,{geometry:[null===o||void 0===o?void 0:o.latitude,null===o||void 0===o?void 0:o.longitude]}),(0,r.jsx)(i.T3,{}),(0,r.jsx)(i._3,{options:{float:"left"},onClick:()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{const t={latitude:e.coords.latitude,longitude:e.coords.longitude};l(t),n(t),d.current&&d.current.setCenter([t.latitude,t.longitude],14)},e=>{console.error("Geolocation error:",e)}):console.error("Geolocation is not supported by this browser.")}}),(0,r.jsx)(i.c3,{options:{float:"right"}}),(0,r.jsx)(i.pj,{options:{float:"right"}})]})})}},51387:(e,n,t)=>{t.d(n,{A:()=>r});var s=t(59662),i=t(70579);const r=(0,s.A)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")}}]);
//# sourceMappingURL=801.2346f74e.chunk.js.map