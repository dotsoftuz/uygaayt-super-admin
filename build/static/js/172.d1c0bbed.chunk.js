"use strict";(self.webpackChunkbestune_admin=self.webpackChunkbestune_admin||[]).push([[172],{17172:function(e,n,o){o.r(n),o.d(n,{default:function(){return b}});var t=o(29439),r=o(45489),l=o(72791),s=o(763),a=o(39230),i=o(79405),d=o(36978),m=o(61134),u=o(1413),c=o(61889),p=o(62750),f=o(80184),x=function(e){var n=e.formStore,o=e.editingEmployeeId,s=e.resetForm,i=(0,a.$G)().t,d=n.control,m=n.handleSubmit,x=n.reset,h=(n.watch,(0,l.useState)()),j=(0,t.Z)(h,2),b=j[0],v=j[1],y=(0,p.uC)(o?"employee/update":"employee/create",o?"put":"post"),N=y.mutate,Z=y.status,g=(0,p.h_)("employee/get-by-id/".concat(o),{},{enabled:!!o,suspense:!1}),w=g.data,C=g.status;(0,l.useEffect)((function(){"success"===Z&&s()}),[Z]);return(0,l.useEffect)((function(){var e;"success"===C&&x((0,u.Z)((0,u.Z)({},w.data),{},{roleId:null===(e=w.data.role)||void 0===e?void 0:e._id}))}),[w,C]),(0,f.jsx)("div",{className:"custom-drawer",children:(0,f.jsx)("form",{id:"employee",onSubmit:m((function(e){N((0,u.Z)({_id:o},e))})),children:(0,f.jsxs)(c.ZP,{container:!0,spacing:2,children:[(0,f.jsxs)(c.ZP,{item:!0,md:12,children:[(0,f.jsx)(r.sb,{control:d,name:"phoneNumber",label:i("common.phoneNumber")}),(null===b||void 0===b?void 0:b._id)&&!o&&(0,f.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,f.jsx)("span",{className:"text-error mt-2",children:i("common.alreadyExistEmployee")}),(0,f.jsx)(r.c7,{title:i("general.add"),onClick:function(){x((0,u.Z)((0,u.Z)({},b),{},{_id:void 0})),v(null)}})]})]}),(0,f.jsx)(c.ZP,{item:!0,md:12,children:(0,f.jsx)(r.oi,{control:d,name:"firstName",label:i("common.firstName")})}),(0,f.jsx)(c.ZP,{item:!0,md:12,children:(0,f.jsx)(r.oi,{control:d,name:"lastName",label:i("common.lastName")})}),(0,f.jsx)(c.ZP,{item:!0,md:12,children:(0,f.jsx)(r.oi,{control:d,name:"password",label:i("common.password"),type:"password",rules:{required:!1}})}),(0,f.jsx)(c.ZP,{item:!0,md:12,children:(0,f.jsx)(r.Ls,{name:"roleId",control:d,optionsUrl:"role/paging",dataProp:"data.data",label:i("common.role")})})]})})})},h=o(29001),j=o(84544),b=function(){var e=(0,l.useState)(),n=(0,t.Z)(e,2),o=n[0],u=n[1],c=(0,l.useState)(),p=(0,t.Z)(c,2),b=p[0],v=p[1],y=function(){var e=(0,a.$G)().t;return[{field:e("common.fullName"),renderCell:function(e){return(0,s.get)(e,"row.firstName","")+" "+(0,s.get)(e,"row.lastName","")},flex:1.5},{field:e("common.phoneNumber"),renderCell:function(e){return e.row.phoneNumber}},{field:e("common.role"),renderCell:function(e){var n;return null===(n=e.row.role)||void 0===n?void 0:n.name}}]}(),N=(0,h.w)(),Z=(0,a.$G)().t,g=(0,i.T)(),w=(0,m.cI)(),C=function(){u(void 0),w.reset({firstName:"",lastName:"",phoneNumber:"",password:"",roleId:""})},_=(0,l.useMemo)((function(){return{}}),[]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(r.iA,{dataUrl:"employee/paging",columns:y,searchable:!0,onAddButton:N("employeeCreate")?function(){return g((0,d.dl)(!0))}:void 0,onEditColumn:N("employeeUpdate")?function(e){u(e._id),g((0,d.dl)(!0))}:void 0,onDeleteColumn:N("employeeDelete")?function(e){return v(e._id)}:void 0,exQueryParams:_}),(0,f.jsx)(j.Z,{open:b,setOpen:v,url:"employee/delete"}),(0,f.jsx)(r._8,{FORM_ID:"employee",isEditing:!!o,customTitle:Z("general.addEmployee"),onClose:C,children:(0,f.jsx)(x,{formStore:w,resetForm:C,editingEmployeeId:o})})]})}}}]);
//# sourceMappingURL=172.d1c0bbed.chunk.js.map