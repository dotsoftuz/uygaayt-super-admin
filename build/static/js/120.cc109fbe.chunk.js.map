{"version":3,"file":"static/js/120.cc109fbe.chunk.js","mappings":"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","sources":["pages/payment-method/components/PaymentMethodForm.tsx","pages/payment-method/index.tsx","pages/payment-method/container/PaymentMethod.tsx","pages/payment-method/container/payment-method.columns.tsx"],"sourcesContent":["import { FC, useEffect } from \"react\";\r\nimport { Grid, Typography } from \"@mui/material\";\r\nimport { ImageInput, TextInput } from \"components\";\r\nimport { Controller, UseFormReturn } from \"react-hook-form\";\r\nimport { useApi, useApiMutation } from \"hooks/useApi/useApiHooks\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\ninterface IEmployeesForm {\r\n  formStore: UseFormReturn<any>;\r\n  editingPaymentMethodId: string | undefined;\r\n  resetForm: () => void;\r\n}\r\n\r\nconst PaymentMethodForm: FC<IEmployeesForm> = ({\r\n  formStore,\r\n  editingPaymentMethodId,\r\n  resetForm,\r\n}) => {\r\n  const { t } = useTranslation();\r\n  const { control, handleSubmit, reset, watch, setValue } = formStore;\r\n\r\n  const { mutate, status } = useApiMutation(\r\n    editingPaymentMethodId ? `/payment-method/update` : \"/payment-method/create\",\r\n    editingPaymentMethodId ? \"put\" : \"post\"\r\n  );\r\n\r\n  const { data: getByIdData, status: getByIdStatus } = useApi(\r\n    `payment-method/get-by-id/${editingPaymentMethodId}`,\r\n    {},\r\n    {\r\n      enabled: !!editingPaymentMethodId,\r\n      suspense: false,\r\n    }\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (status === \"success\") {\r\n      resetForm(); // Reset form after successful submission\r\n    }\r\n  }, [status]);\r\n\r\n  const submit = (data: any) => {\r\n    mutate({\r\n      _id: editingPaymentMethodId,\r\n      ...data,\r\n      link: data.link.url\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (getByIdStatus === \"success\") {\r\n      reset({\r\n        name: getByIdData.data.name,\r\n        link: getByIdData.data.link\r\n      });\r\n    }\r\n  }, [getByIdStatus, getByIdData]);\r\n\r\n  useEffect(() => {\r\n    // Reset the form if editingAttributeId changes to undefined (for create mode)\r\n    if (!editingPaymentMethodId) {\r\n      reset({\r\n        name: \"\",\r\n        link: \"\",\r\n      });\r\n    }\r\n  }, [editingPaymentMethodId, reset]);\r\n\r\n  return (\r\n    <div className=\"custom-drawer\">\r\n      <form id=\"payment-method\" onSubmit={handleSubmit(submit)}>\r\n        <Grid container spacing={2}>\r\n          <Grid item md={12}>\r\n            <TextInput\r\n              control={control}\r\n              name=\"name\"\r\n              label={t('common.title')}\r\n            />\r\n          </Grid>\r\n          <Grid item md={12}>\r\n            <label className=\"py-2\" htmlFor=\"\">QR code</label><br /><br />\r\n            <ImageInput rules={{ required: false }} control={control} setValue={setValue} name=\"link\" /><br />\r\n            <label className=\"py-2\" htmlFor=\"\">{t('general.recommendation_img')}</label>\r\n          </Grid>\r\n        </Grid>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PaymentMethodForm;\r\n","import Attribute from \"./container/PaymentMethod\";\r\n\r\nexport default Attribute;\r\n","import { FormDrawer, Table } from \"components\";\r\nimport { useMemo, useState } from \"react\";\r\nimport { usePaymentMethodColumns } from \"./payment-method.columns\";\r\nimport { useAppDispatch } from \"../../../store/storeHooks\";\r\nimport { setOpenDrawer } from \"components/elements/FormDrawer/formdrawer.slice\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useRoleManager } from \"services/useRoleManager\";\r\nimport WarningModal from \"components/common/WarningModal/WarningModal\";\r\nimport PaymentMethodForm from \"../components/PaymentMethodForm\";\r\n\r\nconst PaymentMethod = () => {\r\n  const [editingPaymentMethodId, setEditingPaymentMethodId] = useState<any>();\r\n  const [paymentMethodId, setPaymentMethodId] = useState<any>();\r\n  const columns = usePaymentMethodColumns();\r\n  const hasAccess = useRoleManager();\r\n  const { t } = useTranslation();\r\n  const dis = useAppDispatch();\r\n  const formStore = useForm<any>();\r\n\r\n  const resetForm = () => {\r\n    setEditingPaymentMethodId(undefined);\r\n    formStore.reset({\r\n      name: \"\",\r\n    });\r\n  };\r\n\r\n  const queryParams = useMemo(() => ({\r\n\r\n  }), []);\r\n\r\n  return (\r\n    <>\r\n      <Table\r\n        dataUrl=\"payment-method/paging\"\r\n        columns={columns}\r\n        searchable\r\n        onAddButton={() => {\r\n          dis(setOpenDrawer(true));\r\n        }}\r\n        onEditColumn={(row) => {\r\n          setEditingPaymentMethodId(row._id);\r\n          dis(setOpenDrawer(true));\r\n        }}\r\n        onDeleteColumn={(row) => setPaymentMethodId(row._id)}\r\n        exQueryParams={queryParams}\r\n      />\r\n      <WarningModal open={paymentMethodId} setOpen={setPaymentMethodId} url=\"payment-method/delete\" />\r\n      <FormDrawer\r\n        FORM_ID=\"payment-method\"\r\n        isEditing={!!editingPaymentMethodId}\r\n        customTitle={t(\"general.payment_method\")}\r\n        onClose={resetForm}\r\n      >\r\n        <PaymentMethodForm\r\n          formStore={formStore}\r\n          resetForm={resetForm}\r\n          editingPaymentMethodId={editingPaymentMethodId}\r\n        />\r\n      </FormDrawer>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PaymentMethod;\r\n","import { GridColumns } from \"@mui/x-data-grid\";\r\nimport { Tooltip } from \"antd\";\r\nimport { get } from \"lodash\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nexport const usePaymentMethodColumns = (): GridColumns => {\r\n  const { t } = useTranslation();\r\n\r\n  return [\r\n    {\r\n      field: t(\"common.name\"),\r\n      renderCell({ row }) {\r\n        const title = row?.name;\r\n        const truncatedTitle = title?.length > 50 ? `${title.substring(0, 50)}...` : title;\r\n    \r\n        return (\r\n          <Tooltip title={title} arrow>\r\n            <span>{truncatedTitle}</span>\r\n          </Tooltip>\r\n        );\r\n      },\r\n    }\r\n    \r\n    // {\r\n    //   field: t(\"common.store\"),\r\n    //   renderCell({ row }) {\r\n    //     return get(row, \"store.name\", \"-\");\r\n    //   },\r\n    // },\r\n  ];\r\n};\r\n"],"names":["_ref","formStore","editingPaymentMethodId","resetForm","t","useTranslation","control","handleSubmit","reset","watch","setValue","mutate","status","useApiMutation","data","getByIdData","getByIdStatus","useApi","concat","enabled","suspense","useEffect","name","link","_jsx","className","children","id","onSubmit","_objectSpread","_id","url","_jsxs","Grid","container","spacing","item","md","TextInput","label","htmlFor","ImageInput","rules","required","PaymentMethod","setEditingPaymentMethodId","useState","paymentMethodId","setPaymentMethodId","columns","usePaymentMethodColumns","field","renderCell","row","title","truncatedTitle","length","substring","Tooltip","arrow","useRoleManager","dis","useAppDispatch","useForm","undefined","queryParams","useMemo","_Fragment","Table","dataUrl","searchable","onAddButton","setOpenDrawer","onEditColumn","onDeleteColumn","exQueryParams","WarningModal","open","setOpen","FormDrawer","FORM_ID","isEditing","customTitle","onClose","PaymentMethodForm"],"sourceRoot":""}