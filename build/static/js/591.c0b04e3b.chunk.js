"use strict";(self.webpackChunkbestune_admin=self.webpackChunkbestune_admin||[]).push([[591],{40223:function(e,n,r){var t=r(4942),i=r(1413),o=r(29439),a=r(75912),s=r(27391),l=r(1048),d=r(39500),c=r(32188),u=r(71257),m=r(35834),x=r(763),h=r(72791),f=r(39230),p=r(11087),v=r(80184);n.Z=function(e){var n=e.options,r=void 0===n?[]:n,g=e.optionsUrl,j=void 0===g?"":g,b=e.returnOnlyId,Z=void 0===b||b,y=e.label,P=e.disabled,w=e.placeholder,C=e.filterName,T=e.nameProp,I=void 0===T?"name":T,k=e.exQueryParams,S=void 0===k?{}:k,z=e.dataProp,D=void 0===z?"data.data":z,A=e.mapData,N=e.onChange,F=(0,h.useState)(),M=(0,o.Z)(F,2),_=M[0],q=M[1],E=(0,h.useState)(),R=(0,o.Z)(E,2),W=R[0],B=R[1],L=(0,u.Z)(W,600),V=L.debouncedValue,O=L.isDebouncing,H=(0,h.useState)(null),U=(0,o.Z)(H,2),X=U[0],G=U[1],Y=localStorage.getItem("i18nextLng")||"uz";(0,h.useEffect)((function(){q({search:W})}),[V]);var Q=(0,c.h_)(j,(0,i.Z)((0,i.Z)({},_),S),{enabled:!!j,suspense:!1}),$=Q.data,K=Q.isFetching,J=function(e){return null!==e&&void 0!==e&&e.firstName?"".concat(null===e||void 0===e?void 0:e.firstName," ").concat(null===e||void 0===e?void 0:e.lastName):null===e||void 0===e?void 0:e[I]},ee=((0,x.get)($,D)||r).map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{name:J(e)})})),ne=(0,p.lr)(),re=(0,o.Z)(ne,2),te=(re[0],re[1]),ie=(0,m.Z)(),oe=(0,f.$G)().t;return(0,v.jsxs)(l.M,{children:[y&&(0,v.jsx)("label",{children:y}),(0,v.jsx)(a.Z,{options:A?A(ee):ee,getOptionLabel:function(e){var n;return(null===e||void 0===e||null===(n=e.name)||void 0===n?void 0:n[Y])||""},onChange:function(e,n){null===N||void 0===N||N(n),G(Z?null===n||void 0===n?void 0:n._id:n),C&&(n?te((0,i.Z)((0,i.Z)({},ie),{},(0,t.Z)({},C,null===n||void 0===n?void 0:n._id))):(delete ie[C],te((0,i.Z)({},ie))))},loading:K||O,disabled:P,sx:{"& fieldset":{border:"none"}},loadingText:"izlamoqda...",noOptionsText:!O&&"malumot topilmadi",value:Z?(0,d.e)(ee,X):X,renderInput:function(e){return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(s.Z,(0,i.Z)((0,i.Z)({},e),{},{inputProps:(0,i.Z)((0,i.Z)({},e.inputProps),{},{onChange:function(n){var r,t;null===e||void 0===e||null===(r=e.inputProps)||void 0===r||null===(t=r.onChange)||void 0===t||t.call(r,n),B(n.target.value||"")}}),onBlur:function(){return B(void 0)},variant:"outlined",fullWidth:!0,placeholder:w||oe("LABELS.ROLE_ALL.TITLE")}))})}})]})}},88892:function(e,n,r){var t=r(29439),i=r(72791),o=r(73405),a=r(80184);n.Z=function(e){var n=e.getCoordinate,r=e.center,s=e.height,l=(0,i.useState)(r),d=(0,t.Z)(l,2),c=d[0],u=d[1],m=(0,i.useRef)(null);(0,i.useEffect)((function(){r&&(u(r),m.current&&m.current.setCenter([r.latitude,r.longitude]))}),[r]);return(0,a.jsx)(o.Yy,{children:(0,a.jsxs)(o.D5,{width:"100%",height:s||"500px",defaultState:{center:null!==r&&void 0!==r&&r.latitude?[null===r||void 0===r?void 0:r.latitude,null===r||void 0===r?void 0:r.longitude]:[41.315163390767026,69.27958692367339],zoom:14,behaviors:["default","scrollZoom"]},instanceRef:function(e){m.current=e},onClick:function(e){var r={latitude:e.get("coords")[0],longitude:e.get("coords")[1]};u(r),n(r)},children:[(0,a.jsx)(o.ah,{geometry:[null===c||void 0===c?void 0:c.latitude,null===c||void 0===c?void 0:c.longitude]}),(0,a.jsx)(o.ot,{}),(0,a.jsx)(o.Bo,{options:{float:"left"},onClick:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){var r={latitude:e.coords.latitude,longitude:e.coords.longitude};u(r),n(r),m.current&&m.current.setCenter([r.latitude,r.longitude],14)}),(function(e){console.error("Geolocation error:",e)})):console.error("Geolocation is not supported by this browser.")}}),(0,a.jsx)(o.Sj,{options:{float:"right"}}),(0,a.jsx)(o.Ly,{options:{float:"right"}})]})})}},1903:function(e,n,r){r.d(n,{Z:function(){return l}});var t,i=r(30168),o=r(47191),a=(0,r(17939).default)(o.LD)(t||(t=(0,i.Z)(["\n  display: flex;\n  flex-direction: column-reverse;\n  border: none;\n  width: 100%;\n  padding-bottom: 20px;\n  .quill {\n    .ql-container {\n      .ql-tooltip {\n        transform: translateX(97px);\n        z-index: 10;\n      }\n      .ql-editor {\n        background-color: #fff;\n        padding: 15px;\n        border-radius: 12px;\n        min-height: 80px;\n        transition: all 0.3s;\n        border: 1px solid #d9d9d9;\n        p {\n          margin: 0;\n          font-size: 14px;\n        }\n      }\n    }\n  }\n  .ql-toolbar {\n    padding: 0;\n    transition: opacity 1s ease-out;\n    border-radius: 0;\n    border-bottom: none;\n    margin-top: 10px;\n    button {\n      border: none;\n      margin: 0 5px;\n      svg {\n        width: 24px !important;\n        height: 24px !important;\n        fill: #000 !important;\n        path {\n          fill: #000;\n        }\n      }\n    }\n  }\n  .ql-editing {\n    left: 30px !important;\n    transform: translateX(0px) !important;\n    z-index: 100;\n  }\n"]))),s=r(80184),l=function(e){var n=e.value,r=e.onChange,t=e.onImageUpload,i=e.isError,o=e.type;return(0,s.jsx)(a,{controls:[["bold","italic","underline","strike","clean","unorderedList","orderedList","alignLeft","alignCenter","alignRight"]],isError:!!i,value:n,onChange:r,onImageUpload:t,type:o})}},95894:function(e,n,r){r.d(n,{Z:function(){return h}});var t,i,o=r(72791),a=r(61134),s=r(30168),l=r(17939),d=((0,l.default)("div")(t||(t=(0,s.Z)(['\n  border: 1px solid;\n  border-color: "grey" !important;\n  outline: none;\n']))),(0,l.default)("div")(i||(i=(0,s.Z)(["\n  .react-time-picker {\n    width: 100%;\n    .react-time-picker__wrapper {\n      width: 100%;\n      border-radius: 8px;\n      border: 1px solid #d9d9d9;\n      box-sizing: border-box;\n      color: #333333 !important;\n      padding: 9px 16px;\n      font-size: 16px;\n      line-height: 20px;\n      letter-spacing: -0.02em;\n      outline: none;\n      font-weight: 500;\n      transition: all 0.1s ease-out;\n      font-weight: 500;\n      transition: 0.2s ease all;\n      .react-time-picker__inputGroup {\n        input {\n          outline-color: #949494;\n        }\n      }\n    }\n    .react-time-picker__clock {\n      display: none;\n    }\n  }\n"])))),c=r(64717),u=r(39230),m=r(80184),x=function(e){var n=e.control,r=e.name,t=e.errors,i=e.rules,o=e.label,s=(0,u.$G)().t;return(0,m.jsxs)(d,{children:[o&&(0,m.jsx)("label",{className:"custom-label",children:o}),(0,m.jsx)(a.Qr,{control:n,name:r,rules:i,render:function(e){var n=e.field,r=n.onChange,t=n.value;return(0,m.jsx)(c.Z,{clockIcon:null,className:"time-picker",onChange:r,value:t,format:"HH:mm",hourPlaceholder:"HH",minutePlaceholder:"mm",locale:"uz-UZ"})}}),!!t[r]&&(0,m.jsx)("h6",{className:"text-error mt-1",children:s("general.required")})]})},h=(0,o.memo)(x)},44931:function(e,n,r){r.r(n),r.d(n,{default:function(){return Pe}});var t,i=r(57689),o=r(29439),a=r(71796),s=r(50131),l=r(763),d=r(39230),c=r(81918),u=r(13400),m=r(31976),x=r(23786),h=r(52898),f=r(72791),p=r(80184),v=function(e){var n=e.row,r=e.onView,t=e.onEdit,i=e.onDelete,a=e.onActivate,s=(0,f.useState)(null),l=(0,o.Z)(s,2),d=l[0],c=l[1],v=Boolean(d),g=function(){c(null)},j=function(e){e(),g()};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(u.Z,{onClick:function(e){e.stopPropagation(),c(e.currentTarget)},size:"small",sx:{color:"#EB5B00"},children:(0,p.jsx)(h.Z,{})}),(0,p.jsxs)(m.Z,{anchorEl:d,open:v,onClose:g,onClick:function(e){return e.stopPropagation()},children:[r&&(0,p.jsx)(x.Z,{onClick:function(){return j((function(){return r(n)}))},children:"\ud83d\udc41 Ko'rish"}),t&&(0,p.jsx)(x.Z,{onClick:function(){return j((function(){return t(n)}))},children:"\u270f\ufe0f Tahrir"}),!n.isActive&&a&&(0,p.jsx)(x.Z,{onClick:function(){return j((function(){return a(n)}))},children:"\u2795 Aktivlashtirish"}),i&&(0,p.jsx)(x.Z,{onClick:function(){return j((function(){return i(n)}))},children:"\ud83d\uddd1 O'chirish"})]})]})},g=r(79405),j=r(36978),b=r(61134),Z=r(29001),y=r(61889),P=r(58406),w=r(84544),C=r(32188),T=r(75985),I=r(93433),k=r(1413),S=r(697),z=r(13603),D=r(43896),A=r(94925),N=r(94294),F=r(94721),M=r(1903),_=r(95894),q=r(88892),E=r(71257),R=r(31694),W=r(76189),B=(0,W.Z)((0,p.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"LocationOn"),L=r(46174),V=(0,W.Z)((0,p.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm2 16H8v-2h8zm0-4H8v-2h8zm-3-5V3.5L18.5 9z"}),"Description"),O=(0,W.Z)((0,p.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings"),H=r(5397),U=function(e){var n=e.formStore,r=e.editingStoreId,t=e.resetForm,i=e.storeProps,s=(0,d.$G)().t,l=n.control,c=n.handleSubmit,u=n.reset,m=n.watch,x=n.setValue,h=n.formState,v=i.logoImage,g=i.setLogoImage,j=i.bannerImage,b=i.setBannerImage,Z=(0,f.useState)(!1),P=(0,o.Z)(Z,2),w=(P[0],P[1]),W=(0,f.useState)(),U=(0,o.Z)(W,2),X=U[0],G=U[1],Y=(0,f.useState)(""),Q=(0,o.Z)(Y,2),$=Q[0],K=Q[1],J=(0,E.Z)($,1e3).debouncedValue,ee=[{value:1,label:"Dushanba"},{value:2,label:"Seshanba"},{value:3,label:"Chorshanba"},{value:4,label:"Payshanba"},{value:5,label:"Juma"},{value:6,label:"Shanba"},{value:7,label:"Yakshanba"}];(0,f.useEffect)((function(){x("logoImage",v||void 0)}),[v,x]),(0,f.useEffect)((function(){x("bannerImage",j||void 0)}),[j,x]);var ne=(0,f.useState)([1,2,3,4,5,6,7]),re=(0,o.Z)(ne,2),te=re[0],ie=re[1],oe=(0,C.uC)(r?"store/update":"store/create",r?"put":"post",{}),ae=oe.mutate,se=oe.status,le=(0,C.uC)("address/by-name","post",{onSuccess:function(){w(!0)}}),de=le.mutate,ce=(le.data,(0,C.uC)("address/by-point","post",{onSuccess:function(e){var n=e.data;x("addressName",null===n||void 0===n?void 0:n.name)}}).mutate);(0,f.useEffect)((function(){"string"===typeof $&&$.trim()&&de({name:$})}),[J]),(0,f.useEffect)((function(){null!==X&&void 0!==X&&X.latitude&&null!==X&&void 0!==X&&X.longitude&&(ce({latitude:X.latitude,longitude:X.longitude}),x("addressLocation",X))}),[X,x]);var ue=(0,C.h_)("store/get-by-id/".concat(r),{},{enabled:!!r&&!(null!==r&&void 0!==r&&r.startsWith("store_")),suspense:!1}),me=ue.data,xe=ue.status;(0,f.useEffect)((function(){if("success"===xe&&null!==me&&void 0!==me&&me.data){var e,n,r,t,i,o,a=me.data;u({name:a.name||"",phoneNumber:a.phoneNumber||"",password:"",email:a.email||"",website:a.website||"",addressName:a.addressName||"",addressLocation:a.addressLocation||null,type:a.type||"shop",brandColor:a.brandColor||"#ef6c1d",categoryIds:a.categoryIds||[],orderMinimumPrice:a.orderMinimumPrice||"",itemPrepTimeFrom:a.itemPrepTimeFrom||"",itemPrepTimeTo:a.itemPrepTimeTo||"",workTime:a.workTime||"",startTime:11===(null===(e=a.workTime)||void 0===e?void 0:e.length)?null===(n=a.workTime)||void 0===n?void 0:n.slice(0,5):"",endTime:11===(null===(r=a.workTime)||void 0===r?void 0:r.length)?null===(t=a.workTime)||void 0===t?void 0:t.slice(-5):"",workDays:(null===(i=a.workDays)||void 0===i?void 0:i.filter((function(e){return!1!==e.isWorking})).map((function(e){return e.day})))||[1,2,3,4,5,6,7],description:a.description||"",descriptionTranslate:a.descriptionTranslate||{uz:"",ru:"",en:""},isActive:void 0===a.isActive||a.isActive,isVerified:a.isVerified||!1,isPremium:a.isPremium||!1,averageRating:a.averageRating||0,acceptCash:a.acceptCash||!1,acceptCard:a.acceptCard||!1,acceptOnlinePayment:a.acceptOnlinePayment||!1,isShowReview:void 0===a.isShowReview||a.isShowReview}),G(a.addressLocation);var s=(null===(o=a.workDays)||void 0===o?void 0:o.filter((function(e){return!1!==e.isWorking})).map((function(e){return e.day})))||[1,2,3,4,5,6,7],l=Array.from(new Set(s));if(ie(l),ee.forEach((function(e){x("workDay_".concat(e.value),l.includes(e.value))})),a.logoId){var d={_id:a.logoId,url:"".concat("http://localhost:3003/v1","/image/").concat(a.logoId)};g(d),x("logoImage",d)}else g(null),x("logoImage",void 0);if(a.bannerId){var c={_id:a.bannerId,url:"".concat("http://localhost:3003/v1","/image/").concat(a.bannerId)};b(c),x("bannerImage",c)}else b(null),x("bannerImage",void 0)}}),[xe,me,g,b,x]),(0,f.useEffect)((function(){"success"===se&&(u({name:"",phoneNumber:"",password:"",email:"",website:"",addressName:"",addressLocation:null,type:"shop",brandColor:"#ef6c1d",categoryIds:[],orderMinimumPrice:"",itemPrepTimeFrom:"",itemPrepTimeTo:"",workTime:"",startTime:"",endTime:"",workDays:[1,2,3,4,5,6,7],description:"",descriptionTranslate:{uz:"",ru:"",en:""},isActive:!0,isVerified:!1,isPremium:!1,averageRating:0,acceptCash:!1,acceptCard:!1,acceptOnlinePayment:!1,isShowReview:!0}),ie([1,2,3,4,5,6,7]),G(void 0),g(null),b(null),x("logoImage",void 0),x("bannerImage",void 0),t())}),[se,x]);var he=(0,f.useState)(0),fe=(0,o.Z)(he,2),pe=fe[0],ve=fe[1];return(0,p.jsxs)("form",{id:"store",onSubmit:c((function(e){if(!r&&!X)return T.Am.error("Manzilni xaritada belgilash majburiy"),void ve(1);if(!e.startTime||!e.endTime)return T.Am.error("Ish vaqti majburiy"),void ve(2);if(!e.type)return T.Am.error("Turi majburiy"),void ve(0);var n=(0,k.Z)((0,k.Z)({},r&&{_id:r}),{},{name:e.name,phoneNumber:e.phoneNumber,password:e.password||void 0,email:e.email||void 0,website:e.website||void 0,addressName:e.addressName||"",addressLocation:X||void 0,type:e.type||"shop",brandColor:e.brandColor||"#ef6c1d",categoryIds:e.categoryIds||[],orderMinimumPrice:e.orderMinimumPrice?+e.orderMinimumPrice:0,itemPrepTimeFrom:e.itemPrepTimeFrom?+e.itemPrepTimeFrom:5,itemPrepTimeTo:e.itemPrepTimeTo?+e.itemPrepTimeTo:10,workTime:e.startTime&&e.endTime?"".concat(e.startTime,"-").concat(e.endTime):"",workDays:[1,2,3,4,5,6,7].map((function(n){return{day:n,startTime:e.startTime||"09:00",endTime:e.endTime||"18:00",isWorking:te.includes(n)}})),description:e.description||"",descriptionTranslate:e.descriptionTranslate||void 0,logoId:(null===v||void 0===v?void 0:v._id)||void 0,bannerId:(null===j||void 0===j?void 0:j._id)||void 0,isActive:void 0===e.isActive||e.isActive,isVerified:e.isVerified||!1,isPremium:e.isPremium||!1,averageRating:e.averageRating?+e.averageRating:0,acceptCash:e.acceptCash||!1,acceptCard:e.acceptCard||!1,acceptOnlinePayment:e.acceptOnlinePayment||!1,isShowReview:void 0===e.isShowReview||e.isShowReview});!n.password&&r&&delete n.password,ae(n)})),children:[(0,p.jsx)(S.Z,{sx:{borderBottom:1,borderColor:"divider",mb:3,width:"100%",minWidth:0,overflow:"hidden"},children:(0,p.jsxs)(z.Z,{value:pe,onChange:function(e,n){ve(n)},variant:"scrollable",scrollButtons:"auto",sx:{width:"100%",minWidth:0,"& .MuiTab-root":{minHeight:48,textTransform:"none",fontSize:"14px",fontWeight:500},"& .MuiTabs-scroller":{width:"100%"}},children:[(0,p.jsx)(D.Z,{icon:(0,p.jsx)(R.Z,{}),iconPosition:"start",label:"Asosiy ma'lumotlar"}),(0,p.jsx)(D.Z,{icon:(0,p.jsx)(B,{}),iconPosition:"start",label:"Manzil"}),(0,p.jsx)(D.Z,{icon:(0,p.jsx)(L.Z,{}),iconPosition:"start",label:"Narxlar va vaqt"}),(0,p.jsx)(D.Z,{icon:(0,p.jsx)(V,{}),iconPosition:"start",label:"Tavsif"}),(0,p.jsx)(D.Z,{icon:(0,p.jsx)(O,{}),iconPosition:"start",label:"Sozlamalar"})]})}),0===pe&&(0,p.jsx)(S.Z,{sx:{width:"100%",minWidth:0},children:(0,p.jsxs)(y.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,p.jsx)(y.ZP,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,p.jsx)(a.oi,{control:l,name:"name",label:"Do'kon/Restoran nomi",placeholder:"Masalan: Uygaayt Do'kon",rules:{required:{value:!0,message:"Do'kon/Restoran nomi majburiy"}}})}),(0,p.jsx)(y.ZP,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,p.jsx)(a.sb,{control:l,name:"phoneNumber",label:s("common.phoneNumber"),rules:{required:{value:!0,message:"Telefon raqami majburiy"}}})}),!r&&(0,p.jsx)(y.ZP,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,p.jsx)(a.oi,{control:l,name:"password",type:"password",label:"Parol",rules:{required:!r,minLength:{value:4,message:"Parol kamida 4 ta belgi bo'lishi kerak"}},placeholder:"Parol kiriting (min 4 belgi)"})}),r&&(0,p.jsx)(y.ZP,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,p.jsx)(a.oi,{control:l,name:"password",type:"password",label:"Yangi parol (ixtiyoriy)",rules:{required:!1,minLength:{value:4,message:"Parol kamida 4 ta belgi bo'lishi kerak"}},placeholder:"Parolni yangilash uchun kiriting"})}),(0,p.jsx)(y.ZP,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,p.jsx)(a.oi,{control:l,name:"email",type:"email",label:"Email",placeholder:"Masalan: info@store.uz",rules:{required:!1}})}),(0,p.jsx)(y.ZP,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,p.jsx)(a.oi,{control:l,name:"website",type:"url",label:"Veb-sayt URL",placeholder:"Masalan: https://www.store.uz",rules:{required:!1}})}),(0,p.jsx)(y.ZP,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,p.jsx)(a.p7,{control:l,name:"type",label:"Turi",options:[{_id:"shop",name:"Do'kon"},{_id:"restaurant",name:"Restoran"}],rules:{required:{value:!0,message:"Turi majburiy"}}})}),(0,p.jsx)(y.ZP,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,p.jsx)(a.zH,{control:l,name:"brandColor",label:"Brend rangi",placeholder:"#ef6c1d",rules:{required:{value:!0,message:"Brend rangi majburiy"}}})}),(0,p.jsx)(y.ZP,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,p.jsx)(a.Ls,{control:l,name:"categoryIds",optionsUrl:"category/paging",label:"Toifalar",returnOnlyId:!0,rules:{required:!1},multiple:!0})}),(0,p.jsxs)(y.ZP,{item:!0,xs:12,children:[(0,p.jsx)(A.Z,{sx:{mb:2,fontWeight:600,fontSize:"16px"},children:"Rasmlar"}),(0,p.jsxs)(y.ZP,{container:!0,spacing:2,children:[(0,p.jsxs)(y.ZP,{item:!0,xs:12,md:6,children:[(0,p.jsx)(A.Z,{sx:{mb:1,fontWeight:500},children:"Logo rasm"}),(0,p.jsx)(a.aG,{control:l,setValue:x,name:"logoImage",rules:{required:!1},getImage:function(e){g(e)}}),v&&(0,p.jsxs)(N.Z,{size:"small",color:"error",fullWidth:!0,sx:{mt:1},onClick:function(){g(null),x("logoImage",void 0)},children:[(0,p.jsx)(H.Z,{})," O'chirish"]})]}),(0,p.jsxs)(y.ZP,{item:!0,xs:12,md:6,children:[(0,p.jsx)(A.Z,{sx:{mb:1,fontWeight:500},children:"Banner rasm"}),(0,p.jsx)(a.aG,{control:l,setValue:x,name:"bannerImage",rules:{required:!1},getImage:function(e){b(e)}}),j&&(0,p.jsxs)(N.Z,{size:"small",color:"error",fullWidth:!0,sx:{mt:1},onClick:function(){b(null),x("bannerImage",void 0)},children:[(0,p.jsx)(H.Z,{})," O'chirish"]})]})]})]})]})}),1===pe&&(0,p.jsx)(S.Z,{sx:{width:"100%",minWidth:0},children:(0,p.jsxs)(y.ZP,{container:!0,spacing:2,alignItems:"centert",children:[(0,p.jsx)(y.ZP,{item:!0,xs:12,children:(0,p.jsx)(a.oi,{control:l,name:"addressName",label:s("common.address"),placeholder:"Masalan: Toshkent shahar, Chilonzor tumani, Bunyodkor ko'chasi",rules:{required:!1},onCustomChange:function(e){return K(e)}})}),(0,p.jsxs)(y.ZP,{item:!0,xs:12,children:[(0,p.jsxs)(A.Z,{sx:{mb:1,fontWeight:600},children:["Xarita (Manzilni belgilash)",(0,p.jsx)("span",{style:{color:"#d32f2f",marginLeft:"4px"},children:"*"})]}),(0,p.jsx)(q.Z,{getCoordinate:G,center:m("addressLocation"),height:"400px"}),!X&&(0,p.jsx)("h6",{style:{color:"#d32f2f",marginTop:"8px",fontSize:"0.75rem",margin:"8px 0 0 0"},children:"Manzilni xaritada belgilash majburiy"})]})]})}),2===pe&&(0,p.jsx)(S.Z,{sx:{width:"100%",minWidth:0},children:(0,p.jsxs)(y.ZP,{container:!0,spacing:2,alignItems:"centert",children:[(0,p.jsx)(y.ZP,{item:!0,xs:12,children:(0,p.jsx)(A.Z,{sx:{mb:2,fontWeight:600,fontSize:"16px"},children:"Narxlar"})}),(0,p.jsx)(y.ZP,{item:!0,xs:12,md:4,sx:{display:"flex",flexDirection:"column"},children:(0,p.jsx)(a.oi,{control:l,name:"orderMinimumPrice",type:"number",label:"Minimal buyurtma narxi (so'm)",placeholder:"Masalan: 50000",rules:{required:!1}})}),(0,p.jsx)(y.ZP,{item:!0,xs:12,md:4,sx:{display:"flex",flexDirection:"column"},children:(0,p.jsx)(a.oi,{control:l,name:"averageRating",type:"number",label:"O'rtacha reyting (0-5)",placeholder:"Masalan: 4.5",rules:{required:!1,min:0,max:5}})}),(0,p.jsx)(y.ZP,{item:!0,xs:12,children:(0,p.jsx)(F.Z,{sx:{my:3}})}),(0,p.jsx)(y.ZP,{item:!0,xs:12,children:(0,p.jsx)(A.Z,{sx:{mb:2,fontWeight:600,fontSize:"16px"},children:"Tayyorlash vaqti"})}),(0,p.jsx)(y.ZP,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,p.jsx)(a.oi,{control:l,name:"itemPrepTimeFrom",type:"number",label:"Tayyorlash vaqti (minut) - dan",placeholder:"Masalan: 15",rules:{required:!1}})}),(0,p.jsx)(y.ZP,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,p.jsx)(a.oi,{control:l,name:"itemPrepTimeTo",type:"number",label:"Tayyorlash vaqti (minut) - gacha",placeholder:"Masalan: 30",rules:{required:!1}})}),(0,p.jsx)(y.ZP,{item:!0,xs:12,children:(0,p.jsx)(F.Z,{sx:{my:3}})}),(0,p.jsx)(y.ZP,{item:!0,xs:12,children:(0,p.jsx)(A.Z,{sx:{mb:2,fontWeight:600,fontSize:"16px"},children:"Ish vaqti"})}),(0,p.jsx)(y.ZP,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,p.jsx)(_.Z,{control:l,name:"startTime",errors:h.errors,label:"Ish vaqti (boshlanish)",rules:{required:{value:!0,message:"Ish vaqti boshlanishi majburiy"}}})}),(0,p.jsx)(y.ZP,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:(0,p.jsx)(_.Z,{control:l,name:"endTime",errors:h.errors,label:"Ish vaqti (tugash)",rules:{required:{value:!0,message:"Ish vaqti tugashi majburiy"}}})}),(0,p.jsx)(y.ZP,{item:!0,xs:12,children:(0,p.jsx)(F.Z,{sx:{my:3}})}),(0,p.jsxs)(y.ZP,{item:!0,xs:12,children:[(0,p.jsx)(A.Z,{sx:{mb:2,fontWeight:600,fontSize:"16px"},children:"Hafta kunlari"}),(0,p.jsx)(y.ZP,{container:!0,spacing:2,children:ee.map((function(e){te.includes(e.value);return(0,p.jsx)(y.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,p.jsx)(a.XZ,{control:l,name:"workDay_".concat(e.value),label:e.label,onChange:function(n){if(n){if(!te.includes(e.value)){var r=[].concat((0,I.Z)(te),[e.value]).sort((function(e,n){return e-n}));ie(r),x("workDays",r)}}else{var t=te.filter((function(n){return n!==e.value}));ie(t),x("workDays",t)}}})},e.value)}))})]})]})}),3===pe&&(0,p.jsx)(S.Z,{sx:{width:"100%",minWidth:0},children:(0,p.jsxs)(y.ZP,{container:!0,spacing:2,alignItems:"centert",children:[(0,p.jsxs)(y.ZP,{item:!0,xs:12,children:[(0,p.jsx)(A.Z,{sx:{mb:1,fontWeight:600},children:"Asosiy tavsif"}),(0,p.jsx)(M.Z,{value:m("description")||"",onChange:function(e){return x("description",e)}})]}),(0,p.jsx)(y.ZP,{item:!0,xs:12,children:(0,p.jsx)(F.Z,{sx:{my:3}})}),(0,p.jsx)(y.ZP,{item:!0,xs:12,children:(0,p.jsx)(A.Z,{sx:{mb:2,fontWeight:600,fontSize:"16px"},children:"Ko'p tilli tavsif"})}),(0,p.jsxs)(y.ZP,{item:!0,xs:12,md:4,children:[(0,p.jsx)(A.Z,{sx:{mb:1},children:"O'zbekcha"}),(0,p.jsx)(M.Z,{value:m("descriptionTranslate.uz")||"",onChange:function(e){return x("descriptionTranslate.uz",e)}})]}),(0,p.jsxs)(y.ZP,{item:!0,xs:12,md:4,children:[(0,p.jsx)(A.Z,{sx:{mb:1},children:"Ruscha"}),(0,p.jsx)(M.Z,{value:m("descriptionTranslate.ru")||"",onChange:function(e){return x("descriptionTranslate.ru",e)}})]}),(0,p.jsxs)(y.ZP,{item:!0,xs:12,md:4,children:[(0,p.jsx)(A.Z,{sx:{mb:1},children:"Inglizcha"}),(0,p.jsx)(M.Z,{value:m("descriptionTranslate.en")||"",onChange:function(e){return x("descriptionTranslate.en",e)}})]})]})}),4===pe&&(0,p.jsx)(S.Z,{sx:{width:"100%",minWidth:0},children:(0,p.jsxs)(y.ZP,{container:!0,spacing:2,alignItems:"centert",children:[(0,p.jsxs)(y.ZP,{item:!0,xs:12,children:[(0,p.jsx)(A.Z,{sx:{mb:2,fontWeight:600,fontSize:"16px"},children:"To'lov usullari"}),(0,p.jsxs)(y.ZP,{container:!0,spacing:2,children:[(0,p.jsx)(y.ZP,{item:!0,children:(0,p.jsx)(a.XZ,{control:l,name:"acceptCard",label:"Karta"})}),(0,p.jsx)(y.ZP,{item:!0,children:(0,p.jsx)(a.XZ,{control:l,name:"acceptCash",label:"Naqd"})}),(0,p.jsx)(y.ZP,{item:!0,children:(0,p.jsx)(a.XZ,{control:l,name:"acceptOnlinePayment",label:"Onlayn to'lov"})})]})]}),(0,p.jsx)(y.ZP,{item:!0,xs:12,children:(0,p.jsx)(F.Z,{sx:{my:3}})}),(0,p.jsxs)(y.ZP,{item:!0,xs:12,children:[(0,p.jsx)(A.Z,{sx:{mb:2,fontWeight:600,fontSize:"16px"},children:"Statuslar"}),(0,p.jsxs)(y.ZP,{container:!0,spacing:2,children:[(0,p.jsx)(y.ZP,{item:!0,children:(0,p.jsx)(a.XZ,{control:l,name:"isActive",label:"Faol"})}),(0,p.jsx)(y.ZP,{item:!0,children:(0,p.jsx)(a.XZ,{control:l,name:"isVerified",label:"Tasdiqlangan"})}),(0,p.jsx)(y.ZP,{item:!0,children:(0,p.jsx)(a.XZ,{control:l,name:"isPremium",label:"Premium"})})]})]})]})})]})},X=function(){var e,n,r,t,u=(0,Z.w)(),m=(0,g.T)(),h=(0,d.$G)().t,I=(0,b.cI)(),k=(0,i.s0)(),S=(0,f.useState)(),z=(0,o.Z)(S,2),D=z[0],A=z[1],N=(0,f.useState)(""),F=(0,o.Z)(N,2),M=F[0],_=F[1],q=(0,f.useState)(null),E=(0,o.Z)(q,2),R=E[0],W=E[1],B=(0,f.useState)(null),L=(0,o.Z)(B,2),V=L[0],O=L[1],H=(0,C.uC)("store/activate","put",{onSuccess:function(){T.Am.success(h("general.success"))},onError:function(){T.Am.error("Xatolik yuz berdi")}}).mutate,X=(e=function(e){k("/stores_restaurants/".concat(e._id))},n=u("storeUpdate")?function(e){A(e._id),m((0,j.dl)(!0))}:void 0,r=u("store")?function(e){return function(e){_(e)}(e._id)}:void 0,t=function(e){window.confirm("".concat(e.name," do'konini aktivlashtirmoqchimisiz?"))&&H({_id:e._id,isActive:!e.isActive})},[{field:(0,(0,d.$G)().t)("common.name"),headerName:"Do'kon nomi",flex:1,minWidth:250,renderCell:function(e){var n=e.row,r=(0,l.get)(n,"name",""),t=(null===r||void 0===r?void 0:r.length)>40?"".concat(r.substring(0,40),"..."):r;return(0,p.jsx)(s.Z,{title:r,arrow:!0,children:(0,p.jsx)("span",{style:{fontWeight:500},children:t})})}},{field:"type",headerName:"Turi",width:130,renderCell:function(e){var n=e.row,r=(0,l.get)(n,"type",""),t=(0,l.get)(n,"categoryId",""),i=(0,l.get)(n,"category",""),o="",a="#6B7280";return"shop"===r||"store"===t||"Do'kon"===i?(o="Do'kon",a="#10B981"):"restaurant"===r||"restaurant"===t||"Restoran"===i?(o="Restoran",a="#EF4444"):o=r||i||"-",(0,p.jsx)(c.Z,{label:o,sx:{backgroundColor:a,color:"white",fontWeight:600,fontSize:"0.75rem"},size:"small"})}},{field:"phoneNumber",headerName:"Telefon",width:150,renderCell:function(e){var n=e.row,r=(0,l.get)(n,"phoneNumber","-");return(0,p.jsx)(s.Z,{title:r,arrow:!0,children:(0,p.jsx)("span",{children:r})})}},{field:"status",headerName:"Status",width:130,renderCell:function(e){var n=e.row,r=(0,l.get)(n,"isActive",!1),t=!r&&(0,l.get)(n,"isInReview",!1),i="Nofaol",o="error";return r?(i="Faol",o="success"):t&&(i="Tekshiruvda",o="warning"),(0,p.jsx)(c.Z,{label:i,color:o,size:"small",sx:{fontWeight:600}})}},{field:"actions",headerName:"Amal",width:100,align:"center",headerAlign:"center",sortable:!1,filterable:!1,disableColumnMenu:!0,renderCell:function(i){var o=i.row;return(0,p.jsx)(v,{row:o,onView:e,onEdit:n,onDelete:r,onActivate:t})}}]),G=(0,f.useMemo)((function(){return{isActive:I.watch("isActiveQuery")||void 0,categoryId:I.watch("categoryId")||void 0,orderSort:I.watch("orderSort")||void 0}}),[I.watch("isActiveQuery"),I.watch("categoryId"),I.watch("orderSort")]),Y=(0,p.jsxs)(y.ZP,{className:"lg:w-[80%] w-full flex flex-wrap gap-2 items-center mt-2 ml-2 pb-2",children:[(0,p.jsx)(y.ZP,{item:!0,children:(0,p.jsx)(a.XZ,{control:I.control,label:h("enum.active"),name:"isActiveQuery"})}),(0,p.jsx)(y.ZP,{item:!0,children:(0,p.jsxs)(P.Z,{style:{width:"150px",paddingBlock:"4px",borderRadius:"10px"},size:"small",value:I.watch("orderSort")||"",onChange:function(e){return I.setValue("orderSort",e.target.value)},displayEmpty:!0,children:[I.watch("orderSort")&&(0,p.jsx)(x.Z,{value:"",children:"Tozalash"}),!I.watch("orderSort")&&(0,p.jsx)(x.Z,{value:"",hidden:!0,disabled:!0,children:"Buyurtma soni"}),(0,p.jsx)(x.Z,{value:"mostActive",children:"Eng faol"}),(0,p.jsx)(x.Z,{value:"leastActive",children:"Eng kam"})]})}),(0,p.jsx)(y.ZP,{item:!0,children:(0,p.jsx)(a.he,{optionsUrl:"category/paging",filterName:"categoryId",placeholder:h("common.category"),onChange:function(){}})}),(0,p.jsx)(y.ZP,{item:!0,children:(0,p.jsx)(a.j3,{url:"/store/export",extraParams:G})})]}),Q=function(){A(null),W(null),O(null),I.reset({name:"",phoneNumber:"",password:"",email:"",website:"",addressName:"",addressLocation:null,type:"shop",categoryIds:[],orderMinimumPrice:"",deliveryPrice:"",itemPrepTimeFrom:"",itemPrepTimeTo:"",startTime:"",endTime:"",workDays:[1,2,3,4,5,6,7],description:"",descriptionTranslate:{uz:"",ru:"",en:""},isActive:!0,isVerified:!1,isPremium:!1,averageRating:0,acceptCash:!1,acceptCard:!1,acceptOnlinePayment:!1,isActiveQuery:I.watch("isActiveQuery"),categoryId:I.watch("categoryId"),orderSort:I.watch("orderSort")})};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(a.iA,{columns:X,dataUrl:"store/paging",searchable:!0,headerChildren:Y,onAddButton:u("store")?function(){return m((0,j.dl)(!0))}:void 0,onEditColumn:u("storeUpdate")?function(e){A(e._id),m((0,j.dl)(!0))}:void 0,onRowClick:function(e){k("/stores_restaurants/".concat(e._id))},exQueryParams:G,mapData:function(e){return e||[]}}),M&&(0,p.jsx)(w.Z,{open:M,setOpen:_,url:"store/delete"}),(0,p.jsx)(a._8,{FORM_ID:"store",isEditing:!!D,customTitle:D?"Do'konni tahrirlash":"Do'kon qo'shish",onClose:Q,children:(0,p.jsx)(U,{formStore:I,editingStoreId:D,resetForm:Q,storeProps:{logoImage:R,setLogoImage:W,bannerImage:V,setBannerImage:O}})})]})},G=function(){return(0,p.jsx)(X,{})},Y=r(35527),Q=r(93044),$=r(20890),K=r(39504),J=r(94939),ee=r(76086),ne=(0,W.Z)([(0,p.jsx)("path",{d:"m12 2-5.5 9h11z"},"0"),(0,p.jsx)("circle",{cx:"17.5",cy:"17.5",r:"4.5"},"1"),(0,p.jsx)("path",{d:"M3 13.5h8v8H3z"},"2")],"Category"),re=r(29749),te="stores_restaurants_local",ie=function(){try{var e=localStorage.getItem(te);return e?JSON.parse(e):[]}catch(n){return console.error("Error reading stores from localStorage:",n),[]}},oe=r(20068),ae=function(e){var n,r=e.storeInfoData,t=e.storeId,o=e.onStatusChange,a=((0,re.Z)().state.data,(0,d.$G)().t),s=((0,i.s0)(),(0,C.uC)("store/activate","put",{onSuccess:function(){T.Am.success(a("general.success")),null===o||void 0===o||o()},onError:function(){T.Am.error("Xatolik yuz berdi")}}).mutate,null!==t&&void 0!==t&&t.startsWith("store_")?ie().find((function(e){return e._id===t})):null===r||void 0===r?void 0:r.data),l=null!==t&&void 0!==t&&t.startsWith("store_")?0:(null===s||void 0===s?void 0:s.totalProducts)||0,u=null!==t&&void 0!==t&&t.startsWith("store_")?0:(null===s||void 0===s||null===(n=s.categoryIds)||void 0===n?void 0:n.length)||(null===s||void 0===s?void 0:s.totalCategories)||0;if(!s)return(0,p.jsx)("div",{children:"Yuklanmoqda..."});var m=s.logoId?"".concat("http://localhost:3003/v1","/image/").concat(s.logoId):void 0;return(0,p.jsxs)(Y.Z,{elevation:3,sx:{borderRadius:4,overflow:"hidden"},children:[(0,p.jsxs)(S.Z,{sx:{background:s.isActive?"linear-gradient(135deg, #EB7B00 0%, #EB5B00 100%)":"linear-gradient(135deg, #FFA500 0%, #FF8C00 100%)",pt:6,pb:8,px:4,textAlign:"center",color:"white",position:"relative"},children:[(0,p.jsx)(Q.Z,{src:m,sx:{width:120,height:120,mx:"auto",border:"4px solid white",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.05)"}},children:(0,p.jsx)(R.Z,{sx:{fontSize:60}})}),(0,p.jsx)($.Z,{variant:"h4",sx:{mt:2,fontWeight:"bold"},children:s.name}),(0,p.jsxs)(S.Z,{sx:{mt:2,display:"flex",justifyContent:"center",gap:1},children:[(0,p.jsx)(c.Z,{label:s.isActive?"\u2705 Faol":"\ud83d\udfe5 Nofaol",sx:{backgroundColor:s.isActive?"rgba(255,255,255,0.3)":"rgba(255,255,255,0.2)",color:"white",fontWeight:"bold"}}),(0,p.jsx)(c.Z,{label:"Do'kon"===s.category||"store"===s.categoryId?"Do'kon":"Restoran",sx:{backgroundColor:"rgba(255,255,255,0.3)",color:"white",fontWeight:"bold"}})]})]}),(0,p.jsx)(K.Z,{sx:{backgroundColor:"white",borderRadius:"20px 20px 0 0",px:4,py:3},children:(0,p.jsxs)(S.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,p.jsxs)(S.Z,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"#F7FAFC",borderRadius:2,transition:"transform 0.2s ease","&:hover":{transform:"translateX(8px)"}},children:[(0,p.jsx)(J.Z,{style:{fontSize:20,color:"#EB5B00"}}),(0,p.jsx)($.Z,{variant:"body1",color:"text.primary",children:s.phoneNumber})]}),s.addressName&&(0,p.jsxs)(S.Z,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"#F7FAFC",borderRadius:2,transition:"transform 0.2s ease","&:hover":{transform:"translateX(8px)"}},children:[(0,p.jsx)(B,{style:{fontSize:20,color:"#EB5B00"}}),(0,p.jsx)($.Z,{variant:"body1",color:"text.primary",children:s.addressName})]}),void 0!==s.commissionPercent&&s.commissionPercent>0&&(0,p.jsx)(oe.Z,{title:"Platforma ulushi: ".concat(s.commissionPercent,"% | Do'kon daromadi: 100% - ").concat(s.commissionPercent,"% = ").concat(100-s.commissionPercent,"%"),arrow:!0,children:(0,p.jsxs)(S.Z,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"#F7FAFC",borderRadius:2,cursor:"help"},children:[(0,p.jsx)(L.Z,{style:{fontSize:20,color:"#EB5B00"}}),(0,p.jsxs)($.Z,{variant:"body1",color:"text.primary",children:["Komissiya: ",s.commissionPercent,"%"]})]})}),(0,p.jsxs)(S.Z,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"#F7FAFC",borderRadius:2},children:[(0,p.jsx)(ee.Z,{style:{fontSize:20,color:"#EB5B00"}}),(0,p.jsxs)($.Z,{variant:"body1",color:"text.primary",children:["Tovarlar soni: ",l]})]}),(0,p.jsxs)(S.Z,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"#F7FAFC",borderRadius:2},children:[(0,p.jsx)(ne,{style:{fontSize:20,color:"#EB5B00"}}),(0,p.jsxs)($.Z,{variant:"body1",color:"text.primary",children:["Kategoriyalar soni: ",u]})]})]})})]})},se=r(45987),le=r(30168),de=(0,W.Z)((0,p.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}),"History"),ce=r(40223),ue=r(21836),me=r(97892),xe=r.n(me),he=r(35834),fe=r(55210),pe=r(17939),ve=r(90816),ge=["children","value","index"],je=pe.default.div(t||(t=(0,le.Z)(["\n  margin-bottom: 5px;\n  .MuiInputBase-root {\n    background-color: ",";\n    color: "," !important;\n  }\n  & .MuiSelect-select.Mui-disabled {\n    color: "," !important;\n    -webkit-text-fill-color: "," !important;\n  }\n\n  & svg {\n    path {\n      fill: "," !important;\n    }\n  }\n"])),(function(e){return e.stateColor}),(function(e){return e.luma>60?"#232323":"#ffffff"}),(function(e){return e.luma>60?"#232323":"#ffffff"}),(function(e){return e.luma>60?"#232323":"#ffffff"}),(function(e){return e.luma>60?"#232323":"#ffffff"}));function be(e){var n=e.children,r=e.value,t=e.index,i=(0,se.Z)(e,ge);return(0,p.jsx)("div",(0,k.Z)((0,k.Z)({role:"tabpanel",hidden:r!==t,id:"store-tabpanel-".concat(t),"aria-labelledby":"store-tab-".concat(t)},i),{},{children:r===t&&(0,p.jsx)(S.Z,{sx:{p:3},children:n})}))}var Ze=function(e){var n=e.storeId,r=(e.store,(0,f.useState)(0)),t=(0,o.Z)(r,2),l=t[0],c=t[1],u=(0,f.useState)(),m=(0,o.Z)(u,2),x=m[0],h=m[1],v=(0,f.useState)([]),j=(0,o.Z)(v,2),b=j[0],Z=j[1],P=(0,d.$G)().t,w=(0,he.Z)(),T=(0,i.s0)(),I=(0,g.T)(),A=(0,g.C)((function(e){return e.SocketState.render})),N=(0,C.uC)("store/statistics","post",{onError:function(){}}),F=N.mutate,M=N.data,_=(0,C.uC)("order/state/".concat(null===x||void 0===x?void 0:x.orderId),"put",{onSuccess:function(){h(void 0),I((0,ue.xV)(!0))}}),q=_.mutate,E=_.reset,R=(0,C.h_)("order-state/get-all",{},{onSuccess:function(e){var n=e.data;Z(n||[])}});R.data,R.status,R.refetch;(0,f.useEffect)((function(){1===l&&n&&F((0,k.Z)({storeId:n},null!==w&&void 0!==w&&w.dateFrom&&null!==w&&void 0!==w&&w.dateTo?{dateFrom:new Date(w.dateFrom),dateTo:new Date(w.dateTo)}:{}))}),[l,w.dateFrom,w.dateTo,n]),(0,f.useEffect)((function(){x&&q({stateId:x.stateId,_id:x.orderId,position:1})}),[x]),(0,f.useEffect)((function(){A&&(E(),I((0,fe.zm)(!1)))}),[A]);null===M||void 0===M||M.data;var W=[{field:P("common.number"),renderCell:function(e){return e.row.number},flex:.6},{field:P("common.price"),renderCell:function(e){var n=e.row;return(0,ve.Y)(n.totalPrice)},flex:.6},{field:P("order.receiver"),renderCell:function(e){var n,r,t=e.row,i=null===t||void 0===t||null===(n=t.customer)||void 0===n?void 0:n.firstName,o=(null===i||void 0===i?void 0:i.length)>10?"".concat(i.substring(0,10),"..."):i,a=null===t||void 0===t||null===(r=t.customer)||void 0===r?void 0:r.lastName,l=(null===a||void 0===a?void 0:a.length)>10?"".concat(a.substring(0,10),"..."):a,d="".concat(o).concat(a?" ".concat(l):""),c="".concat(i).concat(a?" ".concat(a):"");return(0,p.jsx)(s.Z,{title:c,arrow:!0,children:(0,p.jsx)("span",{children:d})})}},{field:P("common.phoneNumber"),renderCell:function(e){var n;return null===(n=e.row.customer)||void 0===n?void 0:n.phoneNumber}},{field:P("common.receiverPhoneNumber"),renderCell:function(e){var n;return null===(n=e.row.receiverCustomer)||void 0===n?void 0:n.phoneNumber}},{field:P("common.paymentType"),renderCell:function(e){var n=e.row;return P("enum.".concat(n.paymentType))},flex:.6},{field:P("common.time"),renderCell:function(e){var n=e.row;return xe()(n.createdAt).format("DD.MM.YYYY HH:mm")}},{field:P("common.status"),renderCell:function(e){var n,r,t,i,o,s=e.row,l=null===s||void 0===s||null===(n=s.state)||void 0===n||null===(r=n.color)||void 0===r?void 0:r.substring(1),d=parseInt(l,16),c=.2126*(d>>16&255)+.7152*(d>>8&255)+.0722*(255&d);return(0,p.jsx)(je,{stateColor:null===s||void 0===s||null===(t=s.state)||void 0===t?void 0:t.color,luma:c,onClick:function(e){return e.stopPropagation()},children:(0,p.jsx)(a.Ph,{onChange:function(e){return h({stateId:e,orderId:s._id})},customValue:s.stateId,options:b,disabled:"completed"===(null===(i=s.state)||void 0===i?void 0:i.state)||"cancelled"===(null===(o=s.state)||void 0===o?void 0:o.state)})})}}],B=(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)(y.ZP,{className:"lg:w-[60%] w-full gap-y-2 sm:gap-y-0 grid sm:grid-cols-2 items-center gap-x-2",children:[(0,p.jsx)(y.ZP,{item:!0,className:"",children:(0,p.jsx)(ce.Z,{optionsUrl:"order-state/get-all",filterName:"stateId",placeholder:P("common.status"),dataProp:"data"})}),(0,p.jsx)(y.ZP,{item:!0,className:"",children:(0,p.jsx)(a.$m,{})})]})});return(0,p.jsxs)(Y.Z,{elevation:3,sx:{borderRadius:4,overflow:"hidden",flex:1},children:[(0,p.jsx)(S.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,p.jsx)(z.Z,{value:l,onChange:function(e,n){c(n)},"aria-label":"store tabs",sx:{"& .MuiTab-root":{textTransform:"none",fontWeight:600},"& .Mui-selected":{color:"#EB5B00"}},children:(0,p.jsx)(D.Z,{icon:(0,p.jsx)(de,{}),iconPosition:"start",label:"Buyurtmalar"})})}),(0,p.jsx)(be,{value:l,index:0,children:(0,p.jsx)(a.iA,{columns:W,dataUrl:"/order/paging",headerChildren:B,searchable:!0,onRowClick:function(e){return T("/order/".concat(e._id))},exQueryParams:(0,k.Z)((0,k.Z)({storeId:n},null!==w&&void 0!==w&&w.stateId&&""!==w.stateId.trim()?{stateId:w.stateId}:{}),null!==w&&void 0!==w&&w.dateFrom&&null!==w&&void 0!==w&&w.dateTo?{dateFrom:new Date(w.dateFrom),dateTo:new Date(w.dateTo)}:{})})})]})},ye=function(){var e=(0,i.UO)().id,n=(0,C.h_)("store/get-by-id/".concat(e),{},{enabled:!!e,suspense:!1}),r=n.data,t=(n.status,null===r||void 0===r?void 0:r.data);return(0,p.jsx)(p.Fragment,{children:e&&t&&(0,p.jsxs)(y.ZP,{className:"grid lg:flex gap-4 p-2",children:[(0,p.jsx)(ae,{storeInfoData:r,storeId:e,onStatusChange:function(){}}),(0,p.jsx)(Ze,{storeId:e,store:t})]})})},Pe=function(){return(0,p.jsxs)(i.Z5,{children:[(0,p.jsx)(i.AW,{path:":id",element:(0,p.jsx)(ye,{})}),(0,p.jsx)(i.AW,{path:"*",element:(0,p.jsx)(G,{})})]})}},90816:function(e,n,r){r.d(n,{Y:function(){return t}});var t=function(e){return e||0===e?(Math.round(100*(e+Number.EPSILON))/100).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}).replaceAll(","," "):""}},52898:function(e,n,r){var t=r(64836);n.Z=void 0;var i=t(r(45649)),o=r(80184);n.Z=(0,i.default)((0,o.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert")},46174:function(e,n,r){var t=r(76189),i=r(80184);n.Z=(0,t.Z)((0,i.jsx)("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4"}),"AttachMoney")},94939:function(e,n,r){var t=r(76189),i=r(80184);n.Z=(0,t.Z)((0,i.jsx)("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02z"}),"Phone")},31694:function(e,n,r){var t=r(76189),i=r(80184);n.Z=(0,t.Z)((0,i.jsx)("path",{d:"M20 4H4v2h16zm1 10v-2l-1-5H4l-1 5v2h1v6h10v-6h4v6h2v-6zm-9 4H6v-4h6z"}),"Store")}}]);
//# sourceMappingURL=591.c0b04e3b.chunk.js.map