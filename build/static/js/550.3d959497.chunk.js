"use strict";(self.webpackChunkbestune_admin=self.webpackChunkbestune_admin||[]).push([[550],{59550:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var r=n(29439),a=n(35980),d=n(13400),i=n(59460),o=n(36978),s=n(86657),c=(n(763),n(39230)),u=n(29001),l=n(79405),g=n(80184),m=n(72791),f=n(1413),y=n(61889),j=n(62750),x=function(e){var t=e.formStore,n=e.resetForm,r=e.editingCategoryId,d=e.setRender,i=(0,c.$G)().t,o=t.control,s=t.handleSubmit,u=t.reset,l=t.setValue,x=(0,j.uC)(r?"category/update":"category/create",r?"put":"post"),h=x.mutate,p=x.status,v=(0,j.h_)("category/get-by-id/".concat(r),{},{enabled:!!r,suspense:!1}),I=v.data,C=v.status;return(0,m.useEffect)((function(){"success"===p&&(n(),null===d||void 0===d||d(!0))}),[p]),(0,m.useEffect)((function(){"success"===C&&u({name:I.data.name,imageId:I.data.image})}),[C,I]),(0,g.jsx)("div",{className:"custom-drawer",children:(0,g.jsx)("form",{id:"category",onSubmit:s((function(e){var t;h((0,f.Z)((0,f.Z)({},e),{},{imageId:null===(t=e.imageId)||void 0===t?void 0:t._id,_id:r}))})),children:(0,g.jsxs)(y.ZP,{container:!0,spacing:2,children:[(0,g.jsx)(y.ZP,{item:!0,md:12,children:(0,g.jsx)(a.oi,{name:"name",control:o,label:i("common.name")})}),(0,g.jsx)(y.ZP,{item:!0,md:12,children:(0,g.jsx)(a.aG,{control:o,setValue:l,name:"imageId",rules:{required:!1},accept:".png, .jpg, .jpeg"})})]})})})},h=n(61134),p=n(84544),v=function(){var e=(0,m.useState)(!1),t=(0,r.Z)(e,2),n=t[0],f=t[1],y=(0,m.useState)(),j=(0,r.Z)(y,2),v=j[0],I=j[1],C=(0,m.useState)(),Z=(0,r.Z)(C,2),b=Z[0],_=Z[1],k=function(e){var t=e.setCategoryId,n=e.setEditingCategoryId,r=(0,l.T)(),a=(0,c.$G)().t,m=(0,u.w)();return[{key:"sort",width:"5%"},{title:"\u2116",dataIndex:"id",key:"id",width:"5%",render:function(e,t,n){return(0,g.jsx)(g.Fragment,{children:n+1})}},{title:a("common.categoryName"),dataIndex:"name"},{title:"",render:function(e,a){return(0,g.jsxs)("div",{className:"d-flex gap-2 justify-content-end",children:[m("categoryCreate")&&(0,g.jsx)(d.Z,{onClick:function(){null===n||void 0===n||n(null===a||void 0===a?void 0:a._id),r((0,o.dl)(!0))},children:(0,g.jsx)(s.Z,{})}),m("categoryDelete")&&(0,g.jsx)(d.Z,{onClick:function(){return null===t||void 0===t?void 0:t(null===a||void 0===a?void 0:a._id)},children:(0,g.jsx)(i.pJ,{})})]})}}]}({setEditingCategoryId:I,setCategoryId:_}),w=(0,l.T)(),S=(0,c.$G)().t,E=(0,h.cI)(),F=((0,u.w)(),function(){I(void 0),E.reset({name:"",imageId:""})});return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(a.KK,{columns:k,dataUrl:"/category/paging",dragUrl:"/category/positions",dragKey:"categoryIds",render:n,setRender:f,onAddButton:function(){return w((0,o.dl)(!0))}}),(0,g.jsx)(p.Z,{open:b,setOpen:_,url:"category/delete"}),(0,g.jsx)(a._8,{FORM_ID:"category",isEditing:!!v,customTitle:S("general.addCategory"),onClose:F,children:(0,g.jsx)(x,{formStore:E,setRender:f,resetForm:F,editingCategoryId:v})})]})}}}]);
//# sourceMappingURL=550.3d959497.chunk.js.map