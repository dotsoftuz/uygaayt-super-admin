"use strict";(self.webpackChunkbestune_admin=self.webpackChunkbestune_admin||[]).push([[448],{2448:(e,o,r)=>{r.r(o),r.d(o,{default:()=>$});var t=r(19303),a=r(65043),l=r(24858),n=r(72473),s=r(89379),d=r(58168),i=r(98587),c=r(58387),u=r(98610),p=r(34535),m=r(6431),b=r(30279),h=r(63336);const x=a.createContext({});var f=r(54516),g=r(4162),A=r(92532),y=r(72372);function v(e){return(0,y.Ay)("MuiAccordion",e)}const R=(0,A.A)("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]);var C=r(70579);const w=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],j=(0,p.Ay)(h.A,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:r}=e;return[{["& .".concat(R.region)]:o.region},o.root,!r.square&&o.rounded,!r.disableGutters&&o.gutters]}})(e=>{let{theme:o}=e;const r={duration:o.transitions.duration.shortest};return{position:"relative",transition:o.transitions.create(["margin"],r),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(o.vars||o).palette.divider,transition:o.transitions.create(["opacity","background-color"],r)},"&:first-of-type":{"&::before":{display:"none"}},["&.".concat(R.expanded)]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},["&.".concat(R.disabled)]:{backgroundColor:(o.vars||o).palette.action.disabledBackground}}},e=>{let{theme:o}=e;return{variants:[{props:e=>!e.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(o.vars||o).shape.borderRadius,borderTopRightRadius:(o.vars||o).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(o.vars||o).shape.borderRadius,borderBottomRightRadius:(o.vars||o).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:e=>!e.disableGutters,style:{["&.".concat(R.expanded)]:{margin:"16px 0"}}}]}}),S=a.forwardRef(function(e,o){const r=(0,m.b)({props:e,name:"MuiAccordion"}),{children:t,className:l,defaultExpanded:n=!1,disabled:s=!1,disableGutters:p=!1,expanded:h,onChange:A,square:y=!1,slots:R={},slotProps:S={},TransitionComponent:M,TransitionProps:N}=r,k=(0,i.A)(r,w),[D,G]=(0,f.A)({controlled:h,default:n,name:"Accordion",state:"expanded"}),P=a.useCallback(e=>{G(!D),A&&A(e,!D)},[D,A,G]),[U,...F]=a.Children.toArray(t),I=a.useMemo(()=>({expanded:D,disabled:s,disableGutters:p,toggle:P}),[D,s,p,P]),V=(0,d.A)({},r,{square:y,disabled:s,disableGutters:p,expanded:D}),E=(e=>{const{classes:o,square:r,expanded:t,disabled:a,disableGutters:l}=e,n={root:["root",!r&&"rounded",t&&"expanded",a&&"disabled",!l&&"gutters"],region:["region"]};return(0,u.A)(n,v,o)})(V),B=(0,d.A)({transition:M},R),T=(0,d.A)({transition:N},S),[_,W]=(0,g.A)("transition",{elementType:b.A,externalForwardedProps:{slots:B,slotProps:T},ownerState:V});return(0,C.jsxs)(j,(0,d.A)({className:(0,c.A)(E.root,l),ref:o,ownerState:V,square:y},k,{children:[(0,C.jsx)(x.Provider,{value:I,children:U}),(0,C.jsx)(_,(0,d.A)({in:D,timeout:"auto"},W,{children:(0,C.jsx)("div",{"aria-labelledby":U.props.id,id:U.props["aria-controls"],role:"region",className:E.region,children:F})}))]}))});var M=r(75429);function N(e){return(0,y.Ay)("MuiAccordionSummary",e)}const k=(0,A.A)("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),D=["children","className","expandIcon","focusVisibleClassName","onClick"],G=(0,p.Ay)(M.A,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,o)=>o.root})(e=>{let{theme:o}=e;const r={duration:o.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:o.spacing(0,2),transition:o.transitions.create(["min-height","background-color"],r),["&.".concat(k.focusVisible)]:{backgroundColor:(o.vars||o).palette.action.focus},["&.".concat(k.disabled)]:{opacity:(o.vars||o).palette.action.disabledOpacity},["&:hover:not(.".concat(k.disabled,")")]:{cursor:"pointer"},variants:[{props:e=>!e.disableGutters,style:{["&.".concat(k.expanded)]:{minHeight:64}}}]}}),P=(0,p.Ay)("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,o)=>o.content})(e=>{let{theme:o}=e;return{display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:e=>!e.disableGutters,style:{transition:o.transitions.create(["margin"],{duration:o.transitions.duration.shortest}),["&.".concat(k.expanded)]:{margin:"20px 0"}}}]}}),U=(0,p.Ay)("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,o)=>o.expandIconWrapper})(e=>{let{theme:o}=e;return{display:"flex",color:(o.vars||o).palette.action.active,transform:"rotate(0deg)",transition:o.transitions.create("transform",{duration:o.transitions.duration.shortest}),["&.".concat(k.expanded)]:{transform:"rotate(180deg)"}}}),F=a.forwardRef(function(e,o){const r=(0,m.b)({props:e,name:"MuiAccordionSummary"}),{children:t,className:l,expandIcon:n,focusVisibleClassName:s,onClick:p}=r,b=(0,i.A)(r,D),{disabled:h=!1,disableGutters:f,expanded:g,toggle:A}=a.useContext(x),y=(0,d.A)({},r,{expanded:g,disabled:h,disableGutters:f}),v=(e=>{const{classes:o,expanded:r,disabled:t,disableGutters:a}=e,l={root:["root",r&&"expanded",t&&"disabled",!a&&"gutters"],focusVisible:["focusVisible"],content:["content",r&&"expanded",!a&&"contentGutters"],expandIconWrapper:["expandIconWrapper",r&&"expanded"]};return(0,u.A)(l,N,o)})(y);return(0,C.jsxs)(G,(0,d.A)({focusRipple:!1,disableRipple:!0,disabled:h,component:"div","aria-expanded":g,className:(0,c.A)(v.root,l),focusVisibleClassName:(0,c.A)(v.focusVisible,s),onClick:e=>{A&&A(e),p&&p(e)},ref:o,ownerState:y},b,{children:[(0,C.jsx)(P,{className:v.content,ownerState:y,children:t}),n&&(0,C.jsx)(U,{className:v.expandIconWrapper,ownerState:y,children:n})]}))});function I(e){return(0,y.Ay)("MuiAccordionDetails",e)}(0,A.A)("MuiAccordionDetails",["root"]);const V=["className"],E=(0,p.Ay)("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,o)=>o.root})(e=>{let{theme:o}=e;return{padding:o.spacing(1,2,2)}}),B=a.forwardRef(function(e,o){const r=(0,m.b)({props:e,name:"MuiAccordionDetails"}),{className:t}=r,a=(0,i.A)(r,V),l=r,n=(e=>{const{classes:o}=e;return(0,u.A)({root:["root"]},I,o)})(l);return(0,C.jsx)(E,(0,d.A)({className:(0,c.A)(n.root,t),ref:o,ownerState:l},a))});var T,_=r(21337),W=r(68903),q=r(61698),O=r(57528);const L=r(66253).default.div(T||(T=(0,O.A)(["\n  .role-checkbox {\n    padding: 0;\n    background-color: transparent !important;\n  }\n  .MuiAccordion-root,\n  .MuiAccordionSummary-content {\n    margin: 0 !important;\n  }\n  .MuiAccordionSummary-root {\n    padding: 0;\n    border: none !important;\n    margin-bottom: 5px;\n  }\n  .MuiPaper-root {\n    box-shadow: none;\n    &::before {\n      display: none;\n    }\n  }\n  .MuiAccordionDetails-root {\n    padding: 0;\n  }\n  .MuiCheckbox-root {\n    padding: 6px;\n  }\n"]))),H=[{role:"order",label:"order",childRoles:[{role:"orderCreate",label:"create"},{role:"orderUpdate",label:"update"},{role:"orderCancel",label:"delete"}]},{role:"customer",label:"customer",childRoles:[{role:"customerCreate",label:"create"},{role:"customerUpdate",label:"update"},{role:"customerDelete",label:"delete"}]},{role:"product",label:"product",childRoles:[{role:"productCreate",label:"create"},{role:"productUpdate",label:"update"},{role:"productDelete",label:"delete"}]},{role:"category",label:"category",childRoles:[{role:"categoryCreate",label:"create"},{role:"categoryUpdate",label:"update"},{role:"categoryDelete",label:"delete"}]},{role:"employee",label:"employee",childRoles:[{role:"employeeCreate",label:"create"},{role:"employeeUpdate",label:"update"},{role:"employeeDelete",label:"delete"}]},{role:"role",label:"role",childRoles:[{role:"roleCreate",label:"create"},{role:"roleUpdate",label:"update"},{role:"roleDelete",label:"delete"}]},{role:"courier",label:"courier",childRoles:[{role:"courierCreate",label:"create"},{role:"courierUpdate",label:"update"},{role:"courierDelete",label:"delete"}]},{role:"banner",label:"banner",childRoles:[{role:"bannerCreate",label:"create"},{role:"bannerUpdate",label:"update"},{role:"bannerDelete",label:"delete"}]},{role:"news",label:"news",childRoles:[{role:"newsCreate",label:"create"},{role:"newsUpdate",label:"update"},{role:"newsDelete",label:"delete"}]},{role:"rateComment",label:"rateComment",childRoles:[{role:"rateCommentCreate",label:"create"},{role:"rateCommentUpdate",label:"update"},{role:"rateCommentDelete",label:"delete"}]},{role:"store",label:"store",childRoles:[{role:"storeUpdate",label:"update"}]},{role:"integration",label:"integration",childRoles:[{role:"integrationUpdate",label:"update"}]},{role:"stateMap",label:"stateMap"},{role:"transaction",label:"transaction",childRoles:[{role:"transactionCreate",label:"create"}]},{role:"settings",label:"settings",childRoles:[{role:"settingsUpdate",label:"update"}]},{role:"report",label:"report"},{role:"discount",label:"discount",childRoles:[{role:"discountUpdate",label:"update"}]}];var Q=r(74117);const X=e=>{var o;let{control:r,checkbox:a,setValue:l}=e;const{t:n}=(0,Q.Bd)();return(0,C.jsxs)(S,{children:[(0,C.jsx)(F,{expandIcon:(0,C.jsx)(_.A,{}),children:(0,C.jsx)(t.Sc,{label:n("role.".concat(a.label)),name:a.role,control:r,onChange:(e,o)=>((e,o)=>{const r=H.find(e=>e.role===o);l(null===r||void 0===r?void 0:r.role,e),null!==r&&void 0!==r&&r.childRoles&&r.childRoles.map(o=>l(o.role,e))})(e,o.target.name),isFullWidth:!0,className:"role-checkbox"})}),(0,C.jsx)(B,{children:(0,C.jsx)(W.Ay,{container:!0,display:"flex",justifyContent:"flex-end",spacing:1,className:"mb-2",children:null===a||void 0===a||null===(o=a.childRoles)||void 0===o?void 0:o.map((e,o)=>(0,C.jsx)(W.Ay,{item:!0,md:11,children:(0,C.jsx)(t.Sc,{control:r,name:e.role,label:n("role.".concat(e.label)),isFullWidth:!0,className:"role-checkbox"})},e.role))})})]})},z=e=>{let{formStore:o,editingRoleId:r,resetForm:l}=e;const{control:n,handleSubmit:d,setValue:i,reset:c}=o,{t:u}=(0,Q.Bd)(),{mutate:p,status:m}=(0,q.L2)(r?"role/update":"role/create",r?"put":"post",{}),{data:b,status:h}=(0,q.gf)("role/get-by-id/".concat(r),{},{enabled:!!r,suspense:!1});(0,a.useEffect)(()=>{"success"===m&&l()},[m]),(0,a.useEffect)(()=>{"success"===h&&c((0,s.A)({},b.data))},[h,b]);return(0,C.jsx)(L,{className:"custom-drawer",children:(0,C.jsx)("form",{id:"role",onSubmit:d(e=>{p(e)}),children:(0,C.jsxs)(W.Ay,{container:!0,spacing:3,children:[(0,C.jsx)(W.Ay,{item:!0,md:12,children:(0,C.jsx)(t.ks,{control:n,name:"name",label:u("common.name")})}),(0,C.jsxs)(W.Ay,{item:!0,md:12,children:[(0,C.jsx)(t.Sc,{control:n,label:u("common.all"),onChange:e=>(e=>{H&&Array.isArray(H)&&H.forEach(o=>{o&&"undefined"!==typeof o.role?(i(o.role,e),Array.isArray(o.childRoles)&&o.childRoles.forEach(o=>{o&&"undefined"!==typeof o.role?i(o.role,e):console.warn("Noto'g'ri child role:",o)})):console.warn("Noto'g'ri role:",o)})})(e),name:"_select_all"}),(0,C.jsx)("br",{}),H.map(e=>(0,C.jsx)(X,{control:n,checkbox:e,setValue:i}))]})]})})})};var J=r(13094),K=r(477),Y=r(83501);const Z=()=>{const e=(0,l.mN)(),o=(()=>{const{t:e}=(0,Q.Bd)();return[{field:e("common.name"),renderCell(e){let{row:o}=e;return o.name}}]})(),[r,s]=(0,a.useState)(),d=(0,n.j)(),{t:i}=(0,Q.Bd)(),[c,u]=(0,a.useState)(),p=(0,Y.L)(),m=()=>{s(null),e.reset({name:"",_select_all:!1}),H.forEach(o=>{var r;e.setValue(o.role,!1),null===o||void 0===o||null===(r=o.childRoles)||void 0===r||r.forEach(o=>e.setValue(o.role,!1))})},b=(0,a.useMemo)(()=>({}),[]);return(0,C.jsxs)("div",{children:[(0,C.jsx)(t.XI,{columns:o,dataUrl:"role/paging",onAddButton:p("roleCreate")?()=>d((0,J.GF)(!0)):void 0,onEditColumn:p("roleUpdate")?e=>{s(e._id),d((0,J.GF)(!0))}:void 0,onDeleteColumn:p("roleDelete")?e=>u(e._id):void 0,searchable:!0,exQueryParams:b}),(0,C.jsx)(K.A,{open:c,setOpen:u,url:"role/delete"}),(0,C.jsx)(t.wA,{onClose:m,customTitle:i("general.addRole"),FORM_ID:"role",isEditing:!!r,children:(0,C.jsx)(z,{formStore:e,editingRoleId:r,resetForm:m})})]})},$=Z},4162:(e,o,r)=>{r.d(o,{A:()=>p});var t=r(58168),a=r(98587),l=r(63462),n=r(95006),s=r(46004),d=r(9523);const i=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],c=["component","slots","slotProps"],u=["component"];function p(e,o){const{className:r,elementType:p,ownerState:m,externalForwardedProps:b,getSlotOwnerState:h,internalForwardedProps:x}=o,f=(0,a.A)(o,i),{component:g,slots:A={[e]:void 0},slotProps:y={[e]:void 0}}=b,v=(0,a.A)(b,c),R=A[e]||p,C=(0,s.A)(y[e],m),w=(0,d.A)((0,t.A)({className:r},f,{externalForwardedProps:"root"===e?v:void 0,externalSlotProps:C})),{props:{component:j},internalRef:S}=w,M=(0,a.A)(w.props,u),N=(0,l.A)(S,null==C?void 0:C.ref,o.ref),k=h?h(M):{},D=(0,t.A)({},m,k),G="root"===e?j||g:j,P=(0,n.A)(R,(0,t.A)({},"root"===e&&!g&&!A[e]&&x,"root"!==e&&!A[e]&&x,M,G&&{as:G},{ref:N}),D);return Object.keys(k).forEach(e=>{delete P[e]}),[R,P]}}}]);
//# sourceMappingURL=448.df3bf4f8.chunk.js.map