"use strict";(self.webpackChunkbestune_admin=self.webpackChunkbestune_admin||[]).push([[62],{54062:(e,t,o)=>{o.r(t),o.d(t,{default:()=>w});var d=o(68903),r=o(85865),l=o(19303),s=o(61698),a=o(19504),i=o(65043),n=o(74117),c=o(72824),u=o(83016),x=o(59540),m=o(88645),h=o(70579);const v=e=>{var t;let{data:o,setSortField:d,sortField:r,setSortOrder:l,sortOrder:s}=e;const{t:a}=(0,n.Bd)(),i=e=>{r===e?l("1"===s?"-1":"1"):(d(e),l("-1"))},c=e=>{let{field:t}=e;return r!==t?(0,h.jsx)(u.A,{className:"w-4 h-4"}):"1"===s?(0,h.jsx)(x.A,{className:"w-4 h-4"}):(0,h.jsx)(m.A,{className:"w-4 h-4"})};return(0,h.jsx)("div",{className:"h-[400px] overflow-y-auto bg-gray-100",children:(0,h.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,h.jsx)("div",{className:"bg-white rounded-b-lg shadow-md overflow-hidden",children:(0,h.jsx)("div",{className:"overflow-x-auto",children:(0,h.jsxs)("table",{className:"w-full",children:[(0,h.jsx)("thead",{className:"bg-gray-50",children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:a("common.firstName")}),(0,h.jsx)("th",{children:a("common.phoneNumber")}),null!==o&&void 0!==o&&null!==(t=o[0])&&void 0!==t&&t.customer?(0,h.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900 cursor-pointer hover:bg-gray-100",onClick:()=>i("total_price"),children:(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[a("common.price"),(0,h.jsx)(c,{field:"total_price"})]})}):(0,h.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900 cursor-pointer hover:bg-gray-100",children:(0,h.jsx)("div",{className:"flex items-center gap-2",children:a("common.price")})}),(0,h.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900 cursor-pointer hover:bg-gray-100",onClick:()=>i("total_order"),children:(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[a("sidebar.order"),(0,h.jsx)(c,{field:"total_order"})]})})]})}),(0,h.jsx)("tbody",{className:"divide-y divide-gray-200",children:null===o||void 0===o?void 0:o.map(e=>{var t,o,d,r,l,s;return(0,h.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:null!==e&&void 0!==e&&e.customer?(null===e||void 0===e||null===(t=e.customer)||void 0===t?void 0:t.firstName)||(null===(o=e.customer)||void 0===o?void 0:o.lastName):(null===e||void 0===e||null===(d=e.courier)||void 0===d?void 0:d.firstName)||(null===(r=e.courier)||void 0===r?void 0:r.lastName)}),(0,h.jsx)("td",{children:null!==e&&void 0!==e&&e.customer?null===e||void 0===e||null===(l=e.customer)||void 0===l?void 0:l.phoneNumber:null===e||void 0===e||null===(s=e.courier)||void 0===s?void 0:s.phoneNumber}),(0,h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:null===e||void 0===e?void 0:e.total_price}),(0,h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:null===e||void 0===e?void 0:e.total_amount})]},null===e||void 0===e?void 0:e._id)})})]})})})})})};var p=o(95720),g=o(53536),j=o(17304),f=o(6058);j.t1.register(j.pr,j.Bs,j.m_,j.s$);const b=e=>{var t,o;let{data:d,all_orders:r}=e;const{t:l}=(0,n.Bd)(),s={labels:[l("dashboard.completed_orders"),l("dashboard.cancelled_orders"),l("dashboard.total_orders")],datasets:[{label:"Buyurtmalar",data:[null===d||void 0===d||null===(t=d[0])||void 0===t?void 0:t.total_amount,null===d||void 0===d||null===(o=d[1])||void 0===o?void 0:o.total_amount,r],backgroundColor:["rgba(0, 128, 0, 0.6)","rgba(255, 0, 0, 0.6)","rgba(0, 0, 255, 0.6)"],borderWidth:1}]};return(0,h.jsx)("div",{style:{width:"500px",height:"500px",margin:"0 auto"},children:(0,h.jsx)(f.O5,{data:s})})};var y=o(34535),_=o(12110);const F=(0,y.Ay)(_.A)({height:"120px",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"14px 30px 18px 30px",borderRadius:"24px",flexDirection:"column",boxShadow:"0px 0px 9px -5px rgba(108, 175, 226, 0.96)",transition:"all .3s"}),N=(0,y.Ay)(r.A)({fontSize:"16px",lineHeight:"24px",fontWeight:"600",padding:"0 24px",textAlign:"center"});var A=o(90116);const S=()=>{var e,t,o,u,x,m,j,f,y,_,S,w;const{t:z}=(0,n.Bd)(),W=(0,a.A)(),[T,O]=(localStorage.getItem("i18nextLng"),(0,i.useState)("total_price")),[L,k]=(0,i.useState)("1"),[B,C]=(0,i.useState)("total_order"),[q,E]=(0,i.useState)("1"),{state:{data:D}}=(0,p.A)(),{mutate:I,data:M}=(0,s.L2)("report/order","post",{},!0),{mutate:H,data:P}=(0,s.L2)("balance/total","post",{},!0),{mutate:R,data:U}=(0,s.L2)("report/customer/count","post",{},!0),{mutate:$,data:G}=(0,s.L2)("report/courier/top","post",{},!0),{mutate:J,data:K}=(0,s.L2)("report/customer/top","post",{},!0),Q=[I,H,R,$,J];(0,i.useEffect)(()=>{Q.forEach(e=>e({dateFrom:W.dateFrom,dateTo:W.dateTo}))},[W.dateFrom,W.dateTo]),(0,i.useEffect)(()=>{J({dateFrom:W.dateFrom,dateTo:W.dateTo,sortBy:T,sortOrder:L})},[T,L]),(0,i.useEffect)(()=>{$({dateFrom:W.dateFrom,dateTo:W.dateTo,sortBy:B,sortOrder:q})},[B,q]);const{mutate:V,data:X}=(0,s.L2)("report/customer/saved","post",{onSuccess(e){}});return(0,i.useEffect)(()=>{V({dateFrom:W.dateFrom,dateTo:W.dateTo})},[W.dateFrom,W.dateTo]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(d.Ay,{className:"bg-white p-2 flex rounded-lg",children:(0,h.jsx)(d.Ay,{className:"",children:(0,h.jsx)(l.wT,{})})}),(0,h.jsxs)(d.Ay,{className:"grid mt-2 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-4 gap-2",children:[(0,h.jsxs)(F,{children:[(0,h.jsx)(N,{children:z("dashboard.total_orders")}),(0,h.jsx)(r.A,{style:{fontSize:"24px",fontWeight:600,textAlign:"center",color:"#FF6701"},children:null===M||void 0===M||null===(e=M.data)||void 0===e?void 0:e.total_amount})]}),null===M||void 0===M||null===(t=M.data)||void 0===t?void 0:t.states.map(e=>{var t;return(0,h.jsxs)(F,{children:[(0,h.jsx)(N,{children:"completed"===(null===(t=e.state)||void 0===t?void 0:t.state)?z("dashboard.completed_orders"):z("dashboard.cancelled_orders")}),(0,h.jsx)(r.A,{style:{fontSize:"24px",fontWeight:600,textAlign:"center",color:"#FF6701"},children:e.total_amount})]})}),(0,h.jsxs)(F,{children:[(0,h.jsx)(N,{children:z("dashboard.total_income")}),(0,h.jsxs)(r.A,{style:{fontSize:"18px",fontWeight:600,textAlign:"center",color:"#FF6701"},children:[(0,c.j)(null===P||void 0===P||null===(o=P.data)||void 0===o?void 0:o.income)," ",(0,g.get)(D,"currency","uzs")]})]}),(0,h.jsxs)(F,{children:[(0,h.jsx)(N,{children:z("dashboard.registered_customer")}),(0,h.jsx)(r.A,{style:{fontSize:"24px",fontWeight:600,textAlign:"center",color:"#FF6701"},children:null===U||void 0===U||null===(u=U.data)||void 0===u?void 0:u.registered})]}),(0,h.jsxs)(F,{children:[(0,h.jsx)(N,{children:z("dashboard.active_customer")}),(0,h.jsx)(r.A,{style:{fontSize:"24px",fontWeight:600,textAlign:"center",color:"#FF6701"},children:null===U||void 0===U||null===(x=U.data)||void 0===x?void 0:x.active})]}),(0,h.jsxs)(F,{children:[(0,h.jsx)(N,{children:z("dashboard.sold_product")}),(0,h.jsx)(r.A,{style:{fontSize:"24px",fontWeight:600,textAlign:"center",color:"#FF6701"},children:null===M||void 0===M||null===(m=M.data)||void 0===m?void 0:m.productCount})]}),(0,h.jsxs)(F,{children:[(0,h.jsx)(N,{children:z("dashboard.customers_saved_time")}),(0,h.jsx)(r.A,{style:{fontSize:"20px",fontWeight:600,textAlign:"center",color:"#FF6701"},children:(0,A.d)(null===X||void 0===X||null===(j=X.data)||void 0===j?void 0:j.saved_time)})]}),(0,h.jsxs)(F,{children:[(0,h.jsx)(N,{children:z("dashboard.customers_saved_amount")}),(0,h.jsxs)(r.A,{style:{fontSize:"18px",fontWeight:600,textAlign:"center",color:"#FF6701"},children:[(0,c.j)(null===X||void 0===X||null===(f=X.data)||void 0===f?void 0:f.saved_amount)," ",(0,g.get)(D,"currency","uzs")]})]}),(0,h.jsxs)(F,{children:[(0,h.jsx)(N,{children:z("general.all_discounts_summ")}),(0,h.jsxs)(r.A,{style:{fontSize:"18px",fontWeight:600,textAlign:"center",color:"#FF6701"},children:[(0,c.j)(null===M||void 0===M||null===(y=M.data)||void 0===y?void 0:y.total_discount)," ",(0,g.get)(D,"currency","uzs")]})]}),(0,h.jsxs)(F,{children:[(0,h.jsx)(N,{children:z("general.all_promocode_summ")}),(0,h.jsxs)(r.A,{style:{fontSize:"18px",fontWeight:600,textAlign:"center",color:"#FF6701"},children:[(0,c.j)(null===M||void 0===M||null===(_=M.data)||void 0===_?void 0:_.total_promocode)," ",(0,g.get)(D,"currency","uzs")]})]})]}),(0,h.jsx)(d.Ay,{className:"p-2 bg-white mt-2 rounded-lg",children:(0,h.jsx)(b,{data:null===M||void 0===M||null===(S=M.data)||void 0===S?void 0:S.states,all_orders:null===M||void 0===M||null===(w=M.data)||void 0===w?void 0:w.total_amount})}),(0,h.jsxs)(d.Ay,{className:"grid mt-2 md:grid-cols-2 gap-4",children:[(0,h.jsxs)("div",{className:"bg-white rounded-lg",children:[(0,h.jsx)("p",{className:"font-semibold text-lg p-3",children:z("dashboard.top_users")}),(0,h.jsx)(v,{data:null===K||void 0===K?void 0:K.data,setSortField:O,sortField:T,setSortOrder:k,sortOrder:L})]}),(0,h.jsxs)("div",{className:"bg-white rounded-lg",children:[(0,h.jsx)("p",{className:"font-semibold text-lg p-3",children:z("dashboard.top_courier")}),(0,h.jsx)(v,{data:null===G||void 0===G?void 0:G.data,setSortField:C,sortField:B,setSortOrder:E,sortOrder:q})]})]})]})},w=()=>(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(S,{})})},72824:(e,t,o)=>{o.d(t,{j:()=>d});const d=e=>{if(e||0===e){return(Math.round(100*(e+Number.EPSILON))/100).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}).replaceAll(","," ")}return""}},90116:(e,t,o)=>{o.d(t,{d:()=>d});const d=e=>{if(!e||e<=0)return"0 daqiqa";const t=Math.round(e),o=Math.floor(t/60),d=t%60;return o>0?"".concat(o," soat ").concat(d," daqiqa"):"".concat(d," daqiqa")}}}]);
//# sourceMappingURL=62.d86fcb46.chunk.js.map